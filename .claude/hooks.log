{"ts":"2025-11-05T02:20:07.414Z","event":"UserPromptSubmit","phase":"","message":"UserPromptSubmitäº‹ä»¶æ­£åœ¨æ‰§è¡Œ","description":"ç”¨æˆ·æäº¤æç¤ºå‰è§¦å‘ï¼Œå¯è¿›è¡Œæç¤ºæ ¡éªŒæˆ–å¢å¼ºã€‚","doc_url":"https://docs.claude.com/zh-CN/docs/claude-code/hooks#userpromptsubmit","payload":{"session_id":"c7c21516-7e1e-49b2-8ae5-4e1bb98e9692","transcript_path":"C:\\Users\\WTCL\\.claude\\projects\\i--claude-code-proxy\\c7c21516-7e1e-49b2-8ae5-4e1bb98e9692.jsonl","cwd":"i:\\claude-code-proxy","permission_mode":"acceptEdits","hook_event_name":"UserPromptSubmit","prompt":"<ide_opened_file>The user opened the file i:\\claude-code-proxy\\.claude\\hooks.log in the IDE. This may or may not be related to the current task.</ide_opened_file>\nä¼˜åŒ–ä¸€ä¸‹ï¼Œçœ‹é‚£äº›æ¡æ•°æ®ä¸­æœ‰jsonl"}}
{"ts":"2025-11-05T02:20:46.495Z","event":"PreToolUse","phase":"","message":"PreToolUseäº‹ä»¶æ­£åœ¨æ‰§è¡Œ","description":"å·¥å…·æ‰§è¡Œå‰è§¦å‘ï¼Œå¯åŸºäºå‚æ•°é˜»æ­¢æˆ–è°ƒæ•´è°ƒç”¨ã€‚","doc_url":"https://docs.claude.com/zh-CN/docs/claude-code/hooks#pretooluse","payload":{"session_id":"c7c21516-7e1e-49b2-8ae5-4e1bb98e9692","transcript_path":"C:\\Users\\WTCL\\.claude\\projects\\i--claude-code-proxy\\c7c21516-7e1e-49b2-8ae5-4e1bb98e9692.jsonl","cwd":"i:\\claude-code-proxy","permission_mode":"acceptEdits","hook_event_name":"PreToolUse","tool_name":"Edit","tool_input":{"file_path":"i:\\claude-code-proxy\\analyze\\hooks.html","old_string":"<p class=\"upload-hint\">æ”¯æŒ .log .txt æ ¼å¼çš„æ—¥å¿—æ–‡ä»¶ï¼Œæ¯è¡Œä¸€ä¸ª JSON å¯¹è±¡ï¼Œæœ€å¤§50MB</p>","new_string":"<p class=\"upload-hint\">æ”¯æŒ .log .txt .jsonl æ ¼å¼çš„æ—¥å¿—æ–‡ä»¶ï¼Œæ¯è¡Œä¸€ä¸ª JSON å¯¹è±¡ï¼Œæœ€å¤§50MB</p>"}}}
{"ts":"2025-11-05T02:20:48.214Z","event":"PostToolUse","phase":"","message":"PostToolUseäº‹ä»¶æ­£åœ¨æ‰§è¡Œ","description":"å·¥å…·æˆåŠŸæ‰§è¡Œåè§¦å‘ï¼Œå¸¸ç”¨äºæ ¼å¼åŒ–ã€æ ¡éªŒæˆ–è®°å½•ç»“æœã€‚","doc_url":"https://docs.claude.com/zh-CN/docs/claude-code/hooks#posttooluse","payload":{"session_id":"c7c21516-7e1e-49b2-8ae5-4e1bb98e9692","transcript_path":"C:\\Users\\WTCL\\.claude\\projects\\i--claude-code-proxy\\c7c21516-7e1e-49b2-8ae5-4e1bb98e9692.jsonl","cwd":"i:\\claude-code-proxy","permission_mode":"acceptEdits","hook_event_name":"PostToolUse","tool_name":"Edit","tool_input":{"file_path":"i:\\claude-code-proxy\\analyze\\hooks.html","old_string":"<p class=\"upload-hint\">æ”¯æŒ .log .txt æ ¼å¼çš„æ—¥å¿—æ–‡ä»¶ï¼Œæ¯è¡Œä¸€ä¸ª JSON å¯¹è±¡ï¼Œæœ€å¤§50MB</p>","new_string":"<p class=\"upload-hint\">æ”¯æŒ .log .txt .jsonl æ ¼å¼çš„æ—¥å¿—æ–‡ä»¶ï¼Œæ¯è¡Œä¸€ä¸ª JSON å¯¹è±¡ï¼Œæœ€å¤§50MB</p>"},"tool_response":{"filePath":"i:\\claude-code-proxy\\analyze\\hooks.html","oldString":"<p class=\"upload-hint\">æ”¯æŒ .log .txt æ ¼å¼çš„æ—¥å¿—æ–‡ä»¶ï¼Œæ¯è¡Œä¸€ä¸ª JSON å¯¹è±¡ï¼Œæœ€å¤§50MB</p>","newString":"<p class=\"upload-hint\">æ”¯æŒ .log .txt .jsonl æ ¼å¼çš„æ—¥å¿—æ–‡ä»¶ï¼Œæ¯è¡Œä¸€ä¸ª JSON å¯¹è±¡ï¼Œæœ€å¤§50MB</p>","originalFile":"<!DOCTYPE html>\n<html lang=\"zh-CN\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Hooks æ—¥å¿—åˆ†æ</title>\n    <style>\n        * {\n            margin: 0;\n            padding: 0;\n            box-sizing: border-box;\n        }\n\n        body {\n            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n            min-height: 100vh;\n            padding: 20px;\n        }\n\n        .container {\n            max-width: 1400px;\n            margin: 0 auto;\n        }\n\n        .header {\n            text-align: center;\n            color: white;\n            margin-bottom: 30px;\n        }\n\n        .header h1 {\n            font-size: 2.5rem;\n            margin-bottom: 10px;\n            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);\n        }\n\n        .header p {\n            font-size: 1.1rem;\n            opacity: 0.9;\n        }\n\n        /* æ–‡ä»¶ä¸Šä¼ ç»„ä»¶æ ·å¼ */\n        .upload-section {\n            margin-bottom: 30px;\n        }\n\n        .upload-card {\n            background: white;\n            border-radius: 15px;\n            padding: 25px;\n            box-shadow: 0 10px 30px rgba(0,0,0,0.1);\n            border: 2px dashed #cbd5e0;\n            transition: all 0.3s ease;\n        }\n\n        .upload-card:hover {\n            border-color: #667eea;\n            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.2);\n        }\n\n        .upload-header {\n            font-size: 1.2rem;\n            font-weight: bold;\n            color: #4a5568;\n            margin-bottom: 20px;\n            text-align: center;\n        }\n\n        .upload-area {\n            border: 2px dashed #e2e8f0;\n            border-radius: 10px;\n            padding: 40px 20px;\n            text-align: center;\n            transition: all 0.3s ease;\n            cursor: pointer;\n        }\n\n        .upload-area:hover {\n            border-color: #667eea;\n            background: #f7fafc;\n        }\n\n        .upload-area.dragover {\n            border-color: #667eea;\n            background: #edf2f7;\n            transform: scale(1.02);\n        }\n\n        .upload-icon {\n            font-size: 3rem;\n            margin-bottom: 15px;\n            opacity: 0.7;\n        }\n\n        .upload-text {\n            font-size: 1.1rem;\n            color: #4a5568;\n            margin-bottom: 10px;\n            font-weight: 500;\n        }\n\n        .upload-hint {\n            font-size: 0.9rem;\n            color: #718096;\n            margin-bottom: 20px;\n        }\n\n        .upload-btn {\n            background: #667eea;\n            color: white;\n            border: none;\n            padding: 12px 24px;\n            border-radius: 8px;\n            font-size: 1rem;\n            font-weight: 500;\n            cursor: pointer;\n            transition: all 0.3s ease;\n        }\n\n        .upload-btn:hover {\n            background: #5a67d8;\n            transform: translateY(-2px);\n            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);\n        }\n\n        .file-info {\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            background: #f7fafc;\n            padding: 15px 20px;\n            border-radius: 8px;\n            margin-top: 15px;\n        }\n\n        .file-name {\n            font-weight: 500;\n            color: #4a5568;\n            flex: 1;\n            overflow: hidden;\n            text-overflow: ellipsis;\n            white-space: nowrap;\n        }\n\n        .clear-btn {\n            background: #fc8181;\n            color: white;\n            border: none;\n            width: 30px;\n            height: 30px;\n            border-radius: 50%;\n            cursor: pointer;\n            font-size: 1rem;\n            transition: all 0.3s ease;\n        }\n\n        .clear-btn:hover {\n            background: #f56565;\n            transform: scale(1.1);\n        }\n\n        /* æ¶ˆæ¯æç¤ºæ ·å¼ */\n        .upload-message {\n            margin-top: 15px;\n            padding: 12px 16px;\n            border-radius: 8px;\n            font-size: 0.9rem;\n            animation: slideIn 0.3s ease;\n        }\n\n        .upload-success {\n            background: #d4edda;\n            color: #155724;\n            border: 1px solid #c3e6cb;\n        }\n\n        .upload-error {\n            background: #f8d7da;\n            color: #721c24;\n            border: 1px solid #f5c6cb;\n        }\n\n        @keyframes slideIn {\n            from {\n                opacity: 0;\n                transform: translateY(-10px);\n            }\n            to {\n                opacity: 1;\n                transform: translateY(0);\n            }\n        }\n\n        #file-input {\n            display: none;\n        }\n\n        .stats-grid {\n            display: grid;\n            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\n            gap: 20px;\n            margin-bottom: 30px;\n        }\n\n        .stat-card {\n            background: white;\n            border-radius: 15px;\n            padding: 25px;\n            box-shadow: 0 10px 30px rgba(0,0,0,0.2);\n            text-align: center;\n            transition: transform 0.3s ease, box-shadow 0.3s ease;\n        }\n\n        .stat-card:hover {\n            transform: translateY(-5px);\n            box-shadow: 0 15px 40px rgba(0,0,0,0.3);\n        }\n\n        .stat-number {\n            font-size: 3rem;\n            font-weight: bold;\n            margin-bottom: 10px;\n        }\n\n        .stat-label {\n            font-size: 1.1rem;\n            color: #666;\n            margin-bottom: 5px;\n        }\n\n        .stat-description {\n            font-size: 0.9rem;\n            color: #999;\n        }\n\n        .filter-section {\n            background: white;\n            border-radius: 15px;\n            padding: 20px;\n            box-shadow: 0 10px 30px rgba(0,0,0,0.2);\n            margin-bottom: 30px;\n        }\n\n        .filter-controls {\n            display: flex;\n            gap: 15px;\n            flex-wrap: wrap;\n            align-items: center;\n        }\n\n        .filter-group {\n            display: flex;\n            align-items: center;\n            gap: 10px;\n        }\n\n        .filter-label {\n            font-weight: bold;\n            color: #333;\n        }\n\n        .filter-select, .search-input {\n            padding: 8px 12px;\n            border: 2px solid #ddd;\n            border-radius: 5px;\n            font-size: 0.9rem;\n            transition: border-color 0.3s ease;\n        }\n\n        .filter-select:focus, .search-input:focus {\n            outline: none;\n            border-color: #667eea;\n        }\n\n        .search-input {\n            min-width: 200px;\n        }\n\n        .hooks-container {\n            display: grid;\n            gap: 30px;\n        }\n\n        .hook-item {\n            background: white;\n            border-radius: 15px;\n            padding: 25px;\n            box-shadow: 0 10px 30px rgba(0,0,0,0.2);\n        }\n\n        .hook-header {\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            margin-bottom: 20px;\n            padding-bottom: 15px;\n            border-bottom: 2px solid #667eea;\n        }\n\n        .hook-event {\n            font-size: 1.5rem;\n            font-weight: bold;\n            color: #667eea;\n        }\n\n        .hook-meta {\n            display: flex;\n            gap: 20px;\n            align-items: center;\n        }\n\n        .hook-timestamp {\n            font-size: 0.9rem;\n            color: #666;\n            background: #f0f4ff;\n            padding: 5px 12px;\n            border-radius: 20px;\n        }\n\n        .hook-message {\n            background: #f8f9fa;\n            border-left: 4px solid #667eea;\n            padding: 15px;\n            margin-bottom: 15px;\n            border-radius: 5px;\n        }\n\n        .hook-description {\n            color: #666;\n            font-style: italic;\n            margin-bottom: 15px;\n        }\n\n        .hook-details {\n            display: flex;\n            flex-direction: column;\n            gap: 20px;\n        }\n\n        .part-card {\n            background: #f8f9fa;\n            border-radius: 10px;\n            overflow: hidden;\n        }\n\n        .part-header {\n            background: #667eea;\n            color: white;\n            padding: 12px 15px;\n            font-weight: bold;\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            cursor: pointer;\n            transition: background 0.3s ease;\n        }\n\n        .part-header:hover {\n            background: #5a67d8;\n        }\n\n        .part-content {\n            padding: 15px;\n            font-family: 'Courier New', monospace;\n            font-size: 0.9rem;\n            background: #1a1a1a;\n            color: #ffffff;\n            overflow-y: auto;\n            white-space: pre-wrap;\n            line-height: 1.6;\n            min-height: 100px;\n            border-radius: 8px;\n            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.3);\n        }\n\n        .part-content.hidden {\n            display: none;\n        }\n\n        .toggle-icon {\n            transition: transform 0.3s ease;\n        }\n\n        .toggle-icon.rotated {\n            transform: rotate(180deg);\n        }\n\n        /* è‡ªå®šä¹‰æ»šåŠ¨æ¡æ ·å¼ */\n        .part-content::-webkit-scrollbar {\n            width: 8px;\n        }\n\n        .part-content::-webkit-scrollbar-track {\n            background: #2a2a2a;\n            border-radius: 4px;\n        }\n\n        .part-content::-webkit-scrollbar-thumb {\n            background: #4a4a4a;\n            border-radius: 4px;\n        }\n\n        .part-content::-webkit-scrollbar-thumb:hover {\n            background: #5a5a5a;\n        }\n\n        .event-badge {\n            display: inline-block;\n            padding: 4px 12px;\n            border-radius: 20px;\n            font-size: 0.8rem;\n            font-weight: bold;\n            margin-right: 10px;\n        }\n\n        .event-userprompt { background: #FF6B6B; color: white; }\n        .event-pretool { background: #4ECDC4; color: white; }\n        .event-posttool { background: #45B7D1; color: white; }\n        .event-notification { background: #9C27B0; color: white; }\n        .event-stop { background: #F44336; color: white; }\n        .event-subagent-stop { background: #FF9800; color: white; }\n        .event-pre-compact { background: #FFC107; color: white; }\n        .event-session-start { background: #4CAF50; color: white; }\n        .event-session-end { background: #607D8B; color: white; }\n        .event-default { background: #78909C; color: white; }\n\n        .no-data {\n            text-align: center;\n            padding: 60px 20px;\n            color: white;\n            font-size: 1.2rem;\n        }\n\n        .error-message {\n            background: #fff5f5;\n            border: 2px solid #fc8181;\n            color: #c53030;\n            padding: 20px;\n            border-radius: 10px;\n            text-align: center;\n            font-size: 1.1rem;\n            margin: 20px 0;\n        }\n\n        .json-key { color: #9C27B0; }\n        .json-string { color: #4CAF50; }\n        .json-number { color: #FF9800; }\n        .json-boolean { color: #F44336; }\n        .json-null { color: #9E9E9E; }\n        .json-url { color: #2196F3; text-decoration: underline; cursor: pointer; }\n\n        @media (max-width: 768px) {\n            .header h1 {\n                font-size: 2rem;\n            }\n\n            .stats-grid {\n                grid-template-columns: repeat(2, 1fr);\n            }\n\n            .filter-controls {\n                flex-direction: column;\n                align-items: stretch;\n            }\n\n            .search-input {\n                min-width: auto;\n            }\n        }\n    </style>\n</head>\n<body>\n    <div class=\"container\">\n        <div class=\"header\">\n            <h1>Hooks æ—¥å¿—åˆ†æ</h1>\n            <p>ä¸Šä¼ å¹¶åˆ†æ Claude Hooks äº‹ä»¶æ—¥å¿—</p>\n        </div>\n\n        <!-- æ–‡ä»¶ä¸Šä¼ ç»„ä»¶ -->\n        <div class=\"upload-section\">\n            <div class=\"upload-card\">\n                <div class=\"upload-header\">\n                    <span>ğŸ“ é€‰æ‹© Hooks æ—¥å¿—æ–‡ä»¶</span>\n                </div>\n                <div class=\"upload-area\" id=\"upload-area\">\n                    <div class=\"upload-content\">\n                        <div class=\"upload-icon\">ğŸ“„</div>\n                        <p class=\"upload-text\">ç‚¹å‡»é€‰æ‹©æ–‡ä»¶æˆ–æ‹–æ‹½æ–‡ä»¶åˆ°æ­¤å¤„</p>\n                        <p class=\"upload-hint\">æ”¯æŒ .log .txt æ ¼å¼çš„æ—¥å¿—æ–‡ä»¶ï¼Œæ¯è¡Œä¸€ä¸ª JSON å¯¹è±¡ï¼Œæœ€å¤§50MB</p>\n                        <input type=\"file\" id=\"file-input\" accept=\".log,.txt\" style=\"display: none;\">\n                        <button class=\"upload-btn\" onclick=\"document.getElementById('file-input').click()\">é€‰æ‹©æ–‡ä»¶</button>\n                    </div>\n                </div>\n                <div class=\"file-info\" id=\"file-info\" style=\"display: none;\">\n                    <span class=\"file-name\" id=\"file-name\"></span>\n                    <button class=\"clear-btn\" onclick=\"clearFile()\">âœ•</button>\n                </div>\n            </div>\n        </div>\n\n        <div id=\"stats-section\" style=\"display: none;\">\n            <div class=\"stats-grid\">\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"total-hooks\">0</div>\n                    <div class=\"stat-label\">æ€»äº‹ä»¶æ•°</div>\n                    <div class=\"stat-description\">æ‰€æœ‰ Hooks äº‹ä»¶</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"user-prompts\">0</div>\n                    <div class=\"stat-label\">ç”¨æˆ·æç¤ºäº‹ä»¶</div>\n                    <div class=\"stat-description\">UserPromptSubmit</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"pre-tools\">0</div>\n                    <div class=\"stat-label\">å·¥å…·æ‰§è¡Œå‰äº‹ä»¶</div>\n                    <div class=\"stat-description\">PreToolUse</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"post-tools\">0</div>\n                    <div class=\"stat-label\">å·¥å…·æ‰§è¡Œåäº‹ä»¶</div>\n                    <div class=\"stat-description\">PostToolUse</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"notifications\">0</div>\n                    <div class=\"stat-label\">é€šçŸ¥äº‹ä»¶</div>\n                    <div class=\"stat-description\">Notification</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"stops\">0</div>\n                    <div class=\"stat-label\">åœæ­¢äº‹ä»¶</div>\n                    <div class=\"stat-description\">Stop</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"subagent-stops\">0</div>\n                    <div class=\"stat-label\">å­ä»£ç†åœæ­¢äº‹ä»¶</div>\n                    <div class=\"stat-description\">SubagentStop</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"pre-compacts\">0</div>\n                    <div class=\"stat-label\">å‹ç¼©å‰äº‹ä»¶</div>\n                    <div class=\"stat-description\">PreCompact</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"session-starts\">0</div>\n                    <div class=\"stat-label\">ä¼šè¯å¼€å§‹äº‹ä»¶</div>\n                    <div class=\"stat-description\">SessionStart</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"session-ends\">0</div>\n                    <div class=\"stat-label\">ä¼šè¯ç»“æŸäº‹ä»¶</div>\n                    <div class=\"stat-description\">SessionEnd</div>\n                </div>\n            </div>\n\n            <div class=\"filter-section\">\n                <div class=\"filter-controls\">\n                    <div class=\"filter-group\">\n                        <label class=\"filter-label\">äº‹ä»¶ç±»å‹ï¼š</label>\n                        <select class=\"filter-select\" id=\"event-filter\">\n                            <option value=\"\">å…¨éƒ¨</option>\n                            <option value=\"UserPromptSubmit\">UserPromptSubmit</option>\n                            <option value=\"PreToolUse\">PreToolUse</option>\n                            <option value=\"PostToolUse\">PostToolUse</option>\n                            <option value=\"Notification\">Notification</option>\n                            <option value=\"Stop\">Stop</option>\n                            <option value=\"SubagentStop\">SubagentStop</option>\n                            <option value=\"PreCompact\">PreCompact</option>\n                            <option value=\"SessionStart\">SessionStart</option>\n                            <option value=\"SessionEnd\">SessionEnd</option>\n                        </select>\n                    </div>\n                    <div class=\"filter-group\">\n                        <label class=\"filter-label\">æœç´¢ï¼š</label>\n                        <input type=\"text\" class=\"search-input\" id=\"search-input\" placeholder=\"æœç´¢äº‹ä»¶å†…å®¹...\">\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <div id=\"hooks-container\" class=\"hooks-container\"></div>\n\n\n\n        <div id=\"error-message\" class=\"error-message\" style=\"display: none;\"></div>\n    </div>\n\n    <script>\n        let hooksData = [];\n        let filteredData = [];\n\n        // æ–‡ä»¶ä¸Šä¼ ç›¸å…³å‡½æ•°\n        function setupFileUpload() {\n            const uploadArea = document.getElementById('upload-area');\n            const fileInput = document.getElementById('file-input');\n\n            // ç‚¹å‡»ä¸Šä¼ åŒºåŸŸè§¦å‘æ–‡ä»¶é€‰æ‹©ï¼ˆä½†ä¸åŒ…æ‹¬æŒ‰é’®ï¼‰\n            uploadArea.addEventListener('click', function(event) {\n                // å¦‚æœç‚¹å‡»çš„æ˜¯æŒ‰é’®ï¼Œä¸å¤„ç†\n                if (event.target.tagName === 'BUTTON' || event.target.closest('button')) {\n                    return;\n                }\n                fileInput.click();\n            });\n\n            // æ–‡ä»¶é€‰æ‹©äº‹ä»¶\n            fileInput.addEventListener('change', handleFileSelect);\n\n            // æ‹–æ‹½äº‹ä»¶\n            uploadArea.addEventListener('dragover', handleDragOver);\n            uploadArea.addEventListener('dragleave', handleDragLeave);\n            uploadArea.addEventListener('drop', handleDrop);\n        }\n\n\n        function handleDragOver(e) {\n            e.preventDefault();\n            e.currentTarget.classList.add('dragover');\n        }\n\n        function handleDragLeave(e) {\n            e.preventDefault();\n            e.currentTarget.classList.remove('dragover');\n        }\n\n        function handleDrop(e) {\n            e.preventDefault();\n            e.currentTarget.classList.remove('dragover');\n            handleFiles(e.dataTransfer.files);\n        }\n\n        function handleFileSelect(event) {\n            const files = event.target.files;\n            handleFiles(files);\n        }\n\n        function handleFiles(files) {\n            if (files.length === 0) return;\n\n            const file = files[0];\n\n            // æ£€æŸ¥æ–‡ä»¶ç±»å‹\n            const validTypes = ['.log', '.txt'];\n            const fileExtension = file.name.substring(file.name.lastIndexOf('.')).toLowerCase();\n\n            if (!validTypes.includes(fileExtension)) {\n                showErrorMessage('è¯·é€‰æ‹© .log æˆ– .txt æ ¼å¼çš„æ—¥å¿—æ–‡ä»¶');\n                return;\n            }\n\n            // æ£€æŸ¥æ–‡ä»¶å¤§å° (é™åˆ¶ä¸º50MB)\n            if (file.size > 50 * 1024 * 1024) {\n                showErrorMessage('æ–‡ä»¶å¤§å°ä¸èƒ½è¶…è¿‡50MB');\n                return;\n            }\n\n            // æ˜¾ç¤ºæ–‡ä»¶ä¿¡æ¯\n            showFileInfo(file);\n\n            // è¯»å–æ–‡ä»¶å†…å®¹\n            const reader = new FileReader();\n            reader.onload = function(e) {\n                try {\n                    const content = e.target.result;\n                    console.log('æ–‡ä»¶è¯»å–æˆåŠŸï¼Œå†…å®¹é•¿åº¦:', content.length);\n                    console.log('æ–‡ä»¶å†…å®¹å‰100å­—ç¬¦:', content.substring(0, 100));\n\n                    if (!content || content.trim().length === 0) {\n                        showErrorMessage('æ–‡ä»¶å†…å®¹ä¸ºç©º');\n                        return;\n                    }\n\n                    parseHooksData(content);\n                    showSuccessMessage(`æˆåŠŸåŠ è½½æ–‡ä»¶: ${file.name}`);\n                } catch (error) {\n                    console.error('æ–‡ä»¶è§£æå¼‚å¸¸:', error);\n                    showErrorMessage('æ–‡ä»¶è§£æå¤±è´¥ï¼š' + error.message);\n                }\n            };\n            reader.onerror = function(error) {\n                console.error('æ–‡ä»¶è¯»å–å¤±è´¥:', error);\n                showErrorMessage('æ–‡ä»¶è¯»å–å¤±è´¥');\n            };\n            reader.readAsText(file);\n        }\n\n        function showFileInfo(file) {\n            const fileInfo = document.getElementById('file-info');\n            const fileName = document.getElementById('file-name');\n            const uploadArea = document.getElementById('upload-area');\n\n            fileName.textContent = file.name;\n            fileInfo.style.display = 'flex';\n            uploadArea.style.display = 'none';\n        }\n\n        function clearFile() {\n            const fileInfo = document.getElementById('file-info');\n            const uploadArea = document.getElementById('upload-area');\n            const fileInput = document.getElementById('file-input');\n\n            fileInfo.style.display = 'none';\n            uploadArea.style.display = 'block';\n\n            // æ¸…ç©ºæ–‡ä»¶è¾“å…¥æ¡†çš„å€¼\n            fileInput.value = '';\n\n            // æ¸…ç©ºæ•°æ®\n            hooksData = [];\n            filteredData = [];\n\n            // æ¸…ç©ºæ˜¾ç¤ºåŒºåŸŸ\n            document.getElementById('hooks-container').innerHTML = '';\n            document.getElementById('no-data').style.display = 'block';\n            document.getElementById('stats-section').style.display = 'none';\n\n            // æ˜¾ç¤ºæç¤º\n            showSuccessMessage('å·²æ¸…ç©ºæ–‡ä»¶ï¼Œè¯·é‡æ–°é€‰æ‹©æ—¥å¿—æ–‡ä»¶');\n        }\n\n        function showSuccessMessage(message) {\n            showMessage(message, 'success');\n        }\n\n        function showErrorMessage(message) {\n            showMessage(message, 'error');\n        }\n\n        function showMessage(message, type) {\n            // ç§»é™¤ä¹‹å‰çš„æ¶ˆæ¯\n            const existingMessages = document.querySelectorAll('.upload-message');\n            existingMessages.forEach(msg => msg.remove());\n\n            const messageClass = type === 'success' ? 'upload-success' : 'upload-error';\n            const messageDiv = document.createElement('div');\n            messageDiv.className = `upload-message ${messageClass}`;\n            messageDiv.textContent = message;\n\n            document.querySelector('.upload-card').appendChild(messageDiv);\n\n            // 3ç§’åè‡ªåŠ¨æ¶ˆå¤±\n            setTimeout(() => {\n                messageDiv.style.opacity = '0';\n                setTimeout(() => {\n                    if (messageDiv.parentNode) {\n                        messageDiv.parentNode.removeChild(messageDiv);\n                    }\n                }, 300);\n            }, 3000);\n        }\n\n        // è§£æ hooks æ•°æ®\n        function parseHooksData(content) {\n            console.log('å¼€å§‹è§£æ hooks æ•°æ®ï¼Œå†…å®¹é•¿åº¦:', content.length);\n\n            hooksData = [];\n            const lines = content.split('\\n').filter(line => line.trim());\n            console.log('åˆ†å‰²åçš„è¡Œæ•°:', lines.length);\n\n            for (let i = 0; i < lines.length; i++) {\n                const line = lines[i];\n                try {\n                    const hookData = JSON.parse(line);\n                    hooksData.push(hookData);\n                    console.log(`æˆåŠŸè§£æç¬¬ ${i + 1} è¡Œï¼Œäº‹ä»¶ç±»å‹:`, hookData.event);\n                } catch (error) {\n                    console.error(`è§£æç¬¬ ${i + 1} è¡Œå¤±è´¥:`, error.message);\n                    console.error('é—®é¢˜è¡Œçš„å†…å®¹:', line.substring(0, 100) + (line.length > 100 ? '...' : ''));\n                }\n            }\n\n            console.log('è§£æå®Œæˆï¼Œæ€»å…±è§£æåˆ°', hooksData.length, 'ä¸ªæœ‰æ•ˆäº‹ä»¶');\n\n            if (hooksData.length === 0) {\n                showErrorMessage('æœªæ‰¾åˆ°æœ‰æ•ˆçš„ hooks æ•°æ®ã€‚è¯·ç¡®ä¿æ–‡ä»¶æ ¼å¼æ­£ç¡®ï¼Œæ¯è¡Œåº”è¯¥æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„JSONå¯¹è±¡ã€‚');\n                console.error('è§£æå¤±è´¥ï¼Œæ²¡æœ‰æ‰¾åˆ°æœ‰æ•ˆçš„hooksæ•°æ®');\n                return;\n            }\n\n            filteredData = [...hooksData];\n            console.log('å‡†å¤‡æ˜¾ç¤ºæ•°æ®ï¼Œè¿‡æ»¤åçš„äº‹ä»¶æ•°é‡:', filteredData.length);\n            displayData();\n        }\n\n        // æ˜¾ç¤ºæ•°æ®\n        function displayData() {\n            document.getElementById('no-data').style.display = 'none';\n            document.getElementById('error-message').style.display = 'none';\n            document.getElementById('stats-section').style.display = 'block';\n\n            updateStatistics();\n            renderHooks();\n        }\n\n        // æ›´æ–°ç»Ÿè®¡ä¿¡æ¯\n        function updateStatistics() {\n            const stats = {\n                total: filteredData.length,\n                userPrompts: filteredData.filter(h => h.event === 'UserPromptSubmit').length,\n                preTools: filteredData.filter(h => h.event === 'PreToolUse').length,\n                postTools: filteredData.filter(h => h.event === 'PostToolUse').length,\n                notifications: filteredData.filter(h => h.event === 'Notification').length,\n                stops: filteredData.filter(h => h.event === 'Stop').length,\n                subagentStops: filteredData.filter(h => h.event === 'SubagentStop').length,\n                preCompacts: filteredData.filter(h => h.event === 'PreCompact').length,\n                sessionStarts: filteredData.filter(h => h.event === 'SessionStart').length,\n                sessionEnds: filteredData.filter(h => h.event === 'SessionEnd').length\n            };\n\n            document.getElementById('total-hooks').textContent = stats.total;\n            document.getElementById('user-prompts').textContent = stats.userPrompts;\n            document.getElementById('pre-tools').textContent = stats.preTools;\n            document.getElementById('post-tools').textContent = stats.postTools;\n            document.getElementById('notifications').textContent = stats.notifications;\n            document.getElementById('stops').textContent = stats.stops;\n            document.getElementById('subagent-stops').textContent = stats.subagentStops;\n            document.getElementById('pre-compacts').textContent = stats.preCompacts;\n            document.getElementById('session-starts').textContent = stats.sessionStarts;\n            document.getElementById('session-ends').textContent = stats.sessionEnds;\n        }\n\n        // æ¸²æŸ“ hooks\n        function renderHooks() {\n            const container = document.getElementById('hooks-container');\n            container.innerHTML = '';\n\n            filteredData.forEach((hook, index) => {\n                const hookElement = createHookElement(hook, index);\n                container.appendChild(hookElement);\n            });\n\n            // æ·»åŠ åŠ¨ç”»\n            const elements = container.querySelectorAll('.hook-item');\n            elements.forEach((el, i) => {\n                el.style.opacity = '0';\n                el.style.transform = 'translateY(20px)';\n                setTimeout(() => {\n                    el.style.transition = 'opacity 0.3s ease, transform 0.3s ease';\n                    el.style.opacity = '1';\n                    el.style.transform = 'translateY(0)';\n                }, i * 50);\n            });\n        }\n\n        // åˆ›å»º hook å…ƒç´ \n        function createHookElement(hook, index) {\n            const div = document.createElement('div');\n            div.className = 'hook-item';\n\n            const eventClass = getEventClass(hook.event);\n            const formattedTime = formatTimestamp(hook.ts);\n            const eventDescription = getEventDescription(hook.event, hook.phase);\n\n            div.innerHTML = `\n                <div class=\"hook-header\">\n                    <div class=\"hook-event\">\n                        <span class=\"event-badge ${eventClass}\">${hook.event}</span>\n                    </div>\n                    <div class=\"hook-meta\">\n                        <div class=\"hook-timestamp\">${formattedTime}</div>\n                    </div>\n                </div>\n                <div class=\"hook-message\">${hook.message}</div>\n                <div class=\"hook-description\">${hook.description || eventDescription}</div>\n                <div class=\"hook-details\">\n                    <div class=\"part-card\">\n                        <div class=\"part-header\" onclick=\"toggleDetail('payload-${index}')\">\n                            <span>Payload</span>\n                            <span class=\"toggle-icon\" id=\"icon-payload-${index}\">â–¼</span>\n                        </div>\n                        <div class=\"part-content hidden\" id=\"payload-${index}\">\n                            ${formatJson(hook.payload)}\n                        </div>\n                    </div>\n                </div>\n            `;\n\n            return div;\n        }\n\n        // è·å–äº‹ä»¶æè¿°\n        function getEventDescription(event, phase) {\n            switch (event) {\n                case 'PreToolUse':\n                    return 'å·¥å…·æ‰§è¡Œå‰è§¦å‘ï¼Œå¯åŸºäºå‚æ•°é˜»æ­¢æˆ–è°ƒæ•´è°ƒç”¨ã€‚';\n                case 'PostToolUse':\n                    return 'å·¥å…·æˆåŠŸæ‰§è¡Œåè§¦å‘ï¼Œå¸¸ç”¨äºæ ¼å¼åŒ–ã€æ ¡éªŒæˆ–è®°å½•ç»“æœã€‚';\n                case 'UserPromptSubmit':\n                    return 'ç”¨æˆ·æäº¤æç¤ºå‰è§¦å‘ï¼Œå¯è¿›è¡Œæç¤ºæ ¡éªŒæˆ–å¢å¼ºã€‚';\n                case 'Notification':\n                    return 'å½“ç³»ç»Ÿå‘é€é€šçŸ¥ï¼ˆéœ€æˆæƒæˆ–ç­‰å¾…è¾“å…¥ï¼‰æ—¶è§¦å‘ã€‚';\n                case 'Stop':\n                    return 'ä¸»ä»£ç†å®Œæˆå“åº”æ—¶è§¦å‘ï¼ˆç”¨æˆ·ä¸­æ–­ä¸è§¦å‘ï¼‰ã€‚';\n                case 'SubagentStop':\n                    return 'å­ä»£ç†ä»»åŠ¡å®Œæˆæ—¶è§¦å‘ï¼Œç”¨äºè®°å½•å­ä»»åŠ¡ç»“æŸã€‚';\n                case 'PreCompact':\n                    return phase === 'manual'\n                        ? 'æ‰‹åŠ¨å‹ç¼©å‰è§¦å‘ï¼Œç”¨äºè®°å½•æˆ–å‡†å¤‡å‹ç¼©ã€‚'\n                        : 'è‡ªåŠ¨å‹ç¼©å‰è§¦å‘ï¼ˆä¸Šä¸‹æ–‡æ¥è¿‘ä¸Šé™ï¼‰ï¼Œç”¨äºè®°å½•æˆ–å‡†å¤‡å‹ç¼©ã€‚';\n                case 'SessionStart':\n                    switch (phase) {\n                        case 'startup':\n                            return 'æ–°ä¼šè¯å¯åŠ¨æ—¶è§¦å‘ï¼Œç”¨äºåŠ è½½ä¸Šä¸‹æ–‡æˆ–è®¾ç½®ç¯å¢ƒã€‚';\n                        case 'resume':\n                            return 'æ¢å¤ä¼šè¯æ—¶è§¦å‘ï¼Œç”¨äºç»§ç»­å…ˆå‰ä¸Šä¸‹æ–‡ã€‚';\n                        case 'clear':\n                            return 'æ¸…ç©ºä¼šè¯åè§¦å‘ï¼Œç”¨äºé‡ç½®ç¯å¢ƒä¸ä¸Šä¸‹æ–‡ã€‚';\n                        case 'compact':\n                            return 'å› å‹ç¼©æ“ä½œè§¦å‘çš„ä¼šè¯å¯åŠ¨ï¼Œç”¨äºç»´æŒä¸Šä¸‹æ–‡ã€‚';\n                        default:\n                            return 'ä¼šè¯å¯åŠ¨ç›¸å…³äº‹ä»¶ï¼Œåˆå§‹åŒ–æˆ–æ¢å¤ä¸Šä¸‹æ–‡ã€‚';\n                    }\n                case 'SessionEnd':\n                    return 'ä¼šè¯ç»“æŸæ—¶è§¦å‘ï¼Œå¸¸ç”¨äºæ”¶å°¾ä¸æ¸…ç†ã€‚';\n                default:\n                    return 'æœªçŸ¥äº‹ä»¶ã€‚';\n            }\n        }\n\n        // è·å–äº‹ä»¶æ ·å¼ç±»\n        function getEventClass(event) {\n            switch (event) {\n                case 'UserPromptSubmit': return 'event-userprompt';\n                case 'PreToolUse': return 'event-pretool';\n                case 'PostToolUse': return 'event-posttool';\n                case 'Notification': return 'event-notification';\n                case 'Stop': return 'event-stop';\n                case 'SubagentStop': return 'event-subagent-stop';\n                case 'PreCompact': return 'event-pre-compact';\n                case 'SessionStart': return 'event-session-start';\n                case 'SessionEnd': return 'event-session-end';\n                default: return 'event-default';\n            }\n        }\n\n        // æ ¼å¼åŒ–æ—¶é—´æˆ³\n        function formatTimestamp(ts) {\n            const date = new Date(ts);\n            return date.toLocaleString('zh-CN');\n        }\n\n        // æ ¼å¼åŒ– JSON\n        function formatJson(obj, indent = 0) {\n            if (!obj) return '';\n\n            try {\n                const spaces = '  '.repeat(indent);\n                let result = '';\n\n                if (Array.isArray(obj)) {\n                    result += '[\\n';\n                    obj.forEach((item, index) => {\n                        result += spaces + '  ';\n                        if (typeof item === 'object' && item !== null) {\n                            result += formatJson(item, indent + 1);\n                        } else {\n                            result += formatJsonValue(item);\n                        }\n                        if (index < obj.length - 1) result += ',';\n                        result += '\\n';\n                    });\n                    result += spaces + ']';\n                } else if (typeof obj === 'object' && obj !== null) {\n                    result += '{\\n';\n                    const keys = Object.keys(obj);\n                    keys.forEach((key, index) => {\n                        result += spaces + '  ';\n                        result += `<span class=\"json-key\">\"${escapeHtml(key)}\"</span>: `;\n\n                        if (typeof obj[key] === 'object' && obj[key] !== null) {\n                            result += formatJson(obj[key], indent + 1);\n                        } else {\n                            result += formatJsonValue(obj[key]);\n                        }\n\n                        if (index < keys.length - 1) result += ',';\n                        result += '\\n';\n                    });\n                    result += spaces + '}';\n                } else {\n                    result += formatJsonValue(obj);\n                }\n\n                return result;\n            } catch (error) {\n                return escapeHtml(JSON.stringify(obj));\n            }\n        }\n\n        // æ ¼å¼åŒ– JSON å€¼\n        function formatJsonValue(value) {\n            if (typeof value === 'string') {\n                if (value.startsWith('http://') || value.startsWith('https://')) {\n                    return `<span class=\"json-url\" onclick=\"window.open('${escapeHtml(value)}', '_blank')\">\"${escapeHtml(value)}\"</span>`;\n                }\n                return `<span class=\"json-string\">\"${escapeHtml(value)}\"</span>`;\n            } else if (typeof value === 'number') {\n                return `<span class=\"json-number\">${value}</span>`;\n            } else if (typeof value === 'boolean') {\n                return `<span class=\"json-boolean\">${value}</span>`;\n            } else if (value === null) {\n                return `<span class=\"json-null\">null</span>`;\n            } else {\n                return `<span style=\"color: #666;\">${value}</span>`;\n            }\n        }\n\n        // HTML è½¬ä¹‰\n        function escapeHtml(text) {\n            const div = document.createElement('div');\n            div.textContent = text;\n            return div.innerHTML;\n        }\n\n        // åˆ‡æ¢è¯¦æƒ…æ˜¾ç¤º\n        function toggleDetail(id) {\n            const content = document.getElementById(id);\n            const icon = document.getElementById('icon-' + id);\n\n            if (content.classList.contains('hidden')) {\n                content.classList.remove('hidden');\n                icon.classList.add('rotated');\n            } else {\n                content.classList.add('hidden');\n                icon.classList.remove('rotated');\n            }\n        }\n\n        // è¿‡æ»¤å’Œæœç´¢\n        document.getElementById('event-filter').addEventListener('change', applyFilters);\n        document.getElementById('search-input').addEventListener('input', applyFilters);\n\n        function applyFilters() {\n            const eventFilter = document.getElementById('event-filter').value;\n            const searchText = document.getElementById('search-input').value.toLowerCase();\n\n            filteredData = hooksData.filter(hook => {\n                const matchEvent = !eventFilter || hook.event === eventFilter;\n                const matchSearch = !searchText ||\n                    JSON.stringify(hook).toLowerCase().includes(searchText);\n\n                return matchEvent && matchSearch;\n            });\n\n            updateStatistics();\n            renderHooks();\n        }\n\n        // æ ¼å¼åŒ–æ–‡ä»¶å¤§å°\n        function formatFileSize(bytes) {\n            if (bytes === 0) return '0 Bytes';\n            const k = 1024;\n            const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n            const i = Math.floor(Math.log(bytes) / Math.log(k));\n            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n        }\n\n        // é¡µé¢åŠ è½½æ—¶æ‰§è¡Œ\n        document.addEventListener('DOMContentLoaded', function() {\n            // æ·»åŠ åˆå§‹åŠ è½½åŠ¨ç”»\n            const cards = document.querySelectorAll('.stat-card, .upload-card');\n            cards.forEach((card, index) => {\n                card.style.opacity = '0';\n                card.style.transform = 'translateY(20px)';\n                setTimeout(() => {\n                    card.style.transition = 'opacity 0.5s ease, transform 0.5s ease';\n                    card.style.opacity = '1';\n                    card.style.transform = 'translateY(0)';\n                }, index * 100);\n            });\n\n            // è®¾ç½®æ–‡ä»¶ä¸Šä¼ \n            setupFileUpload();\n        });\n\n            </script>\n</body>\n</html>\n","structuredPatch":[{"oldStart":487,"oldLines":7,"newStart":487,"newLines":7,"lines":["                     <div class=\"upload-content\">","                         <div class=\"upload-icon\">ğŸ“„</div>","                         <p class=\"upload-text\">ç‚¹å‡»é€‰æ‹©æ–‡ä»¶æˆ–æ‹–æ‹½æ–‡ä»¶åˆ°æ­¤å¤„</p>","-                        <p class=\"upload-hint\">æ”¯æŒ .log .txt æ ¼å¼çš„æ—¥å¿—æ–‡ä»¶ï¼Œæ¯è¡Œä¸€ä¸ª JSON å¯¹è±¡ï¼Œæœ€å¤§50MB</p>","+                        <p class=\"upload-hint\">æ”¯æŒ .log .txt .jsonl æ ¼å¼çš„æ—¥å¿—æ–‡ä»¶ï¼Œæ¯è¡Œä¸€ä¸ª JSON å¯¹è±¡ï¼Œæœ€å¤§50MB</p>","                         <input type=\"file\" id=\"file-input\" accept=\".log,.txt\" style=\"display: none;\">","                         <button class=\"upload-btn\" onclick=\"document.getElementById('file-input').click()\">é€‰æ‹©æ–‡ä»¶</button>","                     </div>"]}],"userModified":false,"replaceAll":false}}}
{"ts":"2025-11-05T02:20:49.514Z","event":"PreCompact","phase":"auto","message":"PreCompact(auto)äº‹ä»¶æ­£åœ¨æ‰§è¡Œ","description":"è‡ªåŠ¨å‹ç¼©å‰è§¦å‘ï¼ˆä¸Šä¸‹æ–‡æ¥è¿‘ä¸Šé™ï¼‰ï¼Œç”¨äºè®°å½•æˆ–å‡†å¤‡å‹ç¼©ã€‚","doc_url":"https://docs.claude.com/zh-CN/docs/claude-code/hooks#precompact","payload":{"session_id":"c7c21516-7e1e-49b2-8ae5-4e1bb98e9692","transcript_path":"C:\\Users\\WTCL\\.claude\\projects\\i--claude-code-proxy\\c7c21516-7e1e-49b2-8ae5-4e1bb98e9692.jsonl","cwd":"i:\\claude-code-proxy","hook_event_name":"PreCompact","trigger":"auto","custom_instructions":null}}
{"ts":"2025-11-05T02:21:46.514Z","event":"SessionStart","phase":"","message":"SessionStartäº‹ä»¶æ­£åœ¨æ‰§è¡Œ","description":"ä¼šè¯å¯åŠ¨ç›¸å…³äº‹ä»¶ï¼Œåˆå§‹åŒ–æˆ–æ¢å¤ä¸Šä¸‹æ–‡ã€‚","doc_url":"https://docs.claude.com/zh-CN/docs/claude-code/hooks#sessionstart","payload":{"session_id":"c7c21516-7e1e-49b2-8ae5-4e1bb98e9692","transcript_path":"C:\\Users\\WTCL\\.claude\\projects\\i--claude-code-proxy\\c7c21516-7e1e-49b2-8ae5-4e1bb98e9692.jsonl","cwd":"i:\\claude-code-proxy","hook_event_name":"SessionStart","source":"compact"}}
{"ts":"2025-11-05T02:21:50.739Z","event":"PreToolUse","phase":"","message":"PreToolUseäº‹ä»¶æ­£åœ¨æ‰§è¡Œ","description":"å·¥å…·æ‰§è¡Œå‰è§¦å‘ï¼Œå¯åŸºäºå‚æ•°é˜»æ­¢æˆ–è°ƒæ•´è°ƒç”¨ã€‚","doc_url":"https://docs.claude.com/zh-CN/docs/claude-code/hooks#pretooluse","payload":{"session_id":"c7c21516-7e1e-49b2-8ae5-4e1bb98e9692","transcript_path":"C:\\Users\\WTCL\\.claude\\projects\\i--claude-code-proxy\\c7c21516-7e1e-49b2-8ae5-4e1bb98e9692.jsonl","cwd":"i:\\claude-code-proxy","permission_mode":"acceptEdits","hook_event_name":"PreToolUse","tool_name":"Read","tool_input":{"file_path":"i:\\claude-code-proxy\\analyze\\hooks.html"}}}
{"ts":"2025-11-05T02:21:52.745Z","event":"PostToolUse","phase":"","message":"PostToolUseäº‹ä»¶æ­£åœ¨æ‰§è¡Œ","description":"å·¥å…·æˆåŠŸæ‰§è¡Œåè§¦å‘ï¼Œå¸¸ç”¨äºæ ¼å¼åŒ–ã€æ ¡éªŒæˆ–è®°å½•ç»“æœã€‚","doc_url":"https://docs.claude.com/zh-CN/docs/claude-code/hooks#posttooluse","payload":{"session_id":"c7c21516-7e1e-49b2-8ae5-4e1bb98e9692","transcript_path":"C:\\Users\\WTCL\\.claude\\projects\\i--claude-code-proxy\\c7c21516-7e1e-49b2-8ae5-4e1bb98e9692.jsonl","cwd":"i:\\claude-code-proxy","permission_mode":"acceptEdits","hook_event_name":"PostToolUse","tool_name":"Read","tool_input":{"file_path":"i:\\claude-code-proxy\\analyze\\hooks.html"},"tool_response":{"type":"text","file":{"filePath":"i:\\claude-code-proxy\\analyze\\hooks.html","content":"<!DOCTYPE html>\n<html lang=\"zh-CN\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Hooks æ—¥å¿—åˆ†æ</title>\n    <style>\n        * {\n            margin: 0;\n            padding: 0;\n            box-sizing: border-box;\n        }\n\n        body {\n            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n            min-height: 100vh;\n            padding: 20px;\n        }\n\n        .container {\n            max-width: 1400px;\n            margin: 0 auto;\n        }\n\n        .header {\n            text-align: center;\n            color: white;\n            margin-bottom: 30px;\n        }\n\n        .header h1 {\n            font-size: 2.5rem;\n            margin-bottom: 10px;\n            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);\n        }\n\n        .header p {\n            font-size: 1.1rem;\n            opacity: 0.9;\n        }\n\n        /* æ–‡ä»¶ä¸Šä¼ ç»„ä»¶æ ·å¼ */\n        .upload-section {\n            margin-bottom: 30px;\n        }\n\n        .upload-card {\n            background: white;\n            border-radius: 15px;\n            padding: 25px;\n            box-shadow: 0 10px 30px rgba(0,0,0,0.1);\n            border: 2px dashed #cbd5e0;\n            transition: all 0.3s ease;\n        }\n\n        .upload-card:hover {\n            border-color: #667eea;\n            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.2);\n        }\n\n        .upload-header {\n            font-size: 1.2rem;\n            font-weight: bold;\n            color: #4a5568;\n            margin-bottom: 20px;\n            text-align: center;\n        }\n\n        .upload-area {\n            border: 2px dashed #e2e8f0;\n            border-radius: 10px;\n            padding: 40px 20px;\n            text-align: center;\n            transition: all 0.3s ease;\n            cursor: pointer;\n        }\n\n        .upload-area:hover {\n            border-color: #667eea;\n            background: #f7fafc;\n        }\n\n        .upload-area.dragover {\n            border-color: #667eea;\n            background: #edf2f7;\n            transform: scale(1.02);\n        }\n\n        .upload-icon {\n            font-size: 3rem;\n            margin-bottom: 15px;\n            opacity: 0.7;\n        }\n\n        .upload-text {\n            font-size: 1.1rem;\n            color: #4a5568;\n            margin-bottom: 10px;\n            font-weight: 500;\n        }\n\n        .upload-hint {\n            font-size: 0.9rem;\n            color: #718096;\n            margin-bottom: 20px;\n        }\n\n        .upload-btn {\n            background: #667eea;\n            color: white;\n            border: none;\n            padding: 12px 24px;\n            border-radius: 8px;\n            font-size: 1rem;\n            font-weight: 500;\n            cursor: pointer;\n            transition: all 0.3s ease;\n        }\n\n        .upload-btn:hover {\n            background: #5a67d8;\n            transform: translateY(-2px);\n            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);\n        }\n\n        .file-info {\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            background: #f7fafc;\n            padding: 15px 20px;\n            border-radius: 8px;\n            margin-top: 15px;\n        }\n\n        .file-name {\n            font-weight: 500;\n            color: #4a5568;\n            flex: 1;\n            overflow: hidden;\n            text-overflow: ellipsis;\n            white-space: nowrap;\n        }\n\n        .clear-btn {\n            background: #fc8181;\n            color: white;\n            border: none;\n            width: 30px;\n            height: 30px;\n            border-radius: 50%;\n            cursor: pointer;\n            font-size: 1rem;\n            transition: all 0.3s ease;\n        }\n\n        .clear-btn:hover {\n            background: #f56565;\n            transform: scale(1.1);\n        }\n\n        /* æ¶ˆæ¯æç¤ºæ ·å¼ */\n        .upload-message {\n            margin-top: 15px;\n            padding: 12px 16px;\n            border-radius: 8px;\n            font-size: 0.9rem;\n            animation: slideIn 0.3s ease;\n        }\n\n        .upload-success {\n            background: #d4edda;\n            color: #155724;\n            border: 1px solid #c3e6cb;\n        }\n\n        .upload-error {\n            background: #f8d7da;\n            color: #721c24;\n            border: 1px solid #f5c6cb;\n        }\n\n        @keyframes slideIn {\n            from {\n                opacity: 0;\n                transform: translateY(-10px);\n            }\n            to {\n                opacity: 1;\n                transform: translateY(0);\n            }\n        }\n\n        #file-input {\n            display: none;\n        }\n\n        .stats-grid {\n            display: grid;\n            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\n            gap: 20px;\n            margin-bottom: 30px;\n        }\n\n        .stat-card {\n            background: white;\n            border-radius: 15px;\n            padding: 25px;\n            box-shadow: 0 10px 30px rgba(0,0,0,0.2);\n            text-align: center;\n            transition: transform 0.3s ease, box-shadow 0.3s ease;\n        }\n\n        .stat-card:hover {\n            transform: translateY(-5px);\n            box-shadow: 0 15px 40px rgba(0,0,0,0.3);\n        }\n\n        .stat-number {\n            font-size: 3rem;\n            font-weight: bold;\n            margin-bottom: 10px;\n        }\n\n        .stat-label {\n            font-size: 1.1rem;\n            color: #666;\n            margin-bottom: 5px;\n        }\n\n        .stat-description {\n            font-size: 0.9rem;\n            color: #999;\n        }\n\n        .filter-section {\n            background: white;\n            border-radius: 15px;\n            padding: 20px;\n            box-shadow: 0 10px 30px rgba(0,0,0,0.2);\n            margin-bottom: 30px;\n        }\n\n        .filter-controls {\n            display: flex;\n            gap: 15px;\n            flex-wrap: wrap;\n            align-items: center;\n        }\n\n        .filter-group {\n            display: flex;\n            align-items: center;\n            gap: 10px;\n        }\n\n        .filter-label {\n            font-weight: bold;\n            color: #333;\n        }\n\n        .filter-select, .search-input {\n            padding: 8px 12px;\n            border: 2px solid #ddd;\n            border-radius: 5px;\n            font-size: 0.9rem;\n            transition: border-color 0.3s ease;\n        }\n\n        .filter-select:focus, .search-input:focus {\n            outline: none;\n            border-color: #667eea;\n        }\n\n        .search-input {\n            min-width: 200px;\n        }\n\n        .hooks-container {\n            display: grid;\n            gap: 30px;\n        }\n\n        .hook-item {\n            background: white;\n            border-radius: 15px;\n            padding: 25px;\n            box-shadow: 0 10px 30px rgba(0,0,0,0.2);\n        }\n\n        .hook-header {\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            margin-bottom: 20px;\n            padding-bottom: 15px;\n            border-bottom: 2px solid #667eea;\n        }\n\n        .hook-event {\n            font-size: 1.5rem;\n            font-weight: bold;\n            color: #667eea;\n        }\n\n        .hook-meta {\n            display: flex;\n            gap: 20px;\n            align-items: center;\n        }\n\n        .hook-timestamp {\n            font-size: 0.9rem;\n            color: #666;\n            background: #f0f4ff;\n            padding: 5px 12px;\n            border-radius: 20px;\n        }\n\n        .hook-message {\n            background: #f8f9fa;\n            border-left: 4px solid #667eea;\n            padding: 15px;\n            margin-bottom: 15px;\n            border-radius: 5px;\n        }\n\n        .hook-description {\n            color: #666;\n            font-style: italic;\n            margin-bottom: 15px;\n        }\n\n        .hook-details {\n            display: flex;\n            flex-direction: column;\n            gap: 20px;\n        }\n\n        .part-card {\n            background: #f8f9fa;\n            border-radius: 10px;\n            overflow: hidden;\n        }\n\n        .part-header {\n            background: #667eea;\n            color: white;\n            padding: 12px 15px;\n            font-weight: bold;\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            cursor: pointer;\n            transition: background 0.3s ease;\n        }\n\n        .part-header:hover {\n            background: #5a67d8;\n        }\n\n        .part-content {\n            padding: 15px;\n            font-family: 'Courier New', monospace;\n            font-size: 0.9rem;\n            background: #1a1a1a;\n            color: #ffffff;\n            overflow-y: auto;\n            white-space: pre-wrap;\n            line-height: 1.6;\n            min-height: 100px;\n            border-radius: 8px;\n            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.3);\n        }\n\n        .part-content.hidden {\n            display: none;\n        }\n\n        .toggle-icon {\n            transition: transform 0.3s ease;\n        }\n\n        .toggle-icon.rotated {\n            transform: rotate(180deg);\n        }\n\n        /* è‡ªå®šä¹‰æ»šåŠ¨æ¡æ ·å¼ */\n        .part-content::-webkit-scrollbar {\n            width: 8px;\n        }\n\n        .part-content::-webkit-scrollbar-track {\n            background: #2a2a2a;\n            border-radius: 4px;\n        }\n\n        .part-content::-webkit-scrollbar-thumb {\n            background: #4a4a4a;\n            border-radius: 4px;\n        }\n\n        .part-content::-webkit-scrollbar-thumb:hover {\n            background: #5a5a5a;\n        }\n\n        .event-badge {\n            display: inline-block;\n            padding: 4px 12px;\n            border-radius: 20px;\n            font-size: 0.8rem;\n            font-weight: bold;\n            margin-right: 10px;\n        }\n\n        .event-userprompt { background: #FF6B6B; color: white; }\n        .event-pretool { background: #4ECDC4; color: white; }\n        .event-posttool { background: #45B7D1; color: white; }\n        .event-notification { background: #9C27B0; color: white; }\n        .event-stop { background: #F44336; color: white; }\n        .event-subagent-stop { background: #FF9800; color: white; }\n        .event-pre-compact { background: #FFC107; color: white; }\n        .event-session-start { background: #4CAF50; color: white; }\n        .event-session-end { background: #607D8B; color: white; }\n        .event-default { background: #78909C; color: white; }\n\n        .no-data {\n            text-align: center;\n            padding: 60px 20px;\n            color: white;\n            font-size: 1.2rem;\n        }\n\n        .error-message {\n            background: #fff5f5;\n            border: 2px solid #fc8181;\n            color: #c53030;\n            padding: 20px;\n            border-radius: 10px;\n            text-align: center;\n            font-size: 1.1rem;\n            margin: 20px 0;\n        }\n\n        .json-key { color: #9C27B0; }\n        .json-string { color: #4CAF50; }\n        .json-number { color: #FF9800; }\n        .json-boolean { color: #F44336; }\n        .json-null { color: #9E9E9E; }\n        .json-url { color: #2196F3; text-decoration: underline; cursor: pointer; }\n\n        @media (max-width: 768px) {\n            .header h1 {\n                font-size: 2rem;\n            }\n\n            .stats-grid {\n                grid-template-columns: repeat(2, 1fr);\n            }\n\n            .filter-controls {\n                flex-direction: column;\n                align-items: stretch;\n            }\n\n            .search-input {\n                min-width: auto;\n            }\n        }\n    </style>\n</head>\n<body>\n    <div class=\"container\">\n        <div class=\"header\">\n            <h1>Hooks æ—¥å¿—åˆ†æ</h1>\n            <p>ä¸Šä¼ å¹¶åˆ†æ Claude Hooks äº‹ä»¶æ—¥å¿—</p>\n        </div>\n\n        <!-- æ–‡ä»¶ä¸Šä¼ ç»„ä»¶ -->\n        <div class=\"upload-section\">\n            <div class=\"upload-card\">\n                <div class=\"upload-header\">\n                    <span>ğŸ“ é€‰æ‹© Hooks æ—¥å¿—æ–‡ä»¶</span>\n                </div>\n                <div class=\"upload-area\" id=\"upload-area\">\n                    <div class=\"upload-content\">\n                        <div class=\"upload-icon\">ğŸ“„</div>\n                        <p class=\"upload-text\">ç‚¹å‡»é€‰æ‹©æ–‡ä»¶æˆ–æ‹–æ‹½æ–‡ä»¶åˆ°æ­¤å¤„</p>\n                        <p class=\"upload-hint\">æ”¯æŒ .log .txt .jsonl æ ¼å¼çš„æ—¥å¿—æ–‡ä»¶ï¼Œæ¯è¡Œä¸€ä¸ª JSON å¯¹è±¡ï¼Œæœ€å¤§50MB</p>\n                        <input type=\"file\" id=\"file-input\" accept=\".log,.txt\" style=\"display: none;\">\n                        <button class=\"upload-btn\" onclick=\"document.getElementById('file-input').click()\">é€‰æ‹©æ–‡ä»¶</button>\n                    </div>\n                </div>\n                <div class=\"file-info\" id=\"file-info\" style=\"display: none;\">\n                    <span class=\"file-name\" id=\"file-name\"></span>\n                    <button class=\"clear-btn\" onclick=\"clearFile()\">âœ•</button>\n                </div>\n            </div>\n        </div>\n\n        <div id=\"stats-section\" style=\"display: none;\">\n            <div class=\"stats-grid\">\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"total-hooks\">0</div>\n                    <div class=\"stat-label\">æ€»äº‹ä»¶æ•°</div>\n                    <div class=\"stat-description\">æ‰€æœ‰ Hooks äº‹ä»¶</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"user-prompts\">0</div>\n                    <div class=\"stat-label\">ç”¨æˆ·æç¤ºäº‹ä»¶</div>\n                    <div class=\"stat-description\">UserPromptSubmit</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"pre-tools\">0</div>\n                    <div class=\"stat-label\">å·¥å…·æ‰§è¡Œå‰äº‹ä»¶</div>\n                    <div class=\"stat-description\">PreToolUse</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"post-tools\">0</div>\n                    <div class=\"stat-label\">å·¥å…·æ‰§è¡Œåäº‹ä»¶</div>\n                    <div class=\"stat-description\">PostToolUse</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"notifications\">0</div>\n                    <div class=\"stat-label\">é€šçŸ¥äº‹ä»¶</div>\n                    <div class=\"stat-description\">Notification</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"stops\">0</div>\n                    <div class=\"stat-label\">åœæ­¢äº‹ä»¶</div>\n                    <div class=\"stat-description\">Stop</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"subagent-stops\">0</div>\n                    <div class=\"stat-label\">å­ä»£ç†åœæ­¢äº‹ä»¶</div>\n                    <div class=\"stat-description\">SubagentStop</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"pre-compacts\">0</div>\n                    <div class=\"stat-label\">å‹ç¼©å‰äº‹ä»¶</div>\n                    <div class=\"stat-description\">PreCompact</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"session-starts\">0</div>\n                    <div class=\"stat-label\">ä¼šè¯å¼€å§‹äº‹ä»¶</div>\n                    <div class=\"stat-description\">SessionStart</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"session-ends\">0</div>\n                    <div class=\"stat-label\">ä¼šè¯ç»“æŸäº‹ä»¶</div>\n                    <div class=\"stat-description\">SessionEnd</div>\n                </div>\n            </div>\n\n            <div class=\"filter-section\">\n                <div class=\"filter-controls\">\n                    <div class=\"filter-group\">\n                        <label class=\"filter-label\">äº‹ä»¶ç±»å‹ï¼š</label>\n                        <select class=\"filter-select\" id=\"event-filter\">\n                            <option value=\"\">å…¨éƒ¨</option>\n                            <option value=\"UserPromptSubmit\">UserPromptSubmit</option>\n                            <option value=\"PreToolUse\">PreToolUse</option>\n                            <option value=\"PostToolUse\">PostToolUse</option>\n                            <option value=\"Notification\">Notification</option>\n                            <option value=\"Stop\">Stop</option>\n                            <option value=\"SubagentStop\">SubagentStop</option>\n                            <option value=\"PreCompact\">PreCompact</option>\n                            <option value=\"SessionStart\">SessionStart</option>\n                            <option value=\"SessionEnd\">SessionEnd</option>\n                        </select>\n                    </div>\n                    <div class=\"filter-group\">\n                        <label class=\"filter-label\">æœç´¢ï¼š</label>\n                        <input type=\"text\" class=\"search-input\" id=\"search-input\" placeholder=\"æœç´¢äº‹ä»¶å†…å®¹...\">\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <div id=\"hooks-container\" class=\"hooks-container\"></div>\n\n\n\n        <div id=\"error-message\" class=\"error-message\" style=\"display: none;\"></div>\n    </div>\n\n    <script>\n        let hooksData = [];\n        let filteredData = [];\n\n        // æ–‡ä»¶ä¸Šä¼ ç›¸å…³å‡½æ•°\n        function setupFileUpload() {\n            const uploadArea = document.getElementById('upload-area');\n            const fileInput = document.getElementById('file-input');\n\n            // ç‚¹å‡»ä¸Šä¼ åŒºåŸŸè§¦å‘æ–‡ä»¶é€‰æ‹©ï¼ˆä½†ä¸åŒ…æ‹¬æŒ‰é’®ï¼‰\n            uploadArea.addEventListener('click', function(event) {\n                // å¦‚æœç‚¹å‡»çš„æ˜¯æŒ‰é’®ï¼Œä¸å¤„ç†\n                if (event.target.tagName === 'BUTTON' || event.target.closest('button')) {\n                    return;\n                }\n                fileInput.click();\n            });\n\n            // æ–‡ä»¶é€‰æ‹©äº‹ä»¶\n            fileInput.addEventListener('change', handleFileSelect);\n\n            // æ‹–æ‹½äº‹ä»¶\n            uploadArea.addEventListener('dragover', handleDragOver);\n            uploadArea.addEventListener('dragleave', handleDragLeave);\n            uploadArea.addEventListener('drop', handleDrop);\n        }\n\n\n        function handleDragOver(e) {\n            e.preventDefault();\n            e.currentTarget.classList.add('dragover');\n        }\n\n        function handleDragLeave(e) {\n            e.preventDefault();\n            e.currentTarget.classList.remove('dragover');\n        }\n\n        function handleDrop(e) {\n            e.preventDefault();\n            e.currentTarget.classList.remove('dragover');\n            handleFiles(e.dataTransfer.files);\n        }\n\n        function handleFileSelect(event) {\n            const files = event.target.files;\n            handleFiles(files);\n        }\n\n        function handleFiles(files) {\n            if (files.length === 0) return;\n\n            const file = files[0];\n\n            // æ£€æŸ¥æ–‡ä»¶ç±»å‹\n            const validTypes = ['.log', '.txt'];\n            const fileExtension = file.name.substring(file.name.lastIndexOf('.')).toLowerCase();\n\n            if (!validTypes.includes(fileExtension)) {\n                showErrorMessage('è¯·é€‰æ‹© .log æˆ– .txt æ ¼å¼çš„æ—¥å¿—æ–‡ä»¶');\n                return;\n            }\n\n            // æ£€æŸ¥æ–‡ä»¶å¤§å° (é™åˆ¶ä¸º50MB)\n            if (file.size > 50 * 1024 * 1024) {\n                showErrorMessage('æ–‡ä»¶å¤§å°ä¸èƒ½è¶…è¿‡50MB');\n                return;\n            }\n\n            // æ˜¾ç¤ºæ–‡ä»¶ä¿¡æ¯\n            showFileInfo(file);\n\n            // è¯»å–æ–‡ä»¶å†…å®¹\n            const reader = new FileReader();\n            reader.onload = function(e) {\n                try {\n                    const content = e.target.result;\n                    console.log('æ–‡ä»¶è¯»å–æˆåŠŸï¼Œå†…å®¹é•¿åº¦:', content.length);\n                    console.log('æ–‡ä»¶å†…å®¹å‰100å­—ç¬¦:', content.substring(0, 100));\n\n                    if (!content || content.trim().length === 0) {\n                        showErrorMessage('æ–‡ä»¶å†…å®¹ä¸ºç©º');\n                        return;\n                    }\n\n                    parseHooksData(content);\n                    showSuccessMessage(`æˆåŠŸåŠ è½½æ–‡ä»¶: ${file.name}`);\n                } catch (error) {\n                    console.error('æ–‡ä»¶è§£æå¼‚å¸¸:', error);\n                    showErrorMessage('æ–‡ä»¶è§£æå¤±è´¥ï¼š' + error.message);\n                }\n            };\n            reader.onerror = function(error) {\n                console.error('æ–‡ä»¶è¯»å–å¤±è´¥:', error);\n                showErrorMessage('æ–‡ä»¶è¯»å–å¤±è´¥');\n            };\n            reader.readAsText(file);\n        }\n\n        function showFileInfo(file) {\n            const fileInfo = document.getElementById('file-info');\n            const fileName = document.getElementById('file-name');\n            const uploadArea = document.getElementById('upload-area');\n\n            fileName.textContent = file.name;\n            fileInfo.style.display = 'flex';\n            uploadArea.style.display = 'none';\n        }\n\n        function clearFile() {\n            const fileInfo = document.getElementById('file-info');\n            const uploadArea = document.getElementById('upload-area');\n            const fileInput = document.getElementById('file-input');\n\n            fileInfo.style.display = 'none';\n            uploadArea.style.display = 'block';\n\n            // æ¸…ç©ºæ–‡ä»¶è¾“å…¥æ¡†çš„å€¼\n            fileInput.value = '';\n\n            // æ¸…ç©ºæ•°æ®\n            hooksData = [];\n            filteredData = [];\n\n            // æ¸…ç©ºæ˜¾ç¤ºåŒºåŸŸ\n            document.getElementById('hooks-container').innerHTML = '';\n            document.getElementById('no-data').style.display = 'block';\n            document.getElementById('stats-section').style.display = 'none';\n\n            // æ˜¾ç¤ºæç¤º\n            showSuccessMessage('å·²æ¸…ç©ºæ–‡ä»¶ï¼Œè¯·é‡æ–°é€‰æ‹©æ—¥å¿—æ–‡ä»¶');\n        }\n\n        function showSuccessMessage(message) {\n            showMessage(message, 'success');\n        }\n\n        function showErrorMessage(message) {\n            showMessage(message, 'error');\n        }\n\n        function showMessage(message, type) {\n            // ç§»é™¤ä¹‹å‰çš„æ¶ˆæ¯\n            const existingMessages = document.querySelectorAll('.upload-message');\n            existingMessages.forEach(msg => msg.remove());\n\n            const messageClass = type === 'success' ? 'upload-success' : 'upload-error';\n            const messageDiv = document.createElement('div');\n            messageDiv.className = `upload-message ${messageClass}`;\n            messageDiv.textContent = message;\n\n            document.querySelector('.upload-card').appendChild(messageDiv);\n\n            // 3ç§’åè‡ªåŠ¨æ¶ˆå¤±\n            setTimeout(() => {\n                messageDiv.style.opacity = '0';\n                setTimeout(() => {\n                    if (messageDiv.parentNode) {\n                        messageDiv.parentNode.removeChild(messageDiv);\n                    }\n                }, 300);\n            }, 3000);\n        }\n\n        // è§£æ hooks æ•°æ®\n        function parseHooksData(content) {\n            console.log('å¼€å§‹è§£æ hooks æ•°æ®ï¼Œå†…å®¹é•¿åº¦:', content.length);\n\n            hooksData = [];\n            const lines = content.split('\\n').filter(line => line.trim());\n            console.log('åˆ†å‰²åçš„è¡Œæ•°:', lines.length);\n\n            for (let i = 0; i < lines.length; i++) {\n                const line = lines[i];\n                try {\n                    const hookData = JSON.parse(line);\n                    hooksData.push(hookData);\n                    console.log(`æˆåŠŸè§£æç¬¬ ${i + 1} è¡Œï¼Œäº‹ä»¶ç±»å‹:`, hookData.event);\n                } catch (error) {\n                    console.error(`è§£æç¬¬ ${i + 1} è¡Œå¤±è´¥:`, error.message);\n                    console.error('é—®é¢˜è¡Œçš„å†…å®¹:', line.substring(0, 100) + (line.length > 100 ? '...' : ''));\n                }\n            }\n\n            console.log('è§£æå®Œæˆï¼Œæ€»å…±è§£æåˆ°', hooksData.length, 'ä¸ªæœ‰æ•ˆäº‹ä»¶');\n\n            if (hooksData.length === 0) {\n                showErrorMessage('æœªæ‰¾åˆ°æœ‰æ•ˆçš„ hooks æ•°æ®ã€‚è¯·ç¡®ä¿æ–‡ä»¶æ ¼å¼æ­£ç¡®ï¼Œæ¯è¡Œåº”è¯¥æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„JSONå¯¹è±¡ã€‚');\n                console.error('è§£æå¤±è´¥ï¼Œæ²¡æœ‰æ‰¾åˆ°æœ‰æ•ˆçš„hooksæ•°æ®');\n                return;\n            }\n\n            filteredData = [...hooksData];\n            console.log('å‡†å¤‡æ˜¾ç¤ºæ•°æ®ï¼Œè¿‡æ»¤åçš„äº‹ä»¶æ•°é‡:', filteredData.length);\n            displayData();\n        }\n\n        // æ˜¾ç¤ºæ•°æ®\n        function displayData() {\n            document.getElementById('no-data').style.display = 'none';\n            document.getElementById('error-message').style.display = 'none';\n            document.getElementById('stats-section').style.display = 'block';\n\n            updateStatistics();\n            renderHooks();\n        }\n\n        // æ›´æ–°ç»Ÿè®¡ä¿¡æ¯\n        function updateStatistics() {\n            const stats = {\n                total: filteredData.length,\n                userPrompts: filteredData.filter(h => h.event === 'UserPromptSubmit').length,\n                preTools: filteredData.filter(h => h.event === 'PreToolUse').length,\n                postTools: filteredData.filter(h => h.event === 'PostToolUse').length,\n                notifications: filteredData.filter(h => h.event === 'Notification').length,\n                stops: filteredData.filter(h => h.event === 'Stop').length,\n                subagentStops: filteredData.filter(h => h.event === 'SubagentStop').length,\n                preCompacts: filteredData.filter(h => h.event === 'PreCompact').length,\n                sessionStarts: filteredData.filter(h => h.event === 'SessionStart').length,\n                sessionEnds: filteredData.filter(h => h.event === 'SessionEnd').length\n            };\n\n            document.getElementById('total-hooks').textContent = stats.total;\n            document.getElementById('user-prompts').textContent = stats.userPrompts;\n            document.getElementById('pre-tools').textContent = stats.preTools;\n            document.getElementById('post-tools').textContent = stats.postTools;\n            document.getElementById('notifications').textContent = stats.notifications;\n            document.getElementById('stops').textContent = stats.stops;\n            document.getElementById('subagent-stops').textContent = stats.subagentStops;\n            document.getElementById('pre-compacts').textContent = stats.preCompacts;\n            document.getElementById('session-starts').textContent = stats.sessionStarts;\n            document.getElementById('session-ends').textContent = stats.sessionEnds;\n        }\n\n        // æ¸²æŸ“ hooks\n        function renderHooks() {\n            const container = document.getElementById('hooks-container');\n            container.innerHTML = '';\n\n            filteredData.forEach((hook, index) => {\n                const hookElement = createHookElement(hook, index);\n                container.appendChild(hookElement);\n            });\n\n            // æ·»åŠ åŠ¨ç”»\n            const elements = container.querySelectorAll('.hook-item');\n            elements.forEach((el, i) => {\n                el.style.opacity = '0';\n                el.style.transform = 'translateY(20px)';\n                setTimeout(() => {\n                    el.style.transition = 'opacity 0.3s ease, transform 0.3s ease';\n                    el.style.opacity = '1';\n                    el.style.transform = 'translateY(0)';\n                }, i * 50);\n            });\n        }\n\n        // åˆ›å»º hook å…ƒç´ \n        function createHookElement(hook, index) {\n            const div = document.createElement('div');\n            div.className = 'hook-item';\n\n            const eventClass = getEventClass(hook.event);\n            const formattedTime = formatTimestamp(hook.ts);\n            const eventDescription = getEventDescription(hook.event, hook.phase);\n\n            div.innerHTML = `\n                <div class=\"hook-header\">\n                    <div class=\"hook-event\">\n                        <span class=\"event-badge ${eventClass}\">${hook.event}</span>\n                    </div>\n                    <div class=\"hook-meta\">\n                        <div class=\"hook-timestamp\">${formattedTime}</div>\n                    </div>\n                </div>\n                <div class=\"hook-message\">${hook.message}</div>\n                <div class=\"hook-description\">${hook.description || eventDescription}</div>\n                <div class=\"hook-details\">\n                    <div class=\"part-card\">\n                        <div class=\"part-header\" onclick=\"toggleDetail('payload-${index}')\">\n                            <span>Payload</span>\n                            <span class=\"toggle-icon\" id=\"icon-payload-${index}\">â–¼</span>\n                        </div>\n                        <div class=\"part-content hidden\" id=\"payload-${index}\">\n                            ${formatJson(hook.payload)}\n                        </div>\n                    </div>\n                </div>\n            `;\n\n            return div;\n        }\n\n        // è·å–äº‹ä»¶æè¿°\n        function getEventDescription(event, phase) {\n            switch (event) {\n                case 'PreToolUse':\n                    return 'å·¥å…·æ‰§è¡Œå‰è§¦å‘ï¼Œå¯åŸºäºå‚æ•°é˜»æ­¢æˆ–è°ƒæ•´è°ƒç”¨ã€‚';\n                case 'PostToolUse':\n                    return 'å·¥å…·æˆåŠŸæ‰§è¡Œåè§¦å‘ï¼Œå¸¸ç”¨äºæ ¼å¼åŒ–ã€æ ¡éªŒæˆ–è®°å½•ç»“æœã€‚';\n                case 'UserPromptSubmit':\n                    return 'ç”¨æˆ·æäº¤æç¤ºå‰è§¦å‘ï¼Œå¯è¿›è¡Œæç¤ºæ ¡éªŒæˆ–å¢å¼ºã€‚';\n                case 'Notification':\n                    return 'å½“ç³»ç»Ÿå‘é€é€šçŸ¥ï¼ˆéœ€æˆæƒæˆ–ç­‰å¾…è¾“å…¥ï¼‰æ—¶è§¦å‘ã€‚';\n                case 'Stop':\n                    return 'ä¸»ä»£ç†å®Œæˆå“åº”æ—¶è§¦å‘ï¼ˆç”¨æˆ·ä¸­æ–­ä¸è§¦å‘ï¼‰ã€‚';\n                case 'SubagentStop':\n                    return 'å­ä»£ç†ä»»åŠ¡å®Œæˆæ—¶è§¦å‘ï¼Œç”¨äºè®°å½•å­ä»»åŠ¡ç»“æŸã€‚';\n                case 'PreCompact':\n                    return phase === 'manual'\n                        ? 'æ‰‹åŠ¨å‹ç¼©å‰è§¦å‘ï¼Œç”¨äºè®°å½•æˆ–å‡†å¤‡å‹ç¼©ã€‚'\n                        : 'è‡ªåŠ¨å‹ç¼©å‰è§¦å‘ï¼ˆä¸Šä¸‹æ–‡æ¥è¿‘ä¸Šé™ï¼‰ï¼Œç”¨äºè®°å½•æˆ–å‡†å¤‡å‹ç¼©ã€‚';\n                case 'SessionStart':\n                    switch (phase) {\n                        case 'startup':\n                            return 'æ–°ä¼šè¯å¯åŠ¨æ—¶è§¦å‘ï¼Œç”¨äºåŠ è½½ä¸Šä¸‹æ–‡æˆ–è®¾ç½®ç¯å¢ƒã€‚';\n                        case 'resume':\n                            return 'æ¢å¤ä¼šè¯æ—¶è§¦å‘ï¼Œç”¨äºç»§ç»­å…ˆå‰ä¸Šä¸‹æ–‡ã€‚';\n                        case 'clear':\n                            return 'æ¸…ç©ºä¼šè¯åè§¦å‘ï¼Œç”¨äºé‡ç½®ç¯å¢ƒä¸ä¸Šä¸‹æ–‡ã€‚';\n                        case 'compact':\n                            return 'å› å‹ç¼©æ“ä½œè§¦å‘çš„ä¼šè¯å¯åŠ¨ï¼Œç”¨äºç»´æŒä¸Šä¸‹æ–‡ã€‚';\n                        default:\n                            return 'ä¼šè¯å¯åŠ¨ç›¸å…³äº‹ä»¶ï¼Œåˆå§‹åŒ–æˆ–æ¢å¤ä¸Šä¸‹æ–‡ã€‚';\n                    }\n                case 'SessionEnd':\n                    return 'ä¼šè¯ç»“æŸæ—¶è§¦å‘ï¼Œå¸¸ç”¨äºæ”¶å°¾ä¸æ¸…ç†ã€‚';\n                default:\n                    return 'æœªçŸ¥äº‹ä»¶ã€‚';\n            }\n        }\n\n        // è·å–äº‹ä»¶æ ·å¼ç±»\n        function getEventClass(event) {\n            switch (event) {\n                case 'UserPromptSubmit': return 'event-userprompt';\n                case 'PreToolUse': return 'event-pretool';\n                case 'PostToolUse': return 'event-posttool';\n                case 'Notification': return 'event-notification';\n                case 'Stop': return 'event-stop';\n                case 'SubagentStop': return 'event-subagent-stop';\n                case 'PreCompact': return 'event-pre-compact';\n                case 'SessionStart': return 'event-session-start';\n                case 'SessionEnd': return 'event-session-end';\n                default: return 'event-default';\n            }\n        }\n\n        // æ ¼å¼åŒ–æ—¶é—´æˆ³\n        function formatTimestamp(ts) {\n            const date = new Date(ts);\n            return date.toLocaleString('zh-CN');\n        }\n\n        // æ ¼å¼åŒ– JSON\n        function formatJson(obj, indent = 0) {\n            if (!obj) return '';\n\n            try {\n                const spaces = '  '.repeat(indent);\n                let result = '';\n\n                if (Array.isArray(obj)) {\n                    result += '[\\n';\n                    obj.forEach((item, index) => {\n                        result += spaces + '  ';\n                        if (typeof item === 'object' && item !== null) {\n                            result += formatJson(item, indent + 1);\n                        } else {\n                            result += formatJsonValue(item);\n                        }\n                        if (index < obj.length - 1) result += ',';\n                        result += '\\n';\n                    });\n                    result += spaces + ']';\n                } else if (typeof obj === 'object' && obj !== null) {\n                    result += '{\\n';\n                    const keys = Object.keys(obj);\n                    keys.forEach((key, index) => {\n                        result += spaces + '  ';\n                        result += `<span class=\"json-key\">\"${escapeHtml(key)}\"</span>: `;\n\n                        if (typeof obj[key] === 'object' && obj[key] !== null) {\n                            result += formatJson(obj[key], indent + 1);\n                        } else {\n                            result += formatJsonValue(obj[key]);\n                        }\n\n                        if (index < keys.length - 1) result += ',';\n                        result += '\\n';\n                    });\n                    result += spaces + '}';\n                } else {\n                    result += formatJsonValue(obj);\n                }\n\n                return result;\n            } catch (error) {\n                return escapeHtml(JSON.stringify(obj));\n            }\n        }\n\n        // æ ¼å¼åŒ– JSON å€¼\n        function formatJsonValue(value) {\n            if (typeof value === 'string') {\n                if (value.startsWith('http://') || value.startsWith('https://')) {\n                    return `<span class=\"json-url\" onclick=\"window.open('${escapeHtml(value)}', '_blank')\">\"${escapeHtml(value)}\"</span>`;\n                }\n                return `<span class=\"json-string\">\"${escapeHtml(value)}\"</span>`;\n            } else if (typeof value === 'number') {\n                return `<span class=\"json-number\">${value}</span>`;\n            } else if (typeof value === 'boolean') {\n                return `<span class=\"json-boolean\">${value}</span>`;\n            } else if (value === null) {\n                return `<span class=\"json-null\">null</span>`;\n            } else {\n                return `<span style=\"color: #666;\">${value}</span>`;\n            }\n        }\n\n        // HTML è½¬ä¹‰\n        function escapeHtml(text) {\n            const div = document.createElement('div');\n            div.textContent = text;\n            return div.innerHTML;\n        }\n\n        // åˆ‡æ¢è¯¦æƒ…æ˜¾ç¤º\n        function toggleDetail(id) {\n            const content = document.getElementById(id);\n            const icon = document.getElementById('icon-' + id);\n\n            if (content.classList.contains('hidden')) {\n                content.classList.remove('hidden');\n                icon.classList.add('rotated');\n            } else {\n                content.classList.add('hidden');\n                icon.classList.remove('rotated');\n            }\n        }\n\n        // è¿‡æ»¤å’Œæœç´¢\n        document.getElementById('event-filter').addEventListener('change', applyFilters);\n        document.getElementById('search-input').addEventListener('input', applyFilters);\n\n        function applyFilters() {\n            const eventFilter = document.getElementById('event-filter').value;\n            const searchText = document.getElementById('search-input').value.toLowerCase();\n\n            filteredData = hooksData.filter(hook => {\n                const matchEvent = !eventFilter || hook.event === eventFilter;\n                const matchSearch = !searchText ||\n                    JSON.stringify(hook).toLowerCase().includes(searchText);\n\n                return matchEvent && matchSearch;\n            });\n\n            updateStatistics();\n            renderHooks();\n        }\n\n        // æ ¼å¼åŒ–æ–‡ä»¶å¤§å°\n        function formatFileSize(bytes) {\n            if (bytes === 0) return '0 Bytes';\n            const k = 1024;\n            const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n            const i = Math.floor(Math.log(bytes) / Math.log(k));\n            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n        }\n\n        // é¡µé¢åŠ è½½æ—¶æ‰§è¡Œ\n        document.addEventListener('DOMContentLoaded', function() {\n            // æ·»åŠ åˆå§‹åŠ è½½åŠ¨ç”»\n            const cards = document.querySelectorAll('.stat-card, .upload-card');\n            cards.forEach((card, index) => {\n                card.style.opacity = '0';\n                card.style.transform = 'translateY(20px)';\n                setTimeout(() => {\n                    card.style.transition = 'opacity 0.5s ease, transform 0.5s ease';\n                    card.style.opacity = '1';\n                    card.style.transform = 'translateY(0)';\n                }, index * 100);\n            });\n\n            // è®¾ç½®æ–‡ä»¶ä¸Šä¼ \n            setupFileUpload();\n        });\n\n            </script>\n</body>\n</html>\n","numLines":1079,"startLine":1,"totalLines":1079}}}}
{"ts":"2025-11-05T02:21:55.348Z","event":"PreToolUse","phase":"","message":"PreToolUseäº‹ä»¶æ­£åœ¨æ‰§è¡Œ","description":"å·¥å…·æ‰§è¡Œå‰è§¦å‘ï¼Œå¯åŸºäºå‚æ•°é˜»æ­¢æˆ–è°ƒæ•´è°ƒç”¨ã€‚","doc_url":"https://docs.claude.com/zh-CN/docs/claude-code/hooks#pretooluse","payload":{"session_id":"c7c21516-7e1e-49b2-8ae5-4e1bb98e9692","transcript_path":"C:\\Users\\WTCL\\.claude\\projects\\i--claude-code-proxy\\c7c21516-7e1e-49b2-8ae5-4e1bb98e9692.jsonl","cwd":"i:\\claude-code-proxy","permission_mode":"acceptEdits","hook_event_name":"PreToolUse","tool_name":"Edit","tool_input":{"file_path":"i:\\claude-code-proxy\\analyze\\hooks.html","old_string":"                      <input type=\"file\" id=\"file-input\" accept=\".log,.txt\" style=\"display: none;\">","new_string":"                      <input type=\"file\" id=\"file-input\" accept=\".log,.txt,.jsonl\" style=\"display: none;\">"}}}
{"ts":"2025-11-05T02:21:57.086Z","event":"PostToolUse","phase":"","message":"PostToolUseäº‹ä»¶æ­£åœ¨æ‰§è¡Œ","description":"å·¥å…·æˆåŠŸæ‰§è¡Œåè§¦å‘ï¼Œå¸¸ç”¨äºæ ¼å¼åŒ–ã€æ ¡éªŒæˆ–è®°å½•ç»“æœã€‚","doc_url":"https://docs.claude.com/zh-CN/docs/claude-code/hooks#posttooluse","payload":{"session_id":"c7c21516-7e1e-49b2-8ae5-4e1bb98e9692","transcript_path":"C:\\Users\\WTCL\\.claude\\projects\\i--claude-code-proxy\\c7c21516-7e1e-49b2-8ae5-4e1bb98e9692.jsonl","cwd":"i:\\claude-code-proxy","permission_mode":"acceptEdits","hook_event_name":"PostToolUse","tool_name":"Edit","tool_input":{"file_path":"i:\\claude-code-proxy\\analyze\\hooks.html","old_string":"                      <input type=\"file\" id=\"file-input\" accept=\".log,.txt\" style=\"display: none;\">","new_string":"                      <input type=\"file\" id=\"file-input\" accept=\".log,.txt,.jsonl\" style=\"display: none;\">"},"tool_response":{"filePath":"i:\\claude-code-proxy\\analyze\\hooks.html","oldString":"                      <input type=\"file\" id=\"file-input\" accept=\".log,.txt\" style=\"display: none;\">","newString":"                      <input type=\"file\" id=\"file-input\" accept=\".log,.txt,.jsonl\" style=\"display: none;\">","originalFile":"<!DOCTYPE html>\n<html lang=\"zh-CN\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Hooks æ—¥å¿—åˆ†æ</title>\n    <style>\n        * {\n            margin: 0;\n            padding: 0;\n            box-sizing: border-box;\n        }\n\n        body {\n            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n            min-height: 100vh;\n            padding: 20px;\n        }\n\n        .container {\n            max-width: 1400px;\n            margin: 0 auto;\n        }\n\n        .header {\n            text-align: center;\n            color: white;\n            margin-bottom: 30px;\n        }\n\n        .header h1 {\n            font-size: 2.5rem;\n            margin-bottom: 10px;\n            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);\n        }\n\n        .header p {\n            font-size: 1.1rem;\n            opacity: 0.9;\n        }\n\n        /* æ–‡ä»¶ä¸Šä¼ ç»„ä»¶æ ·å¼ */\n        .upload-section {\n            margin-bottom: 30px;\n        }\n\n        .upload-card {\n            background: white;\n            border-radius: 15px;\n            padding: 25px;\n            box-shadow: 0 10px 30px rgba(0,0,0,0.1);\n            border: 2px dashed #cbd5e0;\n            transition: all 0.3s ease;\n        }\n\n        .upload-card:hover {\n            border-color: #667eea;\n            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.2);\n        }\n\n        .upload-header {\n            font-size: 1.2rem;\n            font-weight: bold;\n            color: #4a5568;\n            margin-bottom: 20px;\n            text-align: center;\n        }\n\n        .upload-area {\n            border: 2px dashed #e2e8f0;\n            border-radius: 10px;\n            padding: 40px 20px;\n            text-align: center;\n            transition: all 0.3s ease;\n            cursor: pointer;\n        }\n\n        .upload-area:hover {\n            border-color: #667eea;\n            background: #f7fafc;\n        }\n\n        .upload-area.dragover {\n            border-color: #667eea;\n            background: #edf2f7;\n            transform: scale(1.02);\n        }\n\n        .upload-icon {\n            font-size: 3rem;\n            margin-bottom: 15px;\n            opacity: 0.7;\n        }\n\n        .upload-text {\n            font-size: 1.1rem;\n            color: #4a5568;\n            margin-bottom: 10px;\n            font-weight: 500;\n        }\n\n        .upload-hint {\n            font-size: 0.9rem;\n            color: #718096;\n            margin-bottom: 20px;\n        }\n\n        .upload-btn {\n            background: #667eea;\n            color: white;\n            border: none;\n            padding: 12px 24px;\n            border-radius: 8px;\n            font-size: 1rem;\n            font-weight: 500;\n            cursor: pointer;\n            transition: all 0.3s ease;\n        }\n\n        .upload-btn:hover {\n            background: #5a67d8;\n            transform: translateY(-2px);\n            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);\n        }\n\n        .file-info {\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            background: #f7fafc;\n            padding: 15px 20px;\n            border-radius: 8px;\n            margin-top: 15px;\n        }\n\n        .file-name {\n            font-weight: 500;\n            color: #4a5568;\n            flex: 1;\n            overflow: hidden;\n            text-overflow: ellipsis;\n            white-space: nowrap;\n        }\n\n        .clear-btn {\n            background: #fc8181;\n            color: white;\n            border: none;\n            width: 30px;\n            height: 30px;\n            border-radius: 50%;\n            cursor: pointer;\n            font-size: 1rem;\n            transition: all 0.3s ease;\n        }\n\n        .clear-btn:hover {\n            background: #f56565;\n            transform: scale(1.1);\n        }\n\n        /* æ¶ˆæ¯æç¤ºæ ·å¼ */\n        .upload-message {\n            margin-top: 15px;\n            padding: 12px 16px;\n            border-radius: 8px;\n            font-size: 0.9rem;\n            animation: slideIn 0.3s ease;\n        }\n\n        .upload-success {\n            background: #d4edda;\n            color: #155724;\n            border: 1px solid #c3e6cb;\n        }\n\n        .upload-error {\n            background: #f8d7da;\n            color: #721c24;\n            border: 1px solid #f5c6cb;\n        }\n\n        @keyframes slideIn {\n            from {\n                opacity: 0;\n                transform: translateY(-10px);\n            }\n            to {\n                opacity: 1;\n                transform: translateY(0);\n            }\n        }\n\n        #file-input {\n            display: none;\n        }\n\n        .stats-grid {\n            display: grid;\n            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\n            gap: 20px;\n            margin-bottom: 30px;\n        }\n\n        .stat-card {\n            background: white;\n            border-radius: 15px;\n            padding: 25px;\n            box-shadow: 0 10px 30px rgba(0,0,0,0.2);\n            text-align: center;\n            transition: transform 0.3s ease, box-shadow 0.3s ease;\n        }\n\n        .stat-card:hover {\n            transform: translateY(-5px);\n            box-shadow: 0 15px 40px rgba(0,0,0,0.3);\n        }\n\n        .stat-number {\n            font-size: 3rem;\n            font-weight: bold;\n            margin-bottom: 10px;\n        }\n\n        .stat-label {\n            font-size: 1.1rem;\n            color: #666;\n            margin-bottom: 5px;\n        }\n\n        .stat-description {\n            font-size: 0.9rem;\n            color: #999;\n        }\n\n        .filter-section {\n            background: white;\n            border-radius: 15px;\n            padding: 20px;\n            box-shadow: 0 10px 30px rgba(0,0,0,0.2);\n            margin-bottom: 30px;\n        }\n\n        .filter-controls {\n            display: flex;\n            gap: 15px;\n            flex-wrap: wrap;\n            align-items: center;\n        }\n\n        .filter-group {\n            display: flex;\n            align-items: center;\n            gap: 10px;\n        }\n\n        .filter-label {\n            font-weight: bold;\n            color: #333;\n        }\n\n        .filter-select, .search-input {\n            padding: 8px 12px;\n            border: 2px solid #ddd;\n            border-radius: 5px;\n            font-size: 0.9rem;\n            transition: border-color 0.3s ease;\n        }\n\n        .filter-select:focus, .search-input:focus {\n            outline: none;\n            border-color: #667eea;\n        }\n\n        .search-input {\n            min-width: 200px;\n        }\n\n        .hooks-container {\n            display: grid;\n            gap: 30px;\n        }\n\n        .hook-item {\n            background: white;\n            border-radius: 15px;\n            padding: 25px;\n            box-shadow: 0 10px 30px rgba(0,0,0,0.2);\n        }\n\n        .hook-header {\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            margin-bottom: 20px;\n            padding-bottom: 15px;\n            border-bottom: 2px solid #667eea;\n        }\n\n        .hook-event {\n            font-size: 1.5rem;\n            font-weight: bold;\n            color: #667eea;\n        }\n\n        .hook-meta {\n            display: flex;\n            gap: 20px;\n            align-items: center;\n        }\n\n        .hook-timestamp {\n            font-size: 0.9rem;\n            color: #666;\n            background: #f0f4ff;\n            padding: 5px 12px;\n            border-radius: 20px;\n        }\n\n        .hook-message {\n            background: #f8f9fa;\n            border-left: 4px solid #667eea;\n            padding: 15px;\n            margin-bottom: 15px;\n            border-radius: 5px;\n        }\n\n        .hook-description {\n            color: #666;\n            font-style: italic;\n            margin-bottom: 15px;\n        }\n\n        .hook-details {\n            display: flex;\n            flex-direction: column;\n            gap: 20px;\n        }\n\n        .part-card {\n            background: #f8f9fa;\n            border-radius: 10px;\n            overflow: hidden;\n        }\n\n        .part-header {\n            background: #667eea;\n            color: white;\n            padding: 12px 15px;\n            font-weight: bold;\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            cursor: pointer;\n            transition: background 0.3s ease;\n        }\n\n        .part-header:hover {\n            background: #5a67d8;\n        }\n\n        .part-content {\n            padding: 15px;\n            font-family: 'Courier New', monospace;\n            font-size: 0.9rem;\n            background: #1a1a1a;\n            color: #ffffff;\n            overflow-y: auto;\n            white-space: pre-wrap;\n            line-height: 1.6;\n            min-height: 100px;\n            border-radius: 8px;\n            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.3);\n        }\n\n        .part-content.hidden {\n            display: none;\n        }\n\n        .toggle-icon {\n            transition: transform 0.3s ease;\n        }\n\n        .toggle-icon.rotated {\n            transform: rotate(180deg);\n        }\n\n        /* è‡ªå®šä¹‰æ»šåŠ¨æ¡æ ·å¼ */\n        .part-content::-webkit-scrollbar {\n            width: 8px;\n        }\n\n        .part-content::-webkit-scrollbar-track {\n            background: #2a2a2a;\n            border-radius: 4px;\n        }\n\n        .part-content::-webkit-scrollbar-thumb {\n            background: #4a4a4a;\n            border-radius: 4px;\n        }\n\n        .part-content::-webkit-scrollbar-thumb:hover {\n            background: #5a5a5a;\n        }\n\n        .event-badge {\n            display: inline-block;\n            padding: 4px 12px;\n            border-radius: 20px;\n            font-size: 0.8rem;\n            font-weight: bold;\n            margin-right: 10px;\n        }\n\n        .event-userprompt { background: #FF6B6B; color: white; }\n        .event-pretool { background: #4ECDC4; color: white; }\n        .event-posttool { background: #45B7D1; color: white; }\n        .event-notification { background: #9C27B0; color: white; }\n        .event-stop { background: #F44336; color: white; }\n        .event-subagent-stop { background: #FF9800; color: white; }\n        .event-pre-compact { background: #FFC107; color: white; }\n        .event-session-start { background: #4CAF50; color: white; }\n        .event-session-end { background: #607D8B; color: white; }\n        .event-default { background: #78909C; color: white; }\n\n        .no-data {\n            text-align: center;\n            padding: 60px 20px;\n            color: white;\n            font-size: 1.2rem;\n        }\n\n        .error-message {\n            background: #fff5f5;\n            border: 2px solid #fc8181;\n            color: #c53030;\n            padding: 20px;\n            border-radius: 10px;\n            text-align: center;\n            font-size: 1.1rem;\n            margin: 20px 0;\n        }\n\n        .json-key { color: #9C27B0; }\n        .json-string { color: #4CAF50; }\n        .json-number { color: #FF9800; }\n        .json-boolean { color: #F44336; }\n        .json-null { color: #9E9E9E; }\n        .json-url { color: #2196F3; text-decoration: underline; cursor: pointer; }\n\n        @media (max-width: 768px) {\n            .header h1 {\n                font-size: 2rem;\n            }\n\n            .stats-grid {\n                grid-template-columns: repeat(2, 1fr);\n            }\n\n            .filter-controls {\n                flex-direction: column;\n                align-items: stretch;\n            }\n\n            .search-input {\n                min-width: auto;\n            }\n        }\n    </style>\n</head>\n<body>\n    <div class=\"container\">\n        <div class=\"header\">\n            <h1>Hooks æ—¥å¿—åˆ†æ</h1>\n            <p>ä¸Šä¼ å¹¶åˆ†æ Claude Hooks äº‹ä»¶æ—¥å¿—</p>\n        </div>\n\n        <!-- æ–‡ä»¶ä¸Šä¼ ç»„ä»¶ -->\n        <div class=\"upload-section\">\n            <div class=\"upload-card\">\n                <div class=\"upload-header\">\n                    <span>ğŸ“ é€‰æ‹© Hooks æ—¥å¿—æ–‡ä»¶</span>\n                </div>\n                <div class=\"upload-area\" id=\"upload-area\">\n                    <div class=\"upload-content\">\n                        <div class=\"upload-icon\">ğŸ“„</div>\n                        <p class=\"upload-text\">ç‚¹å‡»é€‰æ‹©æ–‡ä»¶æˆ–æ‹–æ‹½æ–‡ä»¶åˆ°æ­¤å¤„</p>\n                        <p class=\"upload-hint\">æ”¯æŒ .log .txt .jsonl æ ¼å¼çš„æ—¥å¿—æ–‡ä»¶ï¼Œæ¯è¡Œä¸€ä¸ª JSON å¯¹è±¡ï¼Œæœ€å¤§50MB</p>\n                        <input type=\"file\" id=\"file-input\" accept=\".log,.txt\" style=\"display: none;\">\n                        <button class=\"upload-btn\" onclick=\"document.getElementById('file-input').click()\">é€‰æ‹©æ–‡ä»¶</button>\n                    </div>\n                </div>\n                <div class=\"file-info\" id=\"file-info\" style=\"display: none;\">\n                    <span class=\"file-name\" id=\"file-name\"></span>\n                    <button class=\"clear-btn\" onclick=\"clearFile()\">âœ•</button>\n                </div>\n            </div>\n        </div>\n\n        <div id=\"stats-section\" style=\"display: none;\">\n            <div class=\"stats-grid\">\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"total-hooks\">0</div>\n                    <div class=\"stat-label\">æ€»äº‹ä»¶æ•°</div>\n                    <div class=\"stat-description\">æ‰€æœ‰ Hooks äº‹ä»¶</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"user-prompts\">0</div>\n                    <div class=\"stat-label\">ç”¨æˆ·æç¤ºäº‹ä»¶</div>\n                    <div class=\"stat-description\">UserPromptSubmit</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"pre-tools\">0</div>\n                    <div class=\"stat-label\">å·¥å…·æ‰§è¡Œå‰äº‹ä»¶</div>\n                    <div class=\"stat-description\">PreToolUse</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"post-tools\">0</div>\n                    <div class=\"stat-label\">å·¥å…·æ‰§è¡Œåäº‹ä»¶</div>\n                    <div class=\"stat-description\">PostToolUse</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"notifications\">0</div>\n                    <div class=\"stat-label\">é€šçŸ¥äº‹ä»¶</div>\n                    <div class=\"stat-description\">Notification</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"stops\">0</div>\n                    <div class=\"stat-label\">åœæ­¢äº‹ä»¶</div>\n                    <div class=\"stat-description\">Stop</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"subagent-stops\">0</div>\n                    <div class=\"stat-label\">å­ä»£ç†åœæ­¢äº‹ä»¶</div>\n                    <div class=\"stat-description\">SubagentStop</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"pre-compacts\">0</div>\n                    <div class=\"stat-label\">å‹ç¼©å‰äº‹ä»¶</div>\n                    <div class=\"stat-description\">PreCompact</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"session-starts\">0</div>\n                    <div class=\"stat-label\">ä¼šè¯å¼€å§‹äº‹ä»¶</div>\n                    <div class=\"stat-description\">SessionStart</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"session-ends\">0</div>\n                    <div class=\"stat-label\">ä¼šè¯ç»“æŸäº‹ä»¶</div>\n                    <div class=\"stat-description\">SessionEnd</div>\n                </div>\n            </div>\n\n            <div class=\"filter-section\">\n                <div class=\"filter-controls\">\n                    <div class=\"filter-group\">\n                        <label class=\"filter-label\">äº‹ä»¶ç±»å‹ï¼š</label>\n                        <select class=\"filter-select\" id=\"event-filter\">\n                            <option value=\"\">å…¨éƒ¨</option>\n                            <option value=\"UserPromptSubmit\">UserPromptSubmit</option>\n                            <option value=\"PreToolUse\">PreToolUse</option>\n                            <option value=\"PostToolUse\">PostToolUse</option>\n                            <option value=\"Notification\">Notification</option>\n                            <option value=\"Stop\">Stop</option>\n                            <option value=\"SubagentStop\">SubagentStop</option>\n                            <option value=\"PreCompact\">PreCompact</option>\n                            <option value=\"SessionStart\">SessionStart</option>\n                            <option value=\"SessionEnd\">SessionEnd</option>\n                        </select>\n                    </div>\n                    <div class=\"filter-group\">\n                        <label class=\"filter-label\">æœç´¢ï¼š</label>\n                        <input type=\"text\" class=\"search-input\" id=\"search-input\" placeholder=\"æœç´¢äº‹ä»¶å†…å®¹...\">\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <div id=\"hooks-container\" class=\"hooks-container\"></div>\n\n\n\n        <div id=\"error-message\" class=\"error-message\" style=\"display: none;\"></div>\n    </div>\n\n    <script>\n        let hooksData = [];\n        let filteredData = [];\n\n        // æ–‡ä»¶ä¸Šä¼ ç›¸å…³å‡½æ•°\n        function setupFileUpload() {\n            const uploadArea = document.getElementById('upload-area');\n            const fileInput = document.getElementById('file-input');\n\n            // ç‚¹å‡»ä¸Šä¼ åŒºåŸŸè§¦å‘æ–‡ä»¶é€‰æ‹©ï¼ˆä½†ä¸åŒ…æ‹¬æŒ‰é’®ï¼‰\n            uploadArea.addEventListener('click', function(event) {\n                // å¦‚æœç‚¹å‡»çš„æ˜¯æŒ‰é’®ï¼Œä¸å¤„ç†\n                if (event.target.tagName === 'BUTTON' || event.target.closest('button')) {\n                    return;\n                }\n                fileInput.click();\n            });\n\n            // æ–‡ä»¶é€‰æ‹©äº‹ä»¶\n            fileInput.addEventListener('change', handleFileSelect);\n\n            // æ‹–æ‹½äº‹ä»¶\n            uploadArea.addEventListener('dragover', handleDragOver);\n            uploadArea.addEventListener('dragleave', handleDragLeave);\n            uploadArea.addEventListener('drop', handleDrop);\n        }\n\n\n        function handleDragOver(e) {\n            e.preventDefault();\n            e.currentTarget.classList.add('dragover');\n        }\n\n        function handleDragLeave(e) {\n            e.preventDefault();\n            e.currentTarget.classList.remove('dragover');\n        }\n\n        function handleDrop(e) {\n            e.preventDefault();\n            e.currentTarget.classList.remove('dragover');\n            handleFiles(e.dataTransfer.files);\n        }\n\n        function handleFileSelect(event) {\n            const files = event.target.files;\n            handleFiles(files);\n        }\n\n        function handleFiles(files) {\n            if (files.length === 0) return;\n\n            const file = files[0];\n\n            // æ£€æŸ¥æ–‡ä»¶ç±»å‹\n            const validTypes = ['.log', '.txt'];\n            const fileExtension = file.name.substring(file.name.lastIndexOf('.')).toLowerCase();\n\n            if (!validTypes.includes(fileExtension)) {\n                showErrorMessage('è¯·é€‰æ‹© .log æˆ– .txt æ ¼å¼çš„æ—¥å¿—æ–‡ä»¶');\n                return;\n            }\n\n            // æ£€æŸ¥æ–‡ä»¶å¤§å° (é™åˆ¶ä¸º50MB)\n            if (file.size > 50 * 1024 * 1024) {\n                showErrorMessage('æ–‡ä»¶å¤§å°ä¸èƒ½è¶…è¿‡50MB');\n                return;\n            }\n\n            // æ˜¾ç¤ºæ–‡ä»¶ä¿¡æ¯\n            showFileInfo(file);\n\n            // è¯»å–æ–‡ä»¶å†…å®¹\n            const reader = new FileReader();\n            reader.onload = function(e) {\n                try {\n                    const content = e.target.result;\n                    console.log('æ–‡ä»¶è¯»å–æˆåŠŸï¼Œå†…å®¹é•¿åº¦:', content.length);\n                    console.log('æ–‡ä»¶å†…å®¹å‰100å­—ç¬¦:', content.substring(0, 100));\n\n                    if (!content || content.trim().length === 0) {\n                        showErrorMessage('æ–‡ä»¶å†…å®¹ä¸ºç©º');\n                        return;\n                    }\n\n                    parseHooksData(content);\n                    showSuccessMessage(`æˆåŠŸåŠ è½½æ–‡ä»¶: ${file.name}`);\n                } catch (error) {\n                    console.error('æ–‡ä»¶è§£æå¼‚å¸¸:', error);\n                    showErrorMessage('æ–‡ä»¶è§£æå¤±è´¥ï¼š' + error.message);\n                }\n            };\n            reader.onerror = function(error) {\n                console.error('æ–‡ä»¶è¯»å–å¤±è´¥:', error);\n                showErrorMessage('æ–‡ä»¶è¯»å–å¤±è´¥');\n            };\n            reader.readAsText(file);\n        }\n\n        function showFileInfo(file) {\n            const fileInfo = document.getElementById('file-info');\n            const fileName = document.getElementById('file-name');\n            const uploadArea = document.getElementById('upload-area');\n\n            fileName.textContent = file.name;\n            fileInfo.style.display = 'flex';\n            uploadArea.style.display = 'none';\n        }\n\n        function clearFile() {\n            const fileInfo = document.getElementById('file-info');\n            const uploadArea = document.getElementById('upload-area');\n            const fileInput = document.getElementById('file-input');\n\n            fileInfo.style.display = 'none';\n            uploadArea.style.display = 'block';\n\n            // æ¸…ç©ºæ–‡ä»¶è¾“å…¥æ¡†çš„å€¼\n            fileInput.value = '';\n\n            // æ¸…ç©ºæ•°æ®\n            hooksData = [];\n            filteredData = [];\n\n            // æ¸…ç©ºæ˜¾ç¤ºåŒºåŸŸ\n            document.getElementById('hooks-container').innerHTML = '';\n            document.getElementById('no-data').style.display = 'block';\n            document.getElementById('stats-section').style.display = 'none';\n\n            // æ˜¾ç¤ºæç¤º\n            showSuccessMessage('å·²æ¸…ç©ºæ–‡ä»¶ï¼Œè¯·é‡æ–°é€‰æ‹©æ—¥å¿—æ–‡ä»¶');\n        }\n\n        function showSuccessMessage(message) {\n            showMessage(message, 'success');\n        }\n\n        function showErrorMessage(message) {\n            showMessage(message, 'error');\n        }\n\n        function showMessage(message, type) {\n            // ç§»é™¤ä¹‹å‰çš„æ¶ˆæ¯\n            const existingMessages = document.querySelectorAll('.upload-message');\n            existingMessages.forEach(msg => msg.remove());\n\n            const messageClass = type === 'success' ? 'upload-success' : 'upload-error';\n            const messageDiv = document.createElement('div');\n            messageDiv.className = `upload-message ${messageClass}`;\n            messageDiv.textContent = message;\n\n            document.querySelector('.upload-card').appendChild(messageDiv);\n\n            // 3ç§’åè‡ªåŠ¨æ¶ˆå¤±\n            setTimeout(() => {\n                messageDiv.style.opacity = '0';\n                setTimeout(() => {\n                    if (messageDiv.parentNode) {\n                        messageDiv.parentNode.removeChild(messageDiv);\n                    }\n                }, 300);\n            }, 3000);\n        }\n\n        // è§£æ hooks æ•°æ®\n        function parseHooksData(content) {\n            console.log('å¼€å§‹è§£æ hooks æ•°æ®ï¼Œå†…å®¹é•¿åº¦:', content.length);\n\n            hooksData = [];\n            const lines = content.split('\\n').filter(line => line.trim());\n            console.log('åˆ†å‰²åçš„è¡Œæ•°:', lines.length);\n\n            for (let i = 0; i < lines.length; i++) {\n                const line = lines[i];\n                try {\n                    const hookData = JSON.parse(line);\n                    hooksData.push(hookData);\n                    console.log(`æˆåŠŸè§£æç¬¬ ${i + 1} è¡Œï¼Œäº‹ä»¶ç±»å‹:`, hookData.event);\n                } catch (error) {\n                    console.error(`è§£æç¬¬ ${i + 1} è¡Œå¤±è´¥:`, error.message);\n                    console.error('é—®é¢˜è¡Œçš„å†…å®¹:', line.substring(0, 100) + (line.length > 100 ? '...' : ''));\n                }\n            }\n\n            console.log('è§£æå®Œæˆï¼Œæ€»å…±è§£æåˆ°', hooksData.length, 'ä¸ªæœ‰æ•ˆäº‹ä»¶');\n\n            if (hooksData.length === 0) {\n                showErrorMessage('æœªæ‰¾åˆ°æœ‰æ•ˆçš„ hooks æ•°æ®ã€‚è¯·ç¡®ä¿æ–‡ä»¶æ ¼å¼æ­£ç¡®ï¼Œæ¯è¡Œåº”è¯¥æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„JSONå¯¹è±¡ã€‚');\n                console.error('è§£æå¤±è´¥ï¼Œæ²¡æœ‰æ‰¾åˆ°æœ‰æ•ˆçš„hooksæ•°æ®');\n                return;\n            }\n\n            filteredData = [...hooksData];\n            console.log('å‡†å¤‡æ˜¾ç¤ºæ•°æ®ï¼Œè¿‡æ»¤åçš„äº‹ä»¶æ•°é‡:', filteredData.length);\n            displayData();\n        }\n\n        // æ˜¾ç¤ºæ•°æ®\n        function displayData() {\n            document.getElementById('no-data').style.display = 'none';\n            document.getElementById('error-message').style.display = 'none';\n            document.getElementById('stats-section').style.display = 'block';\n\n            updateStatistics();\n            renderHooks();\n        }\n\n        // æ›´æ–°ç»Ÿè®¡ä¿¡æ¯\n        function updateStatistics() {\n            const stats = {\n                total: filteredData.length,\n                userPrompts: filteredData.filter(h => h.event === 'UserPromptSubmit').length,\n                preTools: filteredData.filter(h => h.event === 'PreToolUse').length,\n                postTools: filteredData.filter(h => h.event === 'PostToolUse').length,\n                notifications: filteredData.filter(h => h.event === 'Notification').length,\n                stops: filteredData.filter(h => h.event === 'Stop').length,\n                subagentStops: filteredData.filter(h => h.event === 'SubagentStop').length,\n                preCompacts: filteredData.filter(h => h.event === 'PreCompact').length,\n                sessionStarts: filteredData.filter(h => h.event === 'SessionStart').length,\n                sessionEnds: filteredData.filter(h => h.event === 'SessionEnd').length\n            };\n\n            document.getElementById('total-hooks').textContent = stats.total;\n            document.getElementById('user-prompts').textContent = stats.userPrompts;\n            document.getElementById('pre-tools').textContent = stats.preTools;\n            document.getElementById('post-tools').textContent = stats.postTools;\n            document.getElementById('notifications').textContent = stats.notifications;\n            document.getElementById('stops').textContent = stats.stops;\n            document.getElementById('subagent-stops').textContent = stats.subagentStops;\n            document.getElementById('pre-compacts').textContent = stats.preCompacts;\n            document.getElementById('session-starts').textContent = stats.sessionStarts;\n            document.getElementById('session-ends').textContent = stats.sessionEnds;\n        }\n\n        // æ¸²æŸ“ hooks\n        function renderHooks() {\n            const container = document.getElementById('hooks-container');\n            container.innerHTML = '';\n\n            filteredData.forEach((hook, index) => {\n                const hookElement = createHookElement(hook, index);\n                container.appendChild(hookElement);\n            });\n\n            // æ·»åŠ åŠ¨ç”»\n            const elements = container.querySelectorAll('.hook-item');\n            elements.forEach((el, i) => {\n                el.style.opacity = '0';\n                el.style.transform = 'translateY(20px)';\n                setTimeout(() => {\n                    el.style.transition = 'opacity 0.3s ease, transform 0.3s ease';\n                    el.style.opacity = '1';\n                    el.style.transform = 'translateY(0)';\n                }, i * 50);\n            });\n        }\n\n        // åˆ›å»º hook å…ƒç´ \n        function createHookElement(hook, index) {\n            const div = document.createElement('div');\n            div.className = 'hook-item';\n\n            const eventClass = getEventClass(hook.event);\n            const formattedTime = formatTimestamp(hook.ts);\n            const eventDescription = getEventDescription(hook.event, hook.phase);\n\n            div.innerHTML = `\n                <div class=\"hook-header\">\n                    <div class=\"hook-event\">\n                        <span class=\"event-badge ${eventClass}\">${hook.event}</span>\n                    </div>\n                    <div class=\"hook-meta\">\n                        <div class=\"hook-timestamp\">${formattedTime}</div>\n                    </div>\n                </div>\n                <div class=\"hook-message\">${hook.message}</div>\n                <div class=\"hook-description\">${hook.description || eventDescription}</div>\n                <div class=\"hook-details\">\n                    <div class=\"part-card\">\n                        <div class=\"part-header\" onclick=\"toggleDetail('payload-${index}')\">\n                            <span>Payload</span>\n                            <span class=\"toggle-icon\" id=\"icon-payload-${index}\">â–¼</span>\n                        </div>\n                        <div class=\"part-content hidden\" id=\"payload-${index}\">\n                            ${formatJson(hook.payload)}\n                        </div>\n                    </div>\n                </div>\n            `;\n\n            return div;\n        }\n\n        // è·å–äº‹ä»¶æè¿°\n        function getEventDescription(event, phase) {\n            switch (event) {\n                case 'PreToolUse':\n                    return 'å·¥å…·æ‰§è¡Œå‰è§¦å‘ï¼Œå¯åŸºäºå‚æ•°é˜»æ­¢æˆ–è°ƒæ•´è°ƒç”¨ã€‚';\n                case 'PostToolUse':\n                    return 'å·¥å…·æˆåŠŸæ‰§è¡Œåè§¦å‘ï¼Œå¸¸ç”¨äºæ ¼å¼åŒ–ã€æ ¡éªŒæˆ–è®°å½•ç»“æœã€‚';\n                case 'UserPromptSubmit':\n                    return 'ç”¨æˆ·æäº¤æç¤ºå‰è§¦å‘ï¼Œå¯è¿›è¡Œæç¤ºæ ¡éªŒæˆ–å¢å¼ºã€‚';\n                case 'Notification':\n                    return 'å½“ç³»ç»Ÿå‘é€é€šçŸ¥ï¼ˆéœ€æˆæƒæˆ–ç­‰å¾…è¾“å…¥ï¼‰æ—¶è§¦å‘ã€‚';\n                case 'Stop':\n                    return 'ä¸»ä»£ç†å®Œæˆå“åº”æ—¶è§¦å‘ï¼ˆç”¨æˆ·ä¸­æ–­ä¸è§¦å‘ï¼‰ã€‚';\n                case 'SubagentStop':\n                    return 'å­ä»£ç†ä»»åŠ¡å®Œæˆæ—¶è§¦å‘ï¼Œç”¨äºè®°å½•å­ä»»åŠ¡ç»“æŸã€‚';\n                case 'PreCompact':\n                    return phase === 'manual'\n                        ? 'æ‰‹åŠ¨å‹ç¼©å‰è§¦å‘ï¼Œç”¨äºè®°å½•æˆ–å‡†å¤‡å‹ç¼©ã€‚'\n                        : 'è‡ªåŠ¨å‹ç¼©å‰è§¦å‘ï¼ˆä¸Šä¸‹æ–‡æ¥è¿‘ä¸Šé™ï¼‰ï¼Œç”¨äºè®°å½•æˆ–å‡†å¤‡å‹ç¼©ã€‚';\n                case 'SessionStart':\n                    switch (phase) {\n                        case 'startup':\n                            return 'æ–°ä¼šè¯å¯åŠ¨æ—¶è§¦å‘ï¼Œç”¨äºåŠ è½½ä¸Šä¸‹æ–‡æˆ–è®¾ç½®ç¯å¢ƒã€‚';\n                        case 'resume':\n                            return 'æ¢å¤ä¼šè¯æ—¶è§¦å‘ï¼Œç”¨äºç»§ç»­å…ˆå‰ä¸Šä¸‹æ–‡ã€‚';\n                        case 'clear':\n                            return 'æ¸…ç©ºä¼šè¯åè§¦å‘ï¼Œç”¨äºé‡ç½®ç¯å¢ƒä¸ä¸Šä¸‹æ–‡ã€‚';\n                        case 'compact':\n                            return 'å› å‹ç¼©æ“ä½œè§¦å‘çš„ä¼šè¯å¯åŠ¨ï¼Œç”¨äºç»´æŒä¸Šä¸‹æ–‡ã€‚';\n                        default:\n                            return 'ä¼šè¯å¯åŠ¨ç›¸å…³äº‹ä»¶ï¼Œåˆå§‹åŒ–æˆ–æ¢å¤ä¸Šä¸‹æ–‡ã€‚';\n                    }\n                case 'SessionEnd':\n                    return 'ä¼šè¯ç»“æŸæ—¶è§¦å‘ï¼Œå¸¸ç”¨äºæ”¶å°¾ä¸æ¸…ç†ã€‚';\n                default:\n                    return 'æœªçŸ¥äº‹ä»¶ã€‚';\n            }\n        }\n\n        // è·å–äº‹ä»¶æ ·å¼ç±»\n        function getEventClass(event) {\n            switch (event) {\n                case 'UserPromptSubmit': return 'event-userprompt';\n                case 'PreToolUse': return 'event-pretool';\n                case 'PostToolUse': return 'event-posttool';\n                case 'Notification': return 'event-notification';\n                case 'Stop': return 'event-stop';\n                case 'SubagentStop': return 'event-subagent-stop';\n                case 'PreCompact': return 'event-pre-compact';\n                case 'SessionStart': return 'event-session-start';\n                case 'SessionEnd': return 'event-session-end';\n                default: return 'event-default';\n            }\n        }\n\n        // æ ¼å¼åŒ–æ—¶é—´æˆ³\n        function formatTimestamp(ts) {\n            const date = new Date(ts);\n            return date.toLocaleString('zh-CN');\n        }\n\n        // æ ¼å¼åŒ– JSON\n        function formatJson(obj, indent = 0) {\n            if (!obj) return '';\n\n            try {\n                const spaces = '  '.repeat(indent);\n                let result = '';\n\n                if (Array.isArray(obj)) {\n                    result += '[\\n';\n                    obj.forEach((item, index) => {\n                        result += spaces + '  ';\n                        if (typeof item === 'object' && item !== null) {\n                            result += formatJson(item, indent + 1);\n                        } else {\n                            result += formatJsonValue(item);\n                        }\n                        if (index < obj.length - 1) result += ',';\n                        result += '\\n';\n                    });\n                    result += spaces + ']';\n                } else if (typeof obj === 'object' && obj !== null) {\n                    result += '{\\n';\n                    const keys = Object.keys(obj);\n                    keys.forEach((key, index) => {\n                        result += spaces + '  ';\n                        result += `<span class=\"json-key\">\"${escapeHtml(key)}\"</span>: `;\n\n                        if (typeof obj[key] === 'object' && obj[key] !== null) {\n                            result += formatJson(obj[key], indent + 1);\n                        } else {\n                            result += formatJsonValue(obj[key]);\n                        }\n\n                        if (index < keys.length - 1) result += ',';\n                        result += '\\n';\n                    });\n                    result += spaces + '}';\n                } else {\n                    result += formatJsonValue(obj);\n                }\n\n                return result;\n            } catch (error) {\n                return escapeHtml(JSON.stringify(obj));\n            }\n        }\n\n        // æ ¼å¼åŒ– JSON å€¼\n        function formatJsonValue(value) {\n            if (typeof value === 'string') {\n                if (value.startsWith('http://') || value.startsWith('https://')) {\n                    return `<span class=\"json-url\" onclick=\"window.open('${escapeHtml(value)}', '_blank')\">\"${escapeHtml(value)}\"</span>`;\n                }\n                return `<span class=\"json-string\">\"${escapeHtml(value)}\"</span>`;\n            } else if (typeof value === 'number') {\n                return `<span class=\"json-number\">${value}</span>`;\n            } else if (typeof value === 'boolean') {\n                return `<span class=\"json-boolean\">${value}</span>`;\n            } else if (value === null) {\n                return `<span class=\"json-null\">null</span>`;\n            } else {\n                return `<span style=\"color: #666;\">${value}</span>`;\n            }\n        }\n\n        // HTML è½¬ä¹‰\n        function escapeHtml(text) {\n            const div = document.createElement('div');\n            div.textContent = text;\n            return div.innerHTML;\n        }\n\n        // åˆ‡æ¢è¯¦æƒ…æ˜¾ç¤º\n        function toggleDetail(id) {\n            const content = document.getElementById(id);\n            const icon = document.getElementById('icon-' + id);\n\n            if (content.classList.contains('hidden')) {\n                content.classList.remove('hidden');\n                icon.classList.add('rotated');\n            } else {\n                content.classList.add('hidden');\n                icon.classList.remove('rotated');\n            }\n        }\n\n        // è¿‡æ»¤å’Œæœç´¢\n        document.getElementById('event-filter').addEventListener('change', applyFilters);\n        document.getElementById('search-input').addEventListener('input', applyFilters);\n\n        function applyFilters() {\n            const eventFilter = document.getElementById('event-filter').value;\n            const searchText = document.getElementById('search-input').value.toLowerCase();\n\n            filteredData = hooksData.filter(hook => {\n                const matchEvent = !eventFilter || hook.event === eventFilter;\n                const matchSearch = !searchText ||\n                    JSON.stringify(hook).toLowerCase().includes(searchText);\n\n                return matchEvent && matchSearch;\n            });\n\n            updateStatistics();\n            renderHooks();\n        }\n\n        // æ ¼å¼åŒ–æ–‡ä»¶å¤§å°\n        function formatFileSize(bytes) {\n            if (bytes === 0) return '0 Bytes';\n            const k = 1024;\n            const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n            const i = Math.floor(Math.log(bytes) / Math.log(k));\n            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n        }\n\n        // é¡µé¢åŠ è½½æ—¶æ‰§è¡Œ\n        document.addEventListener('DOMContentLoaded', function() {\n            // æ·»åŠ åˆå§‹åŠ è½½åŠ¨ç”»\n            const cards = document.querySelectorAll('.stat-card, .upload-card');\n            cards.forEach((card, index) => {\n                card.style.opacity = '0';\n                card.style.transform = 'translateY(20px)';\n                setTimeout(() => {\n                    card.style.transition = 'opacity 0.5s ease, transform 0.5s ease';\n                    card.style.opacity = '1';\n                    card.style.transform = 'translateY(0)';\n                }, index * 100);\n            });\n\n            // è®¾ç½®æ–‡ä»¶ä¸Šä¼ \n            setupFileUpload();\n        });\n\n            </script>\n</body>\n</html>\n","structuredPatch":[{"oldStart":488,"oldLines":7,"newStart":488,"newLines":7,"lines":["                         <div class=\"upload-icon\">ğŸ“„</div>","                         <p class=\"upload-text\">ç‚¹å‡»é€‰æ‹©æ–‡ä»¶æˆ–æ‹–æ‹½æ–‡ä»¶åˆ°æ­¤å¤„</p>","                         <p class=\"upload-hint\">æ”¯æŒ .log .txt .jsonl æ ¼å¼çš„æ—¥å¿—æ–‡ä»¶ï¼Œæ¯è¡Œä¸€ä¸ª JSON å¯¹è±¡ï¼Œæœ€å¤§50MB</p>","-                        <input type=\"file\" id=\"file-input\" accept=\".log,.txt\" style=\"display: none;\">","+                        <input type=\"file\" id=\"file-input\" accept=\".log,.txt,.jsonl\" style=\"display: none;\">","                         <button class=\"upload-btn\" onclick=\"document.getElementById('file-input').click()\">é€‰æ‹©æ–‡ä»¶</button>","                     </div>","                 </div>"]}],"userModified":false,"replaceAll":false}}}
{"ts":"2025-11-05T02:22:00.444Z","event":"PreToolUse","phase":"","message":"PreToolUseäº‹ä»¶æ­£åœ¨æ‰§è¡Œ","description":"å·¥å…·æ‰§è¡Œå‰è§¦å‘ï¼Œå¯åŸºäºå‚æ•°é˜»æ­¢æˆ–è°ƒæ•´è°ƒç”¨ã€‚","doc_url":"https://docs.claude.com/zh-CN/docs/claude-code/hooks#pretooluse","payload":{"session_id":"c7c21516-7e1e-49b2-8ae5-4e1bb98e9692","transcript_path":"C:\\Users\\WTCL\\.claude\\projects\\i--claude-code-proxy\\c7c21516-7e1e-49b2-8ae5-4e1bb98e9692.jsonl","cwd":"i:\\claude-code-proxy","permission_mode":"acceptEdits","hook_event_name":"PreToolUse","tool_name":"Edit","tool_input":{"file_path":"i:\\claude-code-proxy\\analyze\\hooks.html","old_string":"          // æ£€æŸ¥æ–‡ä»¶ç±»å‹\n            const validTypes = ['.log', '.txt'];\n            const fileExtension = file.name.substring(file.name.lastIndexOf('.')).toLowerCase();\n\n            if (!validTypes.includes(fileExtension)) {\n                showErrorMessage('è¯·é€‰æ‹© .log æˆ– .txt æ ¼å¼çš„æ—¥å¿—æ–‡ä»¶');\n                return;\n            }","new_string":"          // æ£€æŸ¥æ–‡ä»¶ç±»å‹\n            const validTypes = ['.log', '.txt', '.jsonl'];\n            const fileExtension = file.name.substring(file.name.lastIndexOf('.')).toLowerCase();\n\n            if (!validTypes.includes(fileExtension)) {\n                showErrorMessage('è¯·é€‰æ‹© .logã€.txt æˆ– .jsonl æ ¼å¼çš„æ—¥å¿—æ–‡ä»¶');\n                return;\n            }"}}}
{"ts":"2025-11-05T02:22:02.138Z","event":"PostToolUse","phase":"","message":"PostToolUseäº‹ä»¶æ­£åœ¨æ‰§è¡Œ","description":"å·¥å…·æˆåŠŸæ‰§è¡Œåè§¦å‘ï¼Œå¸¸ç”¨äºæ ¼å¼åŒ–ã€æ ¡éªŒæˆ–è®°å½•ç»“æœã€‚","doc_url":"https://docs.claude.com/zh-CN/docs/claude-code/hooks#posttooluse","payload":{"session_id":"c7c21516-7e1e-49b2-8ae5-4e1bb98e9692","transcript_path":"C:\\Users\\WTCL\\.claude\\projects\\i--claude-code-proxy\\c7c21516-7e1e-49b2-8ae5-4e1bb98e9692.jsonl","cwd":"i:\\claude-code-proxy","permission_mode":"acceptEdits","hook_event_name":"PostToolUse","tool_name":"Edit","tool_input":{"file_path":"i:\\claude-code-proxy\\analyze\\hooks.html","old_string":"          // æ£€æŸ¥æ–‡ä»¶ç±»å‹\n            const validTypes = ['.log', '.txt'];\n            const fileExtension = file.name.substring(file.name.lastIndexOf('.')).toLowerCase();\n\n            if (!validTypes.includes(fileExtension)) {\n                showErrorMessage('è¯·é€‰æ‹© .log æˆ– .txt æ ¼å¼çš„æ—¥å¿—æ–‡ä»¶');\n                return;\n            }","new_string":"          // æ£€æŸ¥æ–‡ä»¶ç±»å‹\n            const validTypes = ['.log', '.txt', '.jsonl'];\n            const fileExtension = file.name.substring(file.name.lastIndexOf('.')).toLowerCase();\n\n            if (!validTypes.includes(fileExtension)) {\n                showErrorMessage('è¯·é€‰æ‹© .logã€.txt æˆ– .jsonl æ ¼å¼çš„æ—¥å¿—æ–‡ä»¶');\n                return;\n            }"},"tool_response":{"filePath":"i:\\claude-code-proxy\\analyze\\hooks.html","oldString":"          // æ£€æŸ¥æ–‡ä»¶ç±»å‹\n            const validTypes = ['.log', '.txt'];\n            const fileExtension = file.name.substring(file.name.lastIndexOf('.')).toLowerCase();\n\n            if (!validTypes.includes(fileExtension)) {\n                showErrorMessage('è¯·é€‰æ‹© .log æˆ– .txt æ ¼å¼çš„æ—¥å¿—æ–‡ä»¶');\n                return;\n            }","newString":"          // æ£€æŸ¥æ–‡ä»¶ç±»å‹\n            const validTypes = ['.log', '.txt', '.jsonl'];\n            const fileExtension = file.name.substring(file.name.lastIndexOf('.')).toLowerCase();\n\n            if (!validTypes.includes(fileExtension)) {\n                showErrorMessage('è¯·é€‰æ‹© .logã€.txt æˆ– .jsonl æ ¼å¼çš„æ—¥å¿—æ–‡ä»¶');\n                return;\n            }","originalFile":"<!DOCTYPE html>\n<html lang=\"zh-CN\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Hooks æ—¥å¿—åˆ†æ</title>\n    <style>\n        * {\n            margin: 0;\n            padding: 0;\n            box-sizing: border-box;\n        }\n\n        body {\n            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n            min-height: 100vh;\n            padding: 20px;\n        }\n\n        .container {\n            max-width: 1400px;\n            margin: 0 auto;\n        }\n\n        .header {\n            text-align: center;\n            color: white;\n            margin-bottom: 30px;\n        }\n\n        .header h1 {\n            font-size: 2.5rem;\n            margin-bottom: 10px;\n            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);\n        }\n\n        .header p {\n            font-size: 1.1rem;\n            opacity: 0.9;\n        }\n\n        /* æ–‡ä»¶ä¸Šä¼ ç»„ä»¶æ ·å¼ */\n        .upload-section {\n            margin-bottom: 30px;\n        }\n\n        .upload-card {\n            background: white;\n            border-radius: 15px;\n            padding: 25px;\n            box-shadow: 0 10px 30px rgba(0,0,0,0.1);\n            border: 2px dashed #cbd5e0;\n            transition: all 0.3s ease;\n        }\n\n        .upload-card:hover {\n            border-color: #667eea;\n            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.2);\n        }\n\n        .upload-header {\n            font-size: 1.2rem;\n            font-weight: bold;\n            color: #4a5568;\n            margin-bottom: 20px;\n            text-align: center;\n        }\n\n        .upload-area {\n            border: 2px dashed #e2e8f0;\n            border-radius: 10px;\n            padding: 40px 20px;\n            text-align: center;\n            transition: all 0.3s ease;\n            cursor: pointer;\n        }\n\n        .upload-area:hover {\n            border-color: #667eea;\n            background: #f7fafc;\n        }\n\n        .upload-area.dragover {\n            border-color: #667eea;\n            background: #edf2f7;\n            transform: scale(1.02);\n        }\n\n        .upload-icon {\n            font-size: 3rem;\n            margin-bottom: 15px;\n            opacity: 0.7;\n        }\n\n        .upload-text {\n            font-size: 1.1rem;\n            color: #4a5568;\n            margin-bottom: 10px;\n            font-weight: 500;\n        }\n\n        .upload-hint {\n            font-size: 0.9rem;\n            color: #718096;\n            margin-bottom: 20px;\n        }\n\n        .upload-btn {\n            background: #667eea;\n            color: white;\n            border: none;\n            padding: 12px 24px;\n            border-radius: 8px;\n            font-size: 1rem;\n            font-weight: 500;\n            cursor: pointer;\n            transition: all 0.3s ease;\n        }\n\n        .upload-btn:hover {\n            background: #5a67d8;\n            transform: translateY(-2px);\n            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);\n        }\n\n        .file-info {\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            background: #f7fafc;\n            padding: 15px 20px;\n            border-radius: 8px;\n            margin-top: 15px;\n        }\n\n        .file-name {\n            font-weight: 500;\n            color: #4a5568;\n            flex: 1;\n            overflow: hidden;\n            text-overflow: ellipsis;\n            white-space: nowrap;\n        }\n\n        .clear-btn {\n            background: #fc8181;\n            color: white;\n            border: none;\n            width: 30px;\n            height: 30px;\n            border-radius: 50%;\n            cursor: pointer;\n            font-size: 1rem;\n            transition: all 0.3s ease;\n        }\n\n        .clear-btn:hover {\n            background: #f56565;\n            transform: scale(1.1);\n        }\n\n        /* æ¶ˆæ¯æç¤ºæ ·å¼ */\n        .upload-message {\n            margin-top: 15px;\n            padding: 12px 16px;\n            border-radius: 8px;\n            font-size: 0.9rem;\n            animation: slideIn 0.3s ease;\n        }\n\n        .upload-success {\n            background: #d4edda;\n            color: #155724;\n            border: 1px solid #c3e6cb;\n        }\n\n        .upload-error {\n            background: #f8d7da;\n            color: #721c24;\n            border: 1px solid #f5c6cb;\n        }\n\n        @keyframes slideIn {\n            from {\n                opacity: 0;\n                transform: translateY(-10px);\n            }\n            to {\n                opacity: 1;\n                transform: translateY(0);\n            }\n        }\n\n        #file-input {\n            display: none;\n        }\n\n        .stats-grid {\n            display: grid;\n            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\n            gap: 20px;\n            margin-bottom: 30px;\n        }\n\n        .stat-card {\n            background: white;\n            border-radius: 15px;\n            padding: 25px;\n            box-shadow: 0 10px 30px rgba(0,0,0,0.2);\n            text-align: center;\n            transition: transform 0.3s ease, box-shadow 0.3s ease;\n        }\n\n        .stat-card:hover {\n            transform: translateY(-5px);\n            box-shadow: 0 15px 40px rgba(0,0,0,0.3);\n        }\n\n        .stat-number {\n            font-size: 3rem;\n            font-weight: bold;\n            margin-bottom: 10px;\n        }\n\n        .stat-label {\n            font-size: 1.1rem;\n            color: #666;\n            margin-bottom: 5px;\n        }\n\n        .stat-description {\n            font-size: 0.9rem;\n            color: #999;\n        }\n\n        .filter-section {\n            background: white;\n            border-radius: 15px;\n            padding: 20px;\n            box-shadow: 0 10px 30px rgba(0,0,0,0.2);\n            margin-bottom: 30px;\n        }\n\n        .filter-controls {\n            display: flex;\n            gap: 15px;\n            flex-wrap: wrap;\n            align-items: center;\n        }\n\n        .filter-group {\n            display: flex;\n            align-items: center;\n            gap: 10px;\n        }\n\n        .filter-label {\n            font-weight: bold;\n            color: #333;\n        }\n\n        .filter-select, .search-input {\n            padding: 8px 12px;\n            border: 2px solid #ddd;\n            border-radius: 5px;\n            font-size: 0.9rem;\n            transition: border-color 0.3s ease;\n        }\n\n        .filter-select:focus, .search-input:focus {\n            outline: none;\n            border-color: #667eea;\n        }\n\n        .search-input {\n            min-width: 200px;\n        }\n\n        .hooks-container {\n            display: grid;\n            gap: 30px;\n        }\n\n        .hook-item {\n            background: white;\n            border-radius: 15px;\n            padding: 25px;\n            box-shadow: 0 10px 30px rgba(0,0,0,0.2);\n        }\n\n        .hook-header {\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            margin-bottom: 20px;\n            padding-bottom: 15px;\n            border-bottom: 2px solid #667eea;\n        }\n\n        .hook-event {\n            font-size: 1.5rem;\n            font-weight: bold;\n            color: #667eea;\n        }\n\n        .hook-meta {\n            display: flex;\n            gap: 20px;\n            align-items: center;\n        }\n\n        .hook-timestamp {\n            font-size: 0.9rem;\n            color: #666;\n            background: #f0f4ff;\n            padding: 5px 12px;\n            border-radius: 20px;\n        }\n\n        .hook-message {\n            background: #f8f9fa;\n            border-left: 4px solid #667eea;\n            padding: 15px;\n            margin-bottom: 15px;\n            border-radius: 5px;\n        }\n\n        .hook-description {\n            color: #666;\n            font-style: italic;\n            margin-bottom: 15px;\n        }\n\n        .hook-details {\n            display: flex;\n            flex-direction: column;\n            gap: 20px;\n        }\n\n        .part-card {\n            background: #f8f9fa;\n            border-radius: 10px;\n            overflow: hidden;\n        }\n\n        .part-header {\n            background: #667eea;\n            color: white;\n            padding: 12px 15px;\n            font-weight: bold;\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            cursor: pointer;\n            transition: background 0.3s ease;\n        }\n\n        .part-header:hover {\n            background: #5a67d8;\n        }\n\n        .part-content {\n            padding: 15px;\n            font-family: 'Courier New', monospace;\n            font-size: 0.9rem;\n            background: #1a1a1a;\n            color: #ffffff;\n            overflow-y: auto;\n            white-space: pre-wrap;\n            line-height: 1.6;\n            min-height: 100px;\n            border-radius: 8px;\n            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.3);\n        }\n\n        .part-content.hidden {\n            display: none;\n        }\n\n        .toggle-icon {\n            transition: transform 0.3s ease;\n        }\n\n        .toggle-icon.rotated {\n            transform: rotate(180deg);\n        }\n\n        /* è‡ªå®šä¹‰æ»šåŠ¨æ¡æ ·å¼ */\n        .part-content::-webkit-scrollbar {\n            width: 8px;\n        }\n\n        .part-content::-webkit-scrollbar-track {\n            background: #2a2a2a;\n            border-radius: 4px;\n        }\n\n        .part-content::-webkit-scrollbar-thumb {\n            background: #4a4a4a;\n            border-radius: 4px;\n        }\n\n        .part-content::-webkit-scrollbar-thumb:hover {\n            background: #5a5a5a;\n        }\n\n        .event-badge {\n            display: inline-block;\n            padding: 4px 12px;\n            border-radius: 20px;\n            font-size: 0.8rem;\n            font-weight: bold;\n            margin-right: 10px;\n        }\n\n        .event-userprompt { background: #FF6B6B; color: white; }\n        .event-pretool { background: #4ECDC4; color: white; }\n        .event-posttool { background: #45B7D1; color: white; }\n        .event-notification { background: #9C27B0; color: white; }\n        .event-stop { background: #F44336; color: white; }\n        .event-subagent-stop { background: #FF9800; color: white; }\n        .event-pre-compact { background: #FFC107; color: white; }\n        .event-session-start { background: #4CAF50; color: white; }\n        .event-session-end { background: #607D8B; color: white; }\n        .event-default { background: #78909C; color: white; }\n\n        .no-data {\n            text-align: center;\n            padding: 60px 20px;\n            color: white;\n            font-size: 1.2rem;\n        }\n\n        .error-message {\n            background: #fff5f5;\n            border: 2px solid #fc8181;\n            color: #c53030;\n            padding: 20px;\n            border-radius: 10px;\n            text-align: center;\n            font-size: 1.1rem;\n            margin: 20px 0;\n        }\n\n        .json-key { color: #9C27B0; }\n        .json-string { color: #4CAF50; }\n        .json-number { color: #FF9800; }\n        .json-boolean { color: #F44336; }\n        .json-null { color: #9E9E9E; }\n        .json-url { color: #2196F3; text-decoration: underline; cursor: pointer; }\n\n        @media (max-width: 768px) {\n            .header h1 {\n                font-size: 2rem;\n            }\n\n            .stats-grid {\n                grid-template-columns: repeat(2, 1fr);\n            }\n\n            .filter-controls {\n                flex-direction: column;\n                align-items: stretch;\n            }\n\n            .search-input {\n                min-width: auto;\n            }\n        }\n    </style>\n</head>\n<body>\n    <div class=\"container\">\n        <div class=\"header\">\n            <h1>Hooks æ—¥å¿—åˆ†æ</h1>\n            <p>ä¸Šä¼ å¹¶åˆ†æ Claude Hooks äº‹ä»¶æ—¥å¿—</p>\n        </div>\n\n        <!-- æ–‡ä»¶ä¸Šä¼ ç»„ä»¶ -->\n        <div class=\"upload-section\">\n            <div class=\"upload-card\">\n                <div class=\"upload-header\">\n                    <span>ğŸ“ é€‰æ‹© Hooks æ—¥å¿—æ–‡ä»¶</span>\n                </div>\n                <div class=\"upload-area\" id=\"upload-area\">\n                    <div class=\"upload-content\">\n                        <div class=\"upload-icon\">ğŸ“„</div>\n                        <p class=\"upload-text\">ç‚¹å‡»é€‰æ‹©æ–‡ä»¶æˆ–æ‹–æ‹½æ–‡ä»¶åˆ°æ­¤å¤„</p>\n                        <p class=\"upload-hint\">æ”¯æŒ .log .txt .jsonl æ ¼å¼çš„æ—¥å¿—æ–‡ä»¶ï¼Œæ¯è¡Œä¸€ä¸ª JSON å¯¹è±¡ï¼Œæœ€å¤§50MB</p>\n                        <input type=\"file\" id=\"file-input\" accept=\".log,.txt,.jsonl\" style=\"display: none;\">\n                        <button class=\"upload-btn\" onclick=\"document.getElementById('file-input').click()\">é€‰æ‹©æ–‡ä»¶</button>\n                    </div>\n                </div>\n                <div class=\"file-info\" id=\"file-info\" style=\"display: none;\">\n                    <span class=\"file-name\" id=\"file-name\"></span>\n                    <button class=\"clear-btn\" onclick=\"clearFile()\">âœ•</button>\n                </div>\n            </div>\n        </div>\n\n        <div id=\"stats-section\" style=\"display: none;\">\n            <div class=\"stats-grid\">\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"total-hooks\">0</div>\n                    <div class=\"stat-label\">æ€»äº‹ä»¶æ•°</div>\n                    <div class=\"stat-description\">æ‰€æœ‰ Hooks äº‹ä»¶</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"user-prompts\">0</div>\n                    <div class=\"stat-label\">ç”¨æˆ·æç¤ºäº‹ä»¶</div>\n                    <div class=\"stat-description\">UserPromptSubmit</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"pre-tools\">0</div>\n                    <div class=\"stat-label\">å·¥å…·æ‰§è¡Œå‰äº‹ä»¶</div>\n                    <div class=\"stat-description\">PreToolUse</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"post-tools\">0</div>\n                    <div class=\"stat-label\">å·¥å…·æ‰§è¡Œåäº‹ä»¶</div>\n                    <div class=\"stat-description\">PostToolUse</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"notifications\">0</div>\n                    <div class=\"stat-label\">é€šçŸ¥äº‹ä»¶</div>\n                    <div class=\"stat-description\">Notification</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"stops\">0</div>\n                    <div class=\"stat-label\">åœæ­¢äº‹ä»¶</div>\n                    <div class=\"stat-description\">Stop</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"subagent-stops\">0</div>\n                    <div class=\"stat-label\">å­ä»£ç†åœæ­¢äº‹ä»¶</div>\n                    <div class=\"stat-description\">SubagentStop</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"pre-compacts\">0</div>\n                    <div class=\"stat-label\">å‹ç¼©å‰äº‹ä»¶</div>\n                    <div class=\"stat-description\">PreCompact</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"session-starts\">0</div>\n                    <div class=\"stat-label\">ä¼šè¯å¼€å§‹äº‹ä»¶</div>\n                    <div class=\"stat-description\">SessionStart</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"session-ends\">0</div>\n                    <div class=\"stat-label\">ä¼šè¯ç»“æŸäº‹ä»¶</div>\n                    <div class=\"stat-description\">SessionEnd</div>\n                </div>\n            </div>\n\n            <div class=\"filter-section\">\n                <div class=\"filter-controls\">\n                    <div class=\"filter-group\">\n                        <label class=\"filter-label\">äº‹ä»¶ç±»å‹ï¼š</label>\n                        <select class=\"filter-select\" id=\"event-filter\">\n                            <option value=\"\">å…¨éƒ¨</option>\n                            <option value=\"UserPromptSubmit\">UserPromptSubmit</option>\n                            <option value=\"PreToolUse\">PreToolUse</option>\n                            <option value=\"PostToolUse\">PostToolUse</option>\n                            <option value=\"Notification\">Notification</option>\n                            <option value=\"Stop\">Stop</option>\n                            <option value=\"SubagentStop\">SubagentStop</option>\n                            <option value=\"PreCompact\">PreCompact</option>\n                            <option value=\"SessionStart\">SessionStart</option>\n                            <option value=\"SessionEnd\">SessionEnd</option>\n                        </select>\n                    </div>\n                    <div class=\"filter-group\">\n                        <label class=\"filter-label\">æœç´¢ï¼š</label>\n                        <input type=\"text\" class=\"search-input\" id=\"search-input\" placeholder=\"æœç´¢äº‹ä»¶å†…å®¹...\">\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <div id=\"hooks-container\" class=\"hooks-container\"></div>\n\n\n\n        <div id=\"error-message\" class=\"error-message\" style=\"display: none;\"></div>\n    </div>\n\n    <script>\n        let hooksData = [];\n        let filteredData = [];\n\n        // æ–‡ä»¶ä¸Šä¼ ç›¸å…³å‡½æ•°\n        function setupFileUpload() {\n            const uploadArea = document.getElementById('upload-area');\n            const fileInput = document.getElementById('file-input');\n\n            // ç‚¹å‡»ä¸Šä¼ åŒºåŸŸè§¦å‘æ–‡ä»¶é€‰æ‹©ï¼ˆä½†ä¸åŒ…æ‹¬æŒ‰é’®ï¼‰\n            uploadArea.addEventListener('click', function(event) {\n                // å¦‚æœç‚¹å‡»çš„æ˜¯æŒ‰é’®ï¼Œä¸å¤„ç†\n                if (event.target.tagName === 'BUTTON' || event.target.closest('button')) {\n                    return;\n                }\n                fileInput.click();\n            });\n\n            // æ–‡ä»¶é€‰æ‹©äº‹ä»¶\n            fileInput.addEventListener('change', handleFileSelect);\n\n            // æ‹–æ‹½äº‹ä»¶\n            uploadArea.addEventListener('dragover', handleDragOver);\n            uploadArea.addEventListener('dragleave', handleDragLeave);\n            uploadArea.addEventListener('drop', handleDrop);\n        }\n\n\n        function handleDragOver(e) {\n            e.preventDefault();\n            e.currentTarget.classList.add('dragover');\n        }\n\n        function handleDragLeave(e) {\n            e.preventDefault();\n            e.currentTarget.classList.remove('dragover');\n        }\n\n        function handleDrop(e) {\n            e.preventDefault();\n            e.currentTarget.classList.remove('dragover');\n            handleFiles(e.dataTransfer.files);\n        }\n\n        function handleFileSelect(event) {\n            const files = event.target.files;\n            handleFiles(files);\n        }\n\n        function handleFiles(files) {\n            if (files.length === 0) return;\n\n            const file = files[0];\n\n            // æ£€æŸ¥æ–‡ä»¶ç±»å‹\n            const validTypes = ['.log', '.txt'];\n            const fileExtension = file.name.substring(file.name.lastIndexOf('.')).toLowerCase();\n\n            if (!validTypes.includes(fileExtension)) {\n                showErrorMessage('è¯·é€‰æ‹© .log æˆ– .txt æ ¼å¼çš„æ—¥å¿—æ–‡ä»¶');\n                return;\n            }\n\n            // æ£€æŸ¥æ–‡ä»¶å¤§å° (é™åˆ¶ä¸º50MB)\n            if (file.size > 50 * 1024 * 1024) {\n                showErrorMessage('æ–‡ä»¶å¤§å°ä¸èƒ½è¶…è¿‡50MB');\n                return;\n            }\n\n            // æ˜¾ç¤ºæ–‡ä»¶ä¿¡æ¯\n            showFileInfo(file);\n\n            // è¯»å–æ–‡ä»¶å†…å®¹\n            const reader = new FileReader();\n            reader.onload = function(e) {\n                try {\n                    const content = e.target.result;\n                    console.log('æ–‡ä»¶è¯»å–æˆåŠŸï¼Œå†…å®¹é•¿åº¦:', content.length);\n                    console.log('æ–‡ä»¶å†…å®¹å‰100å­—ç¬¦:', content.substring(0, 100));\n\n                    if (!content || content.trim().length === 0) {\n                        showErrorMessage('æ–‡ä»¶å†…å®¹ä¸ºç©º');\n                        return;\n                    }\n\n                    parseHooksData(content);\n                    showSuccessMessage(`æˆåŠŸåŠ è½½æ–‡ä»¶: ${file.name}`);\n                } catch (error) {\n                    console.error('æ–‡ä»¶è§£æå¼‚å¸¸:', error);\n                    showErrorMessage('æ–‡ä»¶è§£æå¤±è´¥ï¼š' + error.message);\n                }\n            };\n            reader.onerror = function(error) {\n                console.error('æ–‡ä»¶è¯»å–å¤±è´¥:', error);\n                showErrorMessage('æ–‡ä»¶è¯»å–å¤±è´¥');\n            };\n            reader.readAsText(file);\n        }\n\n        function showFileInfo(file) {\n            const fileInfo = document.getElementById('file-info');\n            const fileName = document.getElementById('file-name');\n            const uploadArea = document.getElementById('upload-area');\n\n            fileName.textContent = file.name;\n            fileInfo.style.display = 'flex';\n            uploadArea.style.display = 'none';\n        }\n\n        function clearFile() {\n            const fileInfo = document.getElementById('file-info');\n            const uploadArea = document.getElementById('upload-area');\n            const fileInput = document.getElementById('file-input');\n\n            fileInfo.style.display = 'none';\n            uploadArea.style.display = 'block';\n\n            // æ¸…ç©ºæ–‡ä»¶è¾“å…¥æ¡†çš„å€¼\n            fileInput.value = '';\n\n            // æ¸…ç©ºæ•°æ®\n            hooksData = [];\n            filteredData = [];\n\n            // æ¸…ç©ºæ˜¾ç¤ºåŒºåŸŸ\n            document.getElementById('hooks-container').innerHTML = '';\n            document.getElementById('no-data').style.display = 'block';\n            document.getElementById('stats-section').style.display = 'none';\n\n            // æ˜¾ç¤ºæç¤º\n            showSuccessMessage('å·²æ¸…ç©ºæ–‡ä»¶ï¼Œè¯·é‡æ–°é€‰æ‹©æ—¥å¿—æ–‡ä»¶');\n        }\n\n        function showSuccessMessage(message) {\n            showMessage(message, 'success');\n        }\n\n        function showErrorMessage(message) {\n            showMessage(message, 'error');\n        }\n\n        function showMessage(message, type) {\n            // ç§»é™¤ä¹‹å‰çš„æ¶ˆæ¯\n            const existingMessages = document.querySelectorAll('.upload-message');\n            existingMessages.forEach(msg => msg.remove());\n\n            const messageClass = type === 'success' ? 'upload-success' : 'upload-error';\n            const messageDiv = document.createElement('div');\n            messageDiv.className = `upload-message ${messageClass}`;\n            messageDiv.textContent = message;\n\n            document.querySelector('.upload-card').appendChild(messageDiv);\n\n            // 3ç§’åè‡ªåŠ¨æ¶ˆå¤±\n            setTimeout(() => {\n                messageDiv.style.opacity = '0';\n                setTimeout(() => {\n                    if (messageDiv.parentNode) {\n                        messageDiv.parentNode.removeChild(messageDiv);\n                    }\n                }, 300);\n            }, 3000);\n        }\n\n        // è§£æ hooks æ•°æ®\n        function parseHooksData(content) {\n            console.log('å¼€å§‹è§£æ hooks æ•°æ®ï¼Œå†…å®¹é•¿åº¦:', content.length);\n\n            hooksData = [];\n            const lines = content.split('\\n').filter(line => line.trim());\n            console.log('åˆ†å‰²åçš„è¡Œæ•°:', lines.length);\n\n            for (let i = 0; i < lines.length; i++) {\n                const line = lines[i];\n                try {\n                    const hookData = JSON.parse(line);\n                    hooksData.push(hookData);\n                    console.log(`æˆåŠŸè§£æç¬¬ ${i + 1} è¡Œï¼Œäº‹ä»¶ç±»å‹:`, hookData.event);\n                } catch (error) {\n                    console.error(`è§£æç¬¬ ${i + 1} è¡Œå¤±è´¥:`, error.message);\n                    console.error('é—®é¢˜è¡Œçš„å†…å®¹:', line.substring(0, 100) + (line.length > 100 ? '...' : ''));\n                }\n            }\n\n            console.log('è§£æå®Œæˆï¼Œæ€»å…±è§£æåˆ°', hooksData.length, 'ä¸ªæœ‰æ•ˆäº‹ä»¶');\n\n            if (hooksData.length === 0) {\n                showErrorMessage('æœªæ‰¾åˆ°æœ‰æ•ˆçš„ hooks æ•°æ®ã€‚è¯·ç¡®ä¿æ–‡ä»¶æ ¼å¼æ­£ç¡®ï¼Œæ¯è¡Œåº”è¯¥æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„JSONå¯¹è±¡ã€‚');\n                console.error('è§£æå¤±è´¥ï¼Œæ²¡æœ‰æ‰¾åˆ°æœ‰æ•ˆçš„hooksæ•°æ®');\n                return;\n            }\n\n            filteredData = [...hooksData];\n            console.log('å‡†å¤‡æ˜¾ç¤ºæ•°æ®ï¼Œè¿‡æ»¤åçš„äº‹ä»¶æ•°é‡:', filteredData.length);\n            displayData();\n        }\n\n        // æ˜¾ç¤ºæ•°æ®\n        function displayData() {\n            document.getElementById('no-data').style.display = 'none';\n            document.getElementById('error-message').style.display = 'none';\n            document.getElementById('stats-section').style.display = 'block';\n\n            updateStatistics();\n            renderHooks();\n        }\n\n        // æ›´æ–°ç»Ÿè®¡ä¿¡æ¯\n        function updateStatistics() {\n            const stats = {\n                total: filteredData.length,\n                userPrompts: filteredData.filter(h => h.event === 'UserPromptSubmit').length,\n                preTools: filteredData.filter(h => h.event === 'PreToolUse').length,\n                postTools: filteredData.filter(h => h.event === 'PostToolUse').length,\n                notifications: filteredData.filter(h => h.event === 'Notification').length,\n                stops: filteredData.filter(h => h.event === 'Stop').length,\n                subagentStops: filteredData.filter(h => h.event === 'SubagentStop').length,\n                preCompacts: filteredData.filter(h => h.event === 'PreCompact').length,\n                sessionStarts: filteredData.filter(h => h.event === 'SessionStart').length,\n                sessionEnds: filteredData.filter(h => h.event === 'SessionEnd').length\n            };\n\n            document.getElementById('total-hooks').textContent = stats.total;\n            document.getElementById('user-prompts').textContent = stats.userPrompts;\n            document.getElementById('pre-tools').textContent = stats.preTools;\n            document.getElementById('post-tools').textContent = stats.postTools;\n            document.getElementById('notifications').textContent = stats.notifications;\n            document.getElementById('stops').textContent = stats.stops;\n            document.getElementById('subagent-stops').textContent = stats.subagentStops;\n            document.getElementById('pre-compacts').textContent = stats.preCompacts;\n            document.getElementById('session-starts').textContent = stats.sessionStarts;\n            document.getElementById('session-ends').textContent = stats.sessionEnds;\n        }\n\n        // æ¸²æŸ“ hooks\n        function renderHooks() {\n            const container = document.getElementById('hooks-container');\n            container.innerHTML = '';\n\n            filteredData.forEach((hook, index) => {\n                const hookElement = createHookElement(hook, index);\n                container.appendChild(hookElement);\n            });\n\n            // æ·»åŠ åŠ¨ç”»\n            const elements = container.querySelectorAll('.hook-item');\n            elements.forEach((el, i) => {\n                el.style.opacity = '0';\n                el.style.transform = 'translateY(20px)';\n                setTimeout(() => {\n                    el.style.transition = 'opacity 0.3s ease, transform 0.3s ease';\n                    el.style.opacity = '1';\n                    el.style.transform = 'translateY(0)';\n                }, i * 50);\n            });\n        }\n\n        // åˆ›å»º hook å…ƒç´ \n        function createHookElement(hook, index) {\n            const div = document.createElement('div');\n            div.className = 'hook-item';\n\n            const eventClass = getEventClass(hook.event);\n            const formattedTime = formatTimestamp(hook.ts);\n            const eventDescription = getEventDescription(hook.event, hook.phase);\n\n            div.innerHTML = `\n                <div class=\"hook-header\">\n                    <div class=\"hook-event\">\n                        <span class=\"event-badge ${eventClass}\">${hook.event}</span>\n                    </div>\n                    <div class=\"hook-meta\">\n                        <div class=\"hook-timestamp\">${formattedTime}</div>\n                    </div>\n                </div>\n                <div class=\"hook-message\">${hook.message}</div>\n                <div class=\"hook-description\">${hook.description || eventDescription}</div>\n                <div class=\"hook-details\">\n                    <div class=\"part-card\">\n                        <div class=\"part-header\" onclick=\"toggleDetail('payload-${index}')\">\n                            <span>Payload</span>\n                            <span class=\"toggle-icon\" id=\"icon-payload-${index}\">â–¼</span>\n                        </div>\n                        <div class=\"part-content hidden\" id=\"payload-${index}\">\n                            ${formatJson(hook.payload)}\n                        </div>\n                    </div>\n                </div>\n            `;\n\n            return div;\n        }\n\n        // è·å–äº‹ä»¶æè¿°\n        function getEventDescription(event, phase) {\n            switch (event) {\n                case 'PreToolUse':\n                    return 'å·¥å…·æ‰§è¡Œå‰è§¦å‘ï¼Œå¯åŸºäºå‚æ•°é˜»æ­¢æˆ–è°ƒæ•´è°ƒç”¨ã€‚';\n                case 'PostToolUse':\n                    return 'å·¥å…·æˆåŠŸæ‰§è¡Œåè§¦å‘ï¼Œå¸¸ç”¨äºæ ¼å¼åŒ–ã€æ ¡éªŒæˆ–è®°å½•ç»“æœã€‚';\n                case 'UserPromptSubmit':\n                    return 'ç”¨æˆ·æäº¤æç¤ºå‰è§¦å‘ï¼Œå¯è¿›è¡Œæç¤ºæ ¡éªŒæˆ–å¢å¼ºã€‚';\n                case 'Notification':\n                    return 'å½“ç³»ç»Ÿå‘é€é€šçŸ¥ï¼ˆéœ€æˆæƒæˆ–ç­‰å¾…è¾“å…¥ï¼‰æ—¶è§¦å‘ã€‚';\n                case 'Stop':\n                    return 'ä¸»ä»£ç†å®Œæˆå“åº”æ—¶è§¦å‘ï¼ˆç”¨æˆ·ä¸­æ–­ä¸è§¦å‘ï¼‰ã€‚';\n                case 'SubagentStop':\n                    return 'å­ä»£ç†ä»»åŠ¡å®Œæˆæ—¶è§¦å‘ï¼Œç”¨äºè®°å½•å­ä»»åŠ¡ç»“æŸã€‚';\n                case 'PreCompact':\n                    return phase === 'manual'\n                        ? 'æ‰‹åŠ¨å‹ç¼©å‰è§¦å‘ï¼Œç”¨äºè®°å½•æˆ–å‡†å¤‡å‹ç¼©ã€‚'\n                        : 'è‡ªåŠ¨å‹ç¼©å‰è§¦å‘ï¼ˆä¸Šä¸‹æ–‡æ¥è¿‘ä¸Šé™ï¼‰ï¼Œç”¨äºè®°å½•æˆ–å‡†å¤‡å‹ç¼©ã€‚';\n                case 'SessionStart':\n                    switch (phase) {\n                        case 'startup':\n                            return 'æ–°ä¼šè¯å¯åŠ¨æ—¶è§¦å‘ï¼Œç”¨äºåŠ è½½ä¸Šä¸‹æ–‡æˆ–è®¾ç½®ç¯å¢ƒã€‚';\n                        case 'resume':\n                            return 'æ¢å¤ä¼šè¯æ—¶è§¦å‘ï¼Œç”¨äºç»§ç»­å…ˆå‰ä¸Šä¸‹æ–‡ã€‚';\n                        case 'clear':\n                            return 'æ¸…ç©ºä¼šè¯åè§¦å‘ï¼Œç”¨äºé‡ç½®ç¯å¢ƒä¸ä¸Šä¸‹æ–‡ã€‚';\n                        case 'compact':\n                            return 'å› å‹ç¼©æ“ä½œè§¦å‘çš„ä¼šè¯å¯åŠ¨ï¼Œç”¨äºç»´æŒä¸Šä¸‹æ–‡ã€‚';\n                        default:\n                            return 'ä¼šè¯å¯åŠ¨ç›¸å…³äº‹ä»¶ï¼Œåˆå§‹åŒ–æˆ–æ¢å¤ä¸Šä¸‹æ–‡ã€‚';\n                    }\n                case 'SessionEnd':\n                    return 'ä¼šè¯ç»“æŸæ—¶è§¦å‘ï¼Œå¸¸ç”¨äºæ”¶å°¾ä¸æ¸…ç†ã€‚';\n                default:\n                    return 'æœªçŸ¥äº‹ä»¶ã€‚';\n            }\n        }\n\n        // è·å–äº‹ä»¶æ ·å¼ç±»\n        function getEventClass(event) {\n            switch (event) {\n                case 'UserPromptSubmit': return 'event-userprompt';\n                case 'PreToolUse': return 'event-pretool';\n                case 'PostToolUse': return 'event-posttool';\n                case 'Notification': return 'event-notification';\n                case 'Stop': return 'event-stop';\n                case 'SubagentStop': return 'event-subagent-stop';\n                case 'PreCompact': return 'event-pre-compact';\n                case 'SessionStart': return 'event-session-start';\n                case 'SessionEnd': return 'event-session-end';\n                default: return 'event-default';\n            }\n        }\n\n        // æ ¼å¼åŒ–æ—¶é—´æˆ³\n        function formatTimestamp(ts) {\n            const date = new Date(ts);\n            return date.toLocaleString('zh-CN');\n        }\n\n        // æ ¼å¼åŒ– JSON\n        function formatJson(obj, indent = 0) {\n            if (!obj) return '';\n\n            try {\n                const spaces = '  '.repeat(indent);\n                let result = '';\n\n                if (Array.isArray(obj)) {\n                    result += '[\\n';\n                    obj.forEach((item, index) => {\n                        result += spaces + '  ';\n                        if (typeof item === 'object' && item !== null) {\n                            result += formatJson(item, indent + 1);\n                        } else {\n                            result += formatJsonValue(item);\n                        }\n                        if (index < obj.length - 1) result += ',';\n                        result += '\\n';\n                    });\n                    result += spaces + ']';\n                } else if (typeof obj === 'object' && obj !== null) {\n                    result += '{\\n';\n                    const keys = Object.keys(obj);\n                    keys.forEach((key, index) => {\n                        result += spaces + '  ';\n                        result += `<span class=\"json-key\">\"${escapeHtml(key)}\"</span>: `;\n\n                        if (typeof obj[key] === 'object' && obj[key] !== null) {\n                            result += formatJson(obj[key], indent + 1);\n                        } else {\n                            result += formatJsonValue(obj[key]);\n                        }\n\n                        if (index < keys.length - 1) result += ',';\n                        result += '\\n';\n                    });\n                    result += spaces + '}';\n                } else {\n                    result += formatJsonValue(obj);\n                }\n\n                return result;\n            } catch (error) {\n                return escapeHtml(JSON.stringify(obj));\n            }\n        }\n\n        // æ ¼å¼åŒ– JSON å€¼\n        function formatJsonValue(value) {\n            if (typeof value === 'string') {\n                if (value.startsWith('http://') || value.startsWith('https://')) {\n                    return `<span class=\"json-url\" onclick=\"window.open('${escapeHtml(value)}', '_blank')\">\"${escapeHtml(value)}\"</span>`;\n                }\n                return `<span class=\"json-string\">\"${escapeHtml(value)}\"</span>`;\n            } else if (typeof value === 'number') {\n                return `<span class=\"json-number\">${value}</span>`;\n            } else if (typeof value === 'boolean') {\n                return `<span class=\"json-boolean\">${value}</span>`;\n            } else if (value === null) {\n                return `<span class=\"json-null\">null</span>`;\n            } else {\n                return `<span style=\"color: #666;\">${value}</span>`;\n            }\n        }\n\n        // HTML è½¬ä¹‰\n        function escapeHtml(text) {\n            const div = document.createElement('div');\n            div.textContent = text;\n            return div.innerHTML;\n        }\n\n        // åˆ‡æ¢è¯¦æƒ…æ˜¾ç¤º\n        function toggleDetail(id) {\n            const content = document.getElementById(id);\n            const icon = document.getElementById('icon-' + id);\n\n            if (content.classList.contains('hidden')) {\n                content.classList.remove('hidden');\n                icon.classList.add('rotated');\n            } else {\n                content.classList.add('hidden');\n                icon.classList.remove('rotated');\n            }\n        }\n\n        // è¿‡æ»¤å’Œæœç´¢\n        document.getElementById('event-filter').addEventListener('change', applyFilters);\n        document.getElementById('search-input').addEventListener('input', applyFilters);\n\n        function applyFilters() {\n            const eventFilter = document.getElementById('event-filter').value;\n            const searchText = document.getElementById('search-input').value.toLowerCase();\n\n            filteredData = hooksData.filter(hook => {\n                const matchEvent = !eventFilter || hook.event === eventFilter;\n                const matchSearch = !searchText ||\n                    JSON.stringify(hook).toLowerCase().includes(searchText);\n\n                return matchEvent && matchSearch;\n            });\n\n            updateStatistics();\n            renderHooks();\n        }\n\n        // æ ¼å¼åŒ–æ–‡ä»¶å¤§å°\n        function formatFileSize(bytes) {\n            if (bytes === 0) return '0 Bytes';\n            const k = 1024;\n            const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n            const i = Math.floor(Math.log(bytes) / Math.log(k));\n            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n        }\n\n        // é¡µé¢åŠ è½½æ—¶æ‰§è¡Œ\n        document.addEventListener('DOMContentLoaded', function() {\n            // æ·»åŠ åˆå§‹åŠ è½½åŠ¨ç”»\n            const cards = document.querySelectorAll('.stat-card, .upload-card');\n            cards.forEach((card, index) => {\n                card.style.opacity = '0';\n                card.style.transform = 'translateY(20px)';\n                setTimeout(() => {\n                    card.style.transition = 'opacity 0.5s ease, transform 0.5s ease';\n                    card.style.opacity = '1';\n                    card.style.transform = 'translateY(0)';\n                }, index * 100);\n            });\n\n            // è®¾ç½®æ–‡ä»¶ä¸Šä¼ \n            setupFileUpload();\n        });\n\n            </script>\n</body>\n</html>\n","structuredPatch":[{"oldStart":640,"oldLines":11,"newStart":640,"newLines":11,"lines":["             const file = files[0];"," ","             // æ£€æŸ¥æ–‡ä»¶ç±»å‹","-            const validTypes = ['.log', '.txt'];","+            const validTypes = ['.log', '.txt', '.jsonl'];","             const fileExtension = file.name.substring(file.name.lastIndexOf('.')).toLowerCase();"," ","             if (!validTypes.includes(fileExtension)) {","-                showErrorMessage('è¯·é€‰æ‹© .log æˆ– .txt æ ¼å¼çš„æ—¥å¿—æ–‡ä»¶');","+                showErrorMessage('è¯·é€‰æ‹© .logã€.txt æˆ– .jsonl æ ¼å¼çš„æ—¥å¿—æ–‡ä»¶');","                 return;","             }"," "]}],"userModified":false,"replaceAll":false}}}
{"ts":"2025-11-05T02:22:05.305Z","event":"Stop","phase":"","message":"Stopäº‹ä»¶æ­£åœ¨æ‰§è¡Œ","description":"ä¸»ä»£ç†å®Œæˆå“åº”æ—¶è§¦å‘ï¼ˆç”¨æˆ·ä¸­æ–­ä¸è§¦å‘ï¼‰ã€‚","doc_url":"https://docs.claude.com/zh-CN/docs/claude-code/hooks#stop","payload":{"session_id":"c7c21516-7e1e-49b2-8ae5-4e1bb98e9692","transcript_path":"C:\\Users\\WTCL\\.claude\\projects\\i--claude-code-proxy\\c7c21516-7e1e-49b2-8ae5-4e1bb98e9692.jsonl","cwd":"i:\\claude-code-proxy","permission_mode":"acceptEdits","hook_event_name":"Stop","stop_hook_active":false}}
{"ts":"2025-11-05T02:25:21.897Z","event":"UserPromptSubmit","phase":"","message":"UserPromptSubmitäº‹ä»¶æ­£åœ¨æ‰§è¡Œ","description":"ç”¨æˆ·æäº¤æç¤ºå‰è§¦å‘ï¼Œå¯è¿›è¡Œæç¤ºæ ¡éªŒæˆ–å¢å¼ºã€‚","doc_url":"https://docs.claude.com/zh-CN/docs/claude-code/hooks#userpromptsubmit","payload":{"session_id":"c7c21516-7e1e-49b2-8ae5-4e1bb98e9692","transcript_path":"C:\\Users\\WTCL\\.claude\\projects\\i--claude-code-proxy\\c7c21516-7e1e-49b2-8ae5-4e1bb98e9692.jsonl","cwd":"i:\\claude-code-proxy","permission_mode":"acceptEdits","hook_event_name":"UserPromptSubmit","prompt":"<ide_selection>The user selected the lines 1 to 1 from i:\\claude-code-proxy\\.claude\\hooks.log:\ntranscript_path\n\nThis may or may not be related to the current task.</ide_selection>\nä¸æ˜¯è¦ä¸Šä¼ jsonlæ–‡ä»¶ï¼Œæ˜¯æ˜¾ç¤ºå“ªäº›æ¡æ•°æ®ä¸­æœ‰transcript_pathè¿™ä¸ªå­—æ®µï¼Œåœ¨å½“å‰æ¡æ˜¾ç¤ºå‡ºæ¥ï¼Œä»£ç æˆ‘å·²ç»è¿˜åŸäº†ï¼Œå®ç°æˆ‘ç°åœ¨è¯´çš„åŠŸèƒ½å°±è¡Œ"}}
{"ts":"2025-11-05T02:25:25.440Z","event":"PreToolUse","phase":"","message":"PreToolUseäº‹ä»¶æ­£åœ¨æ‰§è¡Œ","description":"å·¥å…·æ‰§è¡Œå‰è§¦å‘ï¼Œå¯åŸºäºå‚æ•°é˜»æ­¢æˆ–è°ƒæ•´è°ƒç”¨ã€‚","doc_url":"https://docs.claude.com/zh-CN/docs/claude-code/hooks#pretooluse","payload":{"session_id":"c7c21516-7e1e-49b2-8ae5-4e1bb98e9692","transcript_path":"C:\\Users\\WTCL\\.claude\\projects\\i--claude-code-proxy\\c7c21516-7e1e-49b2-8ae5-4e1bb98e9692.jsonl","cwd":"i:\\claude-code-proxy","permission_mode":"acceptEdits","hook_event_name":"PreToolUse","tool_name":"TodoWrite","tool_input":{"todos":[{"content":"åœ¨ hooks.html ä¸­æ·»åŠ  transcript_path å­—æ®µæ£€æµ‹å’Œæ˜¾ç¤ºåŠŸèƒ½","status":"in_progress","activeForm":"æ·»åŠ  transcript_path å­—æ®µæ£€æµ‹å’Œæ˜¾ç¤ºåŠŸèƒ½"}]}}}
{"ts":"2025-11-05T02:25:25.652Z","event":"PostToolUse","phase":"","message":"PostToolUseäº‹ä»¶æ­£åœ¨æ‰§è¡Œ","description":"å·¥å…·æˆåŠŸæ‰§è¡Œåè§¦å‘ï¼Œå¸¸ç”¨äºæ ¼å¼åŒ–ã€æ ¡éªŒæˆ–è®°å½•ç»“æœã€‚","doc_url":"https://docs.claude.com/zh-CN/docs/claude-code/hooks#posttooluse","payload":{"session_id":"c7c21516-7e1e-49b2-8ae5-4e1bb98e9692","transcript_path":"C:\\Users\\WTCL\\.claude\\projects\\i--claude-code-proxy\\c7c21516-7e1e-49b2-8ae5-4e1bb98e9692.jsonl","cwd":"i:\\claude-code-proxy","permission_mode":"acceptEdits","hook_event_name":"PostToolUse","tool_name":"TodoWrite","tool_input":{"todos":[{"content":"åœ¨ hooks.html ä¸­æ·»åŠ  transcript_path å­—æ®µæ£€æµ‹å’Œæ˜¾ç¤ºåŠŸèƒ½","status":"in_progress","activeForm":"æ·»åŠ  transcript_path å­—æ®µæ£€æµ‹å’Œæ˜¾ç¤ºåŠŸèƒ½"}]},"tool_response":{"oldTodos":[],"newTodos":[{"content":"åœ¨ hooks.html ä¸­æ·»åŠ  transcript_path å­—æ®µæ£€æµ‹å’Œæ˜¾ç¤ºåŠŸèƒ½","status":"in_progress","activeForm":"æ·»åŠ  transcript_path å­—æ®µæ£€æµ‹å’Œæ˜¾ç¤ºåŠŸèƒ½"}]}}}
{"ts":"2025-11-05T02:25:28.253Z","event":"PreToolUse","phase":"","message":"PreToolUseäº‹ä»¶æ­£åœ¨æ‰§è¡Œ","description":"å·¥å…·æ‰§è¡Œå‰è§¦å‘ï¼Œå¯åŸºäºå‚æ•°é˜»æ­¢æˆ–è°ƒæ•´è°ƒç”¨ã€‚","doc_url":"https://docs.claude.com/zh-CN/docs/claude-code/hooks#pretooluse","payload":{"session_id":"c7c21516-7e1e-49b2-8ae5-4e1bb98e9692","transcript_path":"C:\\Users\\WTCL\\.claude\\projects\\i--claude-code-proxy\\c7c21516-7e1e-49b2-8ae5-4e1bb98e9692.jsonl","cwd":"i:\\claude-code-proxy","permission_mode":"acceptEdits","hook_event_name":"PreToolUse","tool_name":"Edit","tool_input":{"file_path":"i:\\claude-code-proxy\\analyze\\hooks.html","old_string":"      .json-url { color: #2196F3; text-decoration: underline; cursor: pointer; }\n\n        @media (max-width: 768px) {","new_string":"      .json-url { color: #2196F3; text-decoration: underline; cursor: pointer; }\n\n        .transcript-path {\n            background: #fff3cd;\n            border: 1px solid #ffeaa7;\n            border-radius: 5px;\n            padding: 8px 12px;\n            margin-top: 10px;\n            font-size: 0.9rem;\n        }\n\n        .transcript-path-label {\n            font-weight: bold;\n            color: #856404;\n            margin-bottom: 5px;\n        }\n\n        .transcript-path-value {\n            color: #856404;\n            word-break: break-all;\n            font-family: monospace;\n            background: #f8f9fa;\n            padding: 4px 8px;\n            border-radius: 3px;\n        }\n\n        .has-transcript-badge {\n            background: #ffc107;\n            color: #212529;\n            padding: 2px 8px;\n            border-radius: 12px;\n            font-size: 0.7rem;\n            font-weight: bold;\n            margin-left: 10px;\n        }\n\n        @media (max-width: 768px) {"}}}
{"ts":"2025-11-05T02:25:29.913Z","event":"PostToolUse","phase":"","message":"PostToolUseäº‹ä»¶æ­£åœ¨æ‰§è¡Œ","description":"å·¥å…·æˆåŠŸæ‰§è¡Œåè§¦å‘ï¼Œå¸¸ç”¨äºæ ¼å¼åŒ–ã€æ ¡éªŒæˆ–è®°å½•ç»“æœã€‚","doc_url":"https://docs.claude.com/zh-CN/docs/claude-code/hooks#posttooluse","payload":{"session_id":"c7c21516-7e1e-49b2-8ae5-4e1bb98e9692","transcript_path":"C:\\Users\\WTCL\\.claude\\projects\\i--claude-code-proxy\\c7c21516-7e1e-49b2-8ae5-4e1bb98e9692.jsonl","cwd":"i:\\claude-code-proxy","permission_mode":"acceptEdits","hook_event_name":"PostToolUse","tool_name":"Edit","tool_input":{"file_path":"i:\\claude-code-proxy\\analyze\\hooks.html","old_string":"      .json-url { color: #2196F3; text-decoration: underline; cursor: pointer; }\n\n        @media (max-width: 768px) {","new_string":"      .json-url { color: #2196F3; text-decoration: underline; cursor: pointer; }\n\n        .transcript-path {\n            background: #fff3cd;\n            border: 1px solid #ffeaa7;\n            border-radius: 5px;\n            padding: 8px 12px;\n            margin-top: 10px;\n            font-size: 0.9rem;\n        }\n\n        .transcript-path-label {\n            font-weight: bold;\n            color: #856404;\n            margin-bottom: 5px;\n        }\n\n        .transcript-path-value {\n            color: #856404;\n            word-break: break-all;\n            font-family: monospace;\n            background: #f8f9fa;\n            padding: 4px 8px;\n            border-radius: 3px;\n        }\n\n        .has-transcript-badge {\n            background: #ffc107;\n            color: #212529;\n            padding: 2px 8px;\n            border-radius: 12px;\n            font-size: 0.7rem;\n            font-weight: bold;\n            margin-left: 10px;\n        }\n\n        @media (max-width: 768px) {"},"tool_response":{"filePath":"i:\\claude-code-proxy\\analyze\\hooks.html","oldString":"      .json-url { color: #2196F3; text-decoration: underline; cursor: pointer; }\n\n        @media (max-width: 768px) {","newString":"      .json-url { color: #2196F3; text-decoration: underline; cursor: pointer; }\n\n        .transcript-path {\n            background: #fff3cd;\n            border: 1px solid #ffeaa7;\n            border-radius: 5px;\n            padding: 8px 12px;\n            margin-top: 10px;\n            font-size: 0.9rem;\n        }\n\n        .transcript-path-label {\n            font-weight: bold;\n            color: #856404;\n            margin-bottom: 5px;\n        }\n\n        .transcript-path-value {\n            color: #856404;\n            word-break: break-all;\n            font-family: monospace;\n            background: #f8f9fa;\n            padding: 4px 8px;\n            border-radius: 3px;\n        }\n\n        .has-transcript-badge {\n            background: #ffc107;\n            color: #212529;\n            padding: 2px 8px;\n            border-radius: 12px;\n            font-size: 0.7rem;\n            font-weight: bold;\n            margin-left: 10px;\n        }\n\n        @media (max-width: 768px) {","originalFile":"<!DOCTYPE html>\n<html lang=\"zh-CN\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Hooks æ—¥å¿—åˆ†æ</title>\n    <style>\n        * {\n            margin: 0;\n            padding: 0;\n            box-sizing: border-box;\n        }\n\n        body {\n            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n            min-height: 100vh;\n            padding: 20px;\n        }\n\n        .container {\n            max-width: 1400px;\n            margin: 0 auto;\n        }\n\n        .header {\n            text-align: center;\n            color: white;\n            margin-bottom: 30px;\n        }\n\n        .header h1 {\n            font-size: 2.5rem;\n            margin-bottom: 10px;\n            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);\n        }\n\n        .header p {\n            font-size: 1.1rem;\n            opacity: 0.9;\n        }\n\n        /* æ–‡ä»¶ä¸Šä¼ ç»„ä»¶æ ·å¼ */\n        .upload-section {\n            margin-bottom: 30px;\n        }\n\n        .upload-card {\n            background: white;\n            border-radius: 15px;\n            padding: 25px;\n            box-shadow: 0 10px 30px rgba(0,0,0,0.1);\n            border: 2px dashed #cbd5e0;\n            transition: all 0.3s ease;\n        }\n\n        .upload-card:hover {\n            border-color: #667eea;\n            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.2);\n        }\n\n        .upload-header {\n            font-size: 1.2rem;\n            font-weight: bold;\n            color: #4a5568;\n            margin-bottom: 20px;\n            text-align: center;\n        }\n\n        .upload-area {\n            border: 2px dashed #e2e8f0;\n            border-radius: 10px;\n            padding: 40px 20px;\n            text-align: center;\n            transition: all 0.3s ease;\n            cursor: pointer;\n        }\n\n        .upload-area:hover {\n            border-color: #667eea;\n            background: #f7fafc;\n        }\n\n        .upload-area.dragover {\n            border-color: #667eea;\n            background: #edf2f7;\n            transform: scale(1.02);\n        }\n\n        .upload-icon {\n            font-size: 3rem;\n            margin-bottom: 15px;\n            opacity: 0.7;\n        }\n\n        .upload-text {\n            font-size: 1.1rem;\n            color: #4a5568;\n            margin-bottom: 10px;\n            font-weight: 500;\n        }\n\n        .upload-hint {\n            font-size: 0.9rem;\n            color: #718096;\n            margin-bottom: 20px;\n        }\n\n        .upload-btn {\n            background: #667eea;\n            color: white;\n            border: none;\n            padding: 12px 24px;\n            border-radius: 8px;\n            font-size: 1rem;\n            font-weight: 500;\n            cursor: pointer;\n            transition: all 0.3s ease;\n        }\n\n        .upload-btn:hover {\n            background: #5a67d8;\n            transform: translateY(-2px);\n            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);\n        }\n\n        .file-info {\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            background: #f7fafc;\n            padding: 15px 20px;\n            border-radius: 8px;\n            margin-top: 15px;\n        }\n\n        .file-name {\n            font-weight: 500;\n            color: #4a5568;\n            flex: 1;\n            overflow: hidden;\n            text-overflow: ellipsis;\n            white-space: nowrap;\n        }\n\n        .clear-btn {\n            background: #fc8181;\n            color: white;\n            border: none;\n            width: 30px;\n            height: 30px;\n            border-radius: 50%;\n            cursor: pointer;\n            font-size: 1rem;\n            transition: all 0.3s ease;\n        }\n\n        .clear-btn:hover {\n            background: #f56565;\n            transform: scale(1.1);\n        }\n\n        /* æ¶ˆæ¯æç¤ºæ ·å¼ */\n        .upload-message {\n            margin-top: 15px;\n            padding: 12px 16px;\n            border-radius: 8px;\n            font-size: 0.9rem;\n            animation: slideIn 0.3s ease;\n        }\n\n        .upload-success {\n            background: #d4edda;\n            color: #155724;\n            border: 1px solid #c3e6cb;\n        }\n\n        .upload-error {\n            background: #f8d7da;\n            color: #721c24;\n            border: 1px solid #f5c6cb;\n        }\n\n        @keyframes slideIn {\n            from {\n                opacity: 0;\n                transform: translateY(-10px);\n            }\n            to {\n                opacity: 1;\n                transform: translateY(0);\n            }\n        }\n\n        #file-input {\n            display: none;\n        }\n\n        .stats-grid {\n            display: grid;\n            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\n            gap: 20px;\n            margin-bottom: 30px;\n        }\n\n        .stat-card {\n            background: white;\n            border-radius: 15px;\n            padding: 25px;\n            box-shadow: 0 10px 30px rgba(0,0,0,0.2);\n            text-align: center;\n            transition: transform 0.3s ease, box-shadow 0.3s ease;\n        }\n\n        .stat-card:hover {\n            transform: translateY(-5px);\n            box-shadow: 0 15px 40px rgba(0,0,0,0.3);\n        }\n\n        .stat-number {\n            font-size: 3rem;\n            font-weight: bold;\n            margin-bottom: 10px;\n        }\n\n        .stat-label {\n            font-size: 1.1rem;\n            color: #666;\n            margin-bottom: 5px;\n        }\n\n        .stat-description {\n            font-size: 0.9rem;\n            color: #999;\n        }\n\n        .filter-section {\n            background: white;\n            border-radius: 15px;\n            padding: 20px;\n            box-shadow: 0 10px 30px rgba(0,0,0,0.2);\n            margin-bottom: 30px;\n        }\n\n        .filter-controls {\n            display: flex;\n            gap: 15px;\n            flex-wrap: wrap;\n            align-items: center;\n        }\n\n        .filter-group {\n            display: flex;\n            align-items: center;\n            gap: 10px;\n        }\n\n        .filter-label {\n            font-weight: bold;\n            color: #333;\n        }\n\n        .filter-select, .search-input {\n            padding: 8px 12px;\n            border: 2px solid #ddd;\n            border-radius: 5px;\n            font-size: 0.9rem;\n            transition: border-color 0.3s ease;\n        }\n\n        .filter-select:focus, .search-input:focus {\n            outline: none;\n            border-color: #667eea;\n        }\n\n        .search-input {\n            min-width: 200px;\n        }\n\n        .hooks-container {\n            display: grid;\n            gap: 30px;\n        }\n\n        .hook-item {\n            background: white;\n            border-radius: 15px;\n            padding: 25px;\n            box-shadow: 0 10px 30px rgba(0,0,0,0.2);\n        }\n\n        .hook-header {\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            margin-bottom: 20px;\n            padding-bottom: 15px;\n            border-bottom: 2px solid #667eea;\n        }\n\n        .hook-event {\n            font-size: 1.5rem;\n            font-weight: bold;\n            color: #667eea;\n        }\n\n        .hook-meta {\n            display: flex;\n            gap: 20px;\n            align-items: center;\n        }\n\n        .hook-timestamp {\n            font-size: 0.9rem;\n            color: #666;\n            background: #f0f4ff;\n            padding: 5px 12px;\n            border-radius: 20px;\n        }\n\n        .hook-message {\n            background: #f8f9fa;\n            border-left: 4px solid #667eea;\n            padding: 15px;\n            margin-bottom: 15px;\n            border-radius: 5px;\n        }\n\n        .hook-description {\n            color: #666;\n            font-style: italic;\n            margin-bottom: 15px;\n        }\n\n        .hook-details {\n            display: flex;\n            flex-direction: column;\n            gap: 20px;\n        }\n\n        .part-card {\n            background: #f8f9fa;\n            border-radius: 10px;\n            overflow: hidden;\n        }\n\n        .part-header {\n            background: #667eea;\n            color: white;\n            padding: 12px 15px;\n            font-weight: bold;\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            cursor: pointer;\n            transition: background 0.3s ease;\n        }\n\n        .part-header:hover {\n            background: #5a67d8;\n        }\n\n        .part-content {\n            padding: 15px;\n            font-family: 'Courier New', monospace;\n            font-size: 0.9rem;\n            background: #1a1a1a;\n            color: #ffffff;\n            overflow-y: auto;\n            white-space: pre-wrap;\n            line-height: 1.6;\n            min-height: 100px;\n            border-radius: 8px;\n            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.3);\n        }\n\n        .part-content.hidden {\n            display: none;\n        }\n\n        .toggle-icon {\n            transition: transform 0.3s ease;\n        }\n\n        .toggle-icon.rotated {\n            transform: rotate(180deg);\n        }\n\n        /* è‡ªå®šä¹‰æ»šåŠ¨æ¡æ ·å¼ */\n        .part-content::-webkit-scrollbar {\n            width: 8px;\n        }\n\n        .part-content::-webkit-scrollbar-track {\n            background: #2a2a2a;\n            border-radius: 4px;\n        }\n\n        .part-content::-webkit-scrollbar-thumb {\n            background: #4a4a4a;\n            border-radius: 4px;\n        }\n\n        .part-content::-webkit-scrollbar-thumb:hover {\n            background: #5a5a5a;\n        }\n\n        .event-badge {\n            display: inline-block;\n            padding: 4px 12px;\n            border-radius: 20px;\n            font-size: 0.8rem;\n            font-weight: bold;\n            margin-right: 10px;\n        }\n\n        .event-userprompt { background: #FF6B6B; color: white; }\n        .event-pretool { background: #4ECDC4; color: white; }\n        .event-posttool { background: #45B7D1; color: white; }\n        .event-notification { background: #9C27B0; color: white; }\n        .event-stop { background: #F44336; color: white; }\n        .event-subagent-stop { background: #FF9800; color: white; }\n        .event-pre-compact { background: #FFC107; color: white; }\n        .event-session-start { background: #4CAF50; color: white; }\n        .event-session-end { background: #607D8B; color: white; }\n        .event-default { background: #78909C; color: white; }\n\n        .no-data {\n            text-align: center;\n            padding: 60px 20px;\n            color: white;\n            font-size: 1.2rem;\n        }\n\n        .error-message {\n            background: #fff5f5;\n            border: 2px solid #fc8181;\n            color: #c53030;\n            padding: 20px;\n            border-radius: 10px;\n            text-align: center;\n            font-size: 1.1rem;\n            margin: 20px 0;\n        }\n\n        .json-key { color: #9C27B0; }\n        .json-string { color: #4CAF50; }\n        .json-number { color: #FF9800; }\n        .json-boolean { color: #F44336; }\n        .json-null { color: #9E9E9E; }\n        .json-url { color: #2196F3; text-decoration: underline; cursor: pointer; }\n\n        @media (max-width: 768px) {\n            .header h1 {\n                font-size: 2rem;\n            }\n\n            .stats-grid {\n                grid-template-columns: repeat(2, 1fr);\n            }\n\n            .filter-controls {\n                flex-direction: column;\n                align-items: stretch;\n            }\n\n            .search-input {\n                min-width: auto;\n            }\n        }\n    </style>\n</head>\n<body>\n    <div class=\"container\">\n        <div class=\"header\">\n            <h1>Hooks æ—¥å¿—åˆ†æ</h1>\n            <p>ä¸Šä¼ å¹¶åˆ†æ Claude Hooks äº‹ä»¶æ—¥å¿—</p>\n        </div>\n\n        <!-- æ–‡ä»¶ä¸Šä¼ ç»„ä»¶ -->\n        <div class=\"upload-section\">\n            <div class=\"upload-card\">\n                <div class=\"upload-header\">\n                    <span>ğŸ“ é€‰æ‹© Hooks æ—¥å¿—æ–‡ä»¶</span>\n                </div>\n                <div class=\"upload-area\" id=\"upload-area\">\n                    <div class=\"upload-content\">\n                        <div class=\"upload-icon\">ğŸ“„</div>\n                        <p class=\"upload-text\">ç‚¹å‡»é€‰æ‹©æ–‡ä»¶æˆ–æ‹–æ‹½æ–‡ä»¶åˆ°æ­¤å¤„</p>\n                        <p class=\"upload-hint\">æ”¯æŒ .log .txt æ ¼å¼çš„æ—¥å¿—æ–‡ä»¶ï¼Œæ¯è¡Œä¸€ä¸ª JSON å¯¹è±¡ï¼Œæœ€å¤§50MB</p>\n                        <input type=\"file\" id=\"file-input\" accept=\".log,.txt\" style=\"display: none;\">\n                        <button class=\"upload-btn\" onclick=\"document.getElementById('file-input').click()\">é€‰æ‹©æ–‡ä»¶</button>\n                    </div>\n                </div>\n                <div class=\"file-info\" id=\"file-info\" style=\"display: none;\">\n                    <span class=\"file-name\" id=\"file-name\"></span>\n                    <button class=\"clear-btn\" onclick=\"clearFile()\">âœ•</button>\n                </div>\n            </div>\n        </div>\n\n        <div id=\"stats-section\" style=\"display: none;\">\n            <div class=\"stats-grid\">\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"total-hooks\">0</div>\n                    <div class=\"stat-label\">æ€»äº‹ä»¶æ•°</div>\n                    <div class=\"stat-description\">æ‰€æœ‰ Hooks äº‹ä»¶</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"user-prompts\">0</div>\n                    <div class=\"stat-label\">ç”¨æˆ·æç¤ºäº‹ä»¶</div>\n                    <div class=\"stat-description\">UserPromptSubmit</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"pre-tools\">0</div>\n                    <div class=\"stat-label\">å·¥å…·æ‰§è¡Œå‰äº‹ä»¶</div>\n                    <div class=\"stat-description\">PreToolUse</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"post-tools\">0</div>\n                    <div class=\"stat-label\">å·¥å…·æ‰§è¡Œåäº‹ä»¶</div>\n                    <div class=\"stat-description\">PostToolUse</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"notifications\">0</div>\n                    <div class=\"stat-label\">é€šçŸ¥äº‹ä»¶</div>\n                    <div class=\"stat-description\">Notification</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"stops\">0</div>\n                    <div class=\"stat-label\">åœæ­¢äº‹ä»¶</div>\n                    <div class=\"stat-description\">Stop</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"subagent-stops\">0</div>\n                    <div class=\"stat-label\">å­ä»£ç†åœæ­¢äº‹ä»¶</div>\n                    <div class=\"stat-description\">SubagentStop</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"pre-compacts\">0</div>\n                    <div class=\"stat-label\">å‹ç¼©å‰äº‹ä»¶</div>\n                    <div class=\"stat-description\">PreCompact</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"session-starts\">0</div>\n                    <div class=\"stat-label\">ä¼šè¯å¼€å§‹äº‹ä»¶</div>\n                    <div class=\"stat-description\">SessionStart</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"session-ends\">0</div>\n                    <div class=\"stat-label\">ä¼šè¯ç»“æŸäº‹ä»¶</div>\n                    <div class=\"stat-description\">SessionEnd</div>\n                </div>\n            </div>\n\n            <div class=\"filter-section\">\n                <div class=\"filter-controls\">\n                    <div class=\"filter-group\">\n                        <label class=\"filter-label\">äº‹ä»¶ç±»å‹ï¼š</label>\n                        <select class=\"filter-select\" id=\"event-filter\">\n                            <option value=\"\">å…¨éƒ¨</option>\n                            <option value=\"UserPromptSubmit\">UserPromptSubmit</option>\n                            <option value=\"PreToolUse\">PreToolUse</option>\n                            <option value=\"PostToolUse\">PostToolUse</option>\n                            <option value=\"Notification\">Notification</option>\n                            <option value=\"Stop\">Stop</option>\n                            <option value=\"SubagentStop\">SubagentStop</option>\n                            <option value=\"PreCompact\">PreCompact</option>\n                            <option value=\"SessionStart\">SessionStart</option>\n                            <option value=\"SessionEnd\">SessionEnd</option>\n                        </select>\n                    </div>\n                    <div class=\"filter-group\">\n                        <label class=\"filter-label\">æœç´¢ï¼š</label>\n                        <input type=\"text\" class=\"search-input\" id=\"search-input\" placeholder=\"æœç´¢äº‹ä»¶å†…å®¹...\">\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <div id=\"hooks-container\" class=\"hooks-container\"></div>\n\n        <div id=\"no-data\" class=\"no-data\">\n            è¯·ä¸Šä¼  hooks.log æ–‡ä»¶å¼€å§‹åˆ†æ\n        </div>\n\n        <div id=\"error-message\" class=\"error-message\" style=\"display: none;\"></div>\n    </div>\n\n    <script>\n        let hooksData = [];\n        let filteredData = [];\n\n        // æ–‡ä»¶ä¸Šä¼ ç›¸å…³å‡½æ•°\n        function setupFileUpload() {\n            const uploadArea = document.getElementById('upload-area');\n            const fileInput = document.getElementById('file-input');\n\n            // ç‚¹å‡»ä¸Šä¼ åŒºåŸŸè§¦å‘æ–‡ä»¶é€‰æ‹©ï¼ˆä½†ä¸åŒ…æ‹¬æŒ‰é’®ï¼‰\n            uploadArea.addEventListener('click', function(event) {\n                // å¦‚æœç‚¹å‡»çš„æ˜¯æŒ‰é’®ï¼Œä¸å¤„ç†\n                if (event.target.tagName === 'BUTTON' || event.target.closest('button')) {\n                    return;\n                }\n                fileInput.click();\n            });\n\n            // æ–‡ä»¶é€‰æ‹©äº‹ä»¶\n            fileInput.addEventListener('change', handleFileSelect);\n\n            // æ‹–æ‹½äº‹ä»¶\n            uploadArea.addEventListener('dragover', handleDragOver);\n            uploadArea.addEventListener('dragleave', handleDragLeave);\n            uploadArea.addEventListener('drop', handleDrop);\n        }\n\n\n        function handleDragOver(e) {\n            e.preventDefault();\n            e.currentTarget.classList.add('dragover');\n        }\n\n        function handleDragLeave(e) {\n            e.preventDefault();\n            e.currentTarget.classList.remove('dragover');\n        }\n\n        function handleDrop(e) {\n            e.preventDefault();\n            e.currentTarget.classList.remove('dragover');\n            handleFiles(e.dataTransfer.files);\n        }\n\n        function handleFileSelect(event) {\n            const files = event.target.files;\n            handleFiles(files);\n        }\n\n        function handleFiles(files) {\n            if (files.length === 0) return;\n\n            const file = files[0];\n\n            // æ£€æŸ¥æ–‡ä»¶ç±»å‹\n            const validTypes = ['.log', '.txt'];\n            const fileExtension = file.name.substring(file.name.lastIndexOf('.')).toLowerCase();\n\n            if (!validTypes.includes(fileExtension)) {\n                showErrorMessage('è¯·é€‰æ‹© .log æˆ– .txt æ ¼å¼çš„æ—¥å¿—æ–‡ä»¶');\n                return;\n            }\n\n            // æ£€æŸ¥æ–‡ä»¶å¤§å° (é™åˆ¶ä¸º50MB)\n            if (file.size > 50 * 1024 * 1024) {\n                showErrorMessage('æ–‡ä»¶å¤§å°ä¸èƒ½è¶…è¿‡50MB');\n                return;\n            }\n\n            // æ˜¾ç¤ºæ–‡ä»¶ä¿¡æ¯\n            showFileInfo(file);\n\n            // è¯»å–æ–‡ä»¶å†…å®¹\n            const reader = new FileReader();\n            reader.onload = function(e) {\n                try {\n                    const content = e.target.result;\n                    console.log('æ–‡ä»¶è¯»å–æˆåŠŸï¼Œå†…å®¹é•¿åº¦:', content.length);\n                    console.log('æ–‡ä»¶å†…å®¹å‰100å­—ç¬¦:', content.substring(0, 100));\n\n                    if (!content || content.trim().length === 0) {\n                        showErrorMessage('æ–‡ä»¶å†…å®¹ä¸ºç©º');\n                        return;\n                    }\n\n                    parseHooksData(content);\n                    showSuccessMessage(`æˆåŠŸåŠ è½½æ–‡ä»¶: ${file.name}`);\n                } catch (error) {\n                    console.error('æ–‡ä»¶è§£æå¼‚å¸¸:', error);\n                    showErrorMessage('æ–‡ä»¶è§£æå¤±è´¥ï¼š' + error.message);\n                }\n            };\n            reader.onerror = function(error) {\n                console.error('æ–‡ä»¶è¯»å–å¤±è´¥:', error);\n                showErrorMessage('æ–‡ä»¶è¯»å–å¤±è´¥');\n            };\n            reader.readAsText(file);\n        }\n\n        function showFileInfo(file) {\n            const fileInfo = document.getElementById('file-info');\n            const fileName = document.getElementById('file-name');\n            const uploadArea = document.getElementById('upload-area');\n\n            fileName.textContent = file.name;\n            fileInfo.style.display = 'flex';\n            uploadArea.style.display = 'none';\n        }\n\n        function clearFile() {\n            const fileInfo = document.getElementById('file-info');\n            const uploadArea = document.getElementById('upload-area');\n            const fileInput = document.getElementById('file-input');\n\n            fileInfo.style.display = 'none';\n            uploadArea.style.display = 'block';\n\n            // æ¸…ç©ºæ–‡ä»¶è¾“å…¥æ¡†çš„å€¼\n            fileInput.value = '';\n\n            // æ¸…ç©ºæ•°æ®\n            hooksData = [];\n            filteredData = [];\n\n            // æ¸…ç©ºæ˜¾ç¤ºåŒºåŸŸ\n            document.getElementById('hooks-container').innerHTML = '';\n            document.getElementById('no-data').style.display = 'block';\n            document.getElementById('stats-section').style.display = 'none';\n\n            // æ˜¾ç¤ºæç¤º\n            showSuccessMessage('å·²æ¸…ç©ºæ–‡ä»¶ï¼Œè¯·é‡æ–°é€‰æ‹©æ—¥å¿—æ–‡ä»¶');\n        }\n\n        function showSuccessMessage(message) {\n            showMessage(message, 'success');\n        }\n\n        function showErrorMessage(message) {\n            showMessage(message, 'error');\n        }\n\n        function showMessage(message, type) {\n            // ç§»é™¤ä¹‹å‰çš„æ¶ˆæ¯\n            const existingMessages = document.querySelectorAll('.upload-message');\n            existingMessages.forEach(msg => msg.remove());\n\n            const messageClass = type === 'success' ? 'upload-success' : 'upload-error';\n            const messageDiv = document.createElement('div');\n            messageDiv.className = `upload-message ${messageClass}`;\n            messageDiv.textContent = message;\n\n            document.querySelector('.upload-card').appendChild(messageDiv);\n\n            // 3ç§’åè‡ªåŠ¨æ¶ˆå¤±\n            setTimeout(() => {\n                messageDiv.style.opacity = '0';\n                setTimeout(() => {\n                    if (messageDiv.parentNode) {\n                        messageDiv.parentNode.removeChild(messageDiv);\n                    }\n                }, 300);\n            }, 3000);\n        }\n\n        // è§£æ hooks æ•°æ®\n        function parseHooksData(content) {\n            console.log('å¼€å§‹è§£æ hooks æ•°æ®ï¼Œå†…å®¹é•¿åº¦:', content.length);\n\n            hooksData = [];\n            const lines = content.split('\\n').filter(line => line.trim());\n            console.log('åˆ†å‰²åçš„è¡Œæ•°:', lines.length);\n\n            for (let i = 0; i < lines.length; i++) {\n                const line = lines[i];\n                try {\n                    const hookData = JSON.parse(line);\n                    hooksData.push(hookData);\n                    console.log(`æˆåŠŸè§£æç¬¬ ${i + 1} è¡Œï¼Œäº‹ä»¶ç±»å‹:`, hookData.event);\n                } catch (error) {\n                    console.error(`è§£æç¬¬ ${i + 1} è¡Œå¤±è´¥:`, error.message);\n                    console.error('é—®é¢˜è¡Œçš„å†…å®¹:', line.substring(0, 100) + (line.length > 100 ? '...' : ''));\n                }\n            }\n\n            console.log('è§£æå®Œæˆï¼Œæ€»å…±è§£æåˆ°', hooksData.length, 'ä¸ªæœ‰æ•ˆäº‹ä»¶');\n\n            if (hooksData.length === 0) {\n                showErrorMessage('æœªæ‰¾åˆ°æœ‰æ•ˆçš„ hooks æ•°æ®ã€‚è¯·ç¡®ä¿æ–‡ä»¶æ ¼å¼æ­£ç¡®ï¼Œæ¯è¡Œåº”è¯¥æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„JSONå¯¹è±¡ã€‚');\n                console.error('è§£æå¤±è´¥ï¼Œæ²¡æœ‰æ‰¾åˆ°æœ‰æ•ˆçš„hooksæ•°æ®');\n                return;\n            }\n\n            filteredData = [...hooksData];\n            console.log('å‡†å¤‡æ˜¾ç¤ºæ•°æ®ï¼Œè¿‡æ»¤åçš„äº‹ä»¶æ•°é‡:', filteredData.length);\n            displayData();\n        }\n\n        // æ˜¾ç¤ºæ•°æ®\n        function displayData() {\n            document.getElementById('no-data').style.display = 'none';\n            document.getElementById('error-message').style.display = 'none';\n            document.getElementById('stats-section').style.display = 'block';\n\n            updateStatistics();\n            renderHooks();\n        }\n\n        // æ›´æ–°ç»Ÿè®¡ä¿¡æ¯\n        function updateStatistics() {\n            const stats = {\n                total: filteredData.length,\n                userPrompts: filteredData.filter(h => h.event === 'UserPromptSubmit').length,\n                preTools: filteredData.filter(h => h.event === 'PreToolUse').length,\n                postTools: filteredData.filter(h => h.event === 'PostToolUse').length,\n                notifications: filteredData.filter(h => h.event === 'Notification').length,\n                stops: filteredData.filter(h => h.event === 'Stop').length,\n                subagentStops: filteredData.filter(h => h.event === 'SubagentStop').length,\n                preCompacts: filteredData.filter(h => h.event === 'PreCompact').length,\n                sessionStarts: filteredData.filter(h => h.event === 'SessionStart').length,\n                sessionEnds: filteredData.filter(h => h.event === 'SessionEnd').length\n            };\n\n            document.getElementById('total-hooks').textContent = stats.total;\n            document.getElementById('user-prompts').textContent = stats.userPrompts;\n            document.getElementById('pre-tools').textContent = stats.preTools;\n            document.getElementById('post-tools').textContent = stats.postTools;\n            document.getElementById('notifications').textContent = stats.notifications;\n            document.getElementById('stops').textContent = stats.stops;\n            document.getElementById('subagent-stops').textContent = stats.subagentStops;\n            document.getElementById('pre-compacts').textContent = stats.preCompacts;\n            document.getElementById('session-starts').textContent = stats.sessionStarts;\n            document.getElementById('session-ends').textContent = stats.sessionEnds;\n        }\n\n        // æ¸²æŸ“ hooks\n        function renderHooks() {\n            const container = document.getElementById('hooks-container');\n            container.innerHTML = '';\n\n            filteredData.forEach((hook, index) => {\n                const hookElement = createHookElement(hook, index);\n                container.appendChild(hookElement);\n            });\n\n            // æ·»åŠ åŠ¨ç”»\n            const elements = container.querySelectorAll('.hook-item');\n            elements.forEach((el, i) => {\n                el.style.opacity = '0';\n                el.style.transform = 'translateY(20px)';\n                setTimeout(() => {\n                    el.style.transition = 'opacity 0.3s ease, transform 0.3s ease';\n                    el.style.opacity = '1';\n                    el.style.transform = 'translateY(0)';\n                }, i * 50);\n            });\n        }\n\n        // åˆ›å»º hook å…ƒç´ \n        function createHookElement(hook, index) {\n            const div = document.createElement('div');\n            div.className = 'hook-item';\n\n            const eventClass = getEventClass(hook.event);\n            const formattedTime = formatTimestamp(hook.ts);\n            const eventDescription = getEventDescription(hook.event, hook.phase);\n\n            div.innerHTML = `\n                <div class=\"hook-header\">\n                    <div class=\"hook-event\">\n                        <span class=\"event-badge ${eventClass}\">${hook.event}</span>\n                    </div>\n                    <div class=\"hook-meta\">\n                        <div class=\"hook-timestamp\">${formattedTime}</div>\n                    </div>\n                </div>\n                <div class=\"hook-message\">${hook.message}</div>\n                <div class=\"hook-description\">${hook.description || eventDescription}</div>\n                <div class=\"hook-details\">\n                    <div class=\"part-card\">\n                        <div class=\"part-header\" onclick=\"toggleDetail('payload-${index}')\">\n                            <span>Payload</span>\n                            <span class=\"toggle-icon\" id=\"icon-payload-${index}\">â–¼</span>\n                        </div>\n                        <div class=\"part-content hidden\" id=\"payload-${index}\">\n                            ${formatJson(hook.payload)}\n                        </div>\n                    </div>\n                </div>\n            `;\n\n            return div;\n        }\n\n        // è·å–äº‹ä»¶æè¿°\n        function getEventDescription(event, phase) {\n            switch (event) {\n                case 'PreToolUse':\n                    return 'å·¥å…·æ‰§è¡Œå‰è§¦å‘ï¼Œå¯åŸºäºå‚æ•°é˜»æ­¢æˆ–è°ƒæ•´è°ƒç”¨ã€‚';\n                case 'PostToolUse':\n                    return 'å·¥å…·æˆåŠŸæ‰§è¡Œåè§¦å‘ï¼Œå¸¸ç”¨äºæ ¼å¼åŒ–ã€æ ¡éªŒæˆ–è®°å½•ç»“æœã€‚';\n                case 'UserPromptSubmit':\n                    return 'ç”¨æˆ·æäº¤æç¤ºå‰è§¦å‘ï¼Œå¯è¿›è¡Œæç¤ºæ ¡éªŒæˆ–å¢å¼ºã€‚';\n                case 'Notification':\n                    return 'å½“ç³»ç»Ÿå‘é€é€šçŸ¥ï¼ˆéœ€æˆæƒæˆ–ç­‰å¾…è¾“å…¥ï¼‰æ—¶è§¦å‘ã€‚';\n                case 'Stop':\n                    return 'ä¸»ä»£ç†å®Œæˆå“åº”æ—¶è§¦å‘ï¼ˆç”¨æˆ·ä¸­æ–­ä¸è§¦å‘ï¼‰ã€‚';\n                case 'SubagentStop':\n                    return 'å­ä»£ç†ä»»åŠ¡å®Œæˆæ—¶è§¦å‘ï¼Œç”¨äºè®°å½•å­ä»»åŠ¡ç»“æŸã€‚';\n                case 'PreCompact':\n                    return phase === 'manual'\n                        ? 'æ‰‹åŠ¨å‹ç¼©å‰è§¦å‘ï¼Œç”¨äºè®°å½•æˆ–å‡†å¤‡å‹ç¼©ã€‚'\n                        : 'è‡ªåŠ¨å‹ç¼©å‰è§¦å‘ï¼ˆä¸Šä¸‹æ–‡æ¥è¿‘ä¸Šé™ï¼‰ï¼Œç”¨äºè®°å½•æˆ–å‡†å¤‡å‹ç¼©ã€‚';\n                case 'SessionStart':\n                    switch (phase) {\n                        case 'startup':\n                            return 'æ–°ä¼šè¯å¯åŠ¨æ—¶è§¦å‘ï¼Œç”¨äºåŠ è½½ä¸Šä¸‹æ–‡æˆ–è®¾ç½®ç¯å¢ƒã€‚';\n                        case 'resume':\n                            return 'æ¢å¤ä¼šè¯æ—¶è§¦å‘ï¼Œç”¨äºç»§ç»­å…ˆå‰ä¸Šä¸‹æ–‡ã€‚';\n                        case 'clear':\n                            return 'æ¸…ç©ºä¼šè¯åè§¦å‘ï¼Œç”¨äºé‡ç½®ç¯å¢ƒä¸ä¸Šä¸‹æ–‡ã€‚';\n                        case 'compact':\n                            return 'å› å‹ç¼©æ“ä½œè§¦å‘çš„ä¼šè¯å¯åŠ¨ï¼Œç”¨äºç»´æŒä¸Šä¸‹æ–‡ã€‚';\n                        default:\n                            return 'ä¼šè¯å¯åŠ¨ç›¸å…³äº‹ä»¶ï¼Œåˆå§‹åŒ–æˆ–æ¢å¤ä¸Šä¸‹æ–‡ã€‚';\n                    }\n                case 'SessionEnd':\n                    return 'ä¼šè¯ç»“æŸæ—¶è§¦å‘ï¼Œå¸¸ç”¨äºæ”¶å°¾ä¸æ¸…ç†ã€‚';\n                default:\n                    return 'æœªçŸ¥äº‹ä»¶ã€‚';\n            }\n        }\n\n        // è·å–äº‹ä»¶æ ·å¼ç±»\n        function getEventClass(event) {\n            switch (event) {\n                case 'UserPromptSubmit': return 'event-userprompt';\n                case 'PreToolUse': return 'event-pretool';\n                case 'PostToolUse': return 'event-posttool';\n                case 'Notification': return 'event-notification';\n                case 'Stop': return 'event-stop';\n                case 'SubagentStop': return 'event-subagent-stop';\n                case 'PreCompact': return 'event-pre-compact';\n                case 'SessionStart': return 'event-session-start';\n                case 'SessionEnd': return 'event-session-end';\n                default: return 'event-default';\n            }\n        }\n\n        // æ ¼å¼åŒ–æ—¶é—´æˆ³\n        function formatTimestamp(ts) {\n            const date = new Date(ts);\n            return date.toLocaleString('zh-CN');\n        }\n\n        // æ ¼å¼åŒ– JSON\n        function formatJson(obj, indent = 0) {\n            if (!obj) return '';\n\n            try {\n                const spaces = '  '.repeat(indent);\n                let result = '';\n\n                if (Array.isArray(obj)) {\n                    result += '[\\n';\n                    obj.forEach((item, index) => {\n                        result += spaces + '  ';\n                        if (typeof item === 'object' && item !== null) {\n                            result += formatJson(item, indent + 1);\n                        } else {\n                            result += formatJsonValue(item);\n                        }\n                        if (index < obj.length - 1) result += ',';\n                        result += '\\n';\n                    });\n                    result += spaces + ']';\n                } else if (typeof obj === 'object' && obj !== null) {\n                    result += '{\\n';\n                    const keys = Object.keys(obj);\n                    keys.forEach((key, index) => {\n                        result += spaces + '  ';\n                        result += `<span class=\"json-key\">\"${escapeHtml(key)}\"</span>: `;\n\n                        if (typeof obj[key] === 'object' && obj[key] !== null) {\n                            result += formatJson(obj[key], indent + 1);\n                        } else {\n                            result += formatJsonValue(obj[key]);\n                        }\n\n                        if (index < keys.length - 1) result += ',';\n                        result += '\\n';\n                    });\n                    result += spaces + '}';\n                } else {\n                    result += formatJsonValue(obj);\n                }\n\n                return result;\n            } catch (error) {\n                return escapeHtml(JSON.stringify(obj));\n            }\n        }\n\n        // æ ¼å¼åŒ– JSON å€¼\n        function formatJsonValue(value) {\n            if (typeof value === 'string') {\n                if (value.startsWith('http://') || value.startsWith('https://')) {\n                    return `<span class=\"json-url\" onclick=\"window.open('${escapeHtml(value)}', '_blank')\">\"${escapeHtml(value)}\"</span>`;\n                }\n                return `<span class=\"json-string\">\"${escapeHtml(value)}\"</span>`;\n            } else if (typeof value === 'number') {\n                return `<span class=\"json-number\">${value}</span>`;\n            } else if (typeof value === 'boolean') {\n                return `<span class=\"json-boolean\">${value}</span>`;\n            } else if (value === null) {\n                return `<span class=\"json-null\">null</span>`;\n            } else {\n                return `<span style=\"color: #666;\">${value}</span>`;\n            }\n        }\n\n        // HTML è½¬ä¹‰\n        function escapeHtml(text) {\n            const div = document.createElement('div');\n            div.textContent = text;\n            return div.innerHTML;\n        }\n\n        // åˆ‡æ¢è¯¦æƒ…æ˜¾ç¤º\n        function toggleDetail(id) {\n            const content = document.getElementById(id);\n            const icon = document.getElementById('icon-' + id);\n\n            if (content.classList.contains('hidden')) {\n                content.classList.remove('hidden');\n                icon.classList.add('rotated');\n            } else {\n                content.classList.add('hidden');\n                icon.classList.remove('rotated');\n            }\n        }\n\n        // è¿‡æ»¤å’Œæœç´¢\n        document.getElementById('event-filter').addEventListener('change', applyFilters);\n        document.getElementById('search-input').addEventListener('input', applyFilters);\n\n        function applyFilters() {\n            const eventFilter = document.getElementById('event-filter').value;\n            const searchText = document.getElementById('search-input').value.toLowerCase();\n\n            filteredData = hooksData.filter(hook => {\n                const matchEvent = !eventFilter || hook.event === eventFilter;\n                const matchSearch = !searchText ||\n                    JSON.stringify(hook).toLowerCase().includes(searchText);\n\n                return matchEvent && matchSearch;\n            });\n\n            updateStatistics();\n            renderHooks();\n        }\n\n        // æ ¼å¼åŒ–æ–‡ä»¶å¤§å°\n        function formatFileSize(bytes) {\n            if (bytes === 0) return '0 Bytes';\n            const k = 1024;\n            const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n            const i = Math.floor(Math.log(bytes) / Math.log(k));\n            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n        }\n\n        // é¡µé¢åŠ è½½æ—¶æ‰§è¡Œ\n        document.addEventListener('DOMContentLoaded', function() {\n            // æ·»åŠ åˆå§‹åŠ è½½åŠ¨ç”»\n            const cards = document.querySelectorAll('.stat-card, .upload-card');\n            cards.forEach((card, index) => {\n                card.style.opacity = '0';\n                card.style.transform = 'translateY(20px)';\n                setTimeout(() => {\n                    card.style.transition = 'opacity 0.5s ease, transform 0.5s ease';\n                    card.style.opacity = '1';\n                    card.style.transform = 'translateY(0)';\n                }, index * 100);\n            });\n\n            // è®¾ç½®æ–‡ä»¶ä¸Šä¼ \n            setupFileUpload();\n        });\n\n            </script>\n</body>\n</html>","structuredPatch":[{"oldStart":450,"oldLines":6,"newStart":450,"newLines":40,"lines":["         .json-null { color: #9E9E9E; }","         .json-url { color: #2196F3; text-decoration: underline; cursor: pointer; }"," ","+        .transcript-path {","+            background: #fff3cd;","+            border: 1px solid #ffeaa7;","+            border-radius: 5px;","+            padding: 8px 12px;","+            margin-top: 10px;","+            font-size: 0.9rem;","+        }","+","+        .transcript-path-label {","+            font-weight: bold;","+            color: #856404;","+            margin-bottom: 5px;","+        }","+","+        .transcript-path-value {","+            color: #856404;","+            word-break: break-all;","+            font-family: monospace;","+            background: #f8f9fa;","+            padding: 4px 8px;","+            border-radius: 3px;","+        }","+","+        .has-transcript-badge {","+            background: #ffc107;","+            color: #212529;","+            padding: 2px 8px;","+            border-radius: 12px;","+            font-size: 0.7rem;","+            font-weight: bold;","+            margin-left: 10px;","+        }","+","         @media (max-width: 768px) {","             .header h1 {","                 font-size: 2rem;"]}],"userModified":false,"replaceAll":false}}}
{"ts":"2025-11-05T02:25:33.999Z","event":"PreToolUse","phase":"","message":"PreToolUseäº‹ä»¶æ­£åœ¨æ‰§è¡Œ","description":"å·¥å…·æ‰§è¡Œå‰è§¦å‘ï¼Œå¯åŸºäºå‚æ•°é˜»æ­¢æˆ–è°ƒæ•´è°ƒç”¨ã€‚","doc_url":"https://docs.claude.com/zh-CN/docs/claude-code/hooks#pretooluse","payload":{"session_id":"c7c21516-7e1e-49b2-8ae5-4e1bb98e9692","transcript_path":"C:\\Users\\WTCL\\.claude\\projects\\i--claude-code-proxy\\c7c21516-7e1e-49b2-8ae5-4e1bb98e9692.jsonl","cwd":"i:\\claude-code-proxy","permission_mode":"acceptEdits","hook_event_name":"PreToolUse","tool_name":"Edit","tool_input":{"file_path":"i:\\claude-code-proxy\\analyze\\hooks.html","old_string":"              <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"session-ends\">0</div>\n                    <div class=\"stat-label\">ä¼šè¯ç»“æŸäº‹ä»¶</div>\n                    <div class=\"stat-description\">SessionEnd</div>\n                </div>","new_string":"              <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"session-ends\">0</div>\n                    <div class=\"stat-label\">ä¼šè¯ç»“æŸäº‹ä»¶</div>\n                    <div class=\"stat-description\">SessionEnd</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"transcript-count\">0</div>\n                    <div class=\"stat-label\">åŒ…å«è½¬å½•è·¯å¾„äº‹ä»¶</div>\n                    <div class=\"stat-description\">åŒ…å« transcript_path</div>\n                </div>"}}}
{"ts":"2025-11-05T02:25:35.761Z","event":"PostToolUse","phase":"","message":"PostToolUseäº‹ä»¶æ­£åœ¨æ‰§è¡Œ","description":"å·¥å…·æˆåŠŸæ‰§è¡Œåè§¦å‘ï¼Œå¸¸ç”¨äºæ ¼å¼åŒ–ã€æ ¡éªŒæˆ–è®°å½•ç»“æœã€‚","doc_url":"https://docs.claude.com/zh-CN/docs/claude-code/hooks#posttooluse","payload":{"session_id":"c7c21516-7e1e-49b2-8ae5-4e1bb98e9692","transcript_path":"C:\\Users\\WTCL\\.claude\\projects\\i--claude-code-proxy\\c7c21516-7e1e-49b2-8ae5-4e1bb98e9692.jsonl","cwd":"i:\\claude-code-proxy","permission_mode":"acceptEdits","hook_event_name":"PostToolUse","tool_name":"Edit","tool_input":{"file_path":"i:\\claude-code-proxy\\analyze\\hooks.html","old_string":"              <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"session-ends\">0</div>\n                    <div class=\"stat-label\">ä¼šè¯ç»“æŸäº‹ä»¶</div>\n                    <div class=\"stat-description\">SessionEnd</div>\n                </div>","new_string":"              <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"session-ends\">0</div>\n                    <div class=\"stat-label\">ä¼šè¯ç»“æŸäº‹ä»¶</div>\n                    <div class=\"stat-description\">SessionEnd</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"transcript-count\">0</div>\n                    <div class=\"stat-label\">åŒ…å«è½¬å½•è·¯å¾„äº‹ä»¶</div>\n                    <div class=\"stat-description\">åŒ…å« transcript_path</div>\n                </div>"},"tool_response":{"filePath":"i:\\claude-code-proxy\\analyze\\hooks.html","oldString":"              <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"session-ends\">0</div>\n                    <div class=\"stat-label\">ä¼šè¯ç»“æŸäº‹ä»¶</div>\n                    <div class=\"stat-description\">SessionEnd</div>\n                </div>","newString":"              <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"session-ends\">0</div>\n                    <div class=\"stat-label\">ä¼šè¯ç»“æŸäº‹ä»¶</div>\n                    <div class=\"stat-description\">SessionEnd</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"transcript-count\">0</div>\n                    <div class=\"stat-label\">åŒ…å«è½¬å½•è·¯å¾„äº‹ä»¶</div>\n                    <div class=\"stat-description\">åŒ…å« transcript_path</div>\n                </div>","originalFile":"<!DOCTYPE html>\n<html lang=\"zh-CN\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Hooks æ—¥å¿—åˆ†æ</title>\n    <style>\n        * {\n            margin: 0;\n            padding: 0;\n            box-sizing: border-box;\n        }\n\n        body {\n            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n            min-height: 100vh;\n            padding: 20px;\n        }\n\n        .container {\n            max-width: 1400px;\n            margin: 0 auto;\n        }\n\n        .header {\n            text-align: center;\n            color: white;\n            margin-bottom: 30px;\n        }\n\n        .header h1 {\n            font-size: 2.5rem;\n            margin-bottom: 10px;\n            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);\n        }\n\n        .header p {\n            font-size: 1.1rem;\n            opacity: 0.9;\n        }\n\n        /* æ–‡ä»¶ä¸Šä¼ ç»„ä»¶æ ·å¼ */\n        .upload-section {\n            margin-bottom: 30px;\n        }\n\n        .upload-card {\n            background: white;\n            border-radius: 15px;\n            padding: 25px;\n            box-shadow: 0 10px 30px rgba(0,0,0,0.1);\n            border: 2px dashed #cbd5e0;\n            transition: all 0.3s ease;\n        }\n\n        .upload-card:hover {\n            border-color: #667eea;\n            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.2);\n        }\n\n        .upload-header {\n            font-size: 1.2rem;\n            font-weight: bold;\n            color: #4a5568;\n            margin-bottom: 20px;\n            text-align: center;\n        }\n\n        .upload-area {\n            border: 2px dashed #e2e8f0;\n            border-radius: 10px;\n            padding: 40px 20px;\n            text-align: center;\n            transition: all 0.3s ease;\n            cursor: pointer;\n        }\n\n        .upload-area:hover {\n            border-color: #667eea;\n            background: #f7fafc;\n        }\n\n        .upload-area.dragover {\n            border-color: #667eea;\n            background: #edf2f7;\n            transform: scale(1.02);\n        }\n\n        .upload-icon {\n            font-size: 3rem;\n            margin-bottom: 15px;\n            opacity: 0.7;\n        }\n\n        .upload-text {\n            font-size: 1.1rem;\n            color: #4a5568;\n            margin-bottom: 10px;\n            font-weight: 500;\n        }\n\n        .upload-hint {\n            font-size: 0.9rem;\n            color: #718096;\n            margin-bottom: 20px;\n        }\n\n        .upload-btn {\n            background: #667eea;\n            color: white;\n            border: none;\n            padding: 12px 24px;\n            border-radius: 8px;\n            font-size: 1rem;\n            font-weight: 500;\n            cursor: pointer;\n            transition: all 0.3s ease;\n        }\n\n        .upload-btn:hover {\n            background: #5a67d8;\n            transform: translateY(-2px);\n            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);\n        }\n\n        .file-info {\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            background: #f7fafc;\n            padding: 15px 20px;\n            border-radius: 8px;\n            margin-top: 15px;\n        }\n\n        .file-name {\n            font-weight: 500;\n            color: #4a5568;\n            flex: 1;\n            overflow: hidden;\n            text-overflow: ellipsis;\n            white-space: nowrap;\n        }\n\n        .clear-btn {\n            background: #fc8181;\n            color: white;\n            border: none;\n            width: 30px;\n            height: 30px;\n            border-radius: 50%;\n            cursor: pointer;\n            font-size: 1rem;\n            transition: all 0.3s ease;\n        }\n\n        .clear-btn:hover {\n            background: #f56565;\n            transform: scale(1.1);\n        }\n\n        /* æ¶ˆæ¯æç¤ºæ ·å¼ */\n        .upload-message {\n            margin-top: 15px;\n            padding: 12px 16px;\n            border-radius: 8px;\n            font-size: 0.9rem;\n            animation: slideIn 0.3s ease;\n        }\n\n        .upload-success {\n            background: #d4edda;\n            color: #155724;\n            border: 1px solid #c3e6cb;\n        }\n\n        .upload-error {\n            background: #f8d7da;\n            color: #721c24;\n            border: 1px solid #f5c6cb;\n        }\n\n        @keyframes slideIn {\n            from {\n                opacity: 0;\n                transform: translateY(-10px);\n            }\n            to {\n                opacity: 1;\n                transform: translateY(0);\n            }\n        }\n\n        #file-input {\n            display: none;\n        }\n\n        .stats-grid {\n            display: grid;\n            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\n            gap: 20px;\n            margin-bottom: 30px;\n        }\n\n        .stat-card {\n            background: white;\n            border-radius: 15px;\n            padding: 25px;\n            box-shadow: 0 10px 30px rgba(0,0,0,0.2);\n            text-align: center;\n            transition: transform 0.3s ease, box-shadow 0.3s ease;\n        }\n\n        .stat-card:hover {\n            transform: translateY(-5px);\n            box-shadow: 0 15px 40px rgba(0,0,0,0.3);\n        }\n\n        .stat-number {\n            font-size: 3rem;\n            font-weight: bold;\n            margin-bottom: 10px;\n        }\n\n        .stat-label {\n            font-size: 1.1rem;\n            color: #666;\n            margin-bottom: 5px;\n        }\n\n        .stat-description {\n            font-size: 0.9rem;\n            color: #999;\n        }\n\n        .filter-section {\n            background: white;\n            border-radius: 15px;\n            padding: 20px;\n            box-shadow: 0 10px 30px rgba(0,0,0,0.2);\n            margin-bottom: 30px;\n        }\n\n        .filter-controls {\n            display: flex;\n            gap: 15px;\n            flex-wrap: wrap;\n            align-items: center;\n        }\n\n        .filter-group {\n            display: flex;\n            align-items: center;\n            gap: 10px;\n        }\n\n        .filter-label {\n            font-weight: bold;\n            color: #333;\n        }\n\n        .filter-select, .search-input {\n            padding: 8px 12px;\n            border: 2px solid #ddd;\n            border-radius: 5px;\n            font-size: 0.9rem;\n            transition: border-color 0.3s ease;\n        }\n\n        .filter-select:focus, .search-input:focus {\n            outline: none;\n            border-color: #667eea;\n        }\n\n        .search-input {\n            min-width: 200px;\n        }\n\n        .hooks-container {\n            display: grid;\n            gap: 30px;\n        }\n\n        .hook-item {\n            background: white;\n            border-radius: 15px;\n            padding: 25px;\n            box-shadow: 0 10px 30px rgba(0,0,0,0.2);\n        }\n\n        .hook-header {\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            margin-bottom: 20px;\n            padding-bottom: 15px;\n            border-bottom: 2px solid #667eea;\n        }\n\n        .hook-event {\n            font-size: 1.5rem;\n            font-weight: bold;\n            color: #667eea;\n        }\n\n        .hook-meta {\n            display: flex;\n            gap: 20px;\n            align-items: center;\n        }\n\n        .hook-timestamp {\n            font-size: 0.9rem;\n            color: #666;\n            background: #f0f4ff;\n            padding: 5px 12px;\n            border-radius: 20px;\n        }\n\n        .hook-message {\n            background: #f8f9fa;\n            border-left: 4px solid #667eea;\n            padding: 15px;\n            margin-bottom: 15px;\n            border-radius: 5px;\n        }\n\n        .hook-description {\n            color: #666;\n            font-style: italic;\n            margin-bottom: 15px;\n        }\n\n        .hook-details {\n            display: flex;\n            flex-direction: column;\n            gap: 20px;\n        }\n\n        .part-card {\n            background: #f8f9fa;\n            border-radius: 10px;\n            overflow: hidden;\n        }\n\n        .part-header {\n            background: #667eea;\n            color: white;\n            padding: 12px 15px;\n            font-weight: bold;\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            cursor: pointer;\n            transition: background 0.3s ease;\n        }\n\n        .part-header:hover {\n            background: #5a67d8;\n        }\n\n        .part-content {\n            padding: 15px;\n            font-family: 'Courier New', monospace;\n            font-size: 0.9rem;\n            background: #1a1a1a;\n            color: #ffffff;\n            overflow-y: auto;\n            white-space: pre-wrap;\n            line-height: 1.6;\n            min-height: 100px;\n            border-radius: 8px;\n            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.3);\n        }\n\n        .part-content.hidden {\n            display: none;\n        }\n\n        .toggle-icon {\n            transition: transform 0.3s ease;\n        }\n\n        .toggle-icon.rotated {\n            transform: rotate(180deg);\n        }\n\n        /* è‡ªå®šä¹‰æ»šåŠ¨æ¡æ ·å¼ */\n        .part-content::-webkit-scrollbar {\n            width: 8px;\n        }\n\n        .part-content::-webkit-scrollbar-track {\n            background: #2a2a2a;\n            border-radius: 4px;\n        }\n\n        .part-content::-webkit-scrollbar-thumb {\n            background: #4a4a4a;\n            border-radius: 4px;\n        }\n\n        .part-content::-webkit-scrollbar-thumb:hover {\n            background: #5a5a5a;\n        }\n\n        .event-badge {\n            display: inline-block;\n            padding: 4px 12px;\n            border-radius: 20px;\n            font-size: 0.8rem;\n            font-weight: bold;\n            margin-right: 10px;\n        }\n\n        .event-userprompt { background: #FF6B6B; color: white; }\n        .event-pretool { background: #4ECDC4; color: white; }\n        .event-posttool { background: #45B7D1; color: white; }\n        .event-notification { background: #9C27B0; color: white; }\n        .event-stop { background: #F44336; color: white; }\n        .event-subagent-stop { background: #FF9800; color: white; }\n        .event-pre-compact { background: #FFC107; color: white; }\n        .event-session-start { background: #4CAF50; color: white; }\n        .event-session-end { background: #607D8B; color: white; }\n        .event-default { background: #78909C; color: white; }\n\n        .no-data {\n            text-align: center;\n            padding: 60px 20px;\n            color: white;\n            font-size: 1.2rem;\n        }\n\n        .error-message {\n            background: #fff5f5;\n            border: 2px solid #fc8181;\n            color: #c53030;\n            padding: 20px;\n            border-radius: 10px;\n            text-align: center;\n            font-size: 1.1rem;\n            margin: 20px 0;\n        }\n\n        .json-key { color: #9C27B0; }\n        .json-string { color: #4CAF50; }\n        .json-number { color: #FF9800; }\n        .json-boolean { color: #F44336; }\n        .json-null { color: #9E9E9E; }\n        .json-url { color: #2196F3; text-decoration: underline; cursor: pointer; }\n\n        .transcript-path {\n            background: #fff3cd;\n            border: 1px solid #ffeaa7;\n            border-radius: 5px;\n            padding: 8px 12px;\n            margin-top: 10px;\n            font-size: 0.9rem;\n        }\n\n        .transcript-path-label {\n            font-weight: bold;\n            color: #856404;\n            margin-bottom: 5px;\n        }\n\n        .transcript-path-value {\n            color: #856404;\n            word-break: break-all;\n            font-family: monospace;\n            background: #f8f9fa;\n            padding: 4px 8px;\n            border-radius: 3px;\n        }\n\n        .has-transcript-badge {\n            background: #ffc107;\n            color: #212529;\n            padding: 2px 8px;\n            border-radius: 12px;\n            font-size: 0.7rem;\n            font-weight: bold;\n            margin-left: 10px;\n        }\n\n        @media (max-width: 768px) {\n            .header h1 {\n                font-size: 2rem;\n            }\n\n            .stats-grid {\n                grid-template-columns: repeat(2, 1fr);\n            }\n\n            .filter-controls {\n                flex-direction: column;\n                align-items: stretch;\n            }\n\n            .search-input {\n                min-width: auto;\n            }\n        }\n    </style>\n</head>\n<body>\n    <div class=\"container\">\n        <div class=\"header\">\n            <h1>Hooks æ—¥å¿—åˆ†æ</h1>\n            <p>ä¸Šä¼ å¹¶åˆ†æ Claude Hooks äº‹ä»¶æ—¥å¿—</p>\n        </div>\n\n        <!-- æ–‡ä»¶ä¸Šä¼ ç»„ä»¶ -->\n        <div class=\"upload-section\">\n            <div class=\"upload-card\">\n                <div class=\"upload-header\">\n                    <span>ğŸ“ é€‰æ‹© Hooks æ—¥å¿—æ–‡ä»¶</span>\n                </div>\n                <div class=\"upload-area\" id=\"upload-area\">\n                    <div class=\"upload-content\">\n                        <div class=\"upload-icon\">ğŸ“„</div>\n                        <p class=\"upload-text\">ç‚¹å‡»é€‰æ‹©æ–‡ä»¶æˆ–æ‹–æ‹½æ–‡ä»¶åˆ°æ­¤å¤„</p>\n                        <p class=\"upload-hint\">æ”¯æŒ .log .txt æ ¼å¼çš„æ—¥å¿—æ–‡ä»¶ï¼Œæ¯è¡Œä¸€ä¸ª JSON å¯¹è±¡ï¼Œæœ€å¤§50MB</p>\n                        <input type=\"file\" id=\"file-input\" accept=\".log,.txt\" style=\"display: none;\">\n                        <button class=\"upload-btn\" onclick=\"document.getElementById('file-input').click()\">é€‰æ‹©æ–‡ä»¶</button>\n                    </div>\n                </div>\n                <div class=\"file-info\" id=\"file-info\" style=\"display: none;\">\n                    <span class=\"file-name\" id=\"file-name\"></span>\n                    <button class=\"clear-btn\" onclick=\"clearFile()\">âœ•</button>\n                </div>\n            </div>\n        </div>\n\n        <div id=\"stats-section\" style=\"display: none;\">\n            <div class=\"stats-grid\">\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"total-hooks\">0</div>\n                    <div class=\"stat-label\">æ€»äº‹ä»¶æ•°</div>\n                    <div class=\"stat-description\">æ‰€æœ‰ Hooks äº‹ä»¶</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"user-prompts\">0</div>\n                    <div class=\"stat-label\">ç”¨æˆ·æç¤ºäº‹ä»¶</div>\n                    <div class=\"stat-description\">UserPromptSubmit</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"pre-tools\">0</div>\n                    <div class=\"stat-label\">å·¥å…·æ‰§è¡Œå‰äº‹ä»¶</div>\n                    <div class=\"stat-description\">PreToolUse</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"post-tools\">0</div>\n                    <div class=\"stat-label\">å·¥å…·æ‰§è¡Œåäº‹ä»¶</div>\n                    <div class=\"stat-description\">PostToolUse</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"notifications\">0</div>\n                    <div class=\"stat-label\">é€šçŸ¥äº‹ä»¶</div>\n                    <div class=\"stat-description\">Notification</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"stops\">0</div>\n                    <div class=\"stat-label\">åœæ­¢äº‹ä»¶</div>\n                    <div class=\"stat-description\">Stop</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"subagent-stops\">0</div>\n                    <div class=\"stat-label\">å­ä»£ç†åœæ­¢äº‹ä»¶</div>\n                    <div class=\"stat-description\">SubagentStop</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"pre-compacts\">0</div>\n                    <div class=\"stat-label\">å‹ç¼©å‰äº‹ä»¶</div>\n                    <div class=\"stat-description\">PreCompact</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"session-starts\">0</div>\n                    <div class=\"stat-label\">ä¼šè¯å¼€å§‹äº‹ä»¶</div>\n                    <div class=\"stat-description\">SessionStart</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"session-ends\">0</div>\n                    <div class=\"stat-label\">ä¼šè¯ç»“æŸäº‹ä»¶</div>\n                    <div class=\"stat-description\">SessionEnd</div>\n                </div>\n            </div>\n\n            <div class=\"filter-section\">\n                <div class=\"filter-controls\">\n                    <div class=\"filter-group\">\n                        <label class=\"filter-label\">äº‹ä»¶ç±»å‹ï¼š</label>\n                        <select class=\"filter-select\" id=\"event-filter\">\n                            <option value=\"\">å…¨éƒ¨</option>\n                            <option value=\"UserPromptSubmit\">UserPromptSubmit</option>\n                            <option value=\"PreToolUse\">PreToolUse</option>\n                            <option value=\"PostToolUse\">PostToolUse</option>\n                            <option value=\"Notification\">Notification</option>\n                            <option value=\"Stop\">Stop</option>\n                            <option value=\"SubagentStop\">SubagentStop</option>\n                            <option value=\"PreCompact\">PreCompact</option>\n                            <option value=\"SessionStart\">SessionStart</option>\n                            <option value=\"SessionEnd\">SessionEnd</option>\n                        </select>\n                    </div>\n                    <div class=\"filter-group\">\n                        <label class=\"filter-label\">æœç´¢ï¼š</label>\n                        <input type=\"text\" class=\"search-input\" id=\"search-input\" placeholder=\"æœç´¢äº‹ä»¶å†…å®¹...\">\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <div id=\"hooks-container\" class=\"hooks-container\"></div>\n\n        <div id=\"no-data\" class=\"no-data\">\n            è¯·ä¸Šä¼  hooks.log æ–‡ä»¶å¼€å§‹åˆ†æ\n        </div>\n\n        <div id=\"error-message\" class=\"error-message\" style=\"display: none;\"></div>\n    </div>\n\n    <script>\n        let hooksData = [];\n        let filteredData = [];\n\n        // æ–‡ä»¶ä¸Šä¼ ç›¸å…³å‡½æ•°\n        function setupFileUpload() {\n            const uploadArea = document.getElementById('upload-area');\n            const fileInput = document.getElementById('file-input');\n\n            // ç‚¹å‡»ä¸Šä¼ åŒºåŸŸè§¦å‘æ–‡ä»¶é€‰æ‹©ï¼ˆä½†ä¸åŒ…æ‹¬æŒ‰é’®ï¼‰\n            uploadArea.addEventListener('click', function(event) {\n                // å¦‚æœç‚¹å‡»çš„æ˜¯æŒ‰é’®ï¼Œä¸å¤„ç†\n                if (event.target.tagName === 'BUTTON' || event.target.closest('button')) {\n                    return;\n                }\n                fileInput.click();\n            });\n\n            // æ–‡ä»¶é€‰æ‹©äº‹ä»¶\n            fileInput.addEventListener('change', handleFileSelect);\n\n            // æ‹–æ‹½äº‹ä»¶\n            uploadArea.addEventListener('dragover', handleDragOver);\n            uploadArea.addEventListener('dragleave', handleDragLeave);\n            uploadArea.addEventListener('drop', handleDrop);\n        }\n\n\n        function handleDragOver(e) {\n            e.preventDefault();\n            e.currentTarget.classList.add('dragover');\n        }\n\n        function handleDragLeave(e) {\n            e.preventDefault();\n            e.currentTarget.classList.remove('dragover');\n        }\n\n        function handleDrop(e) {\n            e.preventDefault();\n            e.currentTarget.classList.remove('dragover');\n            handleFiles(e.dataTransfer.files);\n        }\n\n        function handleFileSelect(event) {\n            const files = event.target.files;\n            handleFiles(files);\n        }\n\n        function handleFiles(files) {\n            if (files.length === 0) return;\n\n            const file = files[0];\n\n            // æ£€æŸ¥æ–‡ä»¶ç±»å‹\n            const validTypes = ['.log', '.txt'];\n            const fileExtension = file.name.substring(file.name.lastIndexOf('.')).toLowerCase();\n\n            if (!validTypes.includes(fileExtension)) {\n                showErrorMessage('è¯·é€‰æ‹© .log æˆ– .txt æ ¼å¼çš„æ—¥å¿—æ–‡ä»¶');\n                return;\n            }\n\n            // æ£€æŸ¥æ–‡ä»¶å¤§å° (é™åˆ¶ä¸º50MB)\n            if (file.size > 50 * 1024 * 1024) {\n                showErrorMessage('æ–‡ä»¶å¤§å°ä¸èƒ½è¶…è¿‡50MB');\n                return;\n            }\n\n            // æ˜¾ç¤ºæ–‡ä»¶ä¿¡æ¯\n            showFileInfo(file);\n\n            // è¯»å–æ–‡ä»¶å†…å®¹\n            const reader = new FileReader();\n            reader.onload = function(e) {\n                try {\n                    const content = e.target.result;\n                    console.log('æ–‡ä»¶è¯»å–æˆåŠŸï¼Œå†…å®¹é•¿åº¦:', content.length);\n                    console.log('æ–‡ä»¶å†…å®¹å‰100å­—ç¬¦:', content.substring(0, 100));\n\n                    if (!content || content.trim().length === 0) {\n                        showErrorMessage('æ–‡ä»¶å†…å®¹ä¸ºç©º');\n                        return;\n                    }\n\n                    parseHooksData(content);\n                    showSuccessMessage(`æˆåŠŸåŠ è½½æ–‡ä»¶: ${file.name}`);\n                } catch (error) {\n                    console.error('æ–‡ä»¶è§£æå¼‚å¸¸:', error);\n                    showErrorMessage('æ–‡ä»¶è§£æå¤±è´¥ï¼š' + error.message);\n                }\n            };\n            reader.onerror = function(error) {\n                console.error('æ–‡ä»¶è¯»å–å¤±è´¥:', error);\n                showErrorMessage('æ–‡ä»¶è¯»å–å¤±è´¥');\n            };\n            reader.readAsText(file);\n        }\n\n        function showFileInfo(file) {\n            const fileInfo = document.getElementById('file-info');\n            const fileName = document.getElementById('file-name');\n            const uploadArea = document.getElementById('upload-area');\n\n            fileName.textContent = file.name;\n            fileInfo.style.display = 'flex';\n            uploadArea.style.display = 'none';\n        }\n\n        function clearFile() {\n            const fileInfo = document.getElementById('file-info');\n            const uploadArea = document.getElementById('upload-area');\n            const fileInput = document.getElementById('file-input');\n\n            fileInfo.style.display = 'none';\n            uploadArea.style.display = 'block';\n\n            // æ¸…ç©ºæ–‡ä»¶è¾“å…¥æ¡†çš„å€¼\n            fileInput.value = '';\n\n            // æ¸…ç©ºæ•°æ®\n            hooksData = [];\n            filteredData = [];\n\n            // æ¸…ç©ºæ˜¾ç¤ºåŒºåŸŸ\n            document.getElementById('hooks-container').innerHTML = '';\n            document.getElementById('no-data').style.display = 'block';\n            document.getElementById('stats-section').style.display = 'none';\n\n            // æ˜¾ç¤ºæç¤º\n            showSuccessMessage('å·²æ¸…ç©ºæ–‡ä»¶ï¼Œè¯·é‡æ–°é€‰æ‹©æ—¥å¿—æ–‡ä»¶');\n        }\n\n        function showSuccessMessage(message) {\n            showMessage(message, 'success');\n        }\n\n        function showErrorMessage(message) {\n            showMessage(message, 'error');\n        }\n\n        function showMessage(message, type) {\n            // ç§»é™¤ä¹‹å‰çš„æ¶ˆæ¯\n            const existingMessages = document.querySelectorAll('.upload-message');\n            existingMessages.forEach(msg => msg.remove());\n\n            const messageClass = type === 'success' ? 'upload-success' : 'upload-error';\n            const messageDiv = document.createElement('div');\n            messageDiv.className = `upload-message ${messageClass}`;\n            messageDiv.textContent = message;\n\n            document.querySelector('.upload-card').appendChild(messageDiv);\n\n            // 3ç§’åè‡ªåŠ¨æ¶ˆå¤±\n            setTimeout(() => {\n                messageDiv.style.opacity = '0';\n                setTimeout(() => {\n                    if (messageDiv.parentNode) {\n                        messageDiv.parentNode.removeChild(messageDiv);\n                    }\n                }, 300);\n            }, 3000);\n        }\n\n        // è§£æ hooks æ•°æ®\n        function parseHooksData(content) {\n            console.log('å¼€å§‹è§£æ hooks æ•°æ®ï¼Œå†…å®¹é•¿åº¦:', content.length);\n\n            hooksData = [];\n            const lines = content.split('\\n').filter(line => line.trim());\n            console.log('åˆ†å‰²åçš„è¡Œæ•°:', lines.length);\n\n            for (let i = 0; i < lines.length; i++) {\n                const line = lines[i];\n                try {\n                    const hookData = JSON.parse(line);\n                    hooksData.push(hookData);\n                    console.log(`æˆåŠŸè§£æç¬¬ ${i + 1} è¡Œï¼Œäº‹ä»¶ç±»å‹:`, hookData.event);\n                } catch (error) {\n                    console.error(`è§£æç¬¬ ${i + 1} è¡Œå¤±è´¥:`, error.message);\n                    console.error('é—®é¢˜è¡Œçš„å†…å®¹:', line.substring(0, 100) + (line.length > 100 ? '...' : ''));\n                }\n            }\n\n            console.log('è§£æå®Œæˆï¼Œæ€»å…±è§£æåˆ°', hooksData.length, 'ä¸ªæœ‰æ•ˆäº‹ä»¶');\n\n            if (hooksData.length === 0) {\n                showErrorMessage('æœªæ‰¾åˆ°æœ‰æ•ˆçš„ hooks æ•°æ®ã€‚è¯·ç¡®ä¿æ–‡ä»¶æ ¼å¼æ­£ç¡®ï¼Œæ¯è¡Œåº”è¯¥æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„JSONå¯¹è±¡ã€‚');\n                console.error('è§£æå¤±è´¥ï¼Œæ²¡æœ‰æ‰¾åˆ°æœ‰æ•ˆçš„hooksæ•°æ®');\n                return;\n            }\n\n            filteredData = [...hooksData];\n            console.log('å‡†å¤‡æ˜¾ç¤ºæ•°æ®ï¼Œè¿‡æ»¤åçš„äº‹ä»¶æ•°é‡:', filteredData.length);\n            displayData();\n        }\n\n        // æ˜¾ç¤ºæ•°æ®\n        function displayData() {\n            document.getElementById('no-data').style.display = 'none';\n            document.getElementById('error-message').style.display = 'none';\n            document.getElementById('stats-section').style.display = 'block';\n\n            updateStatistics();\n            renderHooks();\n        }\n\n        // æ›´æ–°ç»Ÿè®¡ä¿¡æ¯\n        function updateStatistics() {\n            const stats = {\n                total: filteredData.length,\n                userPrompts: filteredData.filter(h => h.event === 'UserPromptSubmit').length,\n                preTools: filteredData.filter(h => h.event === 'PreToolUse').length,\n                postTools: filteredData.filter(h => h.event === 'PostToolUse').length,\n                notifications: filteredData.filter(h => h.event === 'Notification').length,\n                stops: filteredData.filter(h => h.event === 'Stop').length,\n                subagentStops: filteredData.filter(h => h.event === 'SubagentStop').length,\n                preCompacts: filteredData.filter(h => h.event === 'PreCompact').length,\n                sessionStarts: filteredData.filter(h => h.event === 'SessionStart').length,\n                sessionEnds: filteredData.filter(h => h.event === 'SessionEnd').length\n            };\n\n            document.getElementById('total-hooks').textContent = stats.total;\n            document.getElementById('user-prompts').textContent = stats.userPrompts;\n            document.getElementById('pre-tools').textContent = stats.preTools;\n            document.getElementById('post-tools').textContent = stats.postTools;\n            document.getElementById('notifications').textContent = stats.notifications;\n            document.getElementById('stops').textContent = stats.stops;\n            document.getElementById('subagent-stops').textContent = stats.subagentStops;\n            document.getElementById('pre-compacts').textContent = stats.preCompacts;\n            document.getElementById('session-starts').textContent = stats.sessionStarts;\n            document.getElementById('session-ends').textContent = stats.sessionEnds;\n        }\n\n        // æ¸²æŸ“ hooks\n        function renderHooks() {\n            const container = document.getElementById('hooks-container');\n            container.innerHTML = '';\n\n            filteredData.forEach((hook, index) => {\n                const hookElement = createHookElement(hook, index);\n                container.appendChild(hookElement);\n            });\n\n            // æ·»åŠ åŠ¨ç”»\n            const elements = container.querySelectorAll('.hook-item');\n            elements.forEach((el, i) => {\n                el.style.opacity = '0';\n                el.style.transform = 'translateY(20px)';\n                setTimeout(() => {\n                    el.style.transition = 'opacity 0.3s ease, transform 0.3s ease';\n                    el.style.opacity = '1';\n                    el.style.transform = 'translateY(0)';\n                }, i * 50);\n            });\n        }\n\n        // åˆ›å»º hook å…ƒç´ \n        function createHookElement(hook, index) {\n            const div = document.createElement('div');\n            div.className = 'hook-item';\n\n            const eventClass = getEventClass(hook.event);\n            const formattedTime = formatTimestamp(hook.ts);\n            const eventDescription = getEventDescription(hook.event, hook.phase);\n\n            div.innerHTML = `\n                <div class=\"hook-header\">\n                    <div class=\"hook-event\">\n                        <span class=\"event-badge ${eventClass}\">${hook.event}</span>\n                    </div>\n                    <div class=\"hook-meta\">\n                        <div class=\"hook-timestamp\">${formattedTime}</div>\n                    </div>\n                </div>\n                <div class=\"hook-message\">${hook.message}</div>\n                <div class=\"hook-description\">${hook.description || eventDescription}</div>\n                <div class=\"hook-details\">\n                    <div class=\"part-card\">\n                        <div class=\"part-header\" onclick=\"toggleDetail('payload-${index}')\">\n                            <span>Payload</span>\n                            <span class=\"toggle-icon\" id=\"icon-payload-${index}\">â–¼</span>\n                        </div>\n                        <div class=\"part-content hidden\" id=\"payload-${index}\">\n                            ${formatJson(hook.payload)}\n                        </div>\n                    </div>\n                </div>\n            `;\n\n            return div;\n        }\n\n        // è·å–äº‹ä»¶æè¿°\n        function getEventDescription(event, phase) {\n            switch (event) {\n                case 'PreToolUse':\n                    return 'å·¥å…·æ‰§è¡Œå‰è§¦å‘ï¼Œå¯åŸºäºå‚æ•°é˜»æ­¢æˆ–è°ƒæ•´è°ƒç”¨ã€‚';\n                case 'PostToolUse':\n                    return 'å·¥å…·æˆåŠŸæ‰§è¡Œåè§¦å‘ï¼Œå¸¸ç”¨äºæ ¼å¼åŒ–ã€æ ¡éªŒæˆ–è®°å½•ç»“æœã€‚';\n                case 'UserPromptSubmit':\n                    return 'ç”¨æˆ·æäº¤æç¤ºå‰è§¦å‘ï¼Œå¯è¿›è¡Œæç¤ºæ ¡éªŒæˆ–å¢å¼ºã€‚';\n                case 'Notification':\n                    return 'å½“ç³»ç»Ÿå‘é€é€šçŸ¥ï¼ˆéœ€æˆæƒæˆ–ç­‰å¾…è¾“å…¥ï¼‰æ—¶è§¦å‘ã€‚';\n                case 'Stop':\n                    return 'ä¸»ä»£ç†å®Œæˆå“åº”æ—¶è§¦å‘ï¼ˆç”¨æˆ·ä¸­æ–­ä¸è§¦å‘ï¼‰ã€‚';\n                case 'SubagentStop':\n                    return 'å­ä»£ç†ä»»åŠ¡å®Œæˆæ—¶è§¦å‘ï¼Œç”¨äºè®°å½•å­ä»»åŠ¡ç»“æŸã€‚';\n                case 'PreCompact':\n                    return phase === 'manual'\n                        ? 'æ‰‹åŠ¨å‹ç¼©å‰è§¦å‘ï¼Œç”¨äºè®°å½•æˆ–å‡†å¤‡å‹ç¼©ã€‚'\n                        : 'è‡ªåŠ¨å‹ç¼©å‰è§¦å‘ï¼ˆä¸Šä¸‹æ–‡æ¥è¿‘ä¸Šé™ï¼‰ï¼Œç”¨äºè®°å½•æˆ–å‡†å¤‡å‹ç¼©ã€‚';\n                case 'SessionStart':\n                    switch (phase) {\n                        case 'startup':\n                            return 'æ–°ä¼šè¯å¯åŠ¨æ—¶è§¦å‘ï¼Œç”¨äºåŠ è½½ä¸Šä¸‹æ–‡æˆ–è®¾ç½®ç¯å¢ƒã€‚';\n                        case 'resume':\n                            return 'æ¢å¤ä¼šè¯æ—¶è§¦å‘ï¼Œç”¨äºç»§ç»­å…ˆå‰ä¸Šä¸‹æ–‡ã€‚';\n                        case 'clear':\n                            return 'æ¸…ç©ºä¼šè¯åè§¦å‘ï¼Œç”¨äºé‡ç½®ç¯å¢ƒä¸ä¸Šä¸‹æ–‡ã€‚';\n                        case 'compact':\n                            return 'å› å‹ç¼©æ“ä½œè§¦å‘çš„ä¼šè¯å¯åŠ¨ï¼Œç”¨äºç»´æŒä¸Šä¸‹æ–‡ã€‚';\n                        default:\n                            return 'ä¼šè¯å¯åŠ¨ç›¸å…³äº‹ä»¶ï¼Œåˆå§‹åŒ–æˆ–æ¢å¤ä¸Šä¸‹æ–‡ã€‚';\n                    }\n                case 'SessionEnd':\n                    return 'ä¼šè¯ç»“æŸæ—¶è§¦å‘ï¼Œå¸¸ç”¨äºæ”¶å°¾ä¸æ¸…ç†ã€‚';\n                default:\n                    return 'æœªçŸ¥äº‹ä»¶ã€‚';\n            }\n        }\n\n        // è·å–äº‹ä»¶æ ·å¼ç±»\n        function getEventClass(event) {\n            switch (event) {\n                case 'UserPromptSubmit': return 'event-userprompt';\n                case 'PreToolUse': return 'event-pretool';\n                case 'PostToolUse': return 'event-posttool';\n                case 'Notification': return 'event-notification';\n                case 'Stop': return 'event-stop';\n                case 'SubagentStop': return 'event-subagent-stop';\n                case 'PreCompact': return 'event-pre-compact';\n                case 'SessionStart': return 'event-session-start';\n                case 'SessionEnd': return 'event-session-end';\n                default: return 'event-default';\n            }\n        }\n\n        // æ ¼å¼åŒ–æ—¶é—´æˆ³\n        function formatTimestamp(ts) {\n            const date = new Date(ts);\n            return date.toLocaleString('zh-CN');\n        }\n\n        // æ ¼å¼åŒ– JSON\n        function formatJson(obj, indent = 0) {\n            if (!obj) return '';\n\n            try {\n                const spaces = '  '.repeat(indent);\n                let result = '';\n\n                if (Array.isArray(obj)) {\n                    result += '[\\n';\n                    obj.forEach((item, index) => {\n                        result += spaces + '  ';\n                        if (typeof item === 'object' && item !== null) {\n                            result += formatJson(item, indent + 1);\n                        } else {\n                            result += formatJsonValue(item);\n                        }\n                        if (index < obj.length - 1) result += ',';\n                        result += '\\n';\n                    });\n                    result += spaces + ']';\n                } else if (typeof obj === 'object' && obj !== null) {\n                    result += '{\\n';\n                    const keys = Object.keys(obj);\n                    keys.forEach((key, index) => {\n                        result += spaces + '  ';\n                        result += `<span class=\"json-key\">\"${escapeHtml(key)}\"</span>: `;\n\n                        if (typeof obj[key] === 'object' && obj[key] !== null) {\n                            result += formatJson(obj[key], indent + 1);\n                        } else {\n                            result += formatJsonValue(obj[key]);\n                        }\n\n                        if (index < keys.length - 1) result += ',';\n                        result += '\\n';\n                    });\n                    result += spaces + '}';\n                } else {\n                    result += formatJsonValue(obj);\n                }\n\n                return result;\n            } catch (error) {\n                return escapeHtml(JSON.stringify(obj));\n            }\n        }\n\n        // æ ¼å¼åŒ– JSON å€¼\n        function formatJsonValue(value) {\n            if (typeof value === 'string') {\n                if (value.startsWith('http://') || value.startsWith('https://')) {\n                    return `<span class=\"json-url\" onclick=\"window.open('${escapeHtml(value)}', '_blank')\">\"${escapeHtml(value)}\"</span>`;\n                }\n                return `<span class=\"json-string\">\"${escapeHtml(value)}\"</span>`;\n            } else if (typeof value === 'number') {\n                return `<span class=\"json-number\">${value}</span>`;\n            } else if (typeof value === 'boolean') {\n                return `<span class=\"json-boolean\">${value}</span>`;\n            } else if (value === null) {\n                return `<span class=\"json-null\">null</span>`;\n            } else {\n                return `<span style=\"color: #666;\">${value}</span>`;\n            }\n        }\n\n        // HTML è½¬ä¹‰\n        function escapeHtml(text) {\n            const div = document.createElement('div');\n            div.textContent = text;\n            return div.innerHTML;\n        }\n\n        // åˆ‡æ¢è¯¦æƒ…æ˜¾ç¤º\n        function toggleDetail(id) {\n            const content = document.getElementById(id);\n            const icon = document.getElementById('icon-' + id);\n\n            if (content.classList.contains('hidden')) {\n                content.classList.remove('hidden');\n                icon.classList.add('rotated');\n            } else {\n                content.classList.add('hidden');\n                icon.classList.remove('rotated');\n            }\n        }\n\n        // è¿‡æ»¤å’Œæœç´¢\n        document.getElementById('event-filter').addEventListener('change', applyFilters);\n        document.getElementById('search-input').addEventListener('input', applyFilters);\n\n        function applyFilters() {\n            const eventFilter = document.getElementById('event-filter').value;\n            const searchText = document.getElementById('search-input').value.toLowerCase();\n\n            filteredData = hooksData.filter(hook => {\n                const matchEvent = !eventFilter || hook.event === eventFilter;\n                const matchSearch = !searchText ||\n                    JSON.stringify(hook).toLowerCase().includes(searchText);\n\n                return matchEvent && matchSearch;\n            });\n\n            updateStatistics();\n            renderHooks();\n        }\n\n        // æ ¼å¼åŒ–æ–‡ä»¶å¤§å°\n        function formatFileSize(bytes) {\n            if (bytes === 0) return '0 Bytes';\n            const k = 1024;\n            const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n            const i = Math.floor(Math.log(bytes) / Math.log(k));\n            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n        }\n\n        // é¡µé¢åŠ è½½æ—¶æ‰§è¡Œ\n        document.addEventListener('DOMContentLoaded', function() {\n            // æ·»åŠ åˆå§‹åŠ è½½åŠ¨ç”»\n            const cards = document.querySelectorAll('.stat-card, .upload-card');\n            cards.forEach((card, index) => {\n                card.style.opacity = '0';\n                card.style.transform = 'translateY(20px)';\n                setTimeout(() => {\n                    card.style.transition = 'opacity 0.5s ease, transform 0.5s ease';\n                    card.style.opacity = '1';\n                    card.style.transform = 'translateY(0)';\n                }, index * 100);\n            });\n\n            // è®¾ç½®æ–‡ä»¶ä¸Šä¼ \n            setupFileUpload();\n        });\n\n            </script>\n</body>\n</html>","structuredPatch":[{"oldStart":585,"oldLines":6,"newStart":585,"newLines":11,"lines":["                     <div class=\"stat-label\">ä¼šè¯ç»“æŸäº‹ä»¶</div>","                     <div class=\"stat-description\">SessionEnd</div>","                 </div>","+                <div class=\"stat-card\">","+                    <div class=\"stat-number\" id=\"transcript-count\">0</div>","+                    <div class=\"stat-label\">åŒ…å«è½¬å½•è·¯å¾„äº‹ä»¶</div>","+                    <div class=\"stat-description\">åŒ…å« transcript_path</div>","+                </div>","             </div>"," ","             <div class=\"filter-section\">"]}],"userModified":false,"replaceAll":false}}}
{"ts":"2025-11-05T02:25:39.998Z","event":"PreToolUse","phase":"","message":"PreToolUseäº‹ä»¶æ­£åœ¨æ‰§è¡Œ","description":"å·¥å…·æ‰§è¡Œå‰è§¦å‘ï¼Œå¯åŸºäºå‚æ•°é˜»æ­¢æˆ–è°ƒæ•´è°ƒç”¨ã€‚","doc_url":"https://docs.claude.com/zh-CN/docs/claude-code/hooks#pretooluse","payload":{"session_id":"c7c21516-7e1e-49b2-8ae5-4e1bb98e9692","transcript_path":"C:\\Users\\WTCL\\.claude\\projects\\i--claude-code-proxy\\c7c21516-7e1e-49b2-8ae5-4e1bb98e9692.jsonl","cwd":"i:\\claude-code-proxy","permission_mode":"acceptEdits","hook_event_name":"PreToolUse","tool_name":"Edit","tool_input":{"file_path":"i:\\claude-code-proxy\\analyze\\hooks.html","old_string":"          const stats = {\n                total: filteredData.length,\n                userPrompts: filteredData.filter(h => h.event === 'UserPromptSubmit').length,\n                preTools: filteredData.filter(h => h.event === 'PreToolUse').length,\n                postTools: filteredData.filter(h => h.event === 'PostToolUse').length,\n                notifications: filteredData.filter(h => h.event === 'Notification').length,\n                stops: filteredData.filter(h => h.event === 'Stop').length,\n                subagentStops: filteredData.filter(h => h.event === 'SubagentStop').length,\n                preCompacts: filteredData.filter(h => h.event === 'PreCompact').length,\n                sessionStarts: filteredData.filter(h => h.event === 'SessionStart').length,\n                sessionEnds: filteredData.filter(h => h.event === 'SessionEnd').length\n            };","new_string":"          const stats = {\n                total: filteredData.length,\n                userPrompts: filteredData.filter(h => h.event === 'UserPromptSubmit').length,\n                preTools: filteredData.filter(h => h.event === 'PreToolUse').length,\n                postTools: filteredData.filter(h => h.event === 'PostToolUse').length,\n                notifications: filteredData.filter(h => h.event === 'Notification').length,\n                stops: filteredData.filter(h => h.event === 'Stop').length,\n                subagentStops: filteredData.filter(h => h.event === 'SubagentStop').length,\n                preCompacts: filteredData.filter(h => h.event === 'PreCompact').length,\n                sessionStarts: filteredData.filter(h => h.event === 'SessionStart').length,\n                sessionEnds: filteredData.filter(h => h.event === 'SessionEnd').length,\n                transcriptCount: filteredData.filter(h => hasTranscriptPath(h)).length\n            };"}}}
{"ts":"2025-11-05T02:25:41.593Z","event":"PostToolUse","phase":"","message":"PostToolUseäº‹ä»¶æ­£åœ¨æ‰§è¡Œ","description":"å·¥å…·æˆåŠŸæ‰§è¡Œåè§¦å‘ï¼Œå¸¸ç”¨äºæ ¼å¼åŒ–ã€æ ¡éªŒæˆ–è®°å½•ç»“æœã€‚","doc_url":"https://docs.claude.com/zh-CN/docs/claude-code/hooks#posttooluse","payload":{"session_id":"c7c21516-7e1e-49b2-8ae5-4e1bb98e9692","transcript_path":"C:\\Users\\WTCL\\.claude\\projects\\i--claude-code-proxy\\c7c21516-7e1e-49b2-8ae5-4e1bb98e9692.jsonl","cwd":"i:\\claude-code-proxy","permission_mode":"acceptEdits","hook_event_name":"PostToolUse","tool_name":"Edit","tool_input":{"file_path":"i:\\claude-code-proxy\\analyze\\hooks.html","old_string":"          const stats = {\n                total: filteredData.length,\n                userPrompts: filteredData.filter(h => h.event === 'UserPromptSubmit').length,\n                preTools: filteredData.filter(h => h.event === 'PreToolUse').length,\n                postTools: filteredData.filter(h => h.event === 'PostToolUse').length,\n                notifications: filteredData.filter(h => h.event === 'Notification').length,\n                stops: filteredData.filter(h => h.event === 'Stop').length,\n                subagentStops: filteredData.filter(h => h.event === 'SubagentStop').length,\n                preCompacts: filteredData.filter(h => h.event === 'PreCompact').length,\n                sessionStarts: filteredData.filter(h => h.event === 'SessionStart').length,\n                sessionEnds: filteredData.filter(h => h.event === 'SessionEnd').length\n            };","new_string":"          const stats = {\n                total: filteredData.length,\n                userPrompts: filteredData.filter(h => h.event === 'UserPromptSubmit').length,\n                preTools: filteredData.filter(h => h.event === 'PreToolUse').length,\n                postTools: filteredData.filter(h => h.event === 'PostToolUse').length,\n                notifications: filteredData.filter(h => h.event === 'Notification').length,\n                stops: filteredData.filter(h => h.event === 'Stop').length,\n                subagentStops: filteredData.filter(h => h.event === 'SubagentStop').length,\n                preCompacts: filteredData.filter(h => h.event === 'PreCompact').length,\n                sessionStarts: filteredData.filter(h => h.event === 'SessionStart').length,\n                sessionEnds: filteredData.filter(h => h.event === 'SessionEnd').length,\n                transcriptCount: filteredData.filter(h => hasTranscriptPath(h)).length\n            };"},"tool_response":{"filePath":"i:\\claude-code-proxy\\analyze\\hooks.html","oldString":"          const stats = {\n                total: filteredData.length,\n                userPrompts: filteredData.filter(h => h.event === 'UserPromptSubmit').length,\n                preTools: filteredData.filter(h => h.event === 'PreToolUse').length,\n                postTools: filteredData.filter(h => h.event === 'PostToolUse').length,\n                notifications: filteredData.filter(h => h.event === 'Notification').length,\n                stops: filteredData.filter(h => h.event === 'Stop').length,\n                subagentStops: filteredData.filter(h => h.event === 'SubagentStop').length,\n                preCompacts: filteredData.filter(h => h.event === 'PreCompact').length,\n                sessionStarts: filteredData.filter(h => h.event === 'SessionStart').length,\n                sessionEnds: filteredData.filter(h => h.event === 'SessionEnd').length\n            };","newString":"          const stats = {\n                total: filteredData.length,\n                userPrompts: filteredData.filter(h => h.event === 'UserPromptSubmit').length,\n                preTools: filteredData.filter(h => h.event === 'PreToolUse').length,\n                postTools: filteredData.filter(h => h.event === 'PostToolUse').length,\n                notifications: filteredData.filter(h => h.event === 'Notification').length,\n                stops: filteredData.filter(h => h.event === 'Stop').length,\n                subagentStops: filteredData.filter(h => h.event === 'SubagentStop').length,\n                preCompacts: filteredData.filter(h => h.event === 'PreCompact').length,\n                sessionStarts: filteredData.filter(h => h.event === 'SessionStart').length,\n                sessionEnds: filteredData.filter(h => h.event === 'SessionEnd').length,\n                transcriptCount: filteredData.filter(h => hasTranscriptPath(h)).length\n            };","originalFile":"<!DOCTYPE html>\n<html lang=\"zh-CN\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Hooks æ—¥å¿—åˆ†æ</title>\n    <style>\n        * {\n            margin: 0;\n            padding: 0;\n            box-sizing: border-box;\n        }\n\n        body {\n            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n            min-height: 100vh;\n            padding: 20px;\n        }\n\n        .container {\n            max-width: 1400px;\n            margin: 0 auto;\n        }\n\n        .header {\n            text-align: center;\n            color: white;\n            margin-bottom: 30px;\n        }\n\n        .header h1 {\n            font-size: 2.5rem;\n            margin-bottom: 10px;\n            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);\n        }\n\n        .header p {\n            font-size: 1.1rem;\n            opacity: 0.9;\n        }\n\n        /* æ–‡ä»¶ä¸Šä¼ ç»„ä»¶æ ·å¼ */\n        .upload-section {\n            margin-bottom: 30px;\n        }\n\n        .upload-card {\n            background: white;\n            border-radius: 15px;\n            padding: 25px;\n            box-shadow: 0 10px 30px rgba(0,0,0,0.1);\n            border: 2px dashed #cbd5e0;\n            transition: all 0.3s ease;\n        }\n\n        .upload-card:hover {\n            border-color: #667eea;\n            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.2);\n        }\n\n        .upload-header {\n            font-size: 1.2rem;\n            font-weight: bold;\n            color: #4a5568;\n            margin-bottom: 20px;\n            text-align: center;\n        }\n\n        .upload-area {\n            border: 2px dashed #e2e8f0;\n            border-radius: 10px;\n            padding: 40px 20px;\n            text-align: center;\n            transition: all 0.3s ease;\n            cursor: pointer;\n        }\n\n        .upload-area:hover {\n            border-color: #667eea;\n            background: #f7fafc;\n        }\n\n        .upload-area.dragover {\n            border-color: #667eea;\n            background: #edf2f7;\n            transform: scale(1.02);\n        }\n\n        .upload-icon {\n            font-size: 3rem;\n            margin-bottom: 15px;\n            opacity: 0.7;\n        }\n\n        .upload-text {\n            font-size: 1.1rem;\n            color: #4a5568;\n            margin-bottom: 10px;\n            font-weight: 500;\n        }\n\n        .upload-hint {\n            font-size: 0.9rem;\n            color: #718096;\n            margin-bottom: 20px;\n        }\n\n        .upload-btn {\n            background: #667eea;\n            color: white;\n            border: none;\n            padding: 12px 24px;\n            border-radius: 8px;\n            font-size: 1rem;\n            font-weight: 500;\n            cursor: pointer;\n            transition: all 0.3s ease;\n        }\n\n        .upload-btn:hover {\n            background: #5a67d8;\n            transform: translateY(-2px);\n            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);\n        }\n\n        .file-info {\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            background: #f7fafc;\n            padding: 15px 20px;\n            border-radius: 8px;\n            margin-top: 15px;\n        }\n\n        .file-name {\n            font-weight: 500;\n            color: #4a5568;\n            flex: 1;\n            overflow: hidden;\n            text-overflow: ellipsis;\n            white-space: nowrap;\n        }\n\n        .clear-btn {\n            background: #fc8181;\n            color: white;\n            border: none;\n            width: 30px;\n            height: 30px;\n            border-radius: 50%;\n            cursor: pointer;\n            font-size: 1rem;\n            transition: all 0.3s ease;\n        }\n\n        .clear-btn:hover {\n            background: #f56565;\n            transform: scale(1.1);\n        }\n\n        /* æ¶ˆæ¯æç¤ºæ ·å¼ */\n        .upload-message {\n            margin-top: 15px;\n            padding: 12px 16px;\n            border-radius: 8px;\n            font-size: 0.9rem;\n            animation: slideIn 0.3s ease;\n        }\n\n        .upload-success {\n            background: #d4edda;\n            color: #155724;\n            border: 1px solid #c3e6cb;\n        }\n\n        .upload-error {\n            background: #f8d7da;\n            color: #721c24;\n            border: 1px solid #f5c6cb;\n        }\n\n        @keyframes slideIn {\n            from {\n                opacity: 0;\n                transform: translateY(-10px);\n            }\n            to {\n                opacity: 1;\n                transform: translateY(0);\n            }\n        }\n\n        #file-input {\n            display: none;\n        }\n\n        .stats-grid {\n            display: grid;\n            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\n            gap: 20px;\n            margin-bottom: 30px;\n        }\n\n        .stat-card {\n            background: white;\n            border-radius: 15px;\n            padding: 25px;\n            box-shadow: 0 10px 30px rgba(0,0,0,0.2);\n            text-align: center;\n            transition: transform 0.3s ease, box-shadow 0.3s ease;\n        }\n\n        .stat-card:hover {\n            transform: translateY(-5px);\n            box-shadow: 0 15px 40px rgba(0,0,0,0.3);\n        }\n\n        .stat-number {\n            font-size: 3rem;\n            font-weight: bold;\n            margin-bottom: 10px;\n        }\n\n        .stat-label {\n            font-size: 1.1rem;\n            color: #666;\n            margin-bottom: 5px;\n        }\n\n        .stat-description {\n            font-size: 0.9rem;\n            color: #999;\n        }\n\n        .filter-section {\n            background: white;\n            border-radius: 15px;\n            padding: 20px;\n            box-shadow: 0 10px 30px rgba(0,0,0,0.2);\n            margin-bottom: 30px;\n        }\n\n        .filter-controls {\n            display: flex;\n            gap: 15px;\n            flex-wrap: wrap;\n            align-items: center;\n        }\n\n        .filter-group {\n            display: flex;\n            align-items: center;\n            gap: 10px;\n        }\n\n        .filter-label {\n            font-weight: bold;\n            color: #333;\n        }\n\n        .filter-select, .search-input {\n            padding: 8px 12px;\n            border: 2px solid #ddd;\n            border-radius: 5px;\n            font-size: 0.9rem;\n            transition: border-color 0.3s ease;\n        }\n\n        .filter-select:focus, .search-input:focus {\n            outline: none;\n            border-color: #667eea;\n        }\n\n        .search-input {\n            min-width: 200px;\n        }\n\n        .hooks-container {\n            display: grid;\n            gap: 30px;\n        }\n\n        .hook-item {\n            background: white;\n            border-radius: 15px;\n            padding: 25px;\n            box-shadow: 0 10px 30px rgba(0,0,0,0.2);\n        }\n\n        .hook-header {\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            margin-bottom: 20px;\n            padding-bottom: 15px;\n            border-bottom: 2px solid #667eea;\n        }\n\n        .hook-event {\n            font-size: 1.5rem;\n            font-weight: bold;\n            color: #667eea;\n        }\n\n        .hook-meta {\n            display: flex;\n            gap: 20px;\n            align-items: center;\n        }\n\n        .hook-timestamp {\n            font-size: 0.9rem;\n            color: #666;\n            background: #f0f4ff;\n            padding: 5px 12px;\n            border-radius: 20px;\n        }\n\n        .hook-message {\n            background: #f8f9fa;\n            border-left: 4px solid #667eea;\n            padding: 15px;\n            margin-bottom: 15px;\n            border-radius: 5px;\n        }\n\n        .hook-description {\n            color: #666;\n            font-style: italic;\n            margin-bottom: 15px;\n        }\n\n        .hook-details {\n            display: flex;\n            flex-direction: column;\n            gap: 20px;\n        }\n\n        .part-card {\n            background: #f8f9fa;\n            border-radius: 10px;\n            overflow: hidden;\n        }\n\n        .part-header {\n            background: #667eea;\n            color: white;\n            padding: 12px 15px;\n            font-weight: bold;\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            cursor: pointer;\n            transition: background 0.3s ease;\n        }\n\n        .part-header:hover {\n            background: #5a67d8;\n        }\n\n        .part-content {\n            padding: 15px;\n            font-family: 'Courier New', monospace;\n            font-size: 0.9rem;\n            background: #1a1a1a;\n            color: #ffffff;\n            overflow-y: auto;\n            white-space: pre-wrap;\n            line-height: 1.6;\n            min-height: 100px;\n            border-radius: 8px;\n            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.3);\n        }\n\n        .part-content.hidden {\n            display: none;\n        }\n\n        .toggle-icon {\n            transition: transform 0.3s ease;\n        }\n\n        .toggle-icon.rotated {\n            transform: rotate(180deg);\n        }\n\n        /* è‡ªå®šä¹‰æ»šåŠ¨æ¡æ ·å¼ */\n        .part-content::-webkit-scrollbar {\n            width: 8px;\n        }\n\n        .part-content::-webkit-scrollbar-track {\n            background: #2a2a2a;\n            border-radius: 4px;\n        }\n\n        .part-content::-webkit-scrollbar-thumb {\n            background: #4a4a4a;\n            border-radius: 4px;\n        }\n\n        .part-content::-webkit-scrollbar-thumb:hover {\n            background: #5a5a5a;\n        }\n\n        .event-badge {\n            display: inline-block;\n            padding: 4px 12px;\n            border-radius: 20px;\n            font-size: 0.8rem;\n            font-weight: bold;\n            margin-right: 10px;\n        }\n\n        .event-userprompt { background: #FF6B6B; color: white; }\n        .event-pretool { background: #4ECDC4; color: white; }\n        .event-posttool { background: #45B7D1; color: white; }\n        .event-notification { background: #9C27B0; color: white; }\n        .event-stop { background: #F44336; color: white; }\n        .event-subagent-stop { background: #FF9800; color: white; }\n        .event-pre-compact { background: #FFC107; color: white; }\n        .event-session-start { background: #4CAF50; color: white; }\n        .event-session-end { background: #607D8B; color: white; }\n        .event-default { background: #78909C; color: white; }\n\n        .no-data {\n            text-align: center;\n            padding: 60px 20px;\n            color: white;\n            font-size: 1.2rem;\n        }\n\n        .error-message {\n            background: #fff5f5;\n            border: 2px solid #fc8181;\n            color: #c53030;\n            padding: 20px;\n            border-radius: 10px;\n            text-align: center;\n            font-size: 1.1rem;\n            margin: 20px 0;\n        }\n\n        .json-key { color: #9C27B0; }\n        .json-string { color: #4CAF50; }\n        .json-number { color: #FF9800; }\n        .json-boolean { color: #F44336; }\n        .json-null { color: #9E9E9E; }\n        .json-url { color: #2196F3; text-decoration: underline; cursor: pointer; }\n\n        .transcript-path {\n            background: #fff3cd;\n            border: 1px solid #ffeaa7;\n            border-radius: 5px;\n            padding: 8px 12px;\n            margin-top: 10px;\n            font-size: 0.9rem;\n        }\n\n        .transcript-path-label {\n            font-weight: bold;\n            color: #856404;\n            margin-bottom: 5px;\n        }\n\n        .transcript-path-value {\n            color: #856404;\n            word-break: break-all;\n            font-family: monospace;\n            background: #f8f9fa;\n            padding: 4px 8px;\n            border-radius: 3px;\n        }\n\n        .has-transcript-badge {\n            background: #ffc107;\n            color: #212529;\n            padding: 2px 8px;\n            border-radius: 12px;\n            font-size: 0.7rem;\n            font-weight: bold;\n            margin-left: 10px;\n        }\n\n        @media (max-width: 768px) {\n            .header h1 {\n                font-size: 2rem;\n            }\n\n            .stats-grid {\n                grid-template-columns: repeat(2, 1fr);\n            }\n\n            .filter-controls {\n                flex-direction: column;\n                align-items: stretch;\n            }\n\n            .search-input {\n                min-width: auto;\n            }\n        }\n    </style>\n</head>\n<body>\n    <div class=\"container\">\n        <div class=\"header\">\n            <h1>Hooks æ—¥å¿—åˆ†æ</h1>\n            <p>ä¸Šä¼ å¹¶åˆ†æ Claude Hooks äº‹ä»¶æ—¥å¿—</p>\n        </div>\n\n        <!-- æ–‡ä»¶ä¸Šä¼ ç»„ä»¶ -->\n        <div class=\"upload-section\">\n            <div class=\"upload-card\">\n                <div class=\"upload-header\">\n                    <span>ğŸ“ é€‰æ‹© Hooks æ—¥å¿—æ–‡ä»¶</span>\n                </div>\n                <div class=\"upload-area\" id=\"upload-area\">\n                    <div class=\"upload-content\">\n                        <div class=\"upload-icon\">ğŸ“„</div>\n                        <p class=\"upload-text\">ç‚¹å‡»é€‰æ‹©æ–‡ä»¶æˆ–æ‹–æ‹½æ–‡ä»¶åˆ°æ­¤å¤„</p>\n                        <p class=\"upload-hint\">æ”¯æŒ .log .txt æ ¼å¼çš„æ—¥å¿—æ–‡ä»¶ï¼Œæ¯è¡Œä¸€ä¸ª JSON å¯¹è±¡ï¼Œæœ€å¤§50MB</p>\n                        <input type=\"file\" id=\"file-input\" accept=\".log,.txt\" style=\"display: none;\">\n                        <button class=\"upload-btn\" onclick=\"document.getElementById('file-input').click()\">é€‰æ‹©æ–‡ä»¶</button>\n                    </div>\n                </div>\n                <div class=\"file-info\" id=\"file-info\" style=\"display: none;\">\n                    <span class=\"file-name\" id=\"file-name\"></span>\n                    <button class=\"clear-btn\" onclick=\"clearFile()\">âœ•</button>\n                </div>\n            </div>\n        </div>\n\n        <div id=\"stats-section\" style=\"display: none;\">\n            <div class=\"stats-grid\">\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"total-hooks\">0</div>\n                    <div class=\"stat-label\">æ€»äº‹ä»¶æ•°</div>\n                    <div class=\"stat-description\">æ‰€æœ‰ Hooks äº‹ä»¶</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"user-prompts\">0</div>\n                    <div class=\"stat-label\">ç”¨æˆ·æç¤ºäº‹ä»¶</div>\n                    <div class=\"stat-description\">UserPromptSubmit</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"pre-tools\">0</div>\n                    <div class=\"stat-label\">å·¥å…·æ‰§è¡Œå‰äº‹ä»¶</div>\n                    <div class=\"stat-description\">PreToolUse</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"post-tools\">0</div>\n                    <div class=\"stat-label\">å·¥å…·æ‰§è¡Œåäº‹ä»¶</div>\n                    <div class=\"stat-description\">PostToolUse</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"notifications\">0</div>\n                    <div class=\"stat-label\">é€šçŸ¥äº‹ä»¶</div>\n                    <div class=\"stat-description\">Notification</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"stops\">0</div>\n                    <div class=\"stat-label\">åœæ­¢äº‹ä»¶</div>\n                    <div class=\"stat-description\">Stop</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"subagent-stops\">0</div>\n                    <div class=\"stat-label\">å­ä»£ç†åœæ­¢äº‹ä»¶</div>\n                    <div class=\"stat-description\">SubagentStop</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"pre-compacts\">0</div>\n                    <div class=\"stat-label\">å‹ç¼©å‰äº‹ä»¶</div>\n                    <div class=\"stat-description\">PreCompact</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"session-starts\">0</div>\n                    <div class=\"stat-label\">ä¼šè¯å¼€å§‹äº‹ä»¶</div>\n                    <div class=\"stat-description\">SessionStart</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"session-ends\">0</div>\n                    <div class=\"stat-label\">ä¼šè¯ç»“æŸäº‹ä»¶</div>\n                    <div class=\"stat-description\">SessionEnd</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"transcript-count\">0</div>\n                    <div class=\"stat-label\">åŒ…å«è½¬å½•è·¯å¾„äº‹ä»¶</div>\n                    <div class=\"stat-description\">åŒ…å« transcript_path</div>\n                </div>\n            </div>\n\n            <div class=\"filter-section\">\n                <div class=\"filter-controls\">\n                    <div class=\"filter-group\">\n                        <label class=\"filter-label\">äº‹ä»¶ç±»å‹ï¼š</label>\n                        <select class=\"filter-select\" id=\"event-filter\">\n                            <option value=\"\">å…¨éƒ¨</option>\n                            <option value=\"UserPromptSubmit\">UserPromptSubmit</option>\n                            <option value=\"PreToolUse\">PreToolUse</option>\n                            <option value=\"PostToolUse\">PostToolUse</option>\n                            <option value=\"Notification\">Notification</option>\n                            <option value=\"Stop\">Stop</option>\n                            <option value=\"SubagentStop\">SubagentStop</option>\n                            <option value=\"PreCompact\">PreCompact</option>\n                            <option value=\"SessionStart\">SessionStart</option>\n                            <option value=\"SessionEnd\">SessionEnd</option>\n                        </select>\n                    </div>\n                    <div class=\"filter-group\">\n                        <label class=\"filter-label\">æœç´¢ï¼š</label>\n                        <input type=\"text\" class=\"search-input\" id=\"search-input\" placeholder=\"æœç´¢äº‹ä»¶å†…å®¹...\">\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <div id=\"hooks-container\" class=\"hooks-container\"></div>\n\n        <div id=\"no-data\" class=\"no-data\">\n            è¯·ä¸Šä¼  hooks.log æ–‡ä»¶å¼€å§‹åˆ†æ\n        </div>\n\n        <div id=\"error-message\" class=\"error-message\" style=\"display: none;\"></div>\n    </div>\n\n    <script>\n        let hooksData = [];\n        let filteredData = [];\n\n        // æ–‡ä»¶ä¸Šä¼ ç›¸å…³å‡½æ•°\n        function setupFileUpload() {\n            const uploadArea = document.getElementById('upload-area');\n            const fileInput = document.getElementById('file-input');\n\n            // ç‚¹å‡»ä¸Šä¼ åŒºåŸŸè§¦å‘æ–‡ä»¶é€‰æ‹©ï¼ˆä½†ä¸åŒ…æ‹¬æŒ‰é’®ï¼‰\n            uploadArea.addEventListener('click', function(event) {\n                // å¦‚æœç‚¹å‡»çš„æ˜¯æŒ‰é’®ï¼Œä¸å¤„ç†\n                if (event.target.tagName === 'BUTTON' || event.target.closest('button')) {\n                    return;\n                }\n                fileInput.click();\n            });\n\n            // æ–‡ä»¶é€‰æ‹©äº‹ä»¶\n            fileInput.addEventListener('change', handleFileSelect);\n\n            // æ‹–æ‹½äº‹ä»¶\n            uploadArea.addEventListener('dragover', handleDragOver);\n            uploadArea.addEventListener('dragleave', handleDragLeave);\n            uploadArea.addEventListener('drop', handleDrop);\n        }\n\n\n        function handleDragOver(e) {\n            e.preventDefault();\n            e.currentTarget.classList.add('dragover');\n        }\n\n        function handleDragLeave(e) {\n            e.preventDefault();\n            e.currentTarget.classList.remove('dragover');\n        }\n\n        function handleDrop(e) {\n            e.preventDefault();\n            e.currentTarget.classList.remove('dragover');\n            handleFiles(e.dataTransfer.files);\n        }\n\n        function handleFileSelect(event) {\n            const files = event.target.files;\n            handleFiles(files);\n        }\n\n        function handleFiles(files) {\n            if (files.length === 0) return;\n\n            const file = files[0];\n\n            // æ£€æŸ¥æ–‡ä»¶ç±»å‹\n            const validTypes = ['.log', '.txt'];\n            const fileExtension = file.name.substring(file.name.lastIndexOf('.')).toLowerCase();\n\n            if (!validTypes.includes(fileExtension)) {\n                showErrorMessage('è¯·é€‰æ‹© .log æˆ– .txt æ ¼å¼çš„æ—¥å¿—æ–‡ä»¶');\n                return;\n            }\n\n            // æ£€æŸ¥æ–‡ä»¶å¤§å° (é™åˆ¶ä¸º50MB)\n            if (file.size > 50 * 1024 * 1024) {\n                showErrorMessage('æ–‡ä»¶å¤§å°ä¸èƒ½è¶…è¿‡50MB');\n                return;\n            }\n\n            // æ˜¾ç¤ºæ–‡ä»¶ä¿¡æ¯\n            showFileInfo(file);\n\n            // è¯»å–æ–‡ä»¶å†…å®¹\n            const reader = new FileReader();\n            reader.onload = function(e) {\n                try {\n                    const content = e.target.result;\n                    console.log('æ–‡ä»¶è¯»å–æˆåŠŸï¼Œå†…å®¹é•¿åº¦:', content.length);\n                    console.log('æ–‡ä»¶å†…å®¹å‰100å­—ç¬¦:', content.substring(0, 100));\n\n                    if (!content || content.trim().length === 0) {\n                        showErrorMessage('æ–‡ä»¶å†…å®¹ä¸ºç©º');\n                        return;\n                    }\n\n                    parseHooksData(content);\n                    showSuccessMessage(`æˆåŠŸåŠ è½½æ–‡ä»¶: ${file.name}`);\n                } catch (error) {\n                    console.error('æ–‡ä»¶è§£æå¼‚å¸¸:', error);\n                    showErrorMessage('æ–‡ä»¶è§£æå¤±è´¥ï¼š' + error.message);\n                }\n            };\n            reader.onerror = function(error) {\n                console.error('æ–‡ä»¶è¯»å–å¤±è´¥:', error);\n                showErrorMessage('æ–‡ä»¶è¯»å–å¤±è´¥');\n            };\n            reader.readAsText(file);\n        }\n\n        function showFileInfo(file) {\n            const fileInfo = document.getElementById('file-info');\n            const fileName = document.getElementById('file-name');\n            const uploadArea = document.getElementById('upload-area');\n\n            fileName.textContent = file.name;\n            fileInfo.style.display = 'flex';\n            uploadArea.style.display = 'none';\n        }\n\n        function clearFile() {\n            const fileInfo = document.getElementById('file-info');\n            const uploadArea = document.getElementById('upload-area');\n            const fileInput = document.getElementById('file-input');\n\n            fileInfo.style.display = 'none';\n            uploadArea.style.display = 'block';\n\n            // æ¸…ç©ºæ–‡ä»¶è¾“å…¥æ¡†çš„å€¼\n            fileInput.value = '';\n\n            // æ¸…ç©ºæ•°æ®\n            hooksData = [];\n            filteredData = [];\n\n            // æ¸…ç©ºæ˜¾ç¤ºåŒºåŸŸ\n            document.getElementById('hooks-container').innerHTML = '';\n            document.getElementById('no-data').style.display = 'block';\n            document.getElementById('stats-section').style.display = 'none';\n\n            // æ˜¾ç¤ºæç¤º\n            showSuccessMessage('å·²æ¸…ç©ºæ–‡ä»¶ï¼Œè¯·é‡æ–°é€‰æ‹©æ—¥å¿—æ–‡ä»¶');\n        }\n\n        function showSuccessMessage(message) {\n            showMessage(message, 'success');\n        }\n\n        function showErrorMessage(message) {\n            showMessage(message, 'error');\n        }\n\n        function showMessage(message, type) {\n            // ç§»é™¤ä¹‹å‰çš„æ¶ˆæ¯\n            const existingMessages = document.querySelectorAll('.upload-message');\n            existingMessages.forEach(msg => msg.remove());\n\n            const messageClass = type === 'success' ? 'upload-success' : 'upload-error';\n            const messageDiv = document.createElement('div');\n            messageDiv.className = `upload-message ${messageClass}`;\n            messageDiv.textContent = message;\n\n            document.querySelector('.upload-card').appendChild(messageDiv);\n\n            // 3ç§’åè‡ªåŠ¨æ¶ˆå¤±\n            setTimeout(() => {\n                messageDiv.style.opacity = '0';\n                setTimeout(() => {\n                    if (messageDiv.parentNode) {\n                        messageDiv.parentNode.removeChild(messageDiv);\n                    }\n                }, 300);\n            }, 3000);\n        }\n\n        // è§£æ hooks æ•°æ®\n        function parseHooksData(content) {\n            console.log('å¼€å§‹è§£æ hooks æ•°æ®ï¼Œå†…å®¹é•¿åº¦:', content.length);\n\n            hooksData = [];\n            const lines = content.split('\\n').filter(line => line.trim());\n            console.log('åˆ†å‰²åçš„è¡Œæ•°:', lines.length);\n\n            for (let i = 0; i < lines.length; i++) {\n                const line = lines[i];\n                try {\n                    const hookData = JSON.parse(line);\n                    hooksData.push(hookData);\n                    console.log(`æˆåŠŸè§£æç¬¬ ${i + 1} è¡Œï¼Œäº‹ä»¶ç±»å‹:`, hookData.event);\n                } catch (error) {\n                    console.error(`è§£æç¬¬ ${i + 1} è¡Œå¤±è´¥:`, error.message);\n                    console.error('é—®é¢˜è¡Œçš„å†…å®¹:', line.substring(0, 100) + (line.length > 100 ? '...' : ''));\n                }\n            }\n\n            console.log('è§£æå®Œæˆï¼Œæ€»å…±è§£æåˆ°', hooksData.length, 'ä¸ªæœ‰æ•ˆäº‹ä»¶');\n\n            if (hooksData.length === 0) {\n                showErrorMessage('æœªæ‰¾åˆ°æœ‰æ•ˆçš„ hooks æ•°æ®ã€‚è¯·ç¡®ä¿æ–‡ä»¶æ ¼å¼æ­£ç¡®ï¼Œæ¯è¡Œåº”è¯¥æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„JSONå¯¹è±¡ã€‚');\n                console.error('è§£æå¤±è´¥ï¼Œæ²¡æœ‰æ‰¾åˆ°æœ‰æ•ˆçš„hooksæ•°æ®');\n                return;\n            }\n\n            filteredData = [...hooksData];\n            console.log('å‡†å¤‡æ˜¾ç¤ºæ•°æ®ï¼Œè¿‡æ»¤åçš„äº‹ä»¶æ•°é‡:', filteredData.length);\n            displayData();\n        }\n\n        // æ˜¾ç¤ºæ•°æ®\n        function displayData() {\n            document.getElementById('no-data').style.display = 'none';\n            document.getElementById('error-message').style.display = 'none';\n            document.getElementById('stats-section').style.display = 'block';\n\n            updateStatistics();\n            renderHooks();\n        }\n\n        // æ›´æ–°ç»Ÿè®¡ä¿¡æ¯\n        function updateStatistics() {\n            const stats = {\n                total: filteredData.length,\n                userPrompts: filteredData.filter(h => h.event === 'UserPromptSubmit').length,\n                preTools: filteredData.filter(h => h.event === 'PreToolUse').length,\n                postTools: filteredData.filter(h => h.event === 'PostToolUse').length,\n                notifications: filteredData.filter(h => h.event === 'Notification').length,\n                stops: filteredData.filter(h => h.event === 'Stop').length,\n                subagentStops: filteredData.filter(h => h.event === 'SubagentStop').length,\n                preCompacts: filteredData.filter(h => h.event === 'PreCompact').length,\n                sessionStarts: filteredData.filter(h => h.event === 'SessionStart').length,\n                sessionEnds: filteredData.filter(h => h.event === 'SessionEnd').length\n            };\n\n            document.getElementById('total-hooks').textContent = stats.total;\n            document.getElementById('user-prompts').textContent = stats.userPrompts;\n            document.getElementById('pre-tools').textContent = stats.preTools;\n            document.getElementById('post-tools').textContent = stats.postTools;\n            document.getElementById('notifications').textContent = stats.notifications;\n            document.getElementById('stops').textContent = stats.stops;\n            document.getElementById('subagent-stops').textContent = stats.subagentStops;\n            document.getElementById('pre-compacts').textContent = stats.preCompacts;\n            document.getElementById('session-starts').textContent = stats.sessionStarts;\n            document.getElementById('session-ends').textContent = stats.sessionEnds;\n        }\n\n        // æ¸²æŸ“ hooks\n        function renderHooks() {\n            const container = document.getElementById('hooks-container');\n            container.innerHTML = '';\n\n            filteredData.forEach((hook, index) => {\n                const hookElement = createHookElement(hook, index);\n                container.appendChild(hookElement);\n            });\n\n            // æ·»åŠ åŠ¨ç”»\n            const elements = container.querySelectorAll('.hook-item');\n            elements.forEach((el, i) => {\n                el.style.opacity = '0';\n                el.style.transform = 'translateY(20px)';\n                setTimeout(() => {\n                    el.style.transition = 'opacity 0.3s ease, transform 0.3s ease';\n                    el.style.opacity = '1';\n                    el.style.transform = 'translateY(0)';\n                }, i * 50);\n            });\n        }\n\n        // åˆ›å»º hook å…ƒç´ \n        function createHookElement(hook, index) {\n            const div = document.createElement('div');\n            div.className = 'hook-item';\n\n            const eventClass = getEventClass(hook.event);\n            const formattedTime = formatTimestamp(hook.ts);\n            const eventDescription = getEventDescription(hook.event, hook.phase);\n\n            div.innerHTML = `\n                <div class=\"hook-header\">\n                    <div class=\"hook-event\">\n                        <span class=\"event-badge ${eventClass}\">${hook.event}</span>\n                    </div>\n                    <div class=\"hook-meta\">\n                        <div class=\"hook-timestamp\">${formattedTime}</div>\n                    </div>\n                </div>\n                <div class=\"hook-message\">${hook.message}</div>\n                <div class=\"hook-description\">${hook.description || eventDescription}</div>\n                <div class=\"hook-details\">\n                    <div class=\"part-card\">\n                        <div class=\"part-header\" onclick=\"toggleDetail('payload-${index}')\">\n                            <span>Payload</span>\n                            <span class=\"toggle-icon\" id=\"icon-payload-${index}\">â–¼</span>\n                        </div>\n                        <div class=\"part-content hidden\" id=\"payload-${index}\">\n                            ${formatJson(hook.payload)}\n                        </div>\n                    </div>\n                </div>\n            `;\n\n            return div;\n        }\n\n        // è·å–äº‹ä»¶æè¿°\n        function getEventDescription(event, phase) {\n            switch (event) {\n                case 'PreToolUse':\n                    return 'å·¥å…·æ‰§è¡Œå‰è§¦å‘ï¼Œå¯åŸºäºå‚æ•°é˜»æ­¢æˆ–è°ƒæ•´è°ƒç”¨ã€‚';\n                case 'PostToolUse':\n                    return 'å·¥å…·æˆåŠŸæ‰§è¡Œåè§¦å‘ï¼Œå¸¸ç”¨äºæ ¼å¼åŒ–ã€æ ¡éªŒæˆ–è®°å½•ç»“æœã€‚';\n                case 'UserPromptSubmit':\n                    return 'ç”¨æˆ·æäº¤æç¤ºå‰è§¦å‘ï¼Œå¯è¿›è¡Œæç¤ºæ ¡éªŒæˆ–å¢å¼ºã€‚';\n                case 'Notification':\n                    return 'å½“ç³»ç»Ÿå‘é€é€šçŸ¥ï¼ˆéœ€æˆæƒæˆ–ç­‰å¾…è¾“å…¥ï¼‰æ—¶è§¦å‘ã€‚';\n                case 'Stop':\n                    return 'ä¸»ä»£ç†å®Œæˆå“åº”æ—¶è§¦å‘ï¼ˆç”¨æˆ·ä¸­æ–­ä¸è§¦å‘ï¼‰ã€‚';\n                case 'SubagentStop':\n                    return 'å­ä»£ç†ä»»åŠ¡å®Œæˆæ—¶è§¦å‘ï¼Œç”¨äºè®°å½•å­ä»»åŠ¡ç»“æŸã€‚';\n                case 'PreCompact':\n                    return phase === 'manual'\n                        ? 'æ‰‹åŠ¨å‹ç¼©å‰è§¦å‘ï¼Œç”¨äºè®°å½•æˆ–å‡†å¤‡å‹ç¼©ã€‚'\n                        : 'è‡ªåŠ¨å‹ç¼©å‰è§¦å‘ï¼ˆä¸Šä¸‹æ–‡æ¥è¿‘ä¸Šé™ï¼‰ï¼Œç”¨äºè®°å½•æˆ–å‡†å¤‡å‹ç¼©ã€‚';\n                case 'SessionStart':\n                    switch (phase) {\n                        case 'startup':\n                            return 'æ–°ä¼šè¯å¯åŠ¨æ—¶è§¦å‘ï¼Œç”¨äºåŠ è½½ä¸Šä¸‹æ–‡æˆ–è®¾ç½®ç¯å¢ƒã€‚';\n                        case 'resume':\n                            return 'æ¢å¤ä¼šè¯æ—¶è§¦å‘ï¼Œç”¨äºç»§ç»­å…ˆå‰ä¸Šä¸‹æ–‡ã€‚';\n                        case 'clear':\n                            return 'æ¸…ç©ºä¼šè¯åè§¦å‘ï¼Œç”¨äºé‡ç½®ç¯å¢ƒä¸ä¸Šä¸‹æ–‡ã€‚';\n                        case 'compact':\n                            return 'å› å‹ç¼©æ“ä½œè§¦å‘çš„ä¼šè¯å¯åŠ¨ï¼Œç”¨äºç»´æŒä¸Šä¸‹æ–‡ã€‚';\n                        default:\n                            return 'ä¼šè¯å¯åŠ¨ç›¸å…³äº‹ä»¶ï¼Œåˆå§‹åŒ–æˆ–æ¢å¤ä¸Šä¸‹æ–‡ã€‚';\n                    }\n                case 'SessionEnd':\n                    return 'ä¼šè¯ç»“æŸæ—¶è§¦å‘ï¼Œå¸¸ç”¨äºæ”¶å°¾ä¸æ¸…ç†ã€‚';\n                default:\n                    return 'æœªçŸ¥äº‹ä»¶ã€‚';\n            }\n        }\n\n        // è·å–äº‹ä»¶æ ·å¼ç±»\n        function getEventClass(event) {\n            switch (event) {\n                case 'UserPromptSubmit': return 'event-userprompt';\n                case 'PreToolUse': return 'event-pretool';\n                case 'PostToolUse': return 'event-posttool';\n                case 'Notification': return 'event-notification';\n                case 'Stop': return 'event-stop';\n                case 'SubagentStop': return 'event-subagent-stop';\n                case 'PreCompact': return 'event-pre-compact';\n                case 'SessionStart': return 'event-session-start';\n                case 'SessionEnd': return 'event-session-end';\n                default: return 'event-default';\n            }\n        }\n\n        // æ ¼å¼åŒ–æ—¶é—´æˆ³\n        function formatTimestamp(ts) {\n            const date = new Date(ts);\n            return date.toLocaleString('zh-CN');\n        }\n\n        // æ ¼å¼åŒ– JSON\n        function formatJson(obj, indent = 0) {\n            if (!obj) return '';\n\n            try {\n                const spaces = '  '.repeat(indent);\n                let result = '';\n\n                if (Array.isArray(obj)) {\n                    result += '[\\n';\n                    obj.forEach((item, index) => {\n                        result += spaces + '  ';\n                        if (typeof item === 'object' && item !== null) {\n                            result += formatJson(item, indent + 1);\n                        } else {\n                            result += formatJsonValue(item);\n                        }\n                        if (index < obj.length - 1) result += ',';\n                        result += '\\n';\n                    });\n                    result += spaces + ']';\n                } else if (typeof obj === 'object' && obj !== null) {\n                    result += '{\\n';\n                    const keys = Object.keys(obj);\n                    keys.forEach((key, index) => {\n                        result += spaces + '  ';\n                        result += `<span class=\"json-key\">\"${escapeHtml(key)}\"</span>: `;\n\n                        if (typeof obj[key] === 'object' && obj[key] !== null) {\n                            result += formatJson(obj[key], indent + 1);\n                        } else {\n                            result += formatJsonValue(obj[key]);\n                        }\n\n                        if (index < keys.length - 1) result += ',';\n                        result += '\\n';\n                    });\n                    result += spaces + '}';\n                } else {\n                    result += formatJsonValue(obj);\n                }\n\n                return result;\n            } catch (error) {\n                return escapeHtml(JSON.stringify(obj));\n            }\n        }\n\n        // æ ¼å¼åŒ– JSON å€¼\n        function formatJsonValue(value) {\n            if (typeof value === 'string') {\n                if (value.startsWith('http://') || value.startsWith('https://')) {\n                    return `<span class=\"json-url\" onclick=\"window.open('${escapeHtml(value)}', '_blank')\">\"${escapeHtml(value)}\"</span>`;\n                }\n                return `<span class=\"json-string\">\"${escapeHtml(value)}\"</span>`;\n            } else if (typeof value === 'number') {\n                return `<span class=\"json-number\">${value}</span>`;\n            } else if (typeof value === 'boolean') {\n                return `<span class=\"json-boolean\">${value}</span>`;\n            } else if (value === null) {\n                return `<span class=\"json-null\">null</span>`;\n            } else {\n                return `<span style=\"color: #666;\">${value}</span>`;\n            }\n        }\n\n        // HTML è½¬ä¹‰\n        function escapeHtml(text) {\n            const div = document.createElement('div');\n            div.textContent = text;\n            return div.innerHTML;\n        }\n\n        // åˆ‡æ¢è¯¦æƒ…æ˜¾ç¤º\n        function toggleDetail(id) {\n            const content = document.getElementById(id);\n            const icon = document.getElementById('icon-' + id);\n\n            if (content.classList.contains('hidden')) {\n                content.classList.remove('hidden');\n                icon.classList.add('rotated');\n            } else {\n                content.classList.add('hidden');\n                icon.classList.remove('rotated');\n            }\n        }\n\n        // è¿‡æ»¤å’Œæœç´¢\n        document.getElementById('event-filter').addEventListener('change', applyFilters);\n        document.getElementById('search-input').addEventListener('input', applyFilters);\n\n        function applyFilters() {\n            const eventFilter = document.getElementById('event-filter').value;\n            const searchText = document.getElementById('search-input').value.toLowerCase();\n\n            filteredData = hooksData.filter(hook => {\n                const matchEvent = !eventFilter || hook.event === eventFilter;\n                const matchSearch = !searchText ||\n                    JSON.stringify(hook).toLowerCase().includes(searchText);\n\n                return matchEvent && matchSearch;\n            });\n\n            updateStatistics();\n            renderHooks();\n        }\n\n        // æ ¼å¼åŒ–æ–‡ä»¶å¤§å°\n        function formatFileSize(bytes) {\n            if (bytes === 0) return '0 Bytes';\n            const k = 1024;\n            const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n            const i = Math.floor(Math.log(bytes) / Math.log(k));\n            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n        }\n\n        // é¡µé¢åŠ è½½æ—¶æ‰§è¡Œ\n        document.addEventListener('DOMContentLoaded', function() {\n            // æ·»åŠ åˆå§‹åŠ è½½åŠ¨ç”»\n            const cards = document.querySelectorAll('.stat-card, .upload-card');\n            cards.forEach((card, index) => {\n                card.style.opacity = '0';\n                card.style.transform = 'translateY(20px)';\n                setTimeout(() => {\n                    card.style.transition = 'opacity 0.5s ease, transform 0.5s ease';\n                    card.style.opacity = '1';\n                    card.style.transform = 'translateY(0)';\n                }, index * 100);\n            });\n\n            // è®¾ç½®æ–‡ä»¶ä¸Šä¼ \n            setupFileUpload();\n        });\n\n            </script>\n</body>\n</html>","structuredPatch":[{"oldStart":845,"oldLines":7,"newStart":845,"newLines":8,"lines":["                 subagentStops: filteredData.filter(h => h.event === 'SubagentStop').length,","                 preCompacts: filteredData.filter(h => h.event === 'PreCompact').length,","                 sessionStarts: filteredData.filter(h => h.event === 'SessionStart').length,","-                sessionEnds: filteredData.filter(h => h.event === 'SessionEnd').length","+                sessionEnds: filteredData.filter(h => h.event === 'SessionEnd').length,","+                transcriptCount: filteredData.filter(h => hasTranscriptPath(h)).length","             };"," ","             document.getElementById('total-hooks').textContent = stats.total;"]}],"userModified":false,"replaceAll":false}}}
{"ts":"2025-11-05T02:25:48.485Z","event":"PreToolUse","phase":"","message":"PreToolUseäº‹ä»¶æ­£åœ¨æ‰§è¡Œ","description":"å·¥å…·æ‰§è¡Œå‰è§¦å‘ï¼Œå¯åŸºäºå‚æ•°é˜»æ­¢æˆ–è°ƒæ•´è°ƒç”¨ã€‚","doc_url":"https://docs.claude.com/zh-CN/docs/claude-code/hooks#pretooluse","payload":{"session_id":"c7c21516-7e1e-49b2-8ae5-4e1bb98e9692","transcript_path":"C:\\Users\\WTCL\\.claude\\projects\\i--claude-code-proxy\\c7c21516-7e1e-49b2-8ae5-4e1bb98e9692.jsonl","cwd":"i:\\claude-code-proxy","permission_mode":"acceptEdits","hook_event_name":"PreToolUse","tool_name":"Edit","tool_input":{"file_path":"i:\\claude-code-proxy\\analyze\\hooks.html","old_string":"        document.getElementById('total-hooks').textContent = stats.total;\n            document.getElementById('user-prompts').textContent = stats.userPrompts;\n            document.getElementById('pre-tools').textContent = stats.preTools;\n            document.getElementById('post-tools').textContent = stats.postTools;\n            document.getElementById('notifications').textContent = stats.notifications;\n            document.getElementById('stops').textContent = stats.stops;\n            document.getElementById('subagent-stops').textContent = stats.subagentStops;\n            document.getElementById('pre-compacts').textContent = stats.preCompacts;\n            document.getElementById('session-starts').textContent = stats.sessionStarts;\n            document.getElementById('session-ends').textContent = stats.sessionEnds;","new_string":"        document.getElementById('total-hooks').textContent = stats.total;\n            document.getElementById('user-prompts').textContent = stats.userPrompts;\n            document.getElementById('pre-tools').textContent = stats.preTools;\n            document.getElementById('post-tools').textContent = stats.postTools;\n            document.getElementById('notifications').textContent = stats.notifications;\n            document.getElementById('stops').textContent = stats.stops;\n            document.getElementById('subagent-stops').textContent = stats.subagentStops;\n            document.getElementById('pre-compacts').textContent = stats.preCompacts;\n            document.getElementById('session-starts').textContent = stats.sessionStarts;\n            document.getElementById('session-ends').textContent = stats.sessionEnds;\n            document.getElementById('transcript-count').textContent = stats.transcriptCount;"}}}
{"ts":"2025-11-05T02:25:50.118Z","event":"PostToolUse","phase":"","message":"PostToolUseäº‹ä»¶æ­£åœ¨æ‰§è¡Œ","description":"å·¥å…·æˆåŠŸæ‰§è¡Œåè§¦å‘ï¼Œå¸¸ç”¨äºæ ¼å¼åŒ–ã€æ ¡éªŒæˆ–è®°å½•ç»“æœã€‚","doc_url":"https://docs.claude.com/zh-CN/docs/claude-code/hooks#posttooluse","payload":{"session_id":"c7c21516-7e1e-49b2-8ae5-4e1bb98e9692","transcript_path":"C:\\Users\\WTCL\\.claude\\projects\\i--claude-code-proxy\\c7c21516-7e1e-49b2-8ae5-4e1bb98e9692.jsonl","cwd":"i:\\claude-code-proxy","permission_mode":"acceptEdits","hook_event_name":"PostToolUse","tool_name":"Edit","tool_input":{"file_path":"i:\\claude-code-proxy\\analyze\\hooks.html","old_string":"        document.getElementById('total-hooks').textContent = stats.total;\n            document.getElementById('user-prompts').textContent = stats.userPrompts;\n            document.getElementById('pre-tools').textContent = stats.preTools;\n            document.getElementById('post-tools').textContent = stats.postTools;\n            document.getElementById('notifications').textContent = stats.notifications;\n            document.getElementById('stops').textContent = stats.stops;\n            document.getElementById('subagent-stops').textContent = stats.subagentStops;\n            document.getElementById('pre-compacts').textContent = stats.preCompacts;\n            document.getElementById('session-starts').textContent = stats.sessionStarts;\n            document.getElementById('session-ends').textContent = stats.sessionEnds;","new_string":"        document.getElementById('total-hooks').textContent = stats.total;\n            document.getElementById('user-prompts').textContent = stats.userPrompts;\n            document.getElementById('pre-tools').textContent = stats.preTools;\n            document.getElementById('post-tools').textContent = stats.postTools;\n            document.getElementById('notifications').textContent = stats.notifications;\n            document.getElementById('stops').textContent = stats.stops;\n            document.getElementById('subagent-stops').textContent = stats.subagentStops;\n            document.getElementById('pre-compacts').textContent = stats.preCompacts;\n            document.getElementById('session-starts').textContent = stats.sessionStarts;\n            document.getElementById('session-ends').textContent = stats.sessionEnds;\n            document.getElementById('transcript-count').textContent = stats.transcriptCount;"},"tool_response":{"filePath":"i:\\claude-code-proxy\\analyze\\hooks.html","oldString":"        document.getElementById('total-hooks').textContent = stats.total;\n            document.getElementById('user-prompts').textContent = stats.userPrompts;\n            document.getElementById('pre-tools').textContent = stats.preTools;\n            document.getElementById('post-tools').textContent = stats.postTools;\n            document.getElementById('notifications').textContent = stats.notifications;\n            document.getElementById('stops').textContent = stats.stops;\n            document.getElementById('subagent-stops').textContent = stats.subagentStops;\n            document.getElementById('pre-compacts').textContent = stats.preCompacts;\n            document.getElementById('session-starts').textContent = stats.sessionStarts;\n            document.getElementById('session-ends').textContent = stats.sessionEnds;","newString":"        document.getElementById('total-hooks').textContent = stats.total;\n            document.getElementById('user-prompts').textContent = stats.userPrompts;\n            document.getElementById('pre-tools').textContent = stats.preTools;\n            document.getElementById('post-tools').textContent = stats.postTools;\n            document.getElementById('notifications').textContent = stats.notifications;\n            document.getElementById('stops').textContent = stats.stops;\n            document.getElementById('subagent-stops').textContent = stats.subagentStops;\n            document.getElementById('pre-compacts').textContent = stats.preCompacts;\n            document.getElementById('session-starts').textContent = stats.sessionStarts;\n            document.getElementById('session-ends').textContent = stats.sessionEnds;\n            document.getElementById('transcript-count').textContent = stats.transcriptCount;","originalFile":"<!DOCTYPE html>\n<html lang=\"zh-CN\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Hooks æ—¥å¿—åˆ†æ</title>\n    <style>\n        * {\n            margin: 0;\n            padding: 0;\n            box-sizing: border-box;\n        }\n\n        body {\n            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n            min-height: 100vh;\n            padding: 20px;\n        }\n\n        .container {\n            max-width: 1400px;\n            margin: 0 auto;\n        }\n\n        .header {\n            text-align: center;\n            color: white;\n            margin-bottom: 30px;\n        }\n\n        .header h1 {\n            font-size: 2.5rem;\n            margin-bottom: 10px;\n            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);\n        }\n\n        .header p {\n            font-size: 1.1rem;\n            opacity: 0.9;\n        }\n\n        /* æ–‡ä»¶ä¸Šä¼ ç»„ä»¶æ ·å¼ */\n        .upload-section {\n            margin-bottom: 30px;\n        }\n\n        .upload-card {\n            background: white;\n            border-radius: 15px;\n            padding: 25px;\n            box-shadow: 0 10px 30px rgba(0,0,0,0.1);\n            border: 2px dashed #cbd5e0;\n            transition: all 0.3s ease;\n        }\n\n        .upload-card:hover {\n            border-color: #667eea;\n            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.2);\n        }\n\n        .upload-header {\n            font-size: 1.2rem;\n            font-weight: bold;\n            color: #4a5568;\n            margin-bottom: 20px;\n            text-align: center;\n        }\n\n        .upload-area {\n            border: 2px dashed #e2e8f0;\n            border-radius: 10px;\n            padding: 40px 20px;\n            text-align: center;\n            transition: all 0.3s ease;\n            cursor: pointer;\n        }\n\n        .upload-area:hover {\n            border-color: #667eea;\n            background: #f7fafc;\n        }\n\n        .upload-area.dragover {\n            border-color: #667eea;\n            background: #edf2f7;\n            transform: scale(1.02);\n        }\n\n        .upload-icon {\n            font-size: 3rem;\n            margin-bottom: 15px;\n            opacity: 0.7;\n        }\n\n        .upload-text {\n            font-size: 1.1rem;\n            color: #4a5568;\n            margin-bottom: 10px;\n            font-weight: 500;\n        }\n\n        .upload-hint {\n            font-size: 0.9rem;\n            color: #718096;\n            margin-bottom: 20px;\n        }\n\n        .upload-btn {\n            background: #667eea;\n            color: white;\n            border: none;\n            padding: 12px 24px;\n            border-radius: 8px;\n            font-size: 1rem;\n            font-weight: 500;\n            cursor: pointer;\n            transition: all 0.3s ease;\n        }\n\n        .upload-btn:hover {\n            background: #5a67d8;\n            transform: translateY(-2px);\n            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);\n        }\n\n        .file-info {\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            background: #f7fafc;\n            padding: 15px 20px;\n            border-radius: 8px;\n            margin-top: 15px;\n        }\n\n        .file-name {\n            font-weight: 500;\n            color: #4a5568;\n            flex: 1;\n            overflow: hidden;\n            text-overflow: ellipsis;\n            white-space: nowrap;\n        }\n\n        .clear-btn {\n            background: #fc8181;\n            color: white;\n            border: none;\n            width: 30px;\n            height: 30px;\n            border-radius: 50%;\n            cursor: pointer;\n            font-size: 1rem;\n            transition: all 0.3s ease;\n        }\n\n        .clear-btn:hover {\n            background: #f56565;\n            transform: scale(1.1);\n        }\n\n        /* æ¶ˆæ¯æç¤ºæ ·å¼ */\n        .upload-message {\n            margin-top: 15px;\n            padding: 12px 16px;\n            border-radius: 8px;\n            font-size: 0.9rem;\n            animation: slideIn 0.3s ease;\n        }\n\n        .upload-success {\n            background: #d4edda;\n            color: #155724;\n            border: 1px solid #c3e6cb;\n        }\n\n        .upload-error {\n            background: #f8d7da;\n            color: #721c24;\n            border: 1px solid #f5c6cb;\n        }\n\n        @keyframes slideIn {\n            from {\n                opacity: 0;\n                transform: translateY(-10px);\n            }\n            to {\n                opacity: 1;\n                transform: translateY(0);\n            }\n        }\n\n        #file-input {\n            display: none;\n        }\n\n        .stats-grid {\n            display: grid;\n            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\n            gap: 20px;\n            margin-bottom: 30px;\n        }\n\n        .stat-card {\n            background: white;\n            border-radius: 15px;\n            padding: 25px;\n            box-shadow: 0 10px 30px rgba(0,0,0,0.2);\n            text-align: center;\n            transition: transform 0.3s ease, box-shadow 0.3s ease;\n        }\n\n        .stat-card:hover {\n            transform: translateY(-5px);\n            box-shadow: 0 15px 40px rgba(0,0,0,0.3);\n        }\n\n        .stat-number {\n            font-size: 3rem;\n            font-weight: bold;\n            margin-bottom: 10px;\n        }\n\n        .stat-label {\n            font-size: 1.1rem;\n            color: #666;\n            margin-bottom: 5px;\n        }\n\n        .stat-description {\n            font-size: 0.9rem;\n            color: #999;\n        }\n\n        .filter-section {\n            background: white;\n            border-radius: 15px;\n            padding: 20px;\n            box-shadow: 0 10px 30px rgba(0,0,0,0.2);\n            margin-bottom: 30px;\n        }\n\n        .filter-controls {\n            display: flex;\n            gap: 15px;\n            flex-wrap: wrap;\n            align-items: center;\n        }\n\n        .filter-group {\n            display: flex;\n            align-items: center;\n            gap: 10px;\n        }\n\n        .filter-label {\n            font-weight: bold;\n            color: #333;\n        }\n\n        .filter-select, .search-input {\n            padding: 8px 12px;\n            border: 2px solid #ddd;\n            border-radius: 5px;\n            font-size: 0.9rem;\n            transition: border-color 0.3s ease;\n        }\n\n        .filter-select:focus, .search-input:focus {\n            outline: none;\n            border-color: #667eea;\n        }\n\n        .search-input {\n            min-width: 200px;\n        }\n\n        .hooks-container {\n            display: grid;\n            gap: 30px;\n        }\n\n        .hook-item {\n            background: white;\n            border-radius: 15px;\n            padding: 25px;\n            box-shadow: 0 10px 30px rgba(0,0,0,0.2);\n        }\n\n        .hook-header {\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            margin-bottom: 20px;\n            padding-bottom: 15px;\n            border-bottom: 2px solid #667eea;\n        }\n\n        .hook-event {\n            font-size: 1.5rem;\n            font-weight: bold;\n            color: #667eea;\n        }\n\n        .hook-meta {\n            display: flex;\n            gap: 20px;\n            align-items: center;\n        }\n\n        .hook-timestamp {\n            font-size: 0.9rem;\n            color: #666;\n            background: #f0f4ff;\n            padding: 5px 12px;\n            border-radius: 20px;\n        }\n\n        .hook-message {\n            background: #f8f9fa;\n            border-left: 4px solid #667eea;\n            padding: 15px;\n            margin-bottom: 15px;\n            border-radius: 5px;\n        }\n\n        .hook-description {\n            color: #666;\n            font-style: italic;\n            margin-bottom: 15px;\n        }\n\n        .hook-details {\n            display: flex;\n            flex-direction: column;\n            gap: 20px;\n        }\n\n        .part-card {\n            background: #f8f9fa;\n            border-radius: 10px;\n            overflow: hidden;\n        }\n\n        .part-header {\n            background: #667eea;\n            color: white;\n            padding: 12px 15px;\n            font-weight: bold;\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            cursor: pointer;\n            transition: background 0.3s ease;\n        }\n\n        .part-header:hover {\n            background: #5a67d8;\n        }\n\n        .part-content {\n            padding: 15px;\n            font-family: 'Courier New', monospace;\n            font-size: 0.9rem;\n            background: #1a1a1a;\n            color: #ffffff;\n            overflow-y: auto;\n            white-space: pre-wrap;\n            line-height: 1.6;\n            min-height: 100px;\n            border-radius: 8px;\n            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.3);\n        }\n\n        .part-content.hidden {\n            display: none;\n        }\n\n        .toggle-icon {\n            transition: transform 0.3s ease;\n        }\n\n        .toggle-icon.rotated {\n            transform: rotate(180deg);\n        }\n\n        /* è‡ªå®šä¹‰æ»šåŠ¨æ¡æ ·å¼ */\n        .part-content::-webkit-scrollbar {\n            width: 8px;\n        }\n\n        .part-content::-webkit-scrollbar-track {\n            background: #2a2a2a;\n            border-radius: 4px;\n        }\n\n        .part-content::-webkit-scrollbar-thumb {\n            background: #4a4a4a;\n            border-radius: 4px;\n        }\n\n        .part-content::-webkit-scrollbar-thumb:hover {\n            background: #5a5a5a;\n        }\n\n        .event-badge {\n            display: inline-block;\n            padding: 4px 12px;\n            border-radius: 20px;\n            font-size: 0.8rem;\n            font-weight: bold;\n            margin-right: 10px;\n        }\n\n        .event-userprompt { background: #FF6B6B; color: white; }\n        .event-pretool { background: #4ECDC4; color: white; }\n        .event-posttool { background: #45B7D1; color: white; }\n        .event-notification { background: #9C27B0; color: white; }\n        .event-stop { background: #F44336; color: white; }\n        .event-subagent-stop { background: #FF9800; color: white; }\n        .event-pre-compact { background: #FFC107; color: white; }\n        .event-session-start { background: #4CAF50; color: white; }\n        .event-session-end { background: #607D8B; color: white; }\n        .event-default { background: #78909C; color: white; }\n\n        .no-data {\n            text-align: center;\n            padding: 60px 20px;\n            color: white;\n            font-size: 1.2rem;\n        }\n\n        .error-message {\n            background: #fff5f5;\n            border: 2px solid #fc8181;\n            color: #c53030;\n            padding: 20px;\n            border-radius: 10px;\n            text-align: center;\n            font-size: 1.1rem;\n            margin: 20px 0;\n        }\n\n        .json-key { color: #9C27B0; }\n        .json-string { color: #4CAF50; }\n        .json-number { color: #FF9800; }\n        .json-boolean { color: #F44336; }\n        .json-null { color: #9E9E9E; }\n        .json-url { color: #2196F3; text-decoration: underline; cursor: pointer; }\n\n        .transcript-path {\n            background: #fff3cd;\n            border: 1px solid #ffeaa7;\n            border-radius: 5px;\n            padding: 8px 12px;\n            margin-top: 10px;\n            font-size: 0.9rem;\n        }\n\n        .transcript-path-label {\n            font-weight: bold;\n            color: #856404;\n            margin-bottom: 5px;\n        }\n\n        .transcript-path-value {\n            color: #856404;\n            word-break: break-all;\n            font-family: monospace;\n            background: #f8f9fa;\n            padding: 4px 8px;\n            border-radius: 3px;\n        }\n\n        .has-transcript-badge {\n            background: #ffc107;\n            color: #212529;\n            padding: 2px 8px;\n            border-radius: 12px;\n            font-size: 0.7rem;\n            font-weight: bold;\n            margin-left: 10px;\n        }\n\n        @media (max-width: 768px) {\n            .header h1 {\n                font-size: 2rem;\n            }\n\n            .stats-grid {\n                grid-template-columns: repeat(2, 1fr);\n            }\n\n            .filter-controls {\n                flex-direction: column;\n                align-items: stretch;\n            }\n\n            .search-input {\n                min-width: auto;\n            }\n        }\n    </style>\n</head>\n<body>\n    <div class=\"container\">\n        <div class=\"header\">\n            <h1>Hooks æ—¥å¿—åˆ†æ</h1>\n            <p>ä¸Šä¼ å¹¶åˆ†æ Claude Hooks äº‹ä»¶æ—¥å¿—</p>\n        </div>\n\n        <!-- æ–‡ä»¶ä¸Šä¼ ç»„ä»¶ -->\n        <div class=\"upload-section\">\n            <div class=\"upload-card\">\n                <div class=\"upload-header\">\n                    <span>ğŸ“ é€‰æ‹© Hooks æ—¥å¿—æ–‡ä»¶</span>\n                </div>\n                <div class=\"upload-area\" id=\"upload-area\">\n                    <div class=\"upload-content\">\n                        <div class=\"upload-icon\">ğŸ“„</div>\n                        <p class=\"upload-text\">ç‚¹å‡»é€‰æ‹©æ–‡ä»¶æˆ–æ‹–æ‹½æ–‡ä»¶åˆ°æ­¤å¤„</p>\n                        <p class=\"upload-hint\">æ”¯æŒ .log .txt æ ¼å¼çš„æ—¥å¿—æ–‡ä»¶ï¼Œæ¯è¡Œä¸€ä¸ª JSON å¯¹è±¡ï¼Œæœ€å¤§50MB</p>\n                        <input type=\"file\" id=\"file-input\" accept=\".log,.txt\" style=\"display: none;\">\n                        <button class=\"upload-btn\" onclick=\"document.getElementById('file-input').click()\">é€‰æ‹©æ–‡ä»¶</button>\n                    </div>\n                </div>\n                <div class=\"file-info\" id=\"file-info\" style=\"display: none;\">\n                    <span class=\"file-name\" id=\"file-name\"></span>\n                    <button class=\"clear-btn\" onclick=\"clearFile()\">âœ•</button>\n                </div>\n            </div>\n        </div>\n\n        <div id=\"stats-section\" style=\"display: none;\">\n            <div class=\"stats-grid\">\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"total-hooks\">0</div>\n                    <div class=\"stat-label\">æ€»äº‹ä»¶æ•°</div>\n                    <div class=\"stat-description\">æ‰€æœ‰ Hooks äº‹ä»¶</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"user-prompts\">0</div>\n                    <div class=\"stat-label\">ç”¨æˆ·æç¤ºäº‹ä»¶</div>\n                    <div class=\"stat-description\">UserPromptSubmit</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"pre-tools\">0</div>\n                    <div class=\"stat-label\">å·¥å…·æ‰§è¡Œå‰äº‹ä»¶</div>\n                    <div class=\"stat-description\">PreToolUse</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"post-tools\">0</div>\n                    <div class=\"stat-label\">å·¥å…·æ‰§è¡Œåäº‹ä»¶</div>\n                    <div class=\"stat-description\">PostToolUse</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"notifications\">0</div>\n                    <div class=\"stat-label\">é€šçŸ¥äº‹ä»¶</div>\n                    <div class=\"stat-description\">Notification</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"stops\">0</div>\n                    <div class=\"stat-label\">åœæ­¢äº‹ä»¶</div>\n                    <div class=\"stat-description\">Stop</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"subagent-stops\">0</div>\n                    <div class=\"stat-label\">å­ä»£ç†åœæ­¢äº‹ä»¶</div>\n                    <div class=\"stat-description\">SubagentStop</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"pre-compacts\">0</div>\n                    <div class=\"stat-label\">å‹ç¼©å‰äº‹ä»¶</div>\n                    <div class=\"stat-description\">PreCompact</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"session-starts\">0</div>\n                    <div class=\"stat-label\">ä¼šè¯å¼€å§‹äº‹ä»¶</div>\n                    <div class=\"stat-description\">SessionStart</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"session-ends\">0</div>\n                    <div class=\"stat-label\">ä¼šè¯ç»“æŸäº‹ä»¶</div>\n                    <div class=\"stat-description\">SessionEnd</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"transcript-count\">0</div>\n                    <div class=\"stat-label\">åŒ…å«è½¬å½•è·¯å¾„äº‹ä»¶</div>\n                    <div class=\"stat-description\">åŒ…å« transcript_path</div>\n                </div>\n            </div>\n\n            <div class=\"filter-section\">\n                <div class=\"filter-controls\">\n                    <div class=\"filter-group\">\n                        <label class=\"filter-label\">äº‹ä»¶ç±»å‹ï¼š</label>\n                        <select class=\"filter-select\" id=\"event-filter\">\n                            <option value=\"\">å…¨éƒ¨</option>\n                            <option value=\"UserPromptSubmit\">UserPromptSubmit</option>\n                            <option value=\"PreToolUse\">PreToolUse</option>\n                            <option value=\"PostToolUse\">PostToolUse</option>\n                            <option value=\"Notification\">Notification</option>\n                            <option value=\"Stop\">Stop</option>\n                            <option value=\"SubagentStop\">SubagentStop</option>\n                            <option value=\"PreCompact\">PreCompact</option>\n                            <option value=\"SessionStart\">SessionStart</option>\n                            <option value=\"SessionEnd\">SessionEnd</option>\n                        </select>\n                    </div>\n                    <div class=\"filter-group\">\n                        <label class=\"filter-label\">æœç´¢ï¼š</label>\n                        <input type=\"text\" class=\"search-input\" id=\"search-input\" placeholder=\"æœç´¢äº‹ä»¶å†…å®¹...\">\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <div id=\"hooks-container\" class=\"hooks-container\"></div>\n\n        <div id=\"no-data\" class=\"no-data\">\n            è¯·ä¸Šä¼  hooks.log æ–‡ä»¶å¼€å§‹åˆ†æ\n        </div>\n\n        <div id=\"error-message\" class=\"error-message\" style=\"display: none;\"></div>\n    </div>\n\n    <script>\n        let hooksData = [];\n        let filteredData = [];\n\n        // æ–‡ä»¶ä¸Šä¼ ç›¸å…³å‡½æ•°\n        function setupFileUpload() {\n            const uploadArea = document.getElementById('upload-area');\n            const fileInput = document.getElementById('file-input');\n\n            // ç‚¹å‡»ä¸Šä¼ åŒºåŸŸè§¦å‘æ–‡ä»¶é€‰æ‹©ï¼ˆä½†ä¸åŒ…æ‹¬æŒ‰é’®ï¼‰\n            uploadArea.addEventListener('click', function(event) {\n                // å¦‚æœç‚¹å‡»çš„æ˜¯æŒ‰é’®ï¼Œä¸å¤„ç†\n                if (event.target.tagName === 'BUTTON' || event.target.closest('button')) {\n                    return;\n                }\n                fileInput.click();\n            });\n\n            // æ–‡ä»¶é€‰æ‹©äº‹ä»¶\n            fileInput.addEventListener('change', handleFileSelect);\n\n            // æ‹–æ‹½äº‹ä»¶\n            uploadArea.addEventListener('dragover', handleDragOver);\n            uploadArea.addEventListener('dragleave', handleDragLeave);\n            uploadArea.addEventListener('drop', handleDrop);\n        }\n\n\n        function handleDragOver(e) {\n            e.preventDefault();\n            e.currentTarget.classList.add('dragover');\n        }\n\n        function handleDragLeave(e) {\n            e.preventDefault();\n            e.currentTarget.classList.remove('dragover');\n        }\n\n        function handleDrop(e) {\n            e.preventDefault();\n            e.currentTarget.classList.remove('dragover');\n            handleFiles(e.dataTransfer.files);\n        }\n\n        function handleFileSelect(event) {\n            const files = event.target.files;\n            handleFiles(files);\n        }\n\n        function handleFiles(files) {\n            if (files.length === 0) return;\n\n            const file = files[0];\n\n            // æ£€æŸ¥æ–‡ä»¶ç±»å‹\n            const validTypes = ['.log', '.txt'];\n            const fileExtension = file.name.substring(file.name.lastIndexOf('.')).toLowerCase();\n\n            if (!validTypes.includes(fileExtension)) {\n                showErrorMessage('è¯·é€‰æ‹© .log æˆ– .txt æ ¼å¼çš„æ—¥å¿—æ–‡ä»¶');\n                return;\n            }\n\n            // æ£€æŸ¥æ–‡ä»¶å¤§å° (é™åˆ¶ä¸º50MB)\n            if (file.size > 50 * 1024 * 1024) {\n                showErrorMessage('æ–‡ä»¶å¤§å°ä¸èƒ½è¶…è¿‡50MB');\n                return;\n            }\n\n            // æ˜¾ç¤ºæ–‡ä»¶ä¿¡æ¯\n            showFileInfo(file);\n\n            // è¯»å–æ–‡ä»¶å†…å®¹\n            const reader = new FileReader();\n            reader.onload = function(e) {\n                try {\n                    const content = e.target.result;\n                    console.log('æ–‡ä»¶è¯»å–æˆåŠŸï¼Œå†…å®¹é•¿åº¦:', content.length);\n                    console.log('æ–‡ä»¶å†…å®¹å‰100å­—ç¬¦:', content.substring(0, 100));\n\n                    if (!content || content.trim().length === 0) {\n                        showErrorMessage('æ–‡ä»¶å†…å®¹ä¸ºç©º');\n                        return;\n                    }\n\n                    parseHooksData(content);\n                    showSuccessMessage(`æˆåŠŸåŠ è½½æ–‡ä»¶: ${file.name}`);\n                } catch (error) {\n                    console.error('æ–‡ä»¶è§£æå¼‚å¸¸:', error);\n                    showErrorMessage('æ–‡ä»¶è§£æå¤±è´¥ï¼š' + error.message);\n                }\n            };\n            reader.onerror = function(error) {\n                console.error('æ–‡ä»¶è¯»å–å¤±è´¥:', error);\n                showErrorMessage('æ–‡ä»¶è¯»å–å¤±è´¥');\n            };\n            reader.readAsText(file);\n        }\n\n        function showFileInfo(file) {\n            const fileInfo = document.getElementById('file-info');\n            const fileName = document.getElementById('file-name');\n            const uploadArea = document.getElementById('upload-area');\n\n            fileName.textContent = file.name;\n            fileInfo.style.display = 'flex';\n            uploadArea.style.display = 'none';\n        }\n\n        function clearFile() {\n            const fileInfo = document.getElementById('file-info');\n            const uploadArea = document.getElementById('upload-area');\n            const fileInput = document.getElementById('file-input');\n\n            fileInfo.style.display = 'none';\n            uploadArea.style.display = 'block';\n\n            // æ¸…ç©ºæ–‡ä»¶è¾“å…¥æ¡†çš„å€¼\n            fileInput.value = '';\n\n            // æ¸…ç©ºæ•°æ®\n            hooksData = [];\n            filteredData = [];\n\n            // æ¸…ç©ºæ˜¾ç¤ºåŒºåŸŸ\n            document.getElementById('hooks-container').innerHTML = '';\n            document.getElementById('no-data').style.display = 'block';\n            document.getElementById('stats-section').style.display = 'none';\n\n            // æ˜¾ç¤ºæç¤º\n            showSuccessMessage('å·²æ¸…ç©ºæ–‡ä»¶ï¼Œè¯·é‡æ–°é€‰æ‹©æ—¥å¿—æ–‡ä»¶');\n        }\n\n        function showSuccessMessage(message) {\n            showMessage(message, 'success');\n        }\n\n        function showErrorMessage(message) {\n            showMessage(message, 'error');\n        }\n\n        function showMessage(message, type) {\n            // ç§»é™¤ä¹‹å‰çš„æ¶ˆæ¯\n            const existingMessages = document.querySelectorAll('.upload-message');\n            existingMessages.forEach(msg => msg.remove());\n\n            const messageClass = type === 'success' ? 'upload-success' : 'upload-error';\n            const messageDiv = document.createElement('div');\n            messageDiv.className = `upload-message ${messageClass}`;\n            messageDiv.textContent = message;\n\n            document.querySelector('.upload-card').appendChild(messageDiv);\n\n            // 3ç§’åè‡ªåŠ¨æ¶ˆå¤±\n            setTimeout(() => {\n                messageDiv.style.opacity = '0';\n                setTimeout(() => {\n                    if (messageDiv.parentNode) {\n                        messageDiv.parentNode.removeChild(messageDiv);\n                    }\n                }, 300);\n            }, 3000);\n        }\n\n        // è§£æ hooks æ•°æ®\n        function parseHooksData(content) {\n            console.log('å¼€å§‹è§£æ hooks æ•°æ®ï¼Œå†…å®¹é•¿åº¦:', content.length);\n\n            hooksData = [];\n            const lines = content.split('\\n').filter(line => line.trim());\n            console.log('åˆ†å‰²åçš„è¡Œæ•°:', lines.length);\n\n            for (let i = 0; i < lines.length; i++) {\n                const line = lines[i];\n                try {\n                    const hookData = JSON.parse(line);\n                    hooksData.push(hookData);\n                    console.log(`æˆåŠŸè§£æç¬¬ ${i + 1} è¡Œï¼Œäº‹ä»¶ç±»å‹:`, hookData.event);\n                } catch (error) {\n                    console.error(`è§£æç¬¬ ${i + 1} è¡Œå¤±è´¥:`, error.message);\n                    console.error('é—®é¢˜è¡Œçš„å†…å®¹:', line.substring(0, 100) + (line.length > 100 ? '...' : ''));\n                }\n            }\n\n            console.log('è§£æå®Œæˆï¼Œæ€»å…±è§£æåˆ°', hooksData.length, 'ä¸ªæœ‰æ•ˆäº‹ä»¶');\n\n            if (hooksData.length === 0) {\n                showErrorMessage('æœªæ‰¾åˆ°æœ‰æ•ˆçš„ hooks æ•°æ®ã€‚è¯·ç¡®ä¿æ–‡ä»¶æ ¼å¼æ­£ç¡®ï¼Œæ¯è¡Œåº”è¯¥æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„JSONå¯¹è±¡ã€‚');\n                console.error('è§£æå¤±è´¥ï¼Œæ²¡æœ‰æ‰¾åˆ°æœ‰æ•ˆçš„hooksæ•°æ®');\n                return;\n            }\n\n            filteredData = [...hooksData];\n            console.log('å‡†å¤‡æ˜¾ç¤ºæ•°æ®ï¼Œè¿‡æ»¤åçš„äº‹ä»¶æ•°é‡:', filteredData.length);\n            displayData();\n        }\n\n        // æ˜¾ç¤ºæ•°æ®\n        function displayData() {\n            document.getElementById('no-data').style.display = 'none';\n            document.getElementById('error-message').style.display = 'none';\n            document.getElementById('stats-section').style.display = 'block';\n\n            updateStatistics();\n            renderHooks();\n        }\n\n        // æ›´æ–°ç»Ÿè®¡ä¿¡æ¯\n        function updateStatistics() {\n            const stats = {\n                total: filteredData.length,\n                userPrompts: filteredData.filter(h => h.event === 'UserPromptSubmit').length,\n                preTools: filteredData.filter(h => h.event === 'PreToolUse').length,\n                postTools: filteredData.filter(h => h.event === 'PostToolUse').length,\n                notifications: filteredData.filter(h => h.event === 'Notification').length,\n                stops: filteredData.filter(h => h.event === 'Stop').length,\n                subagentStops: filteredData.filter(h => h.event === 'SubagentStop').length,\n                preCompacts: filteredData.filter(h => h.event === 'PreCompact').length,\n                sessionStarts: filteredData.filter(h => h.event === 'SessionStart').length,\n                sessionEnds: filteredData.filter(h => h.event === 'SessionEnd').length,\n                transcriptCount: filteredData.filter(h => hasTranscriptPath(h)).length\n            };\n\n            document.getElementById('total-hooks').textContent = stats.total;\n            document.getElementById('user-prompts').textContent = stats.userPrompts;\n            document.getElementById('pre-tools').textContent = stats.preTools;\n            document.getElementById('post-tools').textContent = stats.postTools;\n            document.getElementById('notifications').textContent = stats.notifications;\n            document.getElementById('stops').textContent = stats.stops;\n            document.getElementById('subagent-stops').textContent = stats.subagentStops;\n            document.getElementById('pre-compacts').textContent = stats.preCompacts;\n            document.getElementById('session-starts').textContent = stats.sessionStarts;\n            document.getElementById('session-ends').textContent = stats.sessionEnds;\n        }\n\n        // æ¸²æŸ“ hooks\n        function renderHooks() {\n            const container = document.getElementById('hooks-container');\n            container.innerHTML = '';\n\n            filteredData.forEach((hook, index) => {\n                const hookElement = createHookElement(hook, index);\n                container.appendChild(hookElement);\n            });\n\n            // æ·»åŠ åŠ¨ç”»\n            const elements = container.querySelectorAll('.hook-item');\n            elements.forEach((el, i) => {\n                el.style.opacity = '0';\n                el.style.transform = 'translateY(20px)';\n                setTimeout(() => {\n                    el.style.transition = 'opacity 0.3s ease, transform 0.3s ease';\n                    el.style.opacity = '1';\n                    el.style.transform = 'translateY(0)';\n                }, i * 50);\n            });\n        }\n\n        // åˆ›å»º hook å…ƒç´ \n        function createHookElement(hook, index) {\n            const div = document.createElement('div');\n            div.className = 'hook-item';\n\n            const eventClass = getEventClass(hook.event);\n            const formattedTime = formatTimestamp(hook.ts);\n            const eventDescription = getEventDescription(hook.event, hook.phase);\n\n            div.innerHTML = `\n                <div class=\"hook-header\">\n                    <div class=\"hook-event\">\n                        <span class=\"event-badge ${eventClass}\">${hook.event}</span>\n                    </div>\n                    <div class=\"hook-meta\">\n                        <div class=\"hook-timestamp\">${formattedTime}</div>\n                    </div>\n                </div>\n                <div class=\"hook-message\">${hook.message}</div>\n                <div class=\"hook-description\">${hook.description || eventDescription}</div>\n                <div class=\"hook-details\">\n                    <div class=\"part-card\">\n                        <div class=\"part-header\" onclick=\"toggleDetail('payload-${index}')\">\n                            <span>Payload</span>\n                            <span class=\"toggle-icon\" id=\"icon-payload-${index}\">â–¼</span>\n                        </div>\n                        <div class=\"part-content hidden\" id=\"payload-${index}\">\n                            ${formatJson(hook.payload)}\n                        </div>\n                    </div>\n                </div>\n            `;\n\n            return div;\n        }\n\n        // è·å–äº‹ä»¶æè¿°\n        function getEventDescription(event, phase) {\n            switch (event) {\n                case 'PreToolUse':\n                    return 'å·¥å…·æ‰§è¡Œå‰è§¦å‘ï¼Œå¯åŸºäºå‚æ•°é˜»æ­¢æˆ–è°ƒæ•´è°ƒç”¨ã€‚';\n                case 'PostToolUse':\n                    return 'å·¥å…·æˆåŠŸæ‰§è¡Œåè§¦å‘ï¼Œå¸¸ç”¨äºæ ¼å¼åŒ–ã€æ ¡éªŒæˆ–è®°å½•ç»“æœã€‚';\n                case 'UserPromptSubmit':\n                    return 'ç”¨æˆ·æäº¤æç¤ºå‰è§¦å‘ï¼Œå¯è¿›è¡Œæç¤ºæ ¡éªŒæˆ–å¢å¼ºã€‚';\n                case 'Notification':\n                    return 'å½“ç³»ç»Ÿå‘é€é€šçŸ¥ï¼ˆéœ€æˆæƒæˆ–ç­‰å¾…è¾“å…¥ï¼‰æ—¶è§¦å‘ã€‚';\n                case 'Stop':\n                    return 'ä¸»ä»£ç†å®Œæˆå“åº”æ—¶è§¦å‘ï¼ˆç”¨æˆ·ä¸­æ–­ä¸è§¦å‘ï¼‰ã€‚';\n                case 'SubagentStop':\n                    return 'å­ä»£ç†ä»»åŠ¡å®Œæˆæ—¶è§¦å‘ï¼Œç”¨äºè®°å½•å­ä»»åŠ¡ç»“æŸã€‚';\n                case 'PreCompact':\n                    return phase === 'manual'\n                        ? 'æ‰‹åŠ¨å‹ç¼©å‰è§¦å‘ï¼Œç”¨äºè®°å½•æˆ–å‡†å¤‡å‹ç¼©ã€‚'\n                        : 'è‡ªåŠ¨å‹ç¼©å‰è§¦å‘ï¼ˆä¸Šä¸‹æ–‡æ¥è¿‘ä¸Šé™ï¼‰ï¼Œç”¨äºè®°å½•æˆ–å‡†å¤‡å‹ç¼©ã€‚';\n                case 'SessionStart':\n                    switch (phase) {\n                        case 'startup':\n                            return 'æ–°ä¼šè¯å¯åŠ¨æ—¶è§¦å‘ï¼Œç”¨äºåŠ è½½ä¸Šä¸‹æ–‡æˆ–è®¾ç½®ç¯å¢ƒã€‚';\n                        case 'resume':\n                            return 'æ¢å¤ä¼šè¯æ—¶è§¦å‘ï¼Œç”¨äºç»§ç»­å…ˆå‰ä¸Šä¸‹æ–‡ã€‚';\n                        case 'clear':\n                            return 'æ¸…ç©ºä¼šè¯åè§¦å‘ï¼Œç”¨äºé‡ç½®ç¯å¢ƒä¸ä¸Šä¸‹æ–‡ã€‚';\n                        case 'compact':\n                            return 'å› å‹ç¼©æ“ä½œè§¦å‘çš„ä¼šè¯å¯åŠ¨ï¼Œç”¨äºç»´æŒä¸Šä¸‹æ–‡ã€‚';\n                        default:\n                            return 'ä¼šè¯å¯åŠ¨ç›¸å…³äº‹ä»¶ï¼Œåˆå§‹åŒ–æˆ–æ¢å¤ä¸Šä¸‹æ–‡ã€‚';\n                    }\n                case 'SessionEnd':\n                    return 'ä¼šè¯ç»“æŸæ—¶è§¦å‘ï¼Œå¸¸ç”¨äºæ”¶å°¾ä¸æ¸…ç†ã€‚';\n                default:\n                    return 'æœªçŸ¥äº‹ä»¶ã€‚';\n            }\n        }\n\n        // è·å–äº‹ä»¶æ ·å¼ç±»\n        function getEventClass(event) {\n            switch (event) {\n                case 'UserPromptSubmit': return 'event-userprompt';\n                case 'PreToolUse': return 'event-pretool';\n                case 'PostToolUse': return 'event-posttool';\n                case 'Notification': return 'event-notification';\n                case 'Stop': return 'event-stop';\n                case 'SubagentStop': return 'event-subagent-stop';\n                case 'PreCompact': return 'event-pre-compact';\n                case 'SessionStart': return 'event-session-start';\n                case 'SessionEnd': return 'event-session-end';\n                default: return 'event-default';\n            }\n        }\n\n        // æ ¼å¼åŒ–æ—¶é—´æˆ³\n        function formatTimestamp(ts) {\n            const date = new Date(ts);\n            return date.toLocaleString('zh-CN');\n        }\n\n        // æ ¼å¼åŒ– JSON\n        function formatJson(obj, indent = 0) {\n            if (!obj) return '';\n\n            try {\n                const spaces = '  '.repeat(indent);\n                let result = '';\n\n                if (Array.isArray(obj)) {\n                    result += '[\\n';\n                    obj.forEach((item, index) => {\n                        result += spaces + '  ';\n                        if (typeof item === 'object' && item !== null) {\n                            result += formatJson(item, indent + 1);\n                        } else {\n                            result += formatJsonValue(item);\n                        }\n                        if (index < obj.length - 1) result += ',';\n                        result += '\\n';\n                    });\n                    result += spaces + ']';\n                } else if (typeof obj === 'object' && obj !== null) {\n                    result += '{\\n';\n                    const keys = Object.keys(obj);\n                    keys.forEach((key, index) => {\n                        result += spaces + '  ';\n                        result += `<span class=\"json-key\">\"${escapeHtml(key)}\"</span>: `;\n\n                        if (typeof obj[key] === 'object' && obj[key] !== null) {\n                            result += formatJson(obj[key], indent + 1);\n                        } else {\n                            result += formatJsonValue(obj[key]);\n                        }\n\n                        if (index < keys.length - 1) result += ',';\n                        result += '\\n';\n                    });\n                    result += spaces + '}';\n                } else {\n                    result += formatJsonValue(obj);\n                }\n\n                return result;\n            } catch (error) {\n                return escapeHtml(JSON.stringify(obj));\n            }\n        }\n\n        // æ ¼å¼åŒ– JSON å€¼\n        function formatJsonValue(value) {\n            if (typeof value === 'string') {\n                if (value.startsWith('http://') || value.startsWith('https://')) {\n                    return `<span class=\"json-url\" onclick=\"window.open('${escapeHtml(value)}', '_blank')\">\"${escapeHtml(value)}\"</span>`;\n                }\n                return `<span class=\"json-string\">\"${escapeHtml(value)}\"</span>`;\n            } else if (typeof value === 'number') {\n                return `<span class=\"json-number\">${value}</span>`;\n            } else if (typeof value === 'boolean') {\n                return `<span class=\"json-boolean\">${value}</span>`;\n            } else if (value === null) {\n                return `<span class=\"json-null\">null</span>`;\n            } else {\n                return `<span style=\"color: #666;\">${value}</span>`;\n            }\n        }\n\n        // HTML è½¬ä¹‰\n        function escapeHtml(text) {\n            const div = document.createElement('div');\n            div.textContent = text;\n            return div.innerHTML;\n        }\n\n        // åˆ‡æ¢è¯¦æƒ…æ˜¾ç¤º\n        function toggleDetail(id) {\n            const content = document.getElementById(id);\n            const icon = document.getElementById('icon-' + id);\n\n            if (content.classList.contains('hidden')) {\n                content.classList.remove('hidden');\n                icon.classList.add('rotated');\n            } else {\n                content.classList.add('hidden');\n                icon.classList.remove('rotated');\n            }\n        }\n\n        // è¿‡æ»¤å’Œæœç´¢\n        document.getElementById('event-filter').addEventListener('change', applyFilters);\n        document.getElementById('search-input').addEventListener('input', applyFilters);\n\n        function applyFilters() {\n            const eventFilter = document.getElementById('event-filter').value;\n            const searchText = document.getElementById('search-input').value.toLowerCase();\n\n            filteredData = hooksData.filter(hook => {\n                const matchEvent = !eventFilter || hook.event === eventFilter;\n                const matchSearch = !searchText ||\n                    JSON.stringify(hook).toLowerCase().includes(searchText);\n\n                return matchEvent && matchSearch;\n            });\n\n            updateStatistics();\n            renderHooks();\n        }\n\n        // æ ¼å¼åŒ–æ–‡ä»¶å¤§å°\n        function formatFileSize(bytes) {\n            if (bytes === 0) return '0 Bytes';\n            const k = 1024;\n            const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n            const i = Math.floor(Math.log(bytes) / Math.log(k));\n            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n        }\n\n        // é¡µé¢åŠ è½½æ—¶æ‰§è¡Œ\n        document.addEventListener('DOMContentLoaded', function() {\n            // æ·»åŠ åˆå§‹åŠ è½½åŠ¨ç”»\n            const cards = document.querySelectorAll('.stat-card, .upload-card');\n            cards.forEach((card, index) => {\n                card.style.opacity = '0';\n                card.style.transform = 'translateY(20px)';\n                setTimeout(() => {\n                    card.style.transition = 'opacity 0.5s ease, transform 0.5s ease';\n                    card.style.opacity = '1';\n                    card.style.transform = 'translateY(0)';\n                }, index * 100);\n            });\n\n            // è®¾ç½®æ–‡ä»¶ä¸Šä¼ \n            setupFileUpload();\n        });\n\n            </script>\n</body>\n</html>","structuredPatch":[{"oldStart":859,"oldLines":6,"newStart":859,"newLines":7,"lines":["             document.getElementById('pre-compacts').textContent = stats.preCompacts;","             document.getElementById('session-starts').textContent = stats.sessionStarts;","             document.getElementById('session-ends').textContent = stats.sessionEnds;","+            document.getElementById('transcript-count').textContent = stats.transcriptCount;","         }"," ","         // æ¸²æŸ“ hooks"]}],"userModified":false,"replaceAll":false}}}
{"ts":"2025-11-05T02:25:59.536Z","event":"PreToolUse","phase":"","message":"PreToolUseäº‹ä»¶æ­£åœ¨æ‰§è¡Œ","description":"å·¥å…·æ‰§è¡Œå‰è§¦å‘ï¼Œå¯åŸºäºå‚æ•°é˜»æ­¢æˆ–è°ƒæ•´è°ƒç”¨ã€‚","doc_url":"https://docs.claude.com/zh-CN/docs/claude-code/hooks#pretooluse","payload":{"session_id":"c7c21516-7e1e-49b2-8ae5-4e1bb98e9692","transcript_path":"C:\\Users\\WTCL\\.claude\\projects\\i--claude-code-proxy\\c7c21516-7e1e-49b2-8ae5-4e1bb98e9692.jsonl","cwd":"i:\\claude-code-proxy","permission_mode":"acceptEdits","hook_event_name":"PreToolUse","tool_name":"Edit","tool_input":{"file_path":"i:\\claude-code-proxy\\analyze\\hooks.html","old_string":"      // åˆ›å»º hook å…ƒç´ \n        function createHookElement(hook, index) {\n            const div = document.createElement('div');\n            div.className = 'hook-item';\n\n            const eventClass = getEventClass(hook.event);\n            const formattedTime = formatTimestamp(hook.ts);\n            const eventDescription = getEventDescription(hook.event, hook.phase);\n\n            div.innerHTML = `\n                <div class=\"hook-header\">\n                    <div class=\"hook-event\">\n                        <span class=\"event-badge ${eventClass}\">${hook.event}</span>\n                    </div>\n                    <div class=\"hook-meta\">\n                        <div class=\"hook-timestamp\">${formattedTime}</div>\n                    </div>\n                </div>\n                <div class=\"hook-message\">${hook.message}</div>\n                <div class=\"hook-description\">${hook.description || eventDescription}</div>\n                <div class=\"hook-details\">\n                    <div class=\"part-card\">\n                        <div class=\"part-header\" onclick=\"toggleDetail('payload-${index}')\">\n                            <span>Payload</span>\n                            <span class=\"toggle-icon\" id=\"icon-payload-${index}\">â–¼</span>\n                        </div>\n                        <div class=\"part-content hidden\" id=\"payload-${index}\">\n                            ${formatJson(hook.payload)}\n                        </div>\n                    </div>\n                </div>\n            `;\n\n            return div;\n        }","new_string":"      // æ£€æŸ¥æ˜¯å¦åŒ…å« transcript_path å­—æ®µ\n        function hasTranscriptPath(hook) {\n            if (!hook.payload) return false;\n\n            // æ£€æŸ¥ payload ä¸­æ˜¯å¦ç›´æ¥åŒ…å« transcript_path\n            if (hook.payload.transcript_path) return true;\n\n            // æ·±åº¦æœç´¢ payload å¯¹è±¡ä¸­çš„ transcript_path å­—æ®µ\n            return searchInObject(hook.payload, 'transcript_path');\n        }\n\n        // åœ¨å¯¹è±¡ä¸­é€’å½’æœç´¢æŒ‡å®šå­—æ®µ\n        function searchInObject(obj, fieldName) {\n            if (!obj || typeof obj !== 'object') return false;\n\n            for (const key in obj) {\n                if (key === fieldName) return true;\n\n                if (typeof obj[key] === 'object' && obj[key] !== null) {\n                    if (searchInObject(obj[key], fieldName)) return true;\n                }\n            }\n\n            return false;\n        }\n\n        // è·å– transcript_path çš„å€¼\n        function getTranscriptPath(hook) {\n            if (!hook.payload) return null;\n\n            // æ£€æŸ¥ payload ä¸­æ˜¯å¦ç›´æ¥åŒ…å« transcript_path\n            if (hook.payload.transcript_path) return hook.payload.transcript_path;\n\n            // æ·±åº¦æœç´¢å¹¶è¿”å› transcript_path çš„å€¼\n            return findValueInObject(hook.payload, 'transcript_path');\n        }\n\n        // åœ¨å¯¹è±¡ä¸­é€’å½’æŸ¥æ‰¾æŒ‡å®šå­—æ®µçš„å€¼\n        function findValueInObject(obj, fieldName) {\n            if (!obj || typeof obj !== 'object') return null;\n\n            for (const key in obj) {\n                if (key === fieldName) return obj[key];\n\n                if (typeof obj[key] === 'object' && obj[key] !== null) {\n                    const found = findValueInObject(obj[key], fieldName);\n                    if (found !== null) return found;\n                }\n            }\n\n            return null;\n        }\n\n        // åˆ›å»º hook å…ƒç´ \n        function createHookElement(hook, index) {\n            const div = document.createElement('div');\n            div.className = 'hook-item';\n\n            const eventClass = getEventClass(hook.event);\n            const formattedTime = formatTimestamp(hook.ts);\n            const eventDescription = getEventDescription(hook.event, hook.phase);\n            const hasTranscript = hasTranscriptPath(hook);\n            const transcriptPath = getTranscriptPath(hook);\n\n            div.innerHTML = `\n                <div class=\"hook-header\">\n                    <div class=\"hook-event\">\n                        <span class=\"event-badge ${eventClass}\">${hook.event}</span>\n                        ${hasTranscript ? '<span class=\"has-transcript-badge\">åŒ…å«è½¬å½•è·¯å¾„</span>' : ''}\n                    </div>\n                    <div class=\"hook-meta\">\n                        <div class=\"hook-timestamp\">${formattedTime}</div>\n                    </div>\n                </div>\n                <div class=\"hook-message\">${hook.message}</div>\n                <div class=\"hook-description\">${hook.description || eventDescription}</div>\n                ${hasTranscript && transcriptPath ? `\n                <div class=\"transcript-path\">\n                    <div class=\"transcript-path-label\">ğŸ“„ è½¬å½•è·¯å¾„ (transcript_path):</div>\n                    <div class=\"transcript-path-value\">${escapeHtml(transcriptPath)}</div>\n                </div>\n                ` : ''}\n                <div class=\"hook-details\">\n                    <div class=\"part-card\">\n                        <div class=\"part-header\" onclick=\"toggleDetail('payload-${index}')\">\n                            <span>Payload</span>\n                            <span class=\"toggle-icon\" id=\"icon-payload-${index}\">â–¼</span>\n                        </div>\n                        <div class=\"part-content hidden\" id=\"payload-${index}\">\n                            ${formatJson(hook.payload)}\n                        </div>\n                    </div>\n                </div>\n            `;\n\n            return div;\n        }"}}}
{"ts":"2025-11-05T02:26:01.476Z","event":"PostToolUse","phase":"","message":"PostToolUseäº‹ä»¶æ­£åœ¨æ‰§è¡Œ","description":"å·¥å…·æˆåŠŸæ‰§è¡Œåè§¦å‘ï¼Œå¸¸ç”¨äºæ ¼å¼åŒ–ã€æ ¡éªŒæˆ–è®°å½•ç»“æœã€‚","doc_url":"https://docs.claude.com/zh-CN/docs/claude-code/hooks#posttooluse","payload":{"session_id":"c7c21516-7e1e-49b2-8ae5-4e1bb98e9692","transcript_path":"C:\\Users\\WTCL\\.claude\\projects\\i--claude-code-proxy\\c7c21516-7e1e-49b2-8ae5-4e1bb98e9692.jsonl","cwd":"i:\\claude-code-proxy","permission_mode":"acceptEdits","hook_event_name":"PostToolUse","tool_name":"Edit","tool_input":{"file_path":"i:\\claude-code-proxy\\analyze\\hooks.html","old_string":"      // åˆ›å»º hook å…ƒç´ \n        function createHookElement(hook, index) {\n            const div = document.createElement('div');\n            div.className = 'hook-item';\n\n            const eventClass = getEventClass(hook.event);\n            const formattedTime = formatTimestamp(hook.ts);\n            const eventDescription = getEventDescription(hook.event, hook.phase);\n\n            div.innerHTML = `\n                <div class=\"hook-header\">\n                    <div class=\"hook-event\">\n                        <span class=\"event-badge ${eventClass}\">${hook.event}</span>\n                    </div>\n                    <div class=\"hook-meta\">\n                        <div class=\"hook-timestamp\">${formattedTime}</div>\n                    </div>\n                </div>\n                <div class=\"hook-message\">${hook.message}</div>\n                <div class=\"hook-description\">${hook.description || eventDescription}</div>\n                <div class=\"hook-details\">\n                    <div class=\"part-card\">\n                        <div class=\"part-header\" onclick=\"toggleDetail('payload-${index}')\">\n                            <span>Payload</span>\n                            <span class=\"toggle-icon\" id=\"icon-payload-${index}\">â–¼</span>\n                        </div>\n                        <div class=\"part-content hidden\" id=\"payload-${index}\">\n                            ${formatJson(hook.payload)}\n                        </div>\n                    </div>\n                </div>\n            `;\n\n            return div;\n        }","new_string":"      // æ£€æŸ¥æ˜¯å¦åŒ…å« transcript_path å­—æ®µ\n        function hasTranscriptPath(hook) {\n            if (!hook.payload) return false;\n\n            // æ£€æŸ¥ payload ä¸­æ˜¯å¦ç›´æ¥åŒ…å« transcript_path\n            if (hook.payload.transcript_path) return true;\n\n            // æ·±åº¦æœç´¢ payload å¯¹è±¡ä¸­çš„ transcript_path å­—æ®µ\n            return searchInObject(hook.payload, 'transcript_path');\n        }\n\n        // åœ¨å¯¹è±¡ä¸­é€’å½’æœç´¢æŒ‡å®šå­—æ®µ\n        function searchInObject(obj, fieldName) {\n            if (!obj || typeof obj !== 'object') return false;\n\n            for (const key in obj) {\n                if (key === fieldName) return true;\n\n                if (typeof obj[key] === 'object' && obj[key] !== null) {\n                    if (searchInObject(obj[key], fieldName)) return true;\n                }\n            }\n\n            return false;\n        }\n\n        // è·å– transcript_path çš„å€¼\n        function getTranscriptPath(hook) {\n            if (!hook.payload) return null;\n\n            // æ£€æŸ¥ payload ä¸­æ˜¯å¦ç›´æ¥åŒ…å« transcript_path\n            if (hook.payload.transcript_path) return hook.payload.transcript_path;\n\n            // æ·±åº¦æœç´¢å¹¶è¿”å› transcript_path çš„å€¼\n            return findValueInObject(hook.payload, 'transcript_path');\n        }\n\n        // åœ¨å¯¹è±¡ä¸­é€’å½’æŸ¥æ‰¾æŒ‡å®šå­—æ®µçš„å€¼\n        function findValueInObject(obj, fieldName) {\n            if (!obj || typeof obj !== 'object') return null;\n\n            for (const key in obj) {\n                if (key === fieldName) return obj[key];\n\n                if (typeof obj[key] === 'object' && obj[key] !== null) {\n                    const found = findValueInObject(obj[key], fieldName);\n                    if (found !== null) return found;\n                }\n            }\n\n            return null;\n        }\n\n        // åˆ›å»º hook å…ƒç´ \n        function createHookElement(hook, index) {\n            const div = document.createElement('div');\n            div.className = 'hook-item';\n\n            const eventClass = getEventClass(hook.event);\n            const formattedTime = formatTimestamp(hook.ts);\n            const eventDescription = getEventDescription(hook.event, hook.phase);\n            const hasTranscript = hasTranscriptPath(hook);\n            const transcriptPath = getTranscriptPath(hook);\n\n            div.innerHTML = `\n                <div class=\"hook-header\">\n                    <div class=\"hook-event\">\n                        <span class=\"event-badge ${eventClass}\">${hook.event}</span>\n                        ${hasTranscript ? '<span class=\"has-transcript-badge\">åŒ…å«è½¬å½•è·¯å¾„</span>' : ''}\n                    </div>\n                    <div class=\"hook-meta\">\n                        <div class=\"hook-timestamp\">${formattedTime}</div>\n                    </div>\n                </div>\n                <div class=\"hook-message\">${hook.message}</div>\n                <div class=\"hook-description\">${hook.description || eventDescription}</div>\n                ${hasTranscript && transcriptPath ? `\n                <div class=\"transcript-path\">\n                    <div class=\"transcript-path-label\">ğŸ“„ è½¬å½•è·¯å¾„ (transcript_path):</div>\n                    <div class=\"transcript-path-value\">${escapeHtml(transcriptPath)}</div>\n                </div>\n                ` : ''}\n                <div class=\"hook-details\">\n                    <div class=\"part-card\">\n                        <div class=\"part-header\" onclick=\"toggleDetail('payload-${index}')\">\n                            <span>Payload</span>\n                            <span class=\"toggle-icon\" id=\"icon-payload-${index}\">â–¼</span>\n                        </div>\n                        <div class=\"part-content hidden\" id=\"payload-${index}\">\n                            ${formatJson(hook.payload)}\n                        </div>\n                    </div>\n                </div>\n            `;\n\n            return div;\n        }"},"tool_response":{"filePath":"i:\\claude-code-proxy\\analyze\\hooks.html","oldString":"      // åˆ›å»º hook å…ƒç´ \n        function createHookElement(hook, index) {\n            const div = document.createElement('div');\n            div.className = 'hook-item';\n\n            const eventClass = getEventClass(hook.event);\n            const formattedTime = formatTimestamp(hook.ts);\n            const eventDescription = getEventDescription(hook.event, hook.phase);\n\n            div.innerHTML = `\n                <div class=\"hook-header\">\n                    <div class=\"hook-event\">\n                        <span class=\"event-badge ${eventClass}\">${hook.event}</span>\n                    </div>\n                    <div class=\"hook-meta\">\n                        <div class=\"hook-timestamp\">${formattedTime}</div>\n                    </div>\n                </div>\n                <div class=\"hook-message\">${hook.message}</div>\n                <div class=\"hook-description\">${hook.description || eventDescription}</div>\n                <div class=\"hook-details\">\n                    <div class=\"part-card\">\n                        <div class=\"part-header\" onclick=\"toggleDetail('payload-${index}')\">\n                            <span>Payload</span>\n                            <span class=\"toggle-icon\" id=\"icon-payload-${index}\">â–¼</span>\n                        </div>\n                        <div class=\"part-content hidden\" id=\"payload-${index}\">\n                            ${formatJson(hook.payload)}\n                        </div>\n                    </div>\n                </div>\n            `;\n\n            return div;\n        }","newString":"      // æ£€æŸ¥æ˜¯å¦åŒ…å« transcript_path å­—æ®µ\n        function hasTranscriptPath(hook) {\n            if (!hook.payload) return false;\n\n            // æ£€æŸ¥ payload ä¸­æ˜¯å¦ç›´æ¥åŒ…å« transcript_path\n            if (hook.payload.transcript_path) return true;\n\n            // æ·±åº¦æœç´¢ payload å¯¹è±¡ä¸­çš„ transcript_path å­—æ®µ\n            return searchInObject(hook.payload, 'transcript_path');\n        }\n\n        // åœ¨å¯¹è±¡ä¸­é€’å½’æœç´¢æŒ‡å®šå­—æ®µ\n        function searchInObject(obj, fieldName) {\n            if (!obj || typeof obj !== 'object') return false;\n\n            for (const key in obj) {\n                if (key === fieldName) return true;\n\n                if (typeof obj[key] === 'object' && obj[key] !== null) {\n                    if (searchInObject(obj[key], fieldName)) return true;\n                }\n            }\n\n            return false;\n        }\n\n        // è·å– transcript_path çš„å€¼\n        function getTranscriptPath(hook) {\n            if (!hook.payload) return null;\n\n            // æ£€æŸ¥ payload ä¸­æ˜¯å¦ç›´æ¥åŒ…å« transcript_path\n            if (hook.payload.transcript_path) return hook.payload.transcript_path;\n\n            // æ·±åº¦æœç´¢å¹¶è¿”å› transcript_path çš„å€¼\n            return findValueInObject(hook.payload, 'transcript_path');\n        }\n\n        // åœ¨å¯¹è±¡ä¸­é€’å½’æŸ¥æ‰¾æŒ‡å®šå­—æ®µçš„å€¼\n        function findValueInObject(obj, fieldName) {\n            if (!obj || typeof obj !== 'object') return null;\n\n            for (const key in obj) {\n                if (key === fieldName) return obj[key];\n\n                if (typeof obj[key] === 'object' && obj[key] !== null) {\n                    const found = findValueInObject(obj[key], fieldName);\n                    if (found !== null) return found;\n                }\n            }\n\n            return null;\n        }\n\n        // åˆ›å»º hook å…ƒç´ \n        function createHookElement(hook, index) {\n            const div = document.createElement('div');\n            div.className = 'hook-item';\n\n            const eventClass = getEventClass(hook.event);\n            const formattedTime = formatTimestamp(hook.ts);\n            const eventDescription = getEventDescription(hook.event, hook.phase);\n            const hasTranscript = hasTranscriptPath(hook);\n            const transcriptPath = getTranscriptPath(hook);\n\n            div.innerHTML = `\n                <div class=\"hook-header\">\n                    <div class=\"hook-event\">\n                        <span class=\"event-badge ${eventClass}\">${hook.event}</span>\n                        ${hasTranscript ? '<span class=\"has-transcript-badge\">åŒ…å«è½¬å½•è·¯å¾„</span>' : ''}\n                    </div>\n                    <div class=\"hook-meta\">\n                        <div class=\"hook-timestamp\">${formattedTime}</div>\n                    </div>\n                </div>\n                <div class=\"hook-message\">${hook.message}</div>\n                <div class=\"hook-description\">${hook.description || eventDescription}</div>\n                ${hasTranscript && transcriptPath ? `\n                <div class=\"transcript-path\">\n                    <div class=\"transcript-path-label\">ğŸ“„ è½¬å½•è·¯å¾„ (transcript_path):</div>\n                    <div class=\"transcript-path-value\">${escapeHtml(transcriptPath)}</div>\n                </div>\n                ` : ''}\n                <div class=\"hook-details\">\n                    <div class=\"part-card\">\n                        <div class=\"part-header\" onclick=\"toggleDetail('payload-${index}')\">\n                            <span>Payload</span>\n                            <span class=\"toggle-icon\" id=\"icon-payload-${index}\">â–¼</span>\n                        </div>\n                        <div class=\"part-content hidden\" id=\"payload-${index}\">\n                            ${formatJson(hook.payload)}\n                        </div>\n                    </div>\n                </div>\n            `;\n\n            return div;\n        }","originalFile":"<!DOCTYPE html>\n<html lang=\"zh-CN\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Hooks æ—¥å¿—åˆ†æ</title>\n    <style>\n        * {\n            margin: 0;\n            padding: 0;\n            box-sizing: border-box;\n        }\n\n        body {\n            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n            min-height: 100vh;\n            padding: 20px;\n        }\n\n        .container {\n            max-width: 1400px;\n            margin: 0 auto;\n        }\n\n        .header {\n            text-align: center;\n            color: white;\n            margin-bottom: 30px;\n        }\n\n        .header h1 {\n            font-size: 2.5rem;\n            margin-bottom: 10px;\n            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);\n        }\n\n        .header p {\n            font-size: 1.1rem;\n            opacity: 0.9;\n        }\n\n        /* æ–‡ä»¶ä¸Šä¼ ç»„ä»¶æ ·å¼ */\n        .upload-section {\n            margin-bottom: 30px;\n        }\n\n        .upload-card {\n            background: white;\n            border-radius: 15px;\n            padding: 25px;\n            box-shadow: 0 10px 30px rgba(0,0,0,0.1);\n            border: 2px dashed #cbd5e0;\n            transition: all 0.3s ease;\n        }\n\n        .upload-card:hover {\n            border-color: #667eea;\n            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.2);\n        }\n\n        .upload-header {\n            font-size: 1.2rem;\n            font-weight: bold;\n            color: #4a5568;\n            margin-bottom: 20px;\n            text-align: center;\n        }\n\n        .upload-area {\n            border: 2px dashed #e2e8f0;\n            border-radius: 10px;\n            padding: 40px 20px;\n            text-align: center;\n            transition: all 0.3s ease;\n            cursor: pointer;\n        }\n\n        .upload-area:hover {\n            border-color: #667eea;\n            background: #f7fafc;\n        }\n\n        .upload-area.dragover {\n            border-color: #667eea;\n            background: #edf2f7;\n            transform: scale(1.02);\n        }\n\n        .upload-icon {\n            font-size: 3rem;\n            margin-bottom: 15px;\n            opacity: 0.7;\n        }\n\n        .upload-text {\n            font-size: 1.1rem;\n            color: #4a5568;\n            margin-bottom: 10px;\n            font-weight: 500;\n        }\n\n        .upload-hint {\n            font-size: 0.9rem;\n            color: #718096;\n            margin-bottom: 20px;\n        }\n\n        .upload-btn {\n            background: #667eea;\n            color: white;\n            border: none;\n            padding: 12px 24px;\n            border-radius: 8px;\n            font-size: 1rem;\n            font-weight: 500;\n            cursor: pointer;\n            transition: all 0.3s ease;\n        }\n\n        .upload-btn:hover {\n            background: #5a67d8;\n            transform: translateY(-2px);\n            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);\n        }\n\n        .file-info {\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            background: #f7fafc;\n            padding: 15px 20px;\n            border-radius: 8px;\n            margin-top: 15px;\n        }\n\n        .file-name {\n            font-weight: 500;\n            color: #4a5568;\n            flex: 1;\n            overflow: hidden;\n            text-overflow: ellipsis;\n            white-space: nowrap;\n        }\n\n        .clear-btn {\n            background: #fc8181;\n            color: white;\n            border: none;\n            width: 30px;\n            height: 30px;\n            border-radius: 50%;\n            cursor: pointer;\n            font-size: 1rem;\n            transition: all 0.3s ease;\n        }\n\n        .clear-btn:hover {\n            background: #f56565;\n            transform: scale(1.1);\n        }\n\n        /* æ¶ˆæ¯æç¤ºæ ·å¼ */\n        .upload-message {\n            margin-top: 15px;\n            padding: 12px 16px;\n            border-radius: 8px;\n            font-size: 0.9rem;\n            animation: slideIn 0.3s ease;\n        }\n\n        .upload-success {\n            background: #d4edda;\n            color: #155724;\n            border: 1px solid #c3e6cb;\n        }\n\n        .upload-error {\n            background: #f8d7da;\n            color: #721c24;\n            border: 1px solid #f5c6cb;\n        }\n\n        @keyframes slideIn {\n            from {\n                opacity: 0;\n                transform: translateY(-10px);\n            }\n            to {\n                opacity: 1;\n                transform: translateY(0);\n            }\n        }\n\n        #file-input {\n            display: none;\n        }\n\n        .stats-grid {\n            display: grid;\n            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\n            gap: 20px;\n            margin-bottom: 30px;\n        }\n\n        .stat-card {\n            background: white;\n            border-radius: 15px;\n            padding: 25px;\n            box-shadow: 0 10px 30px rgba(0,0,0,0.2);\n            text-align: center;\n            transition: transform 0.3s ease, box-shadow 0.3s ease;\n        }\n\n        .stat-card:hover {\n            transform: translateY(-5px);\n            box-shadow: 0 15px 40px rgba(0,0,0,0.3);\n        }\n\n        .stat-number {\n            font-size: 3rem;\n            font-weight: bold;\n            margin-bottom: 10px;\n        }\n\n        .stat-label {\n            font-size: 1.1rem;\n            color: #666;\n            margin-bottom: 5px;\n        }\n\n        .stat-description {\n            font-size: 0.9rem;\n            color: #999;\n        }\n\n        .filter-section {\n            background: white;\n            border-radius: 15px;\n            padding: 20px;\n            box-shadow: 0 10px 30px rgba(0,0,0,0.2);\n            margin-bottom: 30px;\n        }\n\n        .filter-controls {\n            display: flex;\n            gap: 15px;\n            flex-wrap: wrap;\n            align-items: center;\n        }\n\n        .filter-group {\n            display: flex;\n            align-items: center;\n            gap: 10px;\n        }\n\n        .filter-label {\n            font-weight: bold;\n            color: #333;\n        }\n\n        .filter-select, .search-input {\n            padding: 8px 12px;\n            border: 2px solid #ddd;\n            border-radius: 5px;\n            font-size: 0.9rem;\n            transition: border-color 0.3s ease;\n        }\n\n        .filter-select:focus, .search-input:focus {\n            outline: none;\n            border-color: #667eea;\n        }\n\n        .search-input {\n            min-width: 200px;\n        }\n\n        .hooks-container {\n            display: grid;\n            gap: 30px;\n        }\n\n        .hook-item {\n            background: white;\n            border-radius: 15px;\n            padding: 25px;\n            box-shadow: 0 10px 30px rgba(0,0,0,0.2);\n        }\n\n        .hook-header {\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            margin-bottom: 20px;\n            padding-bottom: 15px;\n            border-bottom: 2px solid #667eea;\n        }\n\n        .hook-event {\n            font-size: 1.5rem;\n            font-weight: bold;\n            color: #667eea;\n        }\n\n        .hook-meta {\n            display: flex;\n            gap: 20px;\n            align-items: center;\n        }\n\n        .hook-timestamp {\n            font-size: 0.9rem;\n            color: #666;\n            background: #f0f4ff;\n            padding: 5px 12px;\n            border-radius: 20px;\n        }\n\n        .hook-message {\n            background: #f8f9fa;\n            border-left: 4px solid #667eea;\n            padding: 15px;\n            margin-bottom: 15px;\n            border-radius: 5px;\n        }\n\n        .hook-description {\n            color: #666;\n            font-style: italic;\n            margin-bottom: 15px;\n        }\n\n        .hook-details {\n            display: flex;\n            flex-direction: column;\n            gap: 20px;\n        }\n\n        .part-card {\n            background: #f8f9fa;\n            border-radius: 10px;\n            overflow: hidden;\n        }\n\n        .part-header {\n            background: #667eea;\n            color: white;\n            padding: 12px 15px;\n            font-weight: bold;\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            cursor: pointer;\n            transition: background 0.3s ease;\n        }\n\n        .part-header:hover {\n            background: #5a67d8;\n        }\n\n        .part-content {\n            padding: 15px;\n            font-family: 'Courier New', monospace;\n            font-size: 0.9rem;\n            background: #1a1a1a;\n            color: #ffffff;\n            overflow-y: auto;\n            white-space: pre-wrap;\n            line-height: 1.6;\n            min-height: 100px;\n            border-radius: 8px;\n            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.3);\n        }\n\n        .part-content.hidden {\n            display: none;\n        }\n\n        .toggle-icon {\n            transition: transform 0.3s ease;\n        }\n\n        .toggle-icon.rotated {\n            transform: rotate(180deg);\n        }\n\n        /* è‡ªå®šä¹‰æ»šåŠ¨æ¡æ ·å¼ */\n        .part-content::-webkit-scrollbar {\n            width: 8px;\n        }\n\n        .part-content::-webkit-scrollbar-track {\n            background: #2a2a2a;\n            border-radius: 4px;\n        }\n\n        .part-content::-webkit-scrollbar-thumb {\n            background: #4a4a4a;\n            border-radius: 4px;\n        }\n\n        .part-content::-webkit-scrollbar-thumb:hover {\n            background: #5a5a5a;\n        }\n\n        .event-badge {\n            display: inline-block;\n            padding: 4px 12px;\n            border-radius: 20px;\n            font-size: 0.8rem;\n            font-weight: bold;\n            margin-right: 10px;\n        }\n\n        .event-userprompt { background: #FF6B6B; color: white; }\n        .event-pretool { background: #4ECDC4; color: white; }\n        .event-posttool { background: #45B7D1; color: white; }\n        .event-notification { background: #9C27B0; color: white; }\n        .event-stop { background: #F44336; color: white; }\n        .event-subagent-stop { background: #FF9800; color: white; }\n        .event-pre-compact { background: #FFC107; color: white; }\n        .event-session-start { background: #4CAF50; color: white; }\n        .event-session-end { background: #607D8B; color: white; }\n        .event-default { background: #78909C; color: white; }\n\n        .no-data {\n            text-align: center;\n            padding: 60px 20px;\n            color: white;\n            font-size: 1.2rem;\n        }\n\n        .error-message {\n            background: #fff5f5;\n            border: 2px solid #fc8181;\n            color: #c53030;\n            padding: 20px;\n            border-radius: 10px;\n            text-align: center;\n            font-size: 1.1rem;\n            margin: 20px 0;\n        }\n\n        .json-key { color: #9C27B0; }\n        .json-string { color: #4CAF50; }\n        .json-number { color: #FF9800; }\n        .json-boolean { color: #F44336; }\n        .json-null { color: #9E9E9E; }\n        .json-url { color: #2196F3; text-decoration: underline; cursor: pointer; }\n\n        .transcript-path {\n            background: #fff3cd;\n            border: 1px solid #ffeaa7;\n            border-radius: 5px;\n            padding: 8px 12px;\n            margin-top: 10px;\n            font-size: 0.9rem;\n        }\n\n        .transcript-path-label {\n            font-weight: bold;\n            color: #856404;\n            margin-bottom: 5px;\n        }\n\n        .transcript-path-value {\n            color: #856404;\n            word-break: break-all;\n            font-family: monospace;\n            background: #f8f9fa;\n            padding: 4px 8px;\n            border-radius: 3px;\n        }\n\n        .has-transcript-badge {\n            background: #ffc107;\n            color: #212529;\n            padding: 2px 8px;\n            border-radius: 12px;\n            font-size: 0.7rem;\n            font-weight: bold;\n            margin-left: 10px;\n        }\n\n        @media (max-width: 768px) {\n            .header h1 {\n                font-size: 2rem;\n            }\n\n            .stats-grid {\n                grid-template-columns: repeat(2, 1fr);\n            }\n\n            .filter-controls {\n                flex-direction: column;\n                align-items: stretch;\n            }\n\n            .search-input {\n                min-width: auto;\n            }\n        }\n    </style>\n</head>\n<body>\n    <div class=\"container\">\n        <div class=\"header\">\n            <h1>Hooks æ—¥å¿—åˆ†æ</h1>\n            <p>ä¸Šä¼ å¹¶åˆ†æ Claude Hooks äº‹ä»¶æ—¥å¿—</p>\n        </div>\n\n        <!-- æ–‡ä»¶ä¸Šä¼ ç»„ä»¶ -->\n        <div class=\"upload-section\">\n            <div class=\"upload-card\">\n                <div class=\"upload-header\">\n                    <span>ğŸ“ é€‰æ‹© Hooks æ—¥å¿—æ–‡ä»¶</span>\n                </div>\n                <div class=\"upload-area\" id=\"upload-area\">\n                    <div class=\"upload-content\">\n                        <div class=\"upload-icon\">ğŸ“„</div>\n                        <p class=\"upload-text\">ç‚¹å‡»é€‰æ‹©æ–‡ä»¶æˆ–æ‹–æ‹½æ–‡ä»¶åˆ°æ­¤å¤„</p>\n                        <p class=\"upload-hint\">æ”¯æŒ .log .txt æ ¼å¼çš„æ—¥å¿—æ–‡ä»¶ï¼Œæ¯è¡Œä¸€ä¸ª JSON å¯¹è±¡ï¼Œæœ€å¤§50MB</p>\n                        <input type=\"file\" id=\"file-input\" accept=\".log,.txt\" style=\"display: none;\">\n                        <button class=\"upload-btn\" onclick=\"document.getElementById('file-input').click()\">é€‰æ‹©æ–‡ä»¶</button>\n                    </div>\n                </div>\n                <div class=\"file-info\" id=\"file-info\" style=\"display: none;\">\n                    <span class=\"file-name\" id=\"file-name\"></span>\n                    <button class=\"clear-btn\" onclick=\"clearFile()\">âœ•</button>\n                </div>\n            </div>\n        </div>\n\n        <div id=\"stats-section\" style=\"display: none;\">\n            <div class=\"stats-grid\">\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"total-hooks\">0</div>\n                    <div class=\"stat-label\">æ€»äº‹ä»¶æ•°</div>\n                    <div class=\"stat-description\">æ‰€æœ‰ Hooks äº‹ä»¶</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"user-prompts\">0</div>\n                    <div class=\"stat-label\">ç”¨æˆ·æç¤ºäº‹ä»¶</div>\n                    <div class=\"stat-description\">UserPromptSubmit</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"pre-tools\">0</div>\n                    <div class=\"stat-label\">å·¥å…·æ‰§è¡Œå‰äº‹ä»¶</div>\n                    <div class=\"stat-description\">PreToolUse</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"post-tools\">0</div>\n                    <div class=\"stat-label\">å·¥å…·æ‰§è¡Œåäº‹ä»¶</div>\n                    <div class=\"stat-description\">PostToolUse</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"notifications\">0</div>\n                    <div class=\"stat-label\">é€šçŸ¥äº‹ä»¶</div>\n                    <div class=\"stat-description\">Notification</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"stops\">0</div>\n                    <div class=\"stat-label\">åœæ­¢äº‹ä»¶</div>\n                    <div class=\"stat-description\">Stop</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"subagent-stops\">0</div>\n                    <div class=\"stat-label\">å­ä»£ç†åœæ­¢äº‹ä»¶</div>\n                    <div class=\"stat-description\">SubagentStop</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"pre-compacts\">0</div>\n                    <div class=\"stat-label\">å‹ç¼©å‰äº‹ä»¶</div>\n                    <div class=\"stat-description\">PreCompact</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"session-starts\">0</div>\n                    <div class=\"stat-label\">ä¼šè¯å¼€å§‹äº‹ä»¶</div>\n                    <div class=\"stat-description\">SessionStart</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"session-ends\">0</div>\n                    <div class=\"stat-label\">ä¼šè¯ç»“æŸäº‹ä»¶</div>\n                    <div class=\"stat-description\">SessionEnd</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"transcript-count\">0</div>\n                    <div class=\"stat-label\">åŒ…å«è½¬å½•è·¯å¾„äº‹ä»¶</div>\n                    <div class=\"stat-description\">åŒ…å« transcript_path</div>\n                </div>\n            </div>\n\n            <div class=\"filter-section\">\n                <div class=\"filter-controls\">\n                    <div class=\"filter-group\">\n                        <label class=\"filter-label\">äº‹ä»¶ç±»å‹ï¼š</label>\n                        <select class=\"filter-select\" id=\"event-filter\">\n                            <option value=\"\">å…¨éƒ¨</option>\n                            <option value=\"UserPromptSubmit\">UserPromptSubmit</option>\n                            <option value=\"PreToolUse\">PreToolUse</option>\n                            <option value=\"PostToolUse\">PostToolUse</option>\n                            <option value=\"Notification\">Notification</option>\n                            <option value=\"Stop\">Stop</option>\n                            <option value=\"SubagentStop\">SubagentStop</option>\n                            <option value=\"PreCompact\">PreCompact</option>\n                            <option value=\"SessionStart\">SessionStart</option>\n                            <option value=\"SessionEnd\">SessionEnd</option>\n                        </select>\n                    </div>\n                    <div class=\"filter-group\">\n                        <label class=\"filter-label\">æœç´¢ï¼š</label>\n                        <input type=\"text\" class=\"search-input\" id=\"search-input\" placeholder=\"æœç´¢äº‹ä»¶å†…å®¹...\">\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <div id=\"hooks-container\" class=\"hooks-container\"></div>\n\n        <div id=\"no-data\" class=\"no-data\">\n            è¯·ä¸Šä¼  hooks.log æ–‡ä»¶å¼€å§‹åˆ†æ\n        </div>\n\n        <div id=\"error-message\" class=\"error-message\" style=\"display: none;\"></div>\n    </div>\n\n    <script>\n        let hooksData = [];\n        let filteredData = [];\n\n        // æ–‡ä»¶ä¸Šä¼ ç›¸å…³å‡½æ•°\n        function setupFileUpload() {\n            const uploadArea = document.getElementById('upload-area');\n            const fileInput = document.getElementById('file-input');\n\n            // ç‚¹å‡»ä¸Šä¼ åŒºåŸŸè§¦å‘æ–‡ä»¶é€‰æ‹©ï¼ˆä½†ä¸åŒ…æ‹¬æŒ‰é’®ï¼‰\n            uploadArea.addEventListener('click', function(event) {\n                // å¦‚æœç‚¹å‡»çš„æ˜¯æŒ‰é’®ï¼Œä¸å¤„ç†\n                if (event.target.tagName === 'BUTTON' || event.target.closest('button')) {\n                    return;\n                }\n                fileInput.click();\n            });\n\n            // æ–‡ä»¶é€‰æ‹©äº‹ä»¶\n            fileInput.addEventListener('change', handleFileSelect);\n\n            // æ‹–æ‹½äº‹ä»¶\n            uploadArea.addEventListener('dragover', handleDragOver);\n            uploadArea.addEventListener('dragleave', handleDragLeave);\n            uploadArea.addEventListener('drop', handleDrop);\n        }\n\n\n        function handleDragOver(e) {\n            e.preventDefault();\n            e.currentTarget.classList.add('dragover');\n        }\n\n        function handleDragLeave(e) {\n            e.preventDefault();\n            e.currentTarget.classList.remove('dragover');\n        }\n\n        function handleDrop(e) {\n            e.preventDefault();\n            e.currentTarget.classList.remove('dragover');\n            handleFiles(e.dataTransfer.files);\n        }\n\n        function handleFileSelect(event) {\n            const files = event.target.files;\n            handleFiles(files);\n        }\n\n        function handleFiles(files) {\n            if (files.length === 0) return;\n\n            const file = files[0];\n\n            // æ£€æŸ¥æ–‡ä»¶ç±»å‹\n            const validTypes = ['.log', '.txt'];\n            const fileExtension = file.name.substring(file.name.lastIndexOf('.')).toLowerCase();\n\n            if (!validTypes.includes(fileExtension)) {\n                showErrorMessage('è¯·é€‰æ‹© .log æˆ– .txt æ ¼å¼çš„æ—¥å¿—æ–‡ä»¶');\n                return;\n            }\n\n            // æ£€æŸ¥æ–‡ä»¶å¤§å° (é™åˆ¶ä¸º50MB)\n            if (file.size > 50 * 1024 * 1024) {\n                showErrorMessage('æ–‡ä»¶å¤§å°ä¸èƒ½è¶…è¿‡50MB');\n                return;\n            }\n\n            // æ˜¾ç¤ºæ–‡ä»¶ä¿¡æ¯\n            showFileInfo(file);\n\n            // è¯»å–æ–‡ä»¶å†…å®¹\n            const reader = new FileReader();\n            reader.onload = function(e) {\n                try {\n                    const content = e.target.result;\n                    console.log('æ–‡ä»¶è¯»å–æˆåŠŸï¼Œå†…å®¹é•¿åº¦:', content.length);\n                    console.log('æ–‡ä»¶å†…å®¹å‰100å­—ç¬¦:', content.substring(0, 100));\n\n                    if (!content || content.trim().length === 0) {\n                        showErrorMessage('æ–‡ä»¶å†…å®¹ä¸ºç©º');\n                        return;\n                    }\n\n                    parseHooksData(content);\n                    showSuccessMessage(`æˆåŠŸåŠ è½½æ–‡ä»¶: ${file.name}`);\n                } catch (error) {\n                    console.error('æ–‡ä»¶è§£æå¼‚å¸¸:', error);\n                    showErrorMessage('æ–‡ä»¶è§£æå¤±è´¥ï¼š' + error.message);\n                }\n            };\n            reader.onerror = function(error) {\n                console.error('æ–‡ä»¶è¯»å–å¤±è´¥:', error);\n                showErrorMessage('æ–‡ä»¶è¯»å–å¤±è´¥');\n            };\n            reader.readAsText(file);\n        }\n\n        function showFileInfo(file) {\n            const fileInfo = document.getElementById('file-info');\n            const fileName = document.getElementById('file-name');\n            const uploadArea = document.getElementById('upload-area');\n\n            fileName.textContent = file.name;\n            fileInfo.style.display = 'flex';\n            uploadArea.style.display = 'none';\n        }\n\n        function clearFile() {\n            const fileInfo = document.getElementById('file-info');\n            const uploadArea = document.getElementById('upload-area');\n            const fileInput = document.getElementById('file-input');\n\n            fileInfo.style.display = 'none';\n            uploadArea.style.display = 'block';\n\n            // æ¸…ç©ºæ–‡ä»¶è¾“å…¥æ¡†çš„å€¼\n            fileInput.value = '';\n\n            // æ¸…ç©ºæ•°æ®\n            hooksData = [];\n            filteredData = [];\n\n            // æ¸…ç©ºæ˜¾ç¤ºåŒºåŸŸ\n            document.getElementById('hooks-container').innerHTML = '';\n            document.getElementById('no-data').style.display = 'block';\n            document.getElementById('stats-section').style.display = 'none';\n\n            // æ˜¾ç¤ºæç¤º\n            showSuccessMessage('å·²æ¸…ç©ºæ–‡ä»¶ï¼Œè¯·é‡æ–°é€‰æ‹©æ—¥å¿—æ–‡ä»¶');\n        }\n\n        function showSuccessMessage(message) {\n            showMessage(message, 'success');\n        }\n\n        function showErrorMessage(message) {\n            showMessage(message, 'error');\n        }\n\n        function showMessage(message, type) {\n            // ç§»é™¤ä¹‹å‰çš„æ¶ˆæ¯\n            const existingMessages = document.querySelectorAll('.upload-message');\n            existingMessages.forEach(msg => msg.remove());\n\n            const messageClass = type === 'success' ? 'upload-success' : 'upload-error';\n            const messageDiv = document.createElement('div');\n            messageDiv.className = `upload-message ${messageClass}`;\n            messageDiv.textContent = message;\n\n            document.querySelector('.upload-card').appendChild(messageDiv);\n\n            // 3ç§’åè‡ªåŠ¨æ¶ˆå¤±\n            setTimeout(() => {\n                messageDiv.style.opacity = '0';\n                setTimeout(() => {\n                    if (messageDiv.parentNode) {\n                        messageDiv.parentNode.removeChild(messageDiv);\n                    }\n                }, 300);\n            }, 3000);\n        }\n\n        // è§£æ hooks æ•°æ®\n        function parseHooksData(content) {\n            console.log('å¼€å§‹è§£æ hooks æ•°æ®ï¼Œå†…å®¹é•¿åº¦:', content.length);\n\n            hooksData = [];\n            const lines = content.split('\\n').filter(line => line.trim());\n            console.log('åˆ†å‰²åçš„è¡Œæ•°:', lines.length);\n\n            for (let i = 0; i < lines.length; i++) {\n                const line = lines[i];\n                try {\n                    const hookData = JSON.parse(line);\n                    hooksData.push(hookData);\n                    console.log(`æˆåŠŸè§£æç¬¬ ${i + 1} è¡Œï¼Œäº‹ä»¶ç±»å‹:`, hookData.event);\n                } catch (error) {\n                    console.error(`è§£æç¬¬ ${i + 1} è¡Œå¤±è´¥:`, error.message);\n                    console.error('é—®é¢˜è¡Œçš„å†…å®¹:', line.substring(0, 100) + (line.length > 100 ? '...' : ''));\n                }\n            }\n\n            console.log('è§£æå®Œæˆï¼Œæ€»å…±è§£æåˆ°', hooksData.length, 'ä¸ªæœ‰æ•ˆäº‹ä»¶');\n\n            if (hooksData.length === 0) {\n                showErrorMessage('æœªæ‰¾åˆ°æœ‰æ•ˆçš„ hooks æ•°æ®ã€‚è¯·ç¡®ä¿æ–‡ä»¶æ ¼å¼æ­£ç¡®ï¼Œæ¯è¡Œåº”è¯¥æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„JSONå¯¹è±¡ã€‚');\n                console.error('è§£æå¤±è´¥ï¼Œæ²¡æœ‰æ‰¾åˆ°æœ‰æ•ˆçš„hooksæ•°æ®');\n                return;\n            }\n\n            filteredData = [...hooksData];\n            console.log('å‡†å¤‡æ˜¾ç¤ºæ•°æ®ï¼Œè¿‡æ»¤åçš„äº‹ä»¶æ•°é‡:', filteredData.length);\n            displayData();\n        }\n\n        // æ˜¾ç¤ºæ•°æ®\n        function displayData() {\n            document.getElementById('no-data').style.display = 'none';\n            document.getElementById('error-message').style.display = 'none';\n            document.getElementById('stats-section').style.display = 'block';\n\n            updateStatistics();\n            renderHooks();\n        }\n\n        // æ›´æ–°ç»Ÿè®¡ä¿¡æ¯\n        function updateStatistics() {\n            const stats = {\n                total: filteredData.length,\n                userPrompts: filteredData.filter(h => h.event === 'UserPromptSubmit').length,\n                preTools: filteredData.filter(h => h.event === 'PreToolUse').length,\n                postTools: filteredData.filter(h => h.event === 'PostToolUse').length,\n                notifications: filteredData.filter(h => h.event === 'Notification').length,\n                stops: filteredData.filter(h => h.event === 'Stop').length,\n                subagentStops: filteredData.filter(h => h.event === 'SubagentStop').length,\n                preCompacts: filteredData.filter(h => h.event === 'PreCompact').length,\n                sessionStarts: filteredData.filter(h => h.event === 'SessionStart').length,\n                sessionEnds: filteredData.filter(h => h.event === 'SessionEnd').length,\n                transcriptCount: filteredData.filter(h => hasTranscriptPath(h)).length\n            };\n\n            document.getElementById('total-hooks').textContent = stats.total;\n            document.getElementById('user-prompts').textContent = stats.userPrompts;\n            document.getElementById('pre-tools').textContent = stats.preTools;\n            document.getElementById('post-tools').textContent = stats.postTools;\n            document.getElementById('notifications').textContent = stats.notifications;\n            document.getElementById('stops').textContent = stats.stops;\n            document.getElementById('subagent-stops').textContent = stats.subagentStops;\n            document.getElementById('pre-compacts').textContent = stats.preCompacts;\n            document.getElementById('session-starts').textContent = stats.sessionStarts;\n            document.getElementById('session-ends').textContent = stats.sessionEnds;\n            document.getElementById('transcript-count').textContent = stats.transcriptCount;\n        }\n\n        // æ¸²æŸ“ hooks\n        function renderHooks() {\n            const container = document.getElementById('hooks-container');\n            container.innerHTML = '';\n\n            filteredData.forEach((hook, index) => {\n                const hookElement = createHookElement(hook, index);\n                container.appendChild(hookElement);\n            });\n\n            // æ·»åŠ åŠ¨ç”»\n            const elements = container.querySelectorAll('.hook-item');\n            elements.forEach((el, i) => {\n                el.style.opacity = '0';\n                el.style.transform = 'translateY(20px)';\n                setTimeout(() => {\n                    el.style.transition = 'opacity 0.3s ease, transform 0.3s ease';\n                    el.style.opacity = '1';\n                    el.style.transform = 'translateY(0)';\n                }, i * 50);\n            });\n        }\n\n        // åˆ›å»º hook å…ƒç´ \n        function createHookElement(hook, index) {\n            const div = document.createElement('div');\n            div.className = 'hook-item';\n\n            const eventClass = getEventClass(hook.event);\n            const formattedTime = formatTimestamp(hook.ts);\n            const eventDescription = getEventDescription(hook.event, hook.phase);\n\n            div.innerHTML = `\n                <div class=\"hook-header\">\n                    <div class=\"hook-event\">\n                        <span class=\"event-badge ${eventClass}\">${hook.event}</span>\n                    </div>\n                    <div class=\"hook-meta\">\n                        <div class=\"hook-timestamp\">${formattedTime}</div>\n                    </div>\n                </div>\n                <div class=\"hook-message\">${hook.message}</div>\n                <div class=\"hook-description\">${hook.description || eventDescription}</div>\n                <div class=\"hook-details\">\n                    <div class=\"part-card\">\n                        <div class=\"part-header\" onclick=\"toggleDetail('payload-${index}')\">\n                            <span>Payload</span>\n                            <span class=\"toggle-icon\" id=\"icon-payload-${index}\">â–¼</span>\n                        </div>\n                        <div class=\"part-content hidden\" id=\"payload-${index}\">\n                            ${formatJson(hook.payload)}\n                        </div>\n                    </div>\n                </div>\n            `;\n\n            return div;\n        }\n\n        // è·å–äº‹ä»¶æè¿°\n        function getEventDescription(event, phase) {\n            switch (event) {\n                case 'PreToolUse':\n                    return 'å·¥å…·æ‰§è¡Œå‰è§¦å‘ï¼Œå¯åŸºäºå‚æ•°é˜»æ­¢æˆ–è°ƒæ•´è°ƒç”¨ã€‚';\n                case 'PostToolUse':\n                    return 'å·¥å…·æˆåŠŸæ‰§è¡Œåè§¦å‘ï¼Œå¸¸ç”¨äºæ ¼å¼åŒ–ã€æ ¡éªŒæˆ–è®°å½•ç»“æœã€‚';\n                case 'UserPromptSubmit':\n                    return 'ç”¨æˆ·æäº¤æç¤ºå‰è§¦å‘ï¼Œå¯è¿›è¡Œæç¤ºæ ¡éªŒæˆ–å¢å¼ºã€‚';\n                case 'Notification':\n                    return 'å½“ç³»ç»Ÿå‘é€é€šçŸ¥ï¼ˆéœ€æˆæƒæˆ–ç­‰å¾…è¾“å…¥ï¼‰æ—¶è§¦å‘ã€‚';\n                case 'Stop':\n                    return 'ä¸»ä»£ç†å®Œæˆå“åº”æ—¶è§¦å‘ï¼ˆç”¨æˆ·ä¸­æ–­ä¸è§¦å‘ï¼‰ã€‚';\n                case 'SubagentStop':\n                    return 'å­ä»£ç†ä»»åŠ¡å®Œæˆæ—¶è§¦å‘ï¼Œç”¨äºè®°å½•å­ä»»åŠ¡ç»“æŸã€‚';\n                case 'PreCompact':\n                    return phase === 'manual'\n                        ? 'æ‰‹åŠ¨å‹ç¼©å‰è§¦å‘ï¼Œç”¨äºè®°å½•æˆ–å‡†å¤‡å‹ç¼©ã€‚'\n                        : 'è‡ªåŠ¨å‹ç¼©å‰è§¦å‘ï¼ˆä¸Šä¸‹æ–‡æ¥è¿‘ä¸Šé™ï¼‰ï¼Œç”¨äºè®°å½•æˆ–å‡†å¤‡å‹ç¼©ã€‚';\n                case 'SessionStart':\n                    switch (phase) {\n                        case 'startup':\n                            return 'æ–°ä¼šè¯å¯åŠ¨æ—¶è§¦å‘ï¼Œç”¨äºåŠ è½½ä¸Šä¸‹æ–‡æˆ–è®¾ç½®ç¯å¢ƒã€‚';\n                        case 'resume':\n                            return 'æ¢å¤ä¼šè¯æ—¶è§¦å‘ï¼Œç”¨äºç»§ç»­å…ˆå‰ä¸Šä¸‹æ–‡ã€‚';\n                        case 'clear':\n                            return 'æ¸…ç©ºä¼šè¯åè§¦å‘ï¼Œç”¨äºé‡ç½®ç¯å¢ƒä¸ä¸Šä¸‹æ–‡ã€‚';\n                        case 'compact':\n                            return 'å› å‹ç¼©æ“ä½œè§¦å‘çš„ä¼šè¯å¯åŠ¨ï¼Œç”¨äºç»´æŒä¸Šä¸‹æ–‡ã€‚';\n                        default:\n                            return 'ä¼šè¯å¯åŠ¨ç›¸å…³äº‹ä»¶ï¼Œåˆå§‹åŒ–æˆ–æ¢å¤ä¸Šä¸‹æ–‡ã€‚';\n                    }\n                case 'SessionEnd':\n                    return 'ä¼šè¯ç»“æŸæ—¶è§¦å‘ï¼Œå¸¸ç”¨äºæ”¶å°¾ä¸æ¸…ç†ã€‚';\n                default:\n                    return 'æœªçŸ¥äº‹ä»¶ã€‚';\n            }\n        }\n\n        // è·å–äº‹ä»¶æ ·å¼ç±»\n        function getEventClass(event) {\n            switch (event) {\n                case 'UserPromptSubmit': return 'event-userprompt';\n                case 'PreToolUse': return 'event-pretool';\n                case 'PostToolUse': return 'event-posttool';\n                case 'Notification': return 'event-notification';\n                case 'Stop': return 'event-stop';\n                case 'SubagentStop': return 'event-subagent-stop';\n                case 'PreCompact': return 'event-pre-compact';\n                case 'SessionStart': return 'event-session-start';\n                case 'SessionEnd': return 'event-session-end';\n                default: return 'event-default';\n            }\n        }\n\n        // æ ¼å¼åŒ–æ—¶é—´æˆ³\n        function formatTimestamp(ts) {\n            const date = new Date(ts);\n            return date.toLocaleString('zh-CN');\n        }\n\n        // æ ¼å¼åŒ– JSON\n        function formatJson(obj, indent = 0) {\n            if (!obj) return '';\n\n            try {\n                const spaces = '  '.repeat(indent);\n                let result = '';\n\n                if (Array.isArray(obj)) {\n                    result += '[\\n';\n                    obj.forEach((item, index) => {\n                        result += spaces + '  ';\n                        if (typeof item === 'object' && item !== null) {\n                            result += formatJson(item, indent + 1);\n                        } else {\n                            result += formatJsonValue(item);\n                        }\n                        if (index < obj.length - 1) result += ',';\n                        result += '\\n';\n                    });\n                    result += spaces + ']';\n                } else if (typeof obj === 'object' && obj !== null) {\n                    result += '{\\n';\n                    const keys = Object.keys(obj);\n                    keys.forEach((key, index) => {\n                        result += spaces + '  ';\n                        result += `<span class=\"json-key\">\"${escapeHtml(key)}\"</span>: `;\n\n                        if (typeof obj[key] === 'object' && obj[key] !== null) {\n                            result += formatJson(obj[key], indent + 1);\n                        } else {\n                            result += formatJsonValue(obj[key]);\n                        }\n\n                        if (index < keys.length - 1) result += ',';\n                        result += '\\n';\n                    });\n                    result += spaces + '}';\n                } else {\n                    result += formatJsonValue(obj);\n                }\n\n                return result;\n            } catch (error) {\n                return escapeHtml(JSON.stringify(obj));\n            }\n        }\n\n        // æ ¼å¼åŒ– JSON å€¼\n        function formatJsonValue(value) {\n            if (typeof value === 'string') {\n                if (value.startsWith('http://') || value.startsWith('https://')) {\n                    return `<span class=\"json-url\" onclick=\"window.open('${escapeHtml(value)}', '_blank')\">\"${escapeHtml(value)}\"</span>`;\n                }\n                return `<span class=\"json-string\">\"${escapeHtml(value)}\"</span>`;\n            } else if (typeof value === 'number') {\n                return `<span class=\"json-number\">${value}</span>`;\n            } else if (typeof value === 'boolean') {\n                return `<span class=\"json-boolean\">${value}</span>`;\n            } else if (value === null) {\n                return `<span class=\"json-null\">null</span>`;\n            } else {\n                return `<span style=\"color: #666;\">${value}</span>`;\n            }\n        }\n\n        // HTML è½¬ä¹‰\n        function escapeHtml(text) {\n            const div = document.createElement('div');\n            div.textContent = text;\n            return div.innerHTML;\n        }\n\n        // åˆ‡æ¢è¯¦æƒ…æ˜¾ç¤º\n        function toggleDetail(id) {\n            const content = document.getElementById(id);\n            const icon = document.getElementById('icon-' + id);\n\n            if (content.classList.contains('hidden')) {\n                content.classList.remove('hidden');\n                icon.classList.add('rotated');\n            } else {\n                content.classList.add('hidden');\n                icon.classList.remove('rotated');\n            }\n        }\n\n        // è¿‡æ»¤å’Œæœç´¢\n        document.getElementById('event-filter').addEventListener('change', applyFilters);\n        document.getElementById('search-input').addEventListener('input', applyFilters);\n\n        function applyFilters() {\n            const eventFilter = document.getElementById('event-filter').value;\n            const searchText = document.getElementById('search-input').value.toLowerCase();\n\n            filteredData = hooksData.filter(hook => {\n                const matchEvent = !eventFilter || hook.event === eventFilter;\n                const matchSearch = !searchText ||\n                    JSON.stringify(hook).toLowerCase().includes(searchText);\n\n                return matchEvent && matchSearch;\n            });\n\n            updateStatistics();\n            renderHooks();\n        }\n\n        // æ ¼å¼åŒ–æ–‡ä»¶å¤§å°\n        function formatFileSize(bytes) {\n            if (bytes === 0) return '0 Bytes';\n            const k = 1024;\n            const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n            const i = Math.floor(Math.log(bytes) / Math.log(k));\n            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n        }\n\n        // é¡µé¢åŠ è½½æ—¶æ‰§è¡Œ\n        document.addEventListener('DOMContentLoaded', function() {\n            // æ·»åŠ åˆå§‹åŠ è½½åŠ¨ç”»\n            const cards = document.querySelectorAll('.stat-card, .upload-card');\n            cards.forEach((card, index) => {\n                card.style.opacity = '0';\n                card.style.transform = 'translateY(20px)';\n                setTimeout(() => {\n                    card.style.transition = 'opacity 0.5s ease, transform 0.5s ease';\n                    card.style.opacity = '1';\n                    card.style.transform = 'translateY(0)';\n                }, index * 100);\n            });\n\n            // è®¾ç½®æ–‡ä»¶ä¸Šä¼ \n            setupFileUpload();\n        });\n\n            </script>\n</body>\n</html>","structuredPatch":[{"oldStart":885,"oldLines":6,"newStart":885,"newLines":59,"lines":["             });","         }"," ","+        // æ£€æŸ¥æ˜¯å¦åŒ…å« transcript_path å­—æ®µ","+        function hasTranscriptPath(hook) {","+            if (!hook.payload) return false;","+","+            // æ£€æŸ¥ payload ä¸­æ˜¯å¦ç›´æ¥åŒ…å« transcript_path","+            if (hook.payload.transcript_path) return true;","+","+            // æ·±åº¦æœç´¢ payload å¯¹è±¡ä¸­çš„ transcript_path å­—æ®µ","+            return searchInObject(hook.payload, 'transcript_path');","+        }","+","+        // åœ¨å¯¹è±¡ä¸­é€’å½’æœç´¢æŒ‡å®šå­—æ®µ","+        function searchInObject(obj, fieldName) {","+            if (!obj || typeof obj !== 'object') return false;","+","+            for (const key in obj) {","+                if (key === fieldName) return true;","+","+                if (typeof obj[key] === 'object' && obj[key] !== null) {","+                    if (searchInObject(obj[key], fieldName)) return true;","+                }","+            }","+","+            return false;","+        }","+","+        // è·å– transcript_path çš„å€¼","+        function getTranscriptPath(hook) {","+            if (!hook.payload) return null;","+","+            // æ£€æŸ¥ payload ä¸­æ˜¯å¦ç›´æ¥åŒ…å« transcript_path","+            if (hook.payload.transcript_path) return hook.payload.transcript_path;","+","+            // æ·±åº¦æœç´¢å¹¶è¿”å› transcript_path çš„å€¼","+            return findValueInObject(hook.payload, 'transcript_path');","+        }","+","+        // åœ¨å¯¹è±¡ä¸­é€’å½’æŸ¥æ‰¾æŒ‡å®šå­—æ®µçš„å€¼","+        function findValueInObject(obj, fieldName) {","+            if (!obj || typeof obj !== 'object') return null;","+","+            for (const key in obj) {","+                if (key === fieldName) return obj[key];","+","+                if (typeof obj[key] === 'object' && obj[key] !== null) {","+                    const found = findValueInObject(obj[key], fieldName);","+                    if (found !== null) return found;","+                }","+            }","+","+            return null;","+        }","+","         // åˆ›å»º hook å…ƒç´ ","         function createHookElement(hook, index) {","             const div = document.createElement('div');"]},{"oldStart":893,"oldLines":11,"newStart":946,"newLines":14,"lines":["             const eventClass = getEventClass(hook.event);","             const formattedTime = formatTimestamp(hook.ts);","             const eventDescription = getEventDescription(hook.event, hook.phase);","+            const hasTranscript = hasTranscriptPath(hook);","+            const transcriptPath = getTranscriptPath(hook);"," ","             div.innerHTML = `","                 <div class=\"hook-header\">","                     <div class=\"hook-event\">","                         <span class=\"event-badge ${eventClass}\">${hook.event}</span>","+                        ${hasTranscript ? '<span class=\"has-transcript-badge\">åŒ…å«è½¬å½•è·¯å¾„</span>' : ''}","                     </div>","                     <div class=\"hook-meta\">","                         <div class=\"hook-timestamp\">${formattedTime}</div>"]},{"oldStart":905,"oldLines":6,"newStart":961,"newLines":12,"lines":["                 </div>","                 <div class=\"hook-message\">${hook.message}</div>","                 <div class=\"hook-description\">${hook.description || eventDescription}</div>","+                ${hasTranscript && transcriptPath ? `","+                <div class=\"transcript-path\">","+                    <div class=\"transcript-path-label\">ğŸ“„ è½¬å½•è·¯å¾„ (transcript_path):</div>","+                    <div class=\"transcript-path-value\">${escapeHtml(transcriptPath)}</div>","+                </div>","+                ` : ''}","                 <div class=\"hook-details\">","                     <div class=\"part-card\">","                         <div class=\"part-header\" onclick=\"toggleDetail('payload-${index}')\">"]}],"userModified":false,"replaceAll":false}}}
{"ts":"2025-11-05T02:26:16.860Z","event":"PreToolUse","phase":"","message":"PreToolUseäº‹ä»¶æ­£åœ¨æ‰§è¡Œ","description":"å·¥å…·æ‰§è¡Œå‰è§¦å‘ï¼Œå¯åŸºäºå‚æ•°é˜»æ­¢æˆ–è°ƒæ•´è°ƒç”¨ã€‚","doc_url":"https://docs.claude.com/zh-CN/docs/claude-code/hooks#pretooluse","payload":{"session_id":"c7c21516-7e1e-49b2-8ae5-4e1bb98e9692","transcript_path":"C:\\Users\\WTCL\\.claude\\projects\\i--claude-code-proxy\\c7c21516-7e1e-49b2-8ae5-4e1bb98e9692.jsonl","cwd":"i:\\claude-code-proxy","permission_mode":"acceptEdits","hook_event_name":"PreToolUse","tool_name":"TodoWrite","tool_input":{"todos":[{"content":"åœ¨ hooks.html ä¸­æ·»åŠ  transcript_path å­—æ®µæ£€æµ‹å’Œæ˜¾ç¤ºåŠŸèƒ½","status":"completed","activeForm":"åœ¨ hooks.html ä¸­æ·»åŠ  transcript_path å­—æ®µæ£€æµ‹å’Œæ˜¾ç¤ºåŠŸèƒ½"}]}}}
{"ts":"2025-11-05T02:26:17.080Z","event":"PostToolUse","phase":"","message":"PostToolUseäº‹ä»¶æ­£åœ¨æ‰§è¡Œ","description":"å·¥å…·æˆåŠŸæ‰§è¡Œåè§¦å‘ï¼Œå¸¸ç”¨äºæ ¼å¼åŒ–ã€æ ¡éªŒæˆ–è®°å½•ç»“æœã€‚","doc_url":"https://docs.claude.com/zh-CN/docs/claude-code/hooks#posttooluse","payload":{"session_id":"c7c21516-7e1e-49b2-8ae5-4e1bb98e9692","transcript_path":"C:\\Users\\WTCL\\.claude\\projects\\i--claude-code-proxy\\c7c21516-7e1e-49b2-8ae5-4e1bb98e9692.jsonl","cwd":"i:\\claude-code-proxy","permission_mode":"acceptEdits","hook_event_name":"PostToolUse","tool_name":"TodoWrite","tool_input":{"todos":[{"content":"åœ¨ hooks.html ä¸­æ·»åŠ  transcript_path å­—æ®µæ£€æµ‹å’Œæ˜¾ç¤ºåŠŸèƒ½","status":"completed","activeForm":"åœ¨ hooks.html ä¸­æ·»åŠ  transcript_path å­—æ®µæ£€æµ‹å’Œæ˜¾ç¤ºåŠŸèƒ½"}]},"tool_response":{"oldTodos":[{"content":"åœ¨ hooks.html ä¸­æ·»åŠ  transcript_path å­—æ®µæ£€æµ‹å’Œæ˜¾ç¤ºåŠŸèƒ½","status":"in_progress","activeForm":"æ·»åŠ  transcript_path å­—æ®µæ£€æµ‹å’Œæ˜¾ç¤ºåŠŸèƒ½"}],"newTodos":[{"content":"åœ¨ hooks.html ä¸­æ·»åŠ  transcript_path å­—æ®µæ£€æµ‹å’Œæ˜¾ç¤ºåŠŸèƒ½","status":"completed","activeForm":"åœ¨ hooks.html ä¸­æ·»åŠ  transcript_path å­—æ®µæ£€æµ‹å’Œæ˜¾ç¤ºåŠŸèƒ½"}]}}}
{"ts":"2025-11-05T02:26:21.236Z","event":"Stop","phase":"","message":"Stopäº‹ä»¶æ­£åœ¨æ‰§è¡Œ","description":"ä¸»ä»£ç†å®Œæˆå“åº”æ—¶è§¦å‘ï¼ˆç”¨æˆ·ä¸­æ–­ä¸è§¦å‘ï¼‰ã€‚","doc_url":"https://docs.claude.com/zh-CN/docs/claude-code/hooks#stop","payload":{"session_id":"c7c21516-7e1e-49b2-8ae5-4e1bb98e9692","transcript_path":"C:\\Users\\WTCL\\.claude\\projects\\i--claude-code-proxy\\c7c21516-7e1e-49b2-8ae5-4e1bb98e9692.jsonl","cwd":"i:\\claude-code-proxy","permission_mode":"acceptEdits","hook_event_name":"Stop","stop_hook_active":false}}
{"ts":"2025-11-05T02:28:53.204Z","event":"UserPromptSubmit","phase":"","message":"UserPromptSubmitäº‹ä»¶æ­£åœ¨æ‰§è¡Œ","description":"ç”¨æˆ·æäº¤æç¤ºå‰è§¦å‘ï¼Œå¯è¿›è¡Œæç¤ºæ ¡éªŒæˆ–å¢å¼ºã€‚","doc_url":"https://docs.claude.com/zh-CN/docs/claude-code/hooks#userpromptsubmit","payload":{"session_id":"c7c21516-7e1e-49b2-8ae5-4e1bb98e9692","transcript_path":"C:\\Users\\WTCL\\.claude\\projects\\i--claude-code-proxy\\c7c21516-7e1e-49b2-8ae5-4e1bb98e9692.jsonl","cwd":"i:\\claude-code-proxy","permission_mode":"acceptEdits","hook_event_name":"UserPromptSubmit","prompt":"è½¬å½•è·¯å¾„ (transcript_path)   åœ¨è¿™åé¢æ·»åŠ ä¸€ä¸ªæ‰“å¼€æŒ‰é’®ï¼Œç‚¹å‡»åï¼Œè‡ªåŠ¨æ‰“å¼€è¿™ä¸ªè·¯å¾„çš„æ–‡ä»¶ã€‚æµè§ˆå™¨åº”è¯¥æ”¯æŒå§"}}
{"ts":"2025-11-05T02:29:03.587Z","event":"PreToolUse","phase":"","message":"PreToolUseäº‹ä»¶æ­£åœ¨æ‰§è¡Œ","description":"å·¥å…·æ‰§è¡Œå‰è§¦å‘ï¼Œå¯åŸºäºå‚æ•°é˜»æ­¢æˆ–è°ƒæ•´è°ƒç”¨ã€‚","doc_url":"https://docs.claude.com/zh-CN/docs/claude-code/hooks#pretooluse","payload":{"session_id":"c7c21516-7e1e-49b2-8ae5-4e1bb98e9692","transcript_path":"C:\\Users\\WTCL\\.claude\\projects\\i--claude-code-proxy\\c7c21516-7e1e-49b2-8ae5-4e1bb98e9692.jsonl","cwd":"i:\\claude-code-proxy","permission_mode":"acceptEdits","hook_event_name":"PreToolUse","tool_name":"TodoWrite","tool_input":{"todos":[{"content":"ä¸º transcript_path æ·»åŠ æ‰“å¼€/å¤åˆ¶æŒ‰é’®åŠŸèƒ½","status":"in_progress","activeForm":"ä¸º transcript_path æ·»åŠ æ‰“å¼€/å¤åˆ¶æŒ‰é’®åŠŸèƒ½"}]}}}
{"ts":"2025-11-05T02:29:03.820Z","event":"PostToolUse","phase":"","message":"PostToolUseäº‹ä»¶æ­£åœ¨æ‰§è¡Œ","description":"å·¥å…·æˆåŠŸæ‰§è¡Œåè§¦å‘ï¼Œå¸¸ç”¨äºæ ¼å¼åŒ–ã€æ ¡éªŒæˆ–è®°å½•ç»“æœã€‚","doc_url":"https://docs.claude.com/zh-CN/docs/claude-code/hooks#posttooluse","payload":{"session_id":"c7c21516-7e1e-49b2-8ae5-4e1bb98e9692","transcript_path":"C:\\Users\\WTCL\\.claude\\projects\\i--claude-code-proxy\\c7c21516-7e1e-49b2-8ae5-4e1bb98e9692.jsonl","cwd":"i:\\claude-code-proxy","permission_mode":"acceptEdits","hook_event_name":"PostToolUse","tool_name":"TodoWrite","tool_input":{"todos":[{"content":"ä¸º transcript_path æ·»åŠ æ‰“å¼€/å¤åˆ¶æŒ‰é’®åŠŸèƒ½","status":"in_progress","activeForm":"ä¸º transcript_path æ·»åŠ æ‰“å¼€/å¤åˆ¶æŒ‰é’®åŠŸèƒ½"}]},"tool_response":{"oldTodos":[],"newTodos":[{"content":"ä¸º transcript_path æ·»åŠ æ‰“å¼€/å¤åˆ¶æŒ‰é’®åŠŸèƒ½","status":"in_progress","activeForm":"ä¸º transcript_path æ·»åŠ æ‰“å¼€/å¤åˆ¶æŒ‰é’®åŠŸèƒ½"}]}}}
{"ts":"2025-11-05T02:29:08.661Z","event":"PreToolUse","phase":"","message":"PreToolUseäº‹ä»¶æ­£åœ¨æ‰§è¡Œ","description":"å·¥å…·æ‰§è¡Œå‰è§¦å‘ï¼Œå¯åŸºäºå‚æ•°é˜»æ­¢æˆ–è°ƒæ•´è°ƒç”¨ã€‚","doc_url":"https://docs.claude.com/zh-CN/docs/claude-code/hooks#pretooluse","payload":{"session_id":"c7c21516-7e1e-49b2-8ae5-4e1bb98e9692","transcript_path":"C:\\Users\\WTCL\\.claude\\projects\\i--claude-code-proxy\\c7c21516-7e1e-49b2-8ae5-4e1bb98e9692.jsonl","cwd":"i:\\claude-code-proxy","permission_mode":"acceptEdits","hook_event_name":"PreToolUse","tool_name":"Edit","tool_input":{"file_path":"i:\\claude-code-proxy\\analyze\\hooks.html","old_string":"      .has-transcript-badge {\n            background: #ffc107;\n            color: #212529;\n            padding: 2px 8px;\n            border-radius: 12px;\n            font-size: 0.7rem;\n            font-weight: bold;\n            margin-left: 10px;\n        }","new_string":"      .has-transcript-badge {\n            background: #ffc107;\n            color: #212529;\n            padding: 2px 8px;\n            border-radius: 12px;\n            font-size: 0.7rem;\n            font-weight: bold;\n            margin-left: 10px;\n        }\n\n        .transcript-actions {\n            display: flex;\n            gap: 8px;\n            margin-top: 8px;\n        }\n\n        .transcript-btn {\n            background: #667eea;\n            color: white;\n            border: none;\n            padding: 6px 12px;\n            border-radius: 4px;\n            font-size: 0.8rem;\n            cursor: pointer;\n            transition: all 0.3s ease;\n            display: flex;\n            align-items: center;\n            gap: 4px;\n        }\n\n        .transcript-btn:hover {\n            background: #5a67d8;\n            transform: translateY(-1px);\n        }\n\n        .transcript-btn.copy {\n            background: #28a745;\n        }\n\n        .transcript-btn.copy:hover {\n            background: #218838;\n        }\n\n        .transcript-btn.open {\n            background: #007bff;\n        }\n\n        .transcript-btn.open:hover {\n            background: #0056b3;\n        }\n\n        .transcript-btn:disabled {\n            background: #6c757d;\n            cursor: not-allowed;\n            transform: none;\n        }"}}}
{"ts":"2025-11-05T02:29:10.369Z","event":"PostToolUse","phase":"","message":"PostToolUseäº‹ä»¶æ­£åœ¨æ‰§è¡Œ","description":"å·¥å…·æˆåŠŸæ‰§è¡Œåè§¦å‘ï¼Œå¸¸ç”¨äºæ ¼å¼åŒ–ã€æ ¡éªŒæˆ–è®°å½•ç»“æœã€‚","doc_url":"https://docs.claude.com/zh-CN/docs/claude-code/hooks#posttooluse","payload":{"session_id":"c7c21516-7e1e-49b2-8ae5-4e1bb98e9692","transcript_path":"C:\\Users\\WTCL\\.claude\\projects\\i--claude-code-proxy\\c7c21516-7e1e-49b2-8ae5-4e1bb98e9692.jsonl","cwd":"i:\\claude-code-proxy","permission_mode":"acceptEdits","hook_event_name":"PostToolUse","tool_name":"Edit","tool_input":{"file_path":"i:\\claude-code-proxy\\analyze\\hooks.html","old_string":"      .has-transcript-badge {\n            background: #ffc107;\n            color: #212529;\n            padding: 2px 8px;\n            border-radius: 12px;\n            font-size: 0.7rem;\n            font-weight: bold;\n            margin-left: 10px;\n        }","new_string":"      .has-transcript-badge {\n            background: #ffc107;\n            color: #212529;\n            padding: 2px 8px;\n            border-radius: 12px;\n            font-size: 0.7rem;\n            font-weight: bold;\n            margin-left: 10px;\n        }\n\n        .transcript-actions {\n            display: flex;\n            gap: 8px;\n            margin-top: 8px;\n        }\n\n        .transcript-btn {\n            background: #667eea;\n            color: white;\n            border: none;\n            padding: 6px 12px;\n            border-radius: 4px;\n            font-size: 0.8rem;\n            cursor: pointer;\n            transition: all 0.3s ease;\n            display: flex;\n            align-items: center;\n            gap: 4px;\n        }\n\n        .transcript-btn:hover {\n            background: #5a67d8;\n            transform: translateY(-1px);\n        }\n\n        .transcript-btn.copy {\n            background: #28a745;\n        }\n\n        .transcript-btn.copy:hover {\n            background: #218838;\n        }\n\n        .transcript-btn.open {\n            background: #007bff;\n        }\n\n        .transcript-btn.open:hover {\n            background: #0056b3;\n        }\n\n        .transcript-btn:disabled {\n            background: #6c757d;\n            cursor: not-allowed;\n            transform: none;\n        }"},"tool_response":{"filePath":"i:\\claude-code-proxy\\analyze\\hooks.html","oldString":"      .has-transcript-badge {\n            background: #ffc107;\n            color: #212529;\n            padding: 2px 8px;\n            border-radius: 12px;\n            font-size: 0.7rem;\n            font-weight: bold;\n            margin-left: 10px;\n        }","newString":"      .has-transcript-badge {\n            background: #ffc107;\n            color: #212529;\n            padding: 2px 8px;\n            border-radius: 12px;\n            font-size: 0.7rem;\n            font-weight: bold;\n            margin-left: 10px;\n        }\n\n        .transcript-actions {\n            display: flex;\n            gap: 8px;\n            margin-top: 8px;\n        }\n\n        .transcript-btn {\n            background: #667eea;\n            color: white;\n            border: none;\n            padding: 6px 12px;\n            border-radius: 4px;\n            font-size: 0.8rem;\n            cursor: pointer;\n            transition: all 0.3s ease;\n            display: flex;\n            align-items: center;\n            gap: 4px;\n        }\n\n        .transcript-btn:hover {\n            background: #5a67d8;\n            transform: translateY(-1px);\n        }\n\n        .transcript-btn.copy {\n            background: #28a745;\n        }\n\n        .transcript-btn.copy:hover {\n            background: #218838;\n        }\n\n        .transcript-btn.open {\n            background: #007bff;\n        }\n\n        .transcript-btn.open:hover {\n            background: #0056b3;\n        }\n\n        .transcript-btn:disabled {\n            background: #6c757d;\n            cursor: not-allowed;\n            transform: none;\n        }","originalFile":"<!DOCTYPE html>\n<html lang=\"zh-CN\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Hooks æ—¥å¿—åˆ†æ</title>\n    <style>\n        * {\n            margin: 0;\n            padding: 0;\n            box-sizing: border-box;\n        }\n\n        body {\n            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n            min-height: 100vh;\n            padding: 20px;\n        }\n\n        .container {\n            max-width: 1400px;\n            margin: 0 auto;\n        }\n\n        .header {\n            text-align: center;\n            color: white;\n            margin-bottom: 30px;\n        }\n\n        .header h1 {\n            font-size: 2.5rem;\n            margin-bottom: 10px;\n            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);\n        }\n\n        .header p {\n            font-size: 1.1rem;\n            opacity: 0.9;\n        }\n\n        /* æ–‡ä»¶ä¸Šä¼ ç»„ä»¶æ ·å¼ */\n        .upload-section {\n            margin-bottom: 30px;\n        }\n\n        .upload-card {\n            background: white;\n            border-radius: 15px;\n            padding: 25px;\n            box-shadow: 0 10px 30px rgba(0,0,0,0.1);\n            border: 2px dashed #cbd5e0;\n            transition: all 0.3s ease;\n        }\n\n        .upload-card:hover {\n            border-color: #667eea;\n            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.2);\n        }\n\n        .upload-header {\n            font-size: 1.2rem;\n            font-weight: bold;\n            color: #4a5568;\n            margin-bottom: 20px;\n            text-align: center;\n        }\n\n        .upload-area {\n            border: 2px dashed #e2e8f0;\n            border-radius: 10px;\n            padding: 40px 20px;\n            text-align: center;\n            transition: all 0.3s ease;\n            cursor: pointer;\n        }\n\n        .upload-area:hover {\n            border-color: #667eea;\n            background: #f7fafc;\n        }\n\n        .upload-area.dragover {\n            border-color: #667eea;\n            background: #edf2f7;\n            transform: scale(1.02);\n        }\n\n        .upload-icon {\n            font-size: 3rem;\n            margin-bottom: 15px;\n            opacity: 0.7;\n        }\n\n        .upload-text {\n            font-size: 1.1rem;\n            color: #4a5568;\n            margin-bottom: 10px;\n            font-weight: 500;\n        }\n\n        .upload-hint {\n            font-size: 0.9rem;\n            color: #718096;\n            margin-bottom: 20px;\n        }\n\n        .upload-btn {\n            background: #667eea;\n            color: white;\n            border: none;\n            padding: 12px 24px;\n            border-radius: 8px;\n            font-size: 1rem;\n            font-weight: 500;\n            cursor: pointer;\n            transition: all 0.3s ease;\n        }\n\n        .upload-btn:hover {\n            background: #5a67d8;\n            transform: translateY(-2px);\n            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);\n        }\n\n        .file-info {\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            background: #f7fafc;\n            padding: 15px 20px;\n            border-radius: 8px;\n            margin-top: 15px;\n        }\n\n        .file-name {\n            font-weight: 500;\n            color: #4a5568;\n            flex: 1;\n            overflow: hidden;\n            text-overflow: ellipsis;\n            white-space: nowrap;\n        }\n\n        .clear-btn {\n            background: #fc8181;\n            color: white;\n            border: none;\n            width: 30px;\n            height: 30px;\n            border-radius: 50%;\n            cursor: pointer;\n            font-size: 1rem;\n            transition: all 0.3s ease;\n        }\n\n        .clear-btn:hover {\n            background: #f56565;\n            transform: scale(1.1);\n        }\n\n        /* æ¶ˆæ¯æç¤ºæ ·å¼ */\n        .upload-message {\n            margin-top: 15px;\n            padding: 12px 16px;\n            border-radius: 8px;\n            font-size: 0.9rem;\n            animation: slideIn 0.3s ease;\n        }\n\n        .upload-success {\n            background: #d4edda;\n            color: #155724;\n            border: 1px solid #c3e6cb;\n        }\n\n        .upload-error {\n            background: #f8d7da;\n            color: #721c24;\n            border: 1px solid #f5c6cb;\n        }\n\n        @keyframes slideIn {\n            from {\n                opacity: 0;\n                transform: translateY(-10px);\n            }\n            to {\n                opacity: 1;\n                transform: translateY(0);\n            }\n        }\n\n        #file-input {\n            display: none;\n        }\n\n        .stats-grid {\n            display: grid;\n            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\n            gap: 20px;\n            margin-bottom: 30px;\n        }\n\n        .stat-card {\n            background: white;\n            border-radius: 15px;\n            padding: 25px;\n            box-shadow: 0 10px 30px rgba(0,0,0,0.2);\n            text-align: center;\n            transition: transform 0.3s ease, box-shadow 0.3s ease;\n        }\n\n        .stat-card:hover {\n            transform: translateY(-5px);\n            box-shadow: 0 15px 40px rgba(0,0,0,0.3);\n        }\n\n        .stat-number {\n            font-size: 3rem;\n            font-weight: bold;\n            margin-bottom: 10px;\n        }\n\n        .stat-label {\n            font-size: 1.1rem;\n            color: #666;\n            margin-bottom: 5px;\n        }\n\n        .stat-description {\n            font-size: 0.9rem;\n            color: #999;\n        }\n\n        .filter-section {\n            background: white;\n            border-radius: 15px;\n            padding: 20px;\n            box-shadow: 0 10px 30px rgba(0,0,0,0.2);\n            margin-bottom: 30px;\n        }\n\n        .filter-controls {\n            display: flex;\n            gap: 15px;\n            flex-wrap: wrap;\n            align-items: center;\n        }\n\n        .filter-group {\n            display: flex;\n            align-items: center;\n            gap: 10px;\n        }\n\n        .filter-label {\n            font-weight: bold;\n            color: #333;\n        }\n\n        .filter-select, .search-input {\n            padding: 8px 12px;\n            border: 2px solid #ddd;\n            border-radius: 5px;\n            font-size: 0.9rem;\n            transition: border-color 0.3s ease;\n        }\n\n        .filter-select:focus, .search-input:focus {\n            outline: none;\n            border-color: #667eea;\n        }\n\n        .search-input {\n            min-width: 200px;\n        }\n\n        .hooks-container {\n            display: grid;\n            gap: 30px;\n        }\n\n        .hook-item {\n            background: white;\n            border-radius: 15px;\n            padding: 25px;\n            box-shadow: 0 10px 30px rgba(0,0,0,0.2);\n        }\n\n        .hook-header {\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            margin-bottom: 20px;\n            padding-bottom: 15px;\n            border-bottom: 2px solid #667eea;\n        }\n\n        .hook-event {\n            font-size: 1.5rem;\n            font-weight: bold;\n            color: #667eea;\n        }\n\n        .hook-meta {\n            display: flex;\n            gap: 20px;\n            align-items: center;\n        }\n\n        .hook-timestamp {\n            font-size: 0.9rem;\n            color: #666;\n            background: #f0f4ff;\n            padding: 5px 12px;\n            border-radius: 20px;\n        }\n\n        .hook-message {\n            background: #f8f9fa;\n            border-left: 4px solid #667eea;\n            padding: 15px;\n            margin-bottom: 15px;\n            border-radius: 5px;\n        }\n\n        .hook-description {\n            color: #666;\n            font-style: italic;\n            margin-bottom: 15px;\n        }\n\n        .hook-details {\n            display: flex;\n            flex-direction: column;\n            gap: 20px;\n        }\n\n        .part-card {\n            background: #f8f9fa;\n            border-radius: 10px;\n            overflow: hidden;\n        }\n\n        .part-header {\n            background: #667eea;\n            color: white;\n            padding: 12px 15px;\n            font-weight: bold;\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            cursor: pointer;\n            transition: background 0.3s ease;\n        }\n\n        .part-header:hover {\n            background: #5a67d8;\n        }\n\n        .part-content {\n            padding: 15px;\n            font-family: 'Courier New', monospace;\n            font-size: 0.9rem;\n            background: #1a1a1a;\n            color: #ffffff;\n            overflow-y: auto;\n            white-space: pre-wrap;\n            line-height: 1.6;\n            min-height: 100px;\n            border-radius: 8px;\n            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.3);\n        }\n\n        .part-content.hidden {\n            display: none;\n        }\n\n        .toggle-icon {\n            transition: transform 0.3s ease;\n        }\n\n        .toggle-icon.rotated {\n            transform: rotate(180deg);\n        }\n\n        /* è‡ªå®šä¹‰æ»šåŠ¨æ¡æ ·å¼ */\n        .part-content::-webkit-scrollbar {\n            width: 8px;\n        }\n\n        .part-content::-webkit-scrollbar-track {\n            background: #2a2a2a;\n            border-radius: 4px;\n        }\n\n        .part-content::-webkit-scrollbar-thumb {\n            background: #4a4a4a;\n            border-radius: 4px;\n        }\n\n        .part-content::-webkit-scrollbar-thumb:hover {\n            background: #5a5a5a;\n        }\n\n        .event-badge {\n            display: inline-block;\n            padding: 4px 12px;\n            border-radius: 20px;\n            font-size: 0.8rem;\n            font-weight: bold;\n            margin-right: 10px;\n        }\n\n        .event-userprompt { background: #FF6B6B; color: white; }\n        .event-pretool { background: #4ECDC4; color: white; }\n        .event-posttool { background: #45B7D1; color: white; }\n        .event-notification { background: #9C27B0; color: white; }\n        .event-stop { background: #F44336; color: white; }\n        .event-subagent-stop { background: #FF9800; color: white; }\n        .event-pre-compact { background: #FFC107; color: white; }\n        .event-session-start { background: #4CAF50; color: white; }\n        .event-session-end { background: #607D8B; color: white; }\n        .event-default { background: #78909C; color: white; }\n\n        .no-data {\n            text-align: center;\n            padding: 60px 20px;\n            color: white;\n            font-size: 1.2rem;\n        }\n\n        .error-message {\n            background: #fff5f5;\n            border: 2px solid #fc8181;\n            color: #c53030;\n            padding: 20px;\n            border-radius: 10px;\n            text-align: center;\n            font-size: 1.1rem;\n            margin: 20px 0;\n        }\n\n        .json-key { color: #9C27B0; }\n        .json-string { color: #4CAF50; }\n        .json-number { color: #FF9800; }\n        .json-boolean { color: #F44336; }\n        .json-null { color: #9E9E9E; }\n        .json-url { color: #2196F3; text-decoration: underline; cursor: pointer; }\n\n        .transcript-path {\n            background: #fff3cd;\n            border: 1px solid #ffeaa7;\n            border-radius: 5px;\n            padding: 8px 12px;\n            margin-top: 10px;\n            font-size: 0.9rem;\n        }\n\n        .transcript-path-label {\n            font-weight: bold;\n            color: #856404;\n            margin-bottom: 5px;\n        }\n\n        .transcript-path-value {\n            color: #856404;\n            word-break: break-all;\n            font-family: monospace;\n            background: #f8f9fa;\n            padding: 4px 8px;\n            border-radius: 3px;\n        }\n\n        .has-transcript-badge {\n            background: #ffc107;\n            color: #212529;\n            padding: 2px 8px;\n            border-radius: 12px;\n            font-size: 0.7rem;\n            font-weight: bold;\n            margin-left: 10px;\n        }\n\n        @media (max-width: 768px) {\n            .header h1 {\n                font-size: 2rem;\n            }\n\n            .stats-grid {\n                grid-template-columns: repeat(2, 1fr);\n            }\n\n            .filter-controls {\n                flex-direction: column;\n                align-items: stretch;\n            }\n\n            .search-input {\n                min-width: auto;\n            }\n        }\n    </style>\n</head>\n<body>\n    <div class=\"container\">\n        <div class=\"header\">\n            <h1>Hooks æ—¥å¿—åˆ†æ</h1>\n            <p>ä¸Šä¼ å¹¶åˆ†æ Claude Hooks äº‹ä»¶æ—¥å¿—</p>\n        </div>\n\n        <!-- æ–‡ä»¶ä¸Šä¼ ç»„ä»¶ -->\n        <div class=\"upload-section\">\n            <div class=\"upload-card\">\n                <div class=\"upload-header\">\n                    <span>ğŸ“ é€‰æ‹© Hooks æ—¥å¿—æ–‡ä»¶</span>\n                </div>\n                <div class=\"upload-area\" id=\"upload-area\">\n                    <div class=\"upload-content\">\n                        <div class=\"upload-icon\">ğŸ“„</div>\n                        <p class=\"upload-text\">ç‚¹å‡»é€‰æ‹©æ–‡ä»¶æˆ–æ‹–æ‹½æ–‡ä»¶åˆ°æ­¤å¤„</p>\n                        <p class=\"upload-hint\">æ”¯æŒ .log .txt æ ¼å¼çš„æ—¥å¿—æ–‡ä»¶ï¼Œæ¯è¡Œä¸€ä¸ª JSON å¯¹è±¡ï¼Œæœ€å¤§50MB</p>\n                        <input type=\"file\" id=\"file-input\" accept=\".log,.txt\" style=\"display: none;\">\n                        <button class=\"upload-btn\" onclick=\"document.getElementById('file-input').click()\">é€‰æ‹©æ–‡ä»¶</button>\n                    </div>\n                </div>\n                <div class=\"file-info\" id=\"file-info\" style=\"display: none;\">\n                    <span class=\"file-name\" id=\"file-name\"></span>\n                    <button class=\"clear-btn\" onclick=\"clearFile()\">âœ•</button>\n                </div>\n            </div>\n        </div>\n\n        <div id=\"stats-section\" style=\"display: none;\">\n            <div class=\"stats-grid\">\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"total-hooks\">0</div>\n                    <div class=\"stat-label\">æ€»äº‹ä»¶æ•°</div>\n                    <div class=\"stat-description\">æ‰€æœ‰ Hooks äº‹ä»¶</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"user-prompts\">0</div>\n                    <div class=\"stat-label\">ç”¨æˆ·æç¤ºäº‹ä»¶</div>\n                    <div class=\"stat-description\">UserPromptSubmit</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"pre-tools\">0</div>\n                    <div class=\"stat-label\">å·¥å…·æ‰§è¡Œå‰äº‹ä»¶</div>\n                    <div class=\"stat-description\">PreToolUse</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"post-tools\">0</div>\n                    <div class=\"stat-label\">å·¥å…·æ‰§è¡Œåäº‹ä»¶</div>\n                    <div class=\"stat-description\">PostToolUse</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"notifications\">0</div>\n                    <div class=\"stat-label\">é€šçŸ¥äº‹ä»¶</div>\n                    <div class=\"stat-description\">Notification</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"stops\">0</div>\n                    <div class=\"stat-label\">åœæ­¢äº‹ä»¶</div>\n                    <div class=\"stat-description\">Stop</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"subagent-stops\">0</div>\n                    <div class=\"stat-label\">å­ä»£ç†åœæ­¢äº‹ä»¶</div>\n                    <div class=\"stat-description\">SubagentStop</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"pre-compacts\">0</div>\n                    <div class=\"stat-label\">å‹ç¼©å‰äº‹ä»¶</div>\n                    <div class=\"stat-description\">PreCompact</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"session-starts\">0</div>\n                    <div class=\"stat-label\">ä¼šè¯å¼€å§‹äº‹ä»¶</div>\n                    <div class=\"stat-description\">SessionStart</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"session-ends\">0</div>\n                    <div class=\"stat-label\">ä¼šè¯ç»“æŸäº‹ä»¶</div>\n                    <div class=\"stat-description\">SessionEnd</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"transcript-count\">0</div>\n                    <div class=\"stat-label\">åŒ…å«è½¬å½•è·¯å¾„äº‹ä»¶</div>\n                    <div class=\"stat-description\">åŒ…å« transcript_path</div>\n                </div>\n            </div>\n\n            <div class=\"filter-section\">\n                <div class=\"filter-controls\">\n                    <div class=\"filter-group\">\n                        <label class=\"filter-label\">äº‹ä»¶ç±»å‹ï¼š</label>\n                        <select class=\"filter-select\" id=\"event-filter\">\n                            <option value=\"\">å…¨éƒ¨</option>\n                            <option value=\"UserPromptSubmit\">UserPromptSubmit</option>\n                            <option value=\"PreToolUse\">PreToolUse</option>\n                            <option value=\"PostToolUse\">PostToolUse</option>\n                            <option value=\"Notification\">Notification</option>\n                            <option value=\"Stop\">Stop</option>\n                            <option value=\"SubagentStop\">SubagentStop</option>\n                            <option value=\"PreCompact\">PreCompact</option>\n                            <option value=\"SessionStart\">SessionStart</option>\n                            <option value=\"SessionEnd\">SessionEnd</option>\n                        </select>\n                    </div>\n                    <div class=\"filter-group\">\n                        <label class=\"filter-label\">æœç´¢ï¼š</label>\n                        <input type=\"text\" class=\"search-input\" id=\"search-input\" placeholder=\"æœç´¢äº‹ä»¶å†…å®¹...\">\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <div id=\"hooks-container\" class=\"hooks-container\"></div>\n\n        <div id=\"no-data\" class=\"no-data\">\n            è¯·ä¸Šä¼  hooks.log æ–‡ä»¶å¼€å§‹åˆ†æ\n        </div>\n\n        <div id=\"error-message\" class=\"error-message\" style=\"display: none;\"></div>\n    </div>\n\n    <script>\n        let hooksData = [];\n        let filteredData = [];\n\n        // æ–‡ä»¶ä¸Šä¼ ç›¸å…³å‡½æ•°\n        function setupFileUpload() {\n            const uploadArea = document.getElementById('upload-area');\n            const fileInput = document.getElementById('file-input');\n\n            // ç‚¹å‡»ä¸Šä¼ åŒºåŸŸè§¦å‘æ–‡ä»¶é€‰æ‹©ï¼ˆä½†ä¸åŒ…æ‹¬æŒ‰é’®ï¼‰\n            uploadArea.addEventListener('click', function(event) {\n                // å¦‚æœç‚¹å‡»çš„æ˜¯æŒ‰é’®ï¼Œä¸å¤„ç†\n                if (event.target.tagName === 'BUTTON' || event.target.closest('button')) {\n                    return;\n                }\n                fileInput.click();\n            });\n\n            // æ–‡ä»¶é€‰æ‹©äº‹ä»¶\n            fileInput.addEventListener('change', handleFileSelect);\n\n            // æ‹–æ‹½äº‹ä»¶\n            uploadArea.addEventListener('dragover', handleDragOver);\n            uploadArea.addEventListener('dragleave', handleDragLeave);\n            uploadArea.addEventListener('drop', handleDrop);\n        }\n\n\n        function handleDragOver(e) {\n            e.preventDefault();\n            e.currentTarget.classList.add('dragover');\n        }\n\n        function handleDragLeave(e) {\n            e.preventDefault();\n            e.currentTarget.classList.remove('dragover');\n        }\n\n        function handleDrop(e) {\n            e.preventDefault();\n            e.currentTarget.classList.remove('dragover');\n            handleFiles(e.dataTransfer.files);\n        }\n\n        function handleFileSelect(event) {\n            const files = event.target.files;\n            handleFiles(files);\n        }\n\n        function handleFiles(files) {\n            if (files.length === 0) return;\n\n            const file = files[0];\n\n            // æ£€æŸ¥æ–‡ä»¶ç±»å‹\n            const validTypes = ['.log', '.txt'];\n            const fileExtension = file.name.substring(file.name.lastIndexOf('.')).toLowerCase();\n\n            if (!validTypes.includes(fileExtension)) {\n                showErrorMessage('è¯·é€‰æ‹© .log æˆ– .txt æ ¼å¼çš„æ—¥å¿—æ–‡ä»¶');\n                return;\n            }\n\n            // æ£€æŸ¥æ–‡ä»¶å¤§å° (é™åˆ¶ä¸º50MB)\n            if (file.size > 50 * 1024 * 1024) {\n                showErrorMessage('æ–‡ä»¶å¤§å°ä¸èƒ½è¶…è¿‡50MB');\n                return;\n            }\n\n            // æ˜¾ç¤ºæ–‡ä»¶ä¿¡æ¯\n            showFileInfo(file);\n\n            // è¯»å–æ–‡ä»¶å†…å®¹\n            const reader = new FileReader();\n            reader.onload = function(e) {\n                try {\n                    const content = e.target.result;\n                    console.log('æ–‡ä»¶è¯»å–æˆåŠŸï¼Œå†…å®¹é•¿åº¦:', content.length);\n                    console.log('æ–‡ä»¶å†…å®¹å‰100å­—ç¬¦:', content.substring(0, 100));\n\n                    if (!content || content.trim().length === 0) {\n                        showErrorMessage('æ–‡ä»¶å†…å®¹ä¸ºç©º');\n                        return;\n                    }\n\n                    parseHooksData(content);\n                    showSuccessMessage(`æˆåŠŸåŠ è½½æ–‡ä»¶: ${file.name}`);\n                } catch (error) {\n                    console.error('æ–‡ä»¶è§£æå¼‚å¸¸:', error);\n                    showErrorMessage('æ–‡ä»¶è§£æå¤±è´¥ï¼š' + error.message);\n                }\n            };\n            reader.onerror = function(error) {\n                console.error('æ–‡ä»¶è¯»å–å¤±è´¥:', error);\n                showErrorMessage('æ–‡ä»¶è¯»å–å¤±è´¥');\n            };\n            reader.readAsText(file);\n        }\n\n        function showFileInfo(file) {\n            const fileInfo = document.getElementById('file-info');\n            const fileName = document.getElementById('file-name');\n            const uploadArea = document.getElementById('upload-area');\n\n            fileName.textContent = file.name;\n            fileInfo.style.display = 'flex';\n            uploadArea.style.display = 'none';\n        }\n\n        function clearFile() {\n            const fileInfo = document.getElementById('file-info');\n            const uploadArea = document.getElementById('upload-area');\n            const fileInput = document.getElementById('file-input');\n\n            fileInfo.style.display = 'none';\n            uploadArea.style.display = 'block';\n\n            // æ¸…ç©ºæ–‡ä»¶è¾“å…¥æ¡†çš„å€¼\n            fileInput.value = '';\n\n            // æ¸…ç©ºæ•°æ®\n            hooksData = [];\n            filteredData = [];\n\n            // æ¸…ç©ºæ˜¾ç¤ºåŒºåŸŸ\n            document.getElementById('hooks-container').innerHTML = '';\n            document.getElementById('no-data').style.display = 'block';\n            document.getElementById('stats-section').style.display = 'none';\n\n            // æ˜¾ç¤ºæç¤º\n            showSuccessMessage('å·²æ¸…ç©ºæ–‡ä»¶ï¼Œè¯·é‡æ–°é€‰æ‹©æ—¥å¿—æ–‡ä»¶');\n        }\n\n        function showSuccessMessage(message) {\n            showMessage(message, 'success');\n        }\n\n        function showErrorMessage(message) {\n            showMessage(message, 'error');\n        }\n\n        function showMessage(message, type) {\n            // ç§»é™¤ä¹‹å‰çš„æ¶ˆæ¯\n            const existingMessages = document.querySelectorAll('.upload-message');\n            existingMessages.forEach(msg => msg.remove());\n\n            const messageClass = type === 'success' ? 'upload-success' : 'upload-error';\n            const messageDiv = document.createElement('div');\n            messageDiv.className = `upload-message ${messageClass}`;\n            messageDiv.textContent = message;\n\n            document.querySelector('.upload-card').appendChild(messageDiv);\n\n            // 3ç§’åè‡ªåŠ¨æ¶ˆå¤±\n            setTimeout(() => {\n                messageDiv.style.opacity = '0';\n                setTimeout(() => {\n                    if (messageDiv.parentNode) {\n                        messageDiv.parentNode.removeChild(messageDiv);\n                    }\n                }, 300);\n            }, 3000);\n        }\n\n        // è§£æ hooks æ•°æ®\n        function parseHooksData(content) {\n            console.log('å¼€å§‹è§£æ hooks æ•°æ®ï¼Œå†…å®¹é•¿åº¦:', content.length);\n\n            hooksData = [];\n            const lines = content.split('\\n').filter(line => line.trim());\n            console.log('åˆ†å‰²åçš„è¡Œæ•°:', lines.length);\n\n            for (let i = 0; i < lines.length; i++) {\n                const line = lines[i];\n                try {\n                    const hookData = JSON.parse(line);\n                    hooksData.push(hookData);\n                    console.log(`æˆåŠŸè§£æç¬¬ ${i + 1} è¡Œï¼Œäº‹ä»¶ç±»å‹:`, hookData.event);\n                } catch (error) {\n                    console.error(`è§£æç¬¬ ${i + 1} è¡Œå¤±è´¥:`, error.message);\n                    console.error('é—®é¢˜è¡Œçš„å†…å®¹:', line.substring(0, 100) + (line.length > 100 ? '...' : ''));\n                }\n            }\n\n            console.log('è§£æå®Œæˆï¼Œæ€»å…±è§£æåˆ°', hooksData.length, 'ä¸ªæœ‰æ•ˆäº‹ä»¶');\n\n            if (hooksData.length === 0) {\n                showErrorMessage('æœªæ‰¾åˆ°æœ‰æ•ˆçš„ hooks æ•°æ®ã€‚è¯·ç¡®ä¿æ–‡ä»¶æ ¼å¼æ­£ç¡®ï¼Œæ¯è¡Œåº”è¯¥æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„JSONå¯¹è±¡ã€‚');\n                console.error('è§£æå¤±è´¥ï¼Œæ²¡æœ‰æ‰¾åˆ°æœ‰æ•ˆçš„hooksæ•°æ®');\n                return;\n            }\n\n            filteredData = [...hooksData];\n            console.log('å‡†å¤‡æ˜¾ç¤ºæ•°æ®ï¼Œè¿‡æ»¤åçš„äº‹ä»¶æ•°é‡:', filteredData.length);\n            displayData();\n        }\n\n        // æ˜¾ç¤ºæ•°æ®\n        function displayData() {\n            document.getElementById('no-data').style.display = 'none';\n            document.getElementById('error-message').style.display = 'none';\n            document.getElementById('stats-section').style.display = 'block';\n\n            updateStatistics();\n            renderHooks();\n        }\n\n        // æ›´æ–°ç»Ÿè®¡ä¿¡æ¯\n        function updateStatistics() {\n            const stats = {\n                total: filteredData.length,\n                userPrompts: filteredData.filter(h => h.event === 'UserPromptSubmit').length,\n                preTools: filteredData.filter(h => h.event === 'PreToolUse').length,\n                postTools: filteredData.filter(h => h.event === 'PostToolUse').length,\n                notifications: filteredData.filter(h => h.event === 'Notification').length,\n                stops: filteredData.filter(h => h.event === 'Stop').length,\n                subagentStops: filteredData.filter(h => h.event === 'SubagentStop').length,\n                preCompacts: filteredData.filter(h => h.event === 'PreCompact').length,\n                sessionStarts: filteredData.filter(h => h.event === 'SessionStart').length,\n                sessionEnds: filteredData.filter(h => h.event === 'SessionEnd').length,\n                transcriptCount: filteredData.filter(h => hasTranscriptPath(h)).length\n            };\n\n            document.getElementById('total-hooks').textContent = stats.total;\n            document.getElementById('user-prompts').textContent = stats.userPrompts;\n            document.getElementById('pre-tools').textContent = stats.preTools;\n            document.getElementById('post-tools').textContent = stats.postTools;\n            document.getElementById('notifications').textContent = stats.notifications;\n            document.getElementById('stops').textContent = stats.stops;\n            document.getElementById('subagent-stops').textContent = stats.subagentStops;\n            document.getElementById('pre-compacts').textContent = stats.preCompacts;\n            document.getElementById('session-starts').textContent = stats.sessionStarts;\n            document.getElementById('session-ends').textContent = stats.sessionEnds;\n            document.getElementById('transcript-count').textContent = stats.transcriptCount;\n        }\n\n        // æ¸²æŸ“ hooks\n        function renderHooks() {\n            const container = document.getElementById('hooks-container');\n            container.innerHTML = '';\n\n            filteredData.forEach((hook, index) => {\n                const hookElement = createHookElement(hook, index);\n                container.appendChild(hookElement);\n            });\n\n            // æ·»åŠ åŠ¨ç”»\n            const elements = container.querySelectorAll('.hook-item');\n            elements.forEach((el, i) => {\n                el.style.opacity = '0';\n                el.style.transform = 'translateY(20px)';\n                setTimeout(() => {\n                    el.style.transition = 'opacity 0.3s ease, transform 0.3s ease';\n                    el.style.opacity = '1';\n                    el.style.transform = 'translateY(0)';\n                }, i * 50);\n            });\n        }\n\n        // æ£€æŸ¥æ˜¯å¦åŒ…å« transcript_path å­—æ®µ\n        function hasTranscriptPath(hook) {\n            if (!hook.payload) return false;\n\n            // æ£€æŸ¥ payload ä¸­æ˜¯å¦ç›´æ¥åŒ…å« transcript_path\n            if (hook.payload.transcript_path) return true;\n\n            // æ·±åº¦æœç´¢ payload å¯¹è±¡ä¸­çš„ transcript_path å­—æ®µ\n            return searchInObject(hook.payload, 'transcript_path');\n        }\n\n        // åœ¨å¯¹è±¡ä¸­é€’å½’æœç´¢æŒ‡å®šå­—æ®µ\n        function searchInObject(obj, fieldName) {\n            if (!obj || typeof obj !== 'object') return false;\n\n            for (const key in obj) {\n                if (key === fieldName) return true;\n\n                if (typeof obj[key] === 'object' && obj[key] !== null) {\n                    if (searchInObject(obj[key], fieldName)) return true;\n                }\n            }\n\n            return false;\n        }\n\n        // è·å– transcript_path çš„å€¼\n        function getTranscriptPath(hook) {\n            if (!hook.payload) return null;\n\n            // æ£€æŸ¥ payload ä¸­æ˜¯å¦ç›´æ¥åŒ…å« transcript_path\n            if (hook.payload.transcript_path) return hook.payload.transcript_path;\n\n            // æ·±åº¦æœç´¢å¹¶è¿”å› transcript_path çš„å€¼\n            return findValueInObject(hook.payload, 'transcript_path');\n        }\n\n        // åœ¨å¯¹è±¡ä¸­é€’å½’æŸ¥æ‰¾æŒ‡å®šå­—æ®µçš„å€¼\n        function findValueInObject(obj, fieldName) {\n            if (!obj || typeof obj !== 'object') return null;\n\n            for (const key in obj) {\n                if (key === fieldName) return obj[key];\n\n                if (typeof obj[key] === 'object' && obj[key] !== null) {\n                    const found = findValueInObject(obj[key], fieldName);\n                    if (found !== null) return found;\n                }\n            }\n\n            return null;\n        }\n\n        // åˆ›å»º hook å…ƒç´ \n        function createHookElement(hook, index) {\n            const div = document.createElement('div');\n            div.className = 'hook-item';\n\n            const eventClass = getEventClass(hook.event);\n            const formattedTime = formatTimestamp(hook.ts);\n            const eventDescription = getEventDescription(hook.event, hook.phase);\n            const hasTranscript = hasTranscriptPath(hook);\n            const transcriptPath = getTranscriptPath(hook);\n\n            div.innerHTML = `\n                <div class=\"hook-header\">\n                    <div class=\"hook-event\">\n                        <span class=\"event-badge ${eventClass}\">${hook.event}</span>\n                        ${hasTranscript ? '<span class=\"has-transcript-badge\">åŒ…å«è½¬å½•è·¯å¾„</span>' : ''}\n                    </div>\n                    <div class=\"hook-meta\">\n                        <div class=\"hook-timestamp\">${formattedTime}</div>\n                    </div>\n                </div>\n                <div class=\"hook-message\">${hook.message}</div>\n                <div class=\"hook-description\">${hook.description || eventDescription}</div>\n                ${hasTranscript && transcriptPath ? `\n                <div class=\"transcript-path\">\n                    <div class=\"transcript-path-label\">ğŸ“„ è½¬å½•è·¯å¾„ (transcript_path):</div>\n                    <div class=\"transcript-path-value\">${escapeHtml(transcriptPath)}</div>\n                </div>\n                ` : ''}\n                <div class=\"hook-details\">\n                    <div class=\"part-card\">\n                        <div class=\"part-header\" onclick=\"toggleDetail('payload-${index}')\">\n                            <span>Payload</span>\n                            <span class=\"toggle-icon\" id=\"icon-payload-${index}\">â–¼</span>\n                        </div>\n                        <div class=\"part-content hidden\" id=\"payload-${index}\">\n                            ${formatJson(hook.payload)}\n                        </div>\n                    </div>\n                </div>\n            `;\n\n            return div;\n        }\n\n        // è·å–äº‹ä»¶æè¿°\n        function getEventDescription(event, phase) {\n            switch (event) {\n                case 'PreToolUse':\n                    return 'å·¥å…·æ‰§è¡Œå‰è§¦å‘ï¼Œå¯åŸºäºå‚æ•°é˜»æ­¢æˆ–è°ƒæ•´è°ƒç”¨ã€‚';\n                case 'PostToolUse':\n                    return 'å·¥å…·æˆåŠŸæ‰§è¡Œåè§¦å‘ï¼Œå¸¸ç”¨äºæ ¼å¼åŒ–ã€æ ¡éªŒæˆ–è®°å½•ç»“æœã€‚';\n                case 'UserPromptSubmit':\n                    return 'ç”¨æˆ·æäº¤æç¤ºå‰è§¦å‘ï¼Œå¯è¿›è¡Œæç¤ºæ ¡éªŒæˆ–å¢å¼ºã€‚';\n                case 'Notification':\n                    return 'å½“ç³»ç»Ÿå‘é€é€šçŸ¥ï¼ˆéœ€æˆæƒæˆ–ç­‰å¾…è¾“å…¥ï¼‰æ—¶è§¦å‘ã€‚';\n                case 'Stop':\n                    return 'ä¸»ä»£ç†å®Œæˆå“åº”æ—¶è§¦å‘ï¼ˆç”¨æˆ·ä¸­æ–­ä¸è§¦å‘ï¼‰ã€‚';\n                case 'SubagentStop':\n                    return 'å­ä»£ç†ä»»åŠ¡å®Œæˆæ—¶è§¦å‘ï¼Œç”¨äºè®°å½•å­ä»»åŠ¡ç»“æŸã€‚';\n                case 'PreCompact':\n                    return phase === 'manual'\n                        ? 'æ‰‹åŠ¨å‹ç¼©å‰è§¦å‘ï¼Œç”¨äºè®°å½•æˆ–å‡†å¤‡å‹ç¼©ã€‚'\n                        : 'è‡ªåŠ¨å‹ç¼©å‰è§¦å‘ï¼ˆä¸Šä¸‹æ–‡æ¥è¿‘ä¸Šé™ï¼‰ï¼Œç”¨äºè®°å½•æˆ–å‡†å¤‡å‹ç¼©ã€‚';\n                case 'SessionStart':\n                    switch (phase) {\n                        case 'startup':\n                            return 'æ–°ä¼šè¯å¯åŠ¨æ—¶è§¦å‘ï¼Œç”¨äºåŠ è½½ä¸Šä¸‹æ–‡æˆ–è®¾ç½®ç¯å¢ƒã€‚';\n                        case 'resume':\n                            return 'æ¢å¤ä¼šè¯æ—¶è§¦å‘ï¼Œç”¨äºç»§ç»­å…ˆå‰ä¸Šä¸‹æ–‡ã€‚';\n                        case 'clear':\n                            return 'æ¸…ç©ºä¼šè¯åè§¦å‘ï¼Œç”¨äºé‡ç½®ç¯å¢ƒä¸ä¸Šä¸‹æ–‡ã€‚';\n                        case 'compact':\n                            return 'å› å‹ç¼©æ“ä½œè§¦å‘çš„ä¼šè¯å¯åŠ¨ï¼Œç”¨äºç»´æŒä¸Šä¸‹æ–‡ã€‚';\n                        default:\n                            return 'ä¼šè¯å¯åŠ¨ç›¸å…³äº‹ä»¶ï¼Œåˆå§‹åŒ–æˆ–æ¢å¤ä¸Šä¸‹æ–‡ã€‚';\n                    }\n                case 'SessionEnd':\n                    return 'ä¼šè¯ç»“æŸæ—¶è§¦å‘ï¼Œå¸¸ç”¨äºæ”¶å°¾ä¸æ¸…ç†ã€‚';\n                default:\n                    return 'æœªçŸ¥äº‹ä»¶ã€‚';\n            }\n        }\n\n        // è·å–äº‹ä»¶æ ·å¼ç±»\n        function getEventClass(event) {\n            switch (event) {\n                case 'UserPromptSubmit': return 'event-userprompt';\n                case 'PreToolUse': return 'event-pretool';\n                case 'PostToolUse': return 'event-posttool';\n                case 'Notification': return 'event-notification';\n                case 'Stop': return 'event-stop';\n                case 'SubagentStop': return 'event-subagent-stop';\n                case 'PreCompact': return 'event-pre-compact';\n                case 'SessionStart': return 'event-session-start';\n                case 'SessionEnd': return 'event-session-end';\n                default: return 'event-default';\n            }\n        }\n\n        // æ ¼å¼åŒ–æ—¶é—´æˆ³\n        function formatTimestamp(ts) {\n            const date = new Date(ts);\n            return date.toLocaleString('zh-CN');\n        }\n\n        // æ ¼å¼åŒ– JSON\n        function formatJson(obj, indent = 0) {\n            if (!obj) return '';\n\n            try {\n                const spaces = '  '.repeat(indent);\n                let result = '';\n\n                if (Array.isArray(obj)) {\n                    result += '[\\n';\n                    obj.forEach((item, index) => {\n                        result += spaces + '  ';\n                        if (typeof item === 'object' && item !== null) {\n                            result += formatJson(item, indent + 1);\n                        } else {\n                            result += formatJsonValue(item);\n                        }\n                        if (index < obj.length - 1) result += ',';\n                        result += '\\n';\n                    });\n                    result += spaces + ']';\n                } else if (typeof obj === 'object' && obj !== null) {\n                    result += '{\\n';\n                    const keys = Object.keys(obj);\n                    keys.forEach((key, index) => {\n                        result += spaces + '  ';\n                        result += `<span class=\"json-key\">\"${escapeHtml(key)}\"</span>: `;\n\n                        if (typeof obj[key] === 'object' && obj[key] !== null) {\n                            result += formatJson(obj[key], indent + 1);\n                        } else {\n                            result += formatJsonValue(obj[key]);\n                        }\n\n                        if (index < keys.length - 1) result += ',';\n                        result += '\\n';\n                    });\n                    result += spaces + '}';\n                } else {\n                    result += formatJsonValue(obj);\n                }\n\n                return result;\n            } catch (error) {\n                return escapeHtml(JSON.stringify(obj));\n            }\n        }\n\n        // æ ¼å¼åŒ– JSON å€¼\n        function formatJsonValue(value) {\n            if (typeof value === 'string') {\n                if (value.startsWith('http://') || value.startsWith('https://')) {\n                    return `<span class=\"json-url\" onclick=\"window.open('${escapeHtml(value)}', '_blank')\">\"${escapeHtml(value)}\"</span>`;\n                }\n                return `<span class=\"json-string\">\"${escapeHtml(value)}\"</span>`;\n            } else if (typeof value === 'number') {\n                return `<span class=\"json-number\">${value}</span>`;\n            } else if (typeof value === 'boolean') {\n                return `<span class=\"json-boolean\">${value}</span>`;\n            } else if (value === null) {\n                return `<span class=\"json-null\">null</span>`;\n            } else {\n                return `<span style=\"color: #666;\">${value}</span>`;\n            }\n        }\n\n        // HTML è½¬ä¹‰\n        function escapeHtml(text) {\n            const div = document.createElement('div');\n            div.textContent = text;\n            return div.innerHTML;\n        }\n\n        // åˆ‡æ¢è¯¦æƒ…æ˜¾ç¤º\n        function toggleDetail(id) {\n            const content = document.getElementById(id);\n            const icon = document.getElementById('icon-' + id);\n\n            if (content.classList.contains('hidden')) {\n                content.classList.remove('hidden');\n                icon.classList.add('rotated');\n            } else {\n                content.classList.add('hidden');\n                icon.classList.remove('rotated');\n            }\n        }\n\n        // è¿‡æ»¤å’Œæœç´¢\n        document.getElementById('event-filter').addEventListener('change', applyFilters);\n        document.getElementById('search-input').addEventListener('input', applyFilters);\n\n        function applyFilters() {\n            const eventFilter = document.getElementById('event-filter').value;\n            const searchText = document.getElementById('search-input').value.toLowerCase();\n\n            filteredData = hooksData.filter(hook => {\n                const matchEvent = !eventFilter || hook.event === eventFilter;\n                const matchSearch = !searchText ||\n                    JSON.stringify(hook).toLowerCase().includes(searchText);\n\n                return matchEvent && matchSearch;\n            });\n\n            updateStatistics();\n            renderHooks();\n        }\n\n        // æ ¼å¼åŒ–æ–‡ä»¶å¤§å°\n        function formatFileSize(bytes) {\n            if (bytes === 0) return '0 Bytes';\n            const k = 1024;\n            const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n            const i = Math.floor(Math.log(bytes) / Math.log(k));\n            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n        }\n\n        // é¡µé¢åŠ è½½æ—¶æ‰§è¡Œ\n        document.addEventListener('DOMContentLoaded', function() {\n            // æ·»åŠ åˆå§‹åŠ è½½åŠ¨ç”»\n            const cards = document.querySelectorAll('.stat-card, .upload-card');\n            cards.forEach((card, index) => {\n                card.style.opacity = '0';\n                card.style.transform = 'translateY(20px)';\n                setTimeout(() => {\n                    card.style.transition = 'opacity 0.5s ease, transform 0.5s ease';\n                    card.style.opacity = '1';\n                    card.style.transform = 'translateY(0)';\n                }, index * 100);\n            });\n\n            // è®¾ç½®æ–‡ä»¶ä¸Šä¼ \n            setupFileUpload();\n        });\n\n            </script>\n</body>\n</html>","structuredPatch":[{"oldStart":484,"oldLines":6,"newStart":484,"newLines":53,"lines":["             margin-left: 10px;","         }"," ","+        .transcript-actions {","+            display: flex;","+            gap: 8px;","+            margin-top: 8px;","+        }","+","+        .transcript-btn {","+            background: #667eea;","+            color: white;","+            border: none;","+            padding: 6px 12px;","+            border-radius: 4px;","+            font-size: 0.8rem;","+            cursor: pointer;","+            transition: all 0.3s ease;","+            display: flex;","+            align-items: center;","+            gap: 4px;","+        }","+","+        .transcript-btn:hover {","+            background: #5a67d8;","+            transform: translateY(-1px);","+        }","+","+        .transcript-btn.copy {","+            background: #28a745;","+        }","+","+        .transcript-btn.copy:hover {","+            background: #218838;","+        }","+","+        .transcript-btn.open {","+            background: #007bff;","+        }","+","+        .transcript-btn.open:hover {","+            background: #0056b3;","+        }","+","+        .transcript-btn:disabled {","+            background: #6c757d;","+            cursor: not-allowed;","+            transform: none;","+        }","+","         @media (max-width: 768px) {","             .header h1 {","                 font-size: 2rem;"]}],"userModified":false,"replaceAll":false}}}
{"ts":"2025-11-05T02:29:16.144Z","event":"PreToolUse","phase":"","message":"PreToolUseäº‹ä»¶æ­£åœ¨æ‰§è¡Œ","description":"å·¥å…·æ‰§è¡Œå‰è§¦å‘ï¼Œå¯åŸºäºå‚æ•°é˜»æ­¢æˆ–è°ƒæ•´è°ƒç”¨ã€‚","doc_url":"https://docs.claude.com/zh-CN/docs/claude-code/hooks#pretooluse","payload":{"session_id":"c7c21516-7e1e-49b2-8ae5-4e1bb98e9692","transcript_path":"C:\\Users\\WTCL\\.claude\\projects\\i--claude-code-proxy\\c7c21516-7e1e-49b2-8ae5-4e1bb98e9692.jsonl","cwd":"i:\\claude-code-proxy","permission_mode":"acceptEdits","hook_event_name":"PreToolUse","tool_name":"Edit","tool_input":{"file_path":"i:\\claude-code-proxy\\analyze\\hooks.html","old_string":"    ${hasTranscript && transcriptPath ? `\n                <div class=\"transcript-path\">\n                    <div class=\"transcript-path-label\">ğŸ“„ è½¬å½•è·¯å¾„ (transcript_path):</div>\n                    <div class=\"transcript-path-value\">${escapeHtml(transcriptPath)}</div>\n                </div>\n                ` : ''}","new_string":"    ${hasTranscript && transcriptPath ? `\n                <div class=\"transcript-path\">\n                    <div class=\"transcript-path-label\">ğŸ“„ è½¬å½•è·¯å¾„ (transcript_path):</div>\n                    <div class=\"transcript-path-value\">${escapeHtml(transcriptPath)}</div>\n                    <div class=\"transcript-actions\">\n                        <button class=\"transcript-btn copy\" onclick=\"copyTranscriptPath('${escapeHtml(transcriptPath)}')\" title=\"å¤åˆ¶è·¯å¾„\">\n                            ğŸ“‹ å¤åˆ¶\n                        </button>\n                        ${isUrl(transcriptPath) ?\n                            `<button class=\"transcript-btn open\" onclick=\"openTranscriptUrl('${escapeHtml(transcriptPath)}')\" title=\"åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€\">\n                                ğŸ”— æ‰“å¼€é“¾æ¥\n                            </button>` :\n                            `<button class=\"transcript-btn open\" onclick=\"tryOpenTranscriptFile('${escapeHtml(transcriptPath)}')\" title=\"å°è¯•æ‰“å¼€æ–‡ä»¶\">\n                                ğŸ“‚ å°è¯•æ‰“å¼€\n                            </button>`\n                        }\n                    </div>\n                </div>\n                ` : ''}"}}}
{"ts":"2025-11-05T02:29:17.811Z","event":"PostToolUse","phase":"","message":"PostToolUseäº‹ä»¶æ­£åœ¨æ‰§è¡Œ","description":"å·¥å…·æˆåŠŸæ‰§è¡Œåè§¦å‘ï¼Œå¸¸ç”¨äºæ ¼å¼åŒ–ã€æ ¡éªŒæˆ–è®°å½•ç»“æœã€‚","doc_url":"https://docs.claude.com/zh-CN/docs/claude-code/hooks#posttooluse","payload":{"session_id":"c7c21516-7e1e-49b2-8ae5-4e1bb98e9692","transcript_path":"C:\\Users\\WTCL\\.claude\\projects\\i--claude-code-proxy\\c7c21516-7e1e-49b2-8ae5-4e1bb98e9692.jsonl","cwd":"i:\\claude-code-proxy","permission_mode":"acceptEdits","hook_event_name":"PostToolUse","tool_name":"Edit","tool_input":{"file_path":"i:\\claude-code-proxy\\analyze\\hooks.html","old_string":"    ${hasTranscript && transcriptPath ? `\n                <div class=\"transcript-path\">\n                    <div class=\"transcript-path-label\">ğŸ“„ è½¬å½•è·¯å¾„ (transcript_path):</div>\n                    <div class=\"transcript-path-value\">${escapeHtml(transcriptPath)}</div>\n                </div>\n                ` : ''}","new_string":"    ${hasTranscript && transcriptPath ? `\n                <div class=\"transcript-path\">\n                    <div class=\"transcript-path-label\">ğŸ“„ è½¬å½•è·¯å¾„ (transcript_path):</div>\n                    <div class=\"transcript-path-value\">${escapeHtml(transcriptPath)}</div>\n                    <div class=\"transcript-actions\">\n                        <button class=\"transcript-btn copy\" onclick=\"copyTranscriptPath('${escapeHtml(transcriptPath)}')\" title=\"å¤åˆ¶è·¯å¾„\">\n                            ğŸ“‹ å¤åˆ¶\n                        </button>\n                        ${isUrl(transcriptPath) ?\n                            `<button class=\"transcript-btn open\" onclick=\"openTranscriptUrl('${escapeHtml(transcriptPath)}')\" title=\"åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€\">\n                                ğŸ”— æ‰“å¼€é“¾æ¥\n                            </button>` :\n                            `<button class=\"transcript-btn open\" onclick=\"tryOpenTranscriptFile('${escapeHtml(transcriptPath)}')\" title=\"å°è¯•æ‰“å¼€æ–‡ä»¶\">\n                                ğŸ“‚ å°è¯•æ‰“å¼€\n                            </button>`\n                        }\n                    </div>\n                </div>\n                ` : ''}"},"tool_response":{"filePath":"i:\\claude-code-proxy\\analyze\\hooks.html","oldString":"    ${hasTranscript && transcriptPath ? `\n                <div class=\"transcript-path\">\n                    <div class=\"transcript-path-label\">ğŸ“„ è½¬å½•è·¯å¾„ (transcript_path):</div>\n                    <div class=\"transcript-path-value\">${escapeHtml(transcriptPath)}</div>\n                </div>\n                ` : ''}","newString":"    ${hasTranscript && transcriptPath ? `\n                <div class=\"transcript-path\">\n                    <div class=\"transcript-path-label\">ğŸ“„ è½¬å½•è·¯å¾„ (transcript_path):</div>\n                    <div class=\"transcript-path-value\">${escapeHtml(transcriptPath)}</div>\n                    <div class=\"transcript-actions\">\n                        <button class=\"transcript-btn copy\" onclick=\"copyTranscriptPath('${escapeHtml(transcriptPath)}')\" title=\"å¤åˆ¶è·¯å¾„\">\n                            ğŸ“‹ å¤åˆ¶\n                        </button>\n                        ${isUrl(transcriptPath) ?\n                            `<button class=\"transcript-btn open\" onclick=\"openTranscriptUrl('${escapeHtml(transcriptPath)}')\" title=\"åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€\">\n                                ğŸ”— æ‰“å¼€é“¾æ¥\n                            </button>` :\n                            `<button class=\"transcript-btn open\" onclick=\"tryOpenTranscriptFile('${escapeHtml(transcriptPath)}')\" title=\"å°è¯•æ‰“å¼€æ–‡ä»¶\">\n                                ğŸ“‚ å°è¯•æ‰“å¼€\n                            </button>`\n                        }\n                    </div>\n                </div>\n                ` : ''}","originalFile":"<!DOCTYPE html>\n<html lang=\"zh-CN\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Hooks æ—¥å¿—åˆ†æ</title>\n    <style>\n        * {\n            margin: 0;\n            padding: 0;\n            box-sizing: border-box;\n        }\n\n        body {\n            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n            min-height: 100vh;\n            padding: 20px;\n        }\n\n        .container {\n            max-width: 1400px;\n            margin: 0 auto;\n        }\n\n        .header {\n            text-align: center;\n            color: white;\n            margin-bottom: 30px;\n        }\n\n        .header h1 {\n            font-size: 2.5rem;\n            margin-bottom: 10px;\n            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);\n        }\n\n        .header p {\n            font-size: 1.1rem;\n            opacity: 0.9;\n        }\n\n        /* æ–‡ä»¶ä¸Šä¼ ç»„ä»¶æ ·å¼ */\n        .upload-section {\n            margin-bottom: 30px;\n        }\n\n        .upload-card {\n            background: white;\n            border-radius: 15px;\n            padding: 25px;\n            box-shadow: 0 10px 30px rgba(0,0,0,0.1);\n            border: 2px dashed #cbd5e0;\n            transition: all 0.3s ease;\n        }\n\n        .upload-card:hover {\n            border-color: #667eea;\n            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.2);\n        }\n\n        .upload-header {\n            font-size: 1.2rem;\n            font-weight: bold;\n            color: #4a5568;\n            margin-bottom: 20px;\n            text-align: center;\n        }\n\n        .upload-area {\n            border: 2px dashed #e2e8f0;\n            border-radius: 10px;\n            padding: 40px 20px;\n            text-align: center;\n            transition: all 0.3s ease;\n            cursor: pointer;\n        }\n\n        .upload-area:hover {\n            border-color: #667eea;\n            background: #f7fafc;\n        }\n\n        .upload-area.dragover {\n            border-color: #667eea;\n            background: #edf2f7;\n            transform: scale(1.02);\n        }\n\n        .upload-icon {\n            font-size: 3rem;\n            margin-bottom: 15px;\n            opacity: 0.7;\n        }\n\n        .upload-text {\n            font-size: 1.1rem;\n            color: #4a5568;\n            margin-bottom: 10px;\n            font-weight: 500;\n        }\n\n        .upload-hint {\n            font-size: 0.9rem;\n            color: #718096;\n            margin-bottom: 20px;\n        }\n\n        .upload-btn {\n            background: #667eea;\n            color: white;\n            border: none;\n            padding: 12px 24px;\n            border-radius: 8px;\n            font-size: 1rem;\n            font-weight: 500;\n            cursor: pointer;\n            transition: all 0.3s ease;\n        }\n\n        .upload-btn:hover {\n            background: #5a67d8;\n            transform: translateY(-2px);\n            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);\n        }\n\n        .file-info {\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            background: #f7fafc;\n            padding: 15px 20px;\n            border-radius: 8px;\n            margin-top: 15px;\n        }\n\n        .file-name {\n            font-weight: 500;\n            color: #4a5568;\n            flex: 1;\n            overflow: hidden;\n            text-overflow: ellipsis;\n            white-space: nowrap;\n        }\n\n        .clear-btn {\n            background: #fc8181;\n            color: white;\n            border: none;\n            width: 30px;\n            height: 30px;\n            border-radius: 50%;\n            cursor: pointer;\n            font-size: 1rem;\n            transition: all 0.3s ease;\n        }\n\n        .clear-btn:hover {\n            background: #f56565;\n            transform: scale(1.1);\n        }\n\n        /* æ¶ˆæ¯æç¤ºæ ·å¼ */\n        .upload-message {\n            margin-top: 15px;\n            padding: 12px 16px;\n            border-radius: 8px;\n            font-size: 0.9rem;\n            animation: slideIn 0.3s ease;\n        }\n\n        .upload-success {\n            background: #d4edda;\n            color: #155724;\n            border: 1px solid #c3e6cb;\n        }\n\n        .upload-error {\n            background: #f8d7da;\n            color: #721c24;\n            border: 1px solid #f5c6cb;\n        }\n\n        @keyframes slideIn {\n            from {\n                opacity: 0;\n                transform: translateY(-10px);\n            }\n            to {\n                opacity: 1;\n                transform: translateY(0);\n            }\n        }\n\n        #file-input {\n            display: none;\n        }\n\n        .stats-grid {\n            display: grid;\n            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\n            gap: 20px;\n            margin-bottom: 30px;\n        }\n\n        .stat-card {\n            background: white;\n            border-radius: 15px;\n            padding: 25px;\n            box-shadow: 0 10px 30px rgba(0,0,0,0.2);\n            text-align: center;\n            transition: transform 0.3s ease, box-shadow 0.3s ease;\n        }\n\n        .stat-card:hover {\n            transform: translateY(-5px);\n            box-shadow: 0 15px 40px rgba(0,0,0,0.3);\n        }\n\n        .stat-number {\n            font-size: 3rem;\n            font-weight: bold;\n            margin-bottom: 10px;\n        }\n\n        .stat-label {\n            font-size: 1.1rem;\n            color: #666;\n            margin-bottom: 5px;\n        }\n\n        .stat-description {\n            font-size: 0.9rem;\n            color: #999;\n        }\n\n        .filter-section {\n            background: white;\n            border-radius: 15px;\n            padding: 20px;\n            box-shadow: 0 10px 30px rgba(0,0,0,0.2);\n            margin-bottom: 30px;\n        }\n\n        .filter-controls {\n            display: flex;\n            gap: 15px;\n            flex-wrap: wrap;\n            align-items: center;\n        }\n\n        .filter-group {\n            display: flex;\n            align-items: center;\n            gap: 10px;\n        }\n\n        .filter-label {\n            font-weight: bold;\n            color: #333;\n        }\n\n        .filter-select, .search-input {\n            padding: 8px 12px;\n            border: 2px solid #ddd;\n            border-radius: 5px;\n            font-size: 0.9rem;\n            transition: border-color 0.3s ease;\n        }\n\n        .filter-select:focus, .search-input:focus {\n            outline: none;\n            border-color: #667eea;\n        }\n\n        .search-input {\n            min-width: 200px;\n        }\n\n        .hooks-container {\n            display: grid;\n            gap: 30px;\n        }\n\n        .hook-item {\n            background: white;\n            border-radius: 15px;\n            padding: 25px;\n            box-shadow: 0 10px 30px rgba(0,0,0,0.2);\n        }\n\n        .hook-header {\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            margin-bottom: 20px;\n            padding-bottom: 15px;\n            border-bottom: 2px solid #667eea;\n        }\n\n        .hook-event {\n            font-size: 1.5rem;\n            font-weight: bold;\n            color: #667eea;\n        }\n\n        .hook-meta {\n            display: flex;\n            gap: 20px;\n            align-items: center;\n        }\n\n        .hook-timestamp {\n            font-size: 0.9rem;\n            color: #666;\n            background: #f0f4ff;\n            padding: 5px 12px;\n            border-radius: 20px;\n        }\n\n        .hook-message {\n            background: #f8f9fa;\n            border-left: 4px solid #667eea;\n            padding: 15px;\n            margin-bottom: 15px;\n            border-radius: 5px;\n        }\n\n        .hook-description {\n            color: #666;\n            font-style: italic;\n            margin-bottom: 15px;\n        }\n\n        .hook-details {\n            display: flex;\n            flex-direction: column;\n            gap: 20px;\n        }\n\n        .part-card {\n            background: #f8f9fa;\n            border-radius: 10px;\n            overflow: hidden;\n        }\n\n        .part-header {\n            background: #667eea;\n            color: white;\n            padding: 12px 15px;\n            font-weight: bold;\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            cursor: pointer;\n            transition: background 0.3s ease;\n        }\n\n        .part-header:hover {\n            background: #5a67d8;\n        }\n\n        .part-content {\n            padding: 15px;\n            font-family: 'Courier New', monospace;\n            font-size: 0.9rem;\n            background: #1a1a1a;\n            color: #ffffff;\n            overflow-y: auto;\n            white-space: pre-wrap;\n            line-height: 1.6;\n            min-height: 100px;\n            border-radius: 8px;\n            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.3);\n        }\n\n        .part-content.hidden {\n            display: none;\n        }\n\n        .toggle-icon {\n            transition: transform 0.3s ease;\n        }\n\n        .toggle-icon.rotated {\n            transform: rotate(180deg);\n        }\n\n        /* è‡ªå®šä¹‰æ»šåŠ¨æ¡æ ·å¼ */\n        .part-content::-webkit-scrollbar {\n            width: 8px;\n        }\n\n        .part-content::-webkit-scrollbar-track {\n            background: #2a2a2a;\n            border-radius: 4px;\n        }\n\n        .part-content::-webkit-scrollbar-thumb {\n            background: #4a4a4a;\n            border-radius: 4px;\n        }\n\n        .part-content::-webkit-scrollbar-thumb:hover {\n            background: #5a5a5a;\n        }\n\n        .event-badge {\n            display: inline-block;\n            padding: 4px 12px;\n            border-radius: 20px;\n            font-size: 0.8rem;\n            font-weight: bold;\n            margin-right: 10px;\n        }\n\n        .event-userprompt { background: #FF6B6B; color: white; }\n        .event-pretool { background: #4ECDC4; color: white; }\n        .event-posttool { background: #45B7D1; color: white; }\n        .event-notification { background: #9C27B0; color: white; }\n        .event-stop { background: #F44336; color: white; }\n        .event-subagent-stop { background: #FF9800; color: white; }\n        .event-pre-compact { background: #FFC107; color: white; }\n        .event-session-start { background: #4CAF50; color: white; }\n        .event-session-end { background: #607D8B; color: white; }\n        .event-default { background: #78909C; color: white; }\n\n        .no-data {\n            text-align: center;\n            padding: 60px 20px;\n            color: white;\n            font-size: 1.2rem;\n        }\n\n        .error-message {\n            background: #fff5f5;\n            border: 2px solid #fc8181;\n            color: #c53030;\n            padding: 20px;\n            border-radius: 10px;\n            text-align: center;\n            font-size: 1.1rem;\n            margin: 20px 0;\n        }\n\n        .json-key { color: #9C27B0; }\n        .json-string { color: #4CAF50; }\n        .json-number { color: #FF9800; }\n        .json-boolean { color: #F44336; }\n        .json-null { color: #9E9E9E; }\n        .json-url { color: #2196F3; text-decoration: underline; cursor: pointer; }\n\n        .transcript-path {\n            background: #fff3cd;\n            border: 1px solid #ffeaa7;\n            border-radius: 5px;\n            padding: 8px 12px;\n            margin-top: 10px;\n            font-size: 0.9rem;\n        }\n\n        .transcript-path-label {\n            font-weight: bold;\n            color: #856404;\n            margin-bottom: 5px;\n        }\n\n        .transcript-path-value {\n            color: #856404;\n            word-break: break-all;\n            font-family: monospace;\n            background: #f8f9fa;\n            padding: 4px 8px;\n            border-radius: 3px;\n        }\n\n        .has-transcript-badge {\n            background: #ffc107;\n            color: #212529;\n            padding: 2px 8px;\n            border-radius: 12px;\n            font-size: 0.7rem;\n            font-weight: bold;\n            margin-left: 10px;\n        }\n\n        .transcript-actions {\n            display: flex;\n            gap: 8px;\n            margin-top: 8px;\n        }\n\n        .transcript-btn {\n            background: #667eea;\n            color: white;\n            border: none;\n            padding: 6px 12px;\n            border-radius: 4px;\n            font-size: 0.8rem;\n            cursor: pointer;\n            transition: all 0.3s ease;\n            display: flex;\n            align-items: center;\n            gap: 4px;\n        }\n\n        .transcript-btn:hover {\n            background: #5a67d8;\n            transform: translateY(-1px);\n        }\n\n        .transcript-btn.copy {\n            background: #28a745;\n        }\n\n        .transcript-btn.copy:hover {\n            background: #218838;\n        }\n\n        .transcript-btn.open {\n            background: #007bff;\n        }\n\n        .transcript-btn.open:hover {\n            background: #0056b3;\n        }\n\n        .transcript-btn:disabled {\n            background: #6c757d;\n            cursor: not-allowed;\n            transform: none;\n        }\n\n        @media (max-width: 768px) {\n            .header h1 {\n                font-size: 2rem;\n            }\n\n            .stats-grid {\n                grid-template-columns: repeat(2, 1fr);\n            }\n\n            .filter-controls {\n                flex-direction: column;\n                align-items: stretch;\n            }\n\n            .search-input {\n                min-width: auto;\n            }\n        }\n    </style>\n</head>\n<body>\n    <div class=\"container\">\n        <div class=\"header\">\n            <h1>Hooks æ—¥å¿—åˆ†æ</h1>\n            <p>ä¸Šä¼ å¹¶åˆ†æ Claude Hooks äº‹ä»¶æ—¥å¿—</p>\n        </div>\n\n        <!-- æ–‡ä»¶ä¸Šä¼ ç»„ä»¶ -->\n        <div class=\"upload-section\">\n            <div class=\"upload-card\">\n                <div class=\"upload-header\">\n                    <span>ğŸ“ é€‰æ‹© Hooks æ—¥å¿—æ–‡ä»¶</span>\n                </div>\n                <div class=\"upload-area\" id=\"upload-area\">\n                    <div class=\"upload-content\">\n                        <div class=\"upload-icon\">ğŸ“„</div>\n                        <p class=\"upload-text\">ç‚¹å‡»é€‰æ‹©æ–‡ä»¶æˆ–æ‹–æ‹½æ–‡ä»¶åˆ°æ­¤å¤„</p>\n                        <p class=\"upload-hint\">æ”¯æŒ .log .txt æ ¼å¼çš„æ—¥å¿—æ–‡ä»¶ï¼Œæ¯è¡Œä¸€ä¸ª JSON å¯¹è±¡ï¼Œæœ€å¤§50MB</p>\n                        <input type=\"file\" id=\"file-input\" accept=\".log,.txt\" style=\"display: none;\">\n                        <button class=\"upload-btn\" onclick=\"document.getElementById('file-input').click()\">é€‰æ‹©æ–‡ä»¶</button>\n                    </div>\n                </div>\n                <div class=\"file-info\" id=\"file-info\" style=\"display: none;\">\n                    <span class=\"file-name\" id=\"file-name\"></span>\n                    <button class=\"clear-btn\" onclick=\"clearFile()\">âœ•</button>\n                </div>\n            </div>\n        </div>\n\n        <div id=\"stats-section\" style=\"display: none;\">\n            <div class=\"stats-grid\">\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"total-hooks\">0</div>\n                    <div class=\"stat-label\">æ€»äº‹ä»¶æ•°</div>\n                    <div class=\"stat-description\">æ‰€æœ‰ Hooks äº‹ä»¶</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"user-prompts\">0</div>\n                    <div class=\"stat-label\">ç”¨æˆ·æç¤ºäº‹ä»¶</div>\n                    <div class=\"stat-description\">UserPromptSubmit</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"pre-tools\">0</div>\n                    <div class=\"stat-label\">å·¥å…·æ‰§è¡Œå‰äº‹ä»¶</div>\n                    <div class=\"stat-description\">PreToolUse</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"post-tools\">0</div>\n                    <div class=\"stat-label\">å·¥å…·æ‰§è¡Œåäº‹ä»¶</div>\n                    <div class=\"stat-description\">PostToolUse</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"notifications\">0</div>\n                    <div class=\"stat-label\">é€šçŸ¥äº‹ä»¶</div>\n                    <div class=\"stat-description\">Notification</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"stops\">0</div>\n                    <div class=\"stat-label\">åœæ­¢äº‹ä»¶</div>\n                    <div class=\"stat-description\">Stop</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"subagent-stops\">0</div>\n                    <div class=\"stat-label\">å­ä»£ç†åœæ­¢äº‹ä»¶</div>\n                    <div class=\"stat-description\">SubagentStop</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"pre-compacts\">0</div>\n                    <div class=\"stat-label\">å‹ç¼©å‰äº‹ä»¶</div>\n                    <div class=\"stat-description\">PreCompact</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"session-starts\">0</div>\n                    <div class=\"stat-label\">ä¼šè¯å¼€å§‹äº‹ä»¶</div>\n                    <div class=\"stat-description\">SessionStart</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"session-ends\">0</div>\n                    <div class=\"stat-label\">ä¼šè¯ç»“æŸäº‹ä»¶</div>\n                    <div class=\"stat-description\">SessionEnd</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"transcript-count\">0</div>\n                    <div class=\"stat-label\">åŒ…å«è½¬å½•è·¯å¾„äº‹ä»¶</div>\n                    <div class=\"stat-description\">åŒ…å« transcript_path</div>\n                </div>\n            </div>\n\n            <div class=\"filter-section\">\n                <div class=\"filter-controls\">\n                    <div class=\"filter-group\">\n                        <label class=\"filter-label\">äº‹ä»¶ç±»å‹ï¼š</label>\n                        <select class=\"filter-select\" id=\"event-filter\">\n                            <option value=\"\">å…¨éƒ¨</option>\n                            <option value=\"UserPromptSubmit\">UserPromptSubmit</option>\n                            <option value=\"PreToolUse\">PreToolUse</option>\n                            <option value=\"PostToolUse\">PostToolUse</option>\n                            <option value=\"Notification\">Notification</option>\n                            <option value=\"Stop\">Stop</option>\n                            <option value=\"SubagentStop\">SubagentStop</option>\n                            <option value=\"PreCompact\">PreCompact</option>\n                            <option value=\"SessionStart\">SessionStart</option>\n                            <option value=\"SessionEnd\">SessionEnd</option>\n                        </select>\n                    </div>\n                    <div class=\"filter-group\">\n                        <label class=\"filter-label\">æœç´¢ï¼š</label>\n                        <input type=\"text\" class=\"search-input\" id=\"search-input\" placeholder=\"æœç´¢äº‹ä»¶å†…å®¹...\">\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <div id=\"hooks-container\" class=\"hooks-container\"></div>\n\n        <div id=\"no-data\" class=\"no-data\">\n            è¯·ä¸Šä¼  hooks.log æ–‡ä»¶å¼€å§‹åˆ†æ\n        </div>\n\n        <div id=\"error-message\" class=\"error-message\" style=\"display: none;\"></div>\n    </div>\n\n    <script>\n        let hooksData = [];\n        let filteredData = [];\n\n        // æ–‡ä»¶ä¸Šä¼ ç›¸å…³å‡½æ•°\n        function setupFileUpload() {\n            const uploadArea = document.getElementById('upload-area');\n            const fileInput = document.getElementById('file-input');\n\n            // ç‚¹å‡»ä¸Šä¼ åŒºåŸŸè§¦å‘æ–‡ä»¶é€‰æ‹©ï¼ˆä½†ä¸åŒ…æ‹¬æŒ‰é’®ï¼‰\n            uploadArea.addEventListener('click', function(event) {\n                // å¦‚æœç‚¹å‡»çš„æ˜¯æŒ‰é’®ï¼Œä¸å¤„ç†\n                if (event.target.tagName === 'BUTTON' || event.target.closest('button')) {\n                    return;\n                }\n                fileInput.click();\n            });\n\n            // æ–‡ä»¶é€‰æ‹©äº‹ä»¶\n            fileInput.addEventListener('change', handleFileSelect);\n\n            // æ‹–æ‹½äº‹ä»¶\n            uploadArea.addEventListener('dragover', handleDragOver);\n            uploadArea.addEventListener('dragleave', handleDragLeave);\n            uploadArea.addEventListener('drop', handleDrop);\n        }\n\n\n        function handleDragOver(e) {\n            e.preventDefault();\n            e.currentTarget.classList.add('dragover');\n        }\n\n        function handleDragLeave(e) {\n            e.preventDefault();\n            e.currentTarget.classList.remove('dragover');\n        }\n\n        function handleDrop(e) {\n            e.preventDefault();\n            e.currentTarget.classList.remove('dragover');\n            handleFiles(e.dataTransfer.files);\n        }\n\n        function handleFileSelect(event) {\n            const files = event.target.files;\n            handleFiles(files);\n        }\n\n        function handleFiles(files) {\n            if (files.length === 0) return;\n\n            const file = files[0];\n\n            // æ£€æŸ¥æ–‡ä»¶ç±»å‹\n            const validTypes = ['.log', '.txt'];\n            const fileExtension = file.name.substring(file.name.lastIndexOf('.')).toLowerCase();\n\n            if (!validTypes.includes(fileExtension)) {\n                showErrorMessage('è¯·é€‰æ‹© .log æˆ– .txt æ ¼å¼çš„æ—¥å¿—æ–‡ä»¶');\n                return;\n            }\n\n            // æ£€æŸ¥æ–‡ä»¶å¤§å° (é™åˆ¶ä¸º50MB)\n            if (file.size > 50 * 1024 * 1024) {\n                showErrorMessage('æ–‡ä»¶å¤§å°ä¸èƒ½è¶…è¿‡50MB');\n                return;\n            }\n\n            // æ˜¾ç¤ºæ–‡ä»¶ä¿¡æ¯\n            showFileInfo(file);\n\n            // è¯»å–æ–‡ä»¶å†…å®¹\n            const reader = new FileReader();\n            reader.onload = function(e) {\n                try {\n                    const content = e.target.result;\n                    console.log('æ–‡ä»¶è¯»å–æˆåŠŸï¼Œå†…å®¹é•¿åº¦:', content.length);\n                    console.log('æ–‡ä»¶å†…å®¹å‰100å­—ç¬¦:', content.substring(0, 100));\n\n                    if (!content || content.trim().length === 0) {\n                        showErrorMessage('æ–‡ä»¶å†…å®¹ä¸ºç©º');\n                        return;\n                    }\n\n                    parseHooksData(content);\n                    showSuccessMessage(`æˆåŠŸåŠ è½½æ–‡ä»¶: ${file.name}`);\n                } catch (error) {\n                    console.error('æ–‡ä»¶è§£æå¼‚å¸¸:', error);\n                    showErrorMessage('æ–‡ä»¶è§£æå¤±è´¥ï¼š' + error.message);\n                }\n            };\n            reader.onerror = function(error) {\n                console.error('æ–‡ä»¶è¯»å–å¤±è´¥:', error);\n                showErrorMessage('æ–‡ä»¶è¯»å–å¤±è´¥');\n            };\n            reader.readAsText(file);\n        }\n\n        function showFileInfo(file) {\n            const fileInfo = document.getElementById('file-info');\n            const fileName = document.getElementById('file-name');\n            const uploadArea = document.getElementById('upload-area');\n\n            fileName.textContent = file.name;\n            fileInfo.style.display = 'flex';\n            uploadArea.style.display = 'none';\n        }\n\n        function clearFile() {\n            const fileInfo = document.getElementById('file-info');\n            const uploadArea = document.getElementById('upload-area');\n            const fileInput = document.getElementById('file-input');\n\n            fileInfo.style.display = 'none';\n            uploadArea.style.display = 'block';\n\n            // æ¸…ç©ºæ–‡ä»¶è¾“å…¥æ¡†çš„å€¼\n            fileInput.value = '';\n\n            // æ¸…ç©ºæ•°æ®\n            hooksData = [];\n            filteredData = [];\n\n            // æ¸…ç©ºæ˜¾ç¤ºåŒºåŸŸ\n            document.getElementById('hooks-container').innerHTML = '';\n            document.getElementById('no-data').style.display = 'block';\n            document.getElementById('stats-section').style.display = 'none';\n\n            // æ˜¾ç¤ºæç¤º\n            showSuccessMessage('å·²æ¸…ç©ºæ–‡ä»¶ï¼Œè¯·é‡æ–°é€‰æ‹©æ—¥å¿—æ–‡ä»¶');\n        }\n\n        function showSuccessMessage(message) {\n            showMessage(message, 'success');\n        }\n\n        function showErrorMessage(message) {\n            showMessage(message, 'error');\n        }\n\n        function showMessage(message, type) {\n            // ç§»é™¤ä¹‹å‰çš„æ¶ˆæ¯\n            const existingMessages = document.querySelectorAll('.upload-message');\n            existingMessages.forEach(msg => msg.remove());\n\n            const messageClass = type === 'success' ? 'upload-success' : 'upload-error';\n            const messageDiv = document.createElement('div');\n            messageDiv.className = `upload-message ${messageClass}`;\n            messageDiv.textContent = message;\n\n            document.querySelector('.upload-card').appendChild(messageDiv);\n\n            // 3ç§’åè‡ªåŠ¨æ¶ˆå¤±\n            setTimeout(() => {\n                messageDiv.style.opacity = '0';\n                setTimeout(() => {\n                    if (messageDiv.parentNode) {\n                        messageDiv.parentNode.removeChild(messageDiv);\n                    }\n                }, 300);\n            }, 3000);\n        }\n\n        // è§£æ hooks æ•°æ®\n        function parseHooksData(content) {\n            console.log('å¼€å§‹è§£æ hooks æ•°æ®ï¼Œå†…å®¹é•¿åº¦:', content.length);\n\n            hooksData = [];\n            const lines = content.split('\\n').filter(line => line.trim());\n            console.log('åˆ†å‰²åçš„è¡Œæ•°:', lines.length);\n\n            for (let i = 0; i < lines.length; i++) {\n                const line = lines[i];\n                try {\n                    const hookData = JSON.parse(line);\n                    hooksData.push(hookData);\n                    console.log(`æˆåŠŸè§£æç¬¬ ${i + 1} è¡Œï¼Œäº‹ä»¶ç±»å‹:`, hookData.event);\n                } catch (error) {\n                    console.error(`è§£æç¬¬ ${i + 1} è¡Œå¤±è´¥:`, error.message);\n                    console.error('é—®é¢˜è¡Œçš„å†…å®¹:', line.substring(0, 100) + (line.length > 100 ? '...' : ''));\n                }\n            }\n\n            console.log('è§£æå®Œæˆï¼Œæ€»å…±è§£æåˆ°', hooksData.length, 'ä¸ªæœ‰æ•ˆäº‹ä»¶');\n\n            if (hooksData.length === 0) {\n                showErrorMessage('æœªæ‰¾åˆ°æœ‰æ•ˆçš„ hooks æ•°æ®ã€‚è¯·ç¡®ä¿æ–‡ä»¶æ ¼å¼æ­£ç¡®ï¼Œæ¯è¡Œåº”è¯¥æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„JSONå¯¹è±¡ã€‚');\n                console.error('è§£æå¤±è´¥ï¼Œæ²¡æœ‰æ‰¾åˆ°æœ‰æ•ˆçš„hooksæ•°æ®');\n                return;\n            }\n\n            filteredData = [...hooksData];\n            console.log('å‡†å¤‡æ˜¾ç¤ºæ•°æ®ï¼Œè¿‡æ»¤åçš„äº‹ä»¶æ•°é‡:', filteredData.length);\n            displayData();\n        }\n\n        // æ˜¾ç¤ºæ•°æ®\n        function displayData() {\n            document.getElementById('no-data').style.display = 'none';\n            document.getElementById('error-message').style.display = 'none';\n            document.getElementById('stats-section').style.display = 'block';\n\n            updateStatistics();\n            renderHooks();\n        }\n\n        // æ›´æ–°ç»Ÿè®¡ä¿¡æ¯\n        function updateStatistics() {\n            const stats = {\n                total: filteredData.length,\n                userPrompts: filteredData.filter(h => h.event === 'UserPromptSubmit').length,\n                preTools: filteredData.filter(h => h.event === 'PreToolUse').length,\n                postTools: filteredData.filter(h => h.event === 'PostToolUse').length,\n                notifications: filteredData.filter(h => h.event === 'Notification').length,\n                stops: filteredData.filter(h => h.event === 'Stop').length,\n                subagentStops: filteredData.filter(h => h.event === 'SubagentStop').length,\n                preCompacts: filteredData.filter(h => h.event === 'PreCompact').length,\n                sessionStarts: filteredData.filter(h => h.event === 'SessionStart').length,\n                sessionEnds: filteredData.filter(h => h.event === 'SessionEnd').length,\n                transcriptCount: filteredData.filter(h => hasTranscriptPath(h)).length\n            };\n\n            document.getElementById('total-hooks').textContent = stats.total;\n            document.getElementById('user-prompts').textContent = stats.userPrompts;\n            document.getElementById('pre-tools').textContent = stats.preTools;\n            document.getElementById('post-tools').textContent = stats.postTools;\n            document.getElementById('notifications').textContent = stats.notifications;\n            document.getElementById('stops').textContent = stats.stops;\n            document.getElementById('subagent-stops').textContent = stats.subagentStops;\n            document.getElementById('pre-compacts').textContent = stats.preCompacts;\n            document.getElementById('session-starts').textContent = stats.sessionStarts;\n            document.getElementById('session-ends').textContent = stats.sessionEnds;\n            document.getElementById('transcript-count').textContent = stats.transcriptCount;\n        }\n\n        // æ¸²æŸ“ hooks\n        function renderHooks() {\n            const container = document.getElementById('hooks-container');\n            container.innerHTML = '';\n\n            filteredData.forEach((hook, index) => {\n                const hookElement = createHookElement(hook, index);\n                container.appendChild(hookElement);\n            });\n\n            // æ·»åŠ åŠ¨ç”»\n            const elements = container.querySelectorAll('.hook-item');\n            elements.forEach((el, i) => {\n                el.style.opacity = '0';\n                el.style.transform = 'translateY(20px)';\n                setTimeout(() => {\n                    el.style.transition = 'opacity 0.3s ease, transform 0.3s ease';\n                    el.style.opacity = '1';\n                    el.style.transform = 'translateY(0)';\n                }, i * 50);\n            });\n        }\n\n        // æ£€æŸ¥æ˜¯å¦åŒ…å« transcript_path å­—æ®µ\n        function hasTranscriptPath(hook) {\n            if (!hook.payload) return false;\n\n            // æ£€æŸ¥ payload ä¸­æ˜¯å¦ç›´æ¥åŒ…å« transcript_path\n            if (hook.payload.transcript_path) return true;\n\n            // æ·±åº¦æœç´¢ payload å¯¹è±¡ä¸­çš„ transcript_path å­—æ®µ\n            return searchInObject(hook.payload, 'transcript_path');\n        }\n\n        // åœ¨å¯¹è±¡ä¸­é€’å½’æœç´¢æŒ‡å®šå­—æ®µ\n        function searchInObject(obj, fieldName) {\n            if (!obj || typeof obj !== 'object') return false;\n\n            for (const key in obj) {\n                if (key === fieldName) return true;\n\n                if (typeof obj[key] === 'object' && obj[key] !== null) {\n                    if (searchInObject(obj[key], fieldName)) return true;\n                }\n            }\n\n            return false;\n        }\n\n        // è·å– transcript_path çš„å€¼\n        function getTranscriptPath(hook) {\n            if (!hook.payload) return null;\n\n            // æ£€æŸ¥ payload ä¸­æ˜¯å¦ç›´æ¥åŒ…å« transcript_path\n            if (hook.payload.transcript_path) return hook.payload.transcript_path;\n\n            // æ·±åº¦æœç´¢å¹¶è¿”å› transcript_path çš„å€¼\n            return findValueInObject(hook.payload, 'transcript_path');\n        }\n\n        // åœ¨å¯¹è±¡ä¸­é€’å½’æŸ¥æ‰¾æŒ‡å®šå­—æ®µçš„å€¼\n        function findValueInObject(obj, fieldName) {\n            if (!obj || typeof obj !== 'object') return null;\n\n            for (const key in obj) {\n                if (key === fieldName) return obj[key];\n\n                if (typeof obj[key] === 'object' && obj[key] !== null) {\n                    const found = findValueInObject(obj[key], fieldName);\n                    if (found !== null) return found;\n                }\n            }\n\n            return null;\n        }\n\n        // åˆ›å»º hook å…ƒç´ \n        function createHookElement(hook, index) {\n            const div = document.createElement('div');\n            div.className = 'hook-item';\n\n            const eventClass = getEventClass(hook.event);\n            const formattedTime = formatTimestamp(hook.ts);\n            const eventDescription = getEventDescription(hook.event, hook.phase);\n            const hasTranscript = hasTranscriptPath(hook);\n            const transcriptPath = getTranscriptPath(hook);\n\n            div.innerHTML = `\n                <div class=\"hook-header\">\n                    <div class=\"hook-event\">\n                        <span class=\"event-badge ${eventClass}\">${hook.event}</span>\n                        ${hasTranscript ? '<span class=\"has-transcript-badge\">åŒ…å«è½¬å½•è·¯å¾„</span>' : ''}\n                    </div>\n                    <div class=\"hook-meta\">\n                        <div class=\"hook-timestamp\">${formattedTime}</div>\n                    </div>\n                </div>\n                <div class=\"hook-message\">${hook.message}</div>\n                <div class=\"hook-description\">${hook.description || eventDescription}</div>\n                ${hasTranscript && transcriptPath ? `\n                <div class=\"transcript-path\">\n                    <div class=\"transcript-path-label\">ğŸ“„ è½¬å½•è·¯å¾„ (transcript_path):</div>\n                    <div class=\"transcript-path-value\">${escapeHtml(transcriptPath)}</div>\n                </div>\n                ` : ''}\n                <div class=\"hook-details\">\n                    <div class=\"part-card\">\n                        <div class=\"part-header\" onclick=\"toggleDetail('payload-${index}')\">\n                            <span>Payload</span>\n                            <span class=\"toggle-icon\" id=\"icon-payload-${index}\">â–¼</span>\n                        </div>\n                        <div class=\"part-content hidden\" id=\"payload-${index}\">\n                            ${formatJson(hook.payload)}\n                        </div>\n                    </div>\n                </div>\n            `;\n\n            return div;\n        }\n\n        // è·å–äº‹ä»¶æè¿°\n        function getEventDescription(event, phase) {\n            switch (event) {\n                case 'PreToolUse':\n                    return 'å·¥å…·æ‰§è¡Œå‰è§¦å‘ï¼Œå¯åŸºäºå‚æ•°é˜»æ­¢æˆ–è°ƒæ•´è°ƒç”¨ã€‚';\n                case 'PostToolUse':\n                    return 'å·¥å…·æˆåŠŸæ‰§è¡Œåè§¦å‘ï¼Œå¸¸ç”¨äºæ ¼å¼åŒ–ã€æ ¡éªŒæˆ–è®°å½•ç»“æœã€‚';\n                case 'UserPromptSubmit':\n                    return 'ç”¨æˆ·æäº¤æç¤ºå‰è§¦å‘ï¼Œå¯è¿›è¡Œæç¤ºæ ¡éªŒæˆ–å¢å¼ºã€‚';\n                case 'Notification':\n                    return 'å½“ç³»ç»Ÿå‘é€é€šçŸ¥ï¼ˆéœ€æˆæƒæˆ–ç­‰å¾…è¾“å…¥ï¼‰æ—¶è§¦å‘ã€‚';\n                case 'Stop':\n                    return 'ä¸»ä»£ç†å®Œæˆå“åº”æ—¶è§¦å‘ï¼ˆç”¨æˆ·ä¸­æ–­ä¸è§¦å‘ï¼‰ã€‚';\n                case 'SubagentStop':\n                    return 'å­ä»£ç†ä»»åŠ¡å®Œæˆæ—¶è§¦å‘ï¼Œç”¨äºè®°å½•å­ä»»åŠ¡ç»“æŸã€‚';\n                case 'PreCompact':\n                    return phase === 'manual'\n                        ? 'æ‰‹åŠ¨å‹ç¼©å‰è§¦å‘ï¼Œç”¨äºè®°å½•æˆ–å‡†å¤‡å‹ç¼©ã€‚'\n                        : 'è‡ªåŠ¨å‹ç¼©å‰è§¦å‘ï¼ˆä¸Šä¸‹æ–‡æ¥è¿‘ä¸Šé™ï¼‰ï¼Œç”¨äºè®°å½•æˆ–å‡†å¤‡å‹ç¼©ã€‚';\n                case 'SessionStart':\n                    switch (phase) {\n                        case 'startup':\n                            return 'æ–°ä¼šè¯å¯åŠ¨æ—¶è§¦å‘ï¼Œç”¨äºåŠ è½½ä¸Šä¸‹æ–‡æˆ–è®¾ç½®ç¯å¢ƒã€‚';\n                        case 'resume':\n                            return 'æ¢å¤ä¼šè¯æ—¶è§¦å‘ï¼Œç”¨äºç»§ç»­å…ˆå‰ä¸Šä¸‹æ–‡ã€‚';\n                        case 'clear':\n                            return 'æ¸…ç©ºä¼šè¯åè§¦å‘ï¼Œç”¨äºé‡ç½®ç¯å¢ƒä¸ä¸Šä¸‹æ–‡ã€‚';\n                        case 'compact':\n                            return 'å› å‹ç¼©æ“ä½œè§¦å‘çš„ä¼šè¯å¯åŠ¨ï¼Œç”¨äºç»´æŒä¸Šä¸‹æ–‡ã€‚';\n                        default:\n                            return 'ä¼šè¯å¯åŠ¨ç›¸å…³äº‹ä»¶ï¼Œåˆå§‹åŒ–æˆ–æ¢å¤ä¸Šä¸‹æ–‡ã€‚';\n                    }\n                case 'SessionEnd':\n                    return 'ä¼šè¯ç»“æŸæ—¶è§¦å‘ï¼Œå¸¸ç”¨äºæ”¶å°¾ä¸æ¸…ç†ã€‚';\n                default:\n                    return 'æœªçŸ¥äº‹ä»¶ã€‚';\n            }\n        }\n\n        // è·å–äº‹ä»¶æ ·å¼ç±»\n        function getEventClass(event) {\n            switch (event) {\n                case 'UserPromptSubmit': return 'event-userprompt';\n                case 'PreToolUse': return 'event-pretool';\n                case 'PostToolUse': return 'event-posttool';\n                case 'Notification': return 'event-notification';\n                case 'Stop': return 'event-stop';\n                case 'SubagentStop': return 'event-subagent-stop';\n                case 'PreCompact': return 'event-pre-compact';\n                case 'SessionStart': return 'event-session-start';\n                case 'SessionEnd': return 'event-session-end';\n                default: return 'event-default';\n            }\n        }\n\n        // æ ¼å¼åŒ–æ—¶é—´æˆ³\n        function formatTimestamp(ts) {\n            const date = new Date(ts);\n            return date.toLocaleString('zh-CN');\n        }\n\n        // æ ¼å¼åŒ– JSON\n        function formatJson(obj, indent = 0) {\n            if (!obj) return '';\n\n            try {\n                const spaces = '  '.repeat(indent);\n                let result = '';\n\n                if (Array.isArray(obj)) {\n                    result += '[\\n';\n                    obj.forEach((item, index) => {\n                        result += spaces + '  ';\n                        if (typeof item === 'object' && item !== null) {\n                            result += formatJson(item, indent + 1);\n                        } else {\n                            result += formatJsonValue(item);\n                        }\n                        if (index < obj.length - 1) result += ',';\n                        result += '\\n';\n                    });\n                    result += spaces + ']';\n                } else if (typeof obj === 'object' && obj !== null) {\n                    result += '{\\n';\n                    const keys = Object.keys(obj);\n                    keys.forEach((key, index) => {\n                        result += spaces + '  ';\n                        result += `<span class=\"json-key\">\"${escapeHtml(key)}\"</span>: `;\n\n                        if (typeof obj[key] === 'object' && obj[key] !== null) {\n                            result += formatJson(obj[key], indent + 1);\n                        } else {\n                            result += formatJsonValue(obj[key]);\n                        }\n\n                        if (index < keys.length - 1) result += ',';\n                        result += '\\n';\n                    });\n                    result += spaces + '}';\n                } else {\n                    result += formatJsonValue(obj);\n                }\n\n                return result;\n            } catch (error) {\n                return escapeHtml(JSON.stringify(obj));\n            }\n        }\n\n        // æ ¼å¼åŒ– JSON å€¼\n        function formatJsonValue(value) {\n            if (typeof value === 'string') {\n                if (value.startsWith('http://') || value.startsWith('https://')) {\n                    return `<span class=\"json-url\" onclick=\"window.open('${escapeHtml(value)}', '_blank')\">\"${escapeHtml(value)}\"</span>`;\n                }\n                return `<span class=\"json-string\">\"${escapeHtml(value)}\"</span>`;\n            } else if (typeof value === 'number') {\n                return `<span class=\"json-number\">${value}</span>`;\n            } else if (typeof value === 'boolean') {\n                return `<span class=\"json-boolean\">${value}</span>`;\n            } else if (value === null) {\n                return `<span class=\"json-null\">null</span>`;\n            } else {\n                return `<span style=\"color: #666;\">${value}</span>`;\n            }\n        }\n\n        // HTML è½¬ä¹‰\n        function escapeHtml(text) {\n            const div = document.createElement('div');\n            div.textContent = text;\n            return div.innerHTML;\n        }\n\n        // åˆ‡æ¢è¯¦æƒ…æ˜¾ç¤º\n        function toggleDetail(id) {\n            const content = document.getElementById(id);\n            const icon = document.getElementById('icon-' + id);\n\n            if (content.classList.contains('hidden')) {\n                content.classList.remove('hidden');\n                icon.classList.add('rotated');\n            } else {\n                content.classList.add('hidden');\n                icon.classList.remove('rotated');\n            }\n        }\n\n        // è¿‡æ»¤å’Œæœç´¢\n        document.getElementById('event-filter').addEventListener('change', applyFilters);\n        document.getElementById('search-input').addEventListener('input', applyFilters);\n\n        function applyFilters() {\n            const eventFilter = document.getElementById('event-filter').value;\n            const searchText = document.getElementById('search-input').value.toLowerCase();\n\n            filteredData = hooksData.filter(hook => {\n                const matchEvent = !eventFilter || hook.event === eventFilter;\n                const matchSearch = !searchText ||\n                    JSON.stringify(hook).toLowerCase().includes(searchText);\n\n                return matchEvent && matchSearch;\n            });\n\n            updateStatistics();\n            renderHooks();\n        }\n\n        // æ ¼å¼åŒ–æ–‡ä»¶å¤§å°\n        function formatFileSize(bytes) {\n            if (bytes === 0) return '0 Bytes';\n            const k = 1024;\n            const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n            const i = Math.floor(Math.log(bytes) / Math.log(k));\n            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n        }\n\n        // é¡µé¢åŠ è½½æ—¶æ‰§è¡Œ\n        document.addEventListener('DOMContentLoaded', function() {\n            // æ·»åŠ åˆå§‹åŠ è½½åŠ¨ç”»\n            const cards = document.querySelectorAll('.stat-card, .upload-card');\n            cards.forEach((card, index) => {\n                card.style.opacity = '0';\n                card.style.transform = 'translateY(20px)';\n                setTimeout(() => {\n                    card.style.transition = 'opacity 0.5s ease, transform 0.5s ease';\n                    card.style.opacity = '1';\n                    card.style.transform = 'translateY(0)';\n                }, index * 100);\n            });\n\n            // è®¾ç½®æ–‡ä»¶ä¸Šä¼ \n            setupFileUpload();\n        });\n\n            </script>\n</body>\n</html>","structuredPatch":[{"oldStart":1012,"oldLines":6,"newStart":1012,"newLines":19,"lines":["                 <div class=\"transcript-path\">","                     <div class=\"transcript-path-label\">ğŸ“„ è½¬å½•è·¯å¾„ (transcript_path):</div>","                     <div class=\"transcript-path-value\">${escapeHtml(transcriptPath)}</div>","+                    <div class=\"transcript-actions\">","+                        <button class=\"transcript-btn copy\" onclick=\"copyTranscriptPath('${escapeHtml(transcriptPath)}')\" title=\"å¤åˆ¶è·¯å¾„\">","+                            ğŸ“‹ å¤åˆ¶","+                        </button>","+                        ${isUrl(transcriptPath) ?","+                            `<button class=\"transcript-btn open\" onclick=\"openTranscriptUrl('${escapeHtml(transcriptPath)}')\" title=\"åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€\">","+                                ğŸ”— æ‰“å¼€é“¾æ¥","+                            </button>` :","+                            `<button class=\"transcript-btn open\" onclick=\"tryOpenTranscriptFile('${escapeHtml(transcriptPath)}')\" title=\"å°è¯•æ‰“å¼€æ–‡ä»¶\">","+                                ğŸ“‚ å°è¯•æ‰“å¼€","+                            </button>`","+                        }","+                    </div>","                 </div>","                 ` : ''}","                 <div class=\"hook-details\">"]}],"userModified":false,"replaceAll":false}}}
{"ts":"2025-11-05T02:29:28.220Z","event":"PreToolUse","phase":"","message":"PreToolUseäº‹ä»¶æ­£åœ¨æ‰§è¡Œ","description":"å·¥å…·æ‰§è¡Œå‰è§¦å‘ï¼Œå¯åŸºäºå‚æ•°é˜»æ­¢æˆ–è°ƒæ•´è°ƒç”¨ã€‚","doc_url":"https://docs.claude.com/zh-CN/docs/claude-code/hooks#pretooluse","payload":{"session_id":"c7c21516-7e1e-49b2-8ae5-4e1bb98e9692","transcript_path":"C:\\Users\\WTCL\\.claude\\projects\\i--claude-code-proxy\\c7c21516-7e1e-49b2-8ae5-4e1bb98e9692.jsonl","cwd":"i:\\claude-code-proxy","permission_mode":"acceptEdits","hook_event_name":"PreToolUse","tool_name":"Edit","tool_input":{"file_path":"i:\\claude-code-proxy\\analyze\\hooks.html","old_string":"    // æ ¼å¼åŒ–æ–‡ä»¶å¤§å°\n        function formatFileSize(bytes) {\n            if (bytes === 0) return '0 Bytes';\n            const k = 1024;\n            const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n            const i = Math.floor(Math.log(bytes) / Math.log(k));\n            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n        }","new_string":"    // æ£€æŸ¥æ˜¯å¦ä¸º URL\n        function isUrl(text) {\n            try {\n                new URL(text);\n                return true;\n            } catch {\n                return false;\n            }\n        }\n\n        // å¤åˆ¶è½¬å½•è·¯å¾„åˆ°å‰ªè´´æ¿\n        async function copyTranscriptPath(path) {\n            try {\n                await navigator.clipboard.writeText(path);\n                showToast('è·¯å¾„å·²å¤åˆ¶åˆ°å‰ªè´´æ¿', 'success');\n            } catch (error) {\n                // é™çº§æ–¹æ¡ˆ\n                const textArea = document.createElement('textarea');\n                textArea.value = path;\n                document.body.appendChild(textArea);\n                textArea.select();\n                document.execCommand('copy');\n                document.body.removeChild(textArea);\n                showToast('è·¯å¾„å·²å¤åˆ¶åˆ°å‰ªè´´æ¿', 'success');\n            }\n        }\n\n        // æ‰“å¼€è½¬å½•é“¾æ¥ï¼ˆURLï¼‰\n        function openTranscriptUrl(url) {\n            window.open(url, '_blank');\n        }\n\n        // å°è¯•æ‰“å¼€æœ¬åœ°æ–‡ä»¶ï¼ˆé€šè¿‡æ–‡ä»¶é€‰æ‹©å™¨æ¨¡æ‹Ÿï¼‰\n        function tryOpenTranscriptFile(path) {\n            // ç”±äºæµè§ˆå™¨å®‰å…¨é™åˆ¶ï¼Œæ— æ³•ç›´æ¥æ‰“å¼€æœ¬åœ°æ–‡ä»¶è·¯å¾„\n            // è¿™é‡Œæä¾›å‡ ç§æ›¿ä»£æ–¹æ¡ˆï¼š\n\n            // æ–¹æ¡ˆ1ï¼šå¤åˆ¶è·¯å¾„åˆ°å‰ªè´´æ¿\n            copyTranscriptPath(path);\n\n            // æ–¹æ¡ˆ2ï¼šæ˜¾ç¤ºæç¤ºä¿¡æ¯\n            showToast('æµè§ˆå™¨å®‰å…¨é™åˆ¶æ— æ³•ç›´æ¥æ‰“å¼€æœ¬åœ°æ–‡ä»¶ï¼Œè·¯å¾„å·²å¤åˆ¶ã€‚è¯·åœ¨æ–‡ä»¶ç®¡ç†å™¨ä¸­æ‰‹åŠ¨æ‰“å¼€ã€‚', 'info');\n\n            // æ–¹æ¡ˆ3ï¼šå°è¯•åˆ›å»ºæ–‡ä»¶ä¸‹è½½ï¼ˆå¦‚æœè·¯å¾„æ˜¯å¯è®¿é—®çš„ï¼‰\n            if (path.startsWith('file://')) {\n                showToast('æ£€æµ‹åˆ°æ–‡ä»¶åè®®ï¼Œä½†æµè§ˆå™¨é™åˆ¶ç›´æ¥è®¿é—®ã€‚è¯·æ‰‹åŠ¨å¤åˆ¶è·¯å¾„ã€‚', 'warning');\n            } else if (path.startsWith('http://') || path.startsWith('https://')) {\n                // å¦‚æœæ˜¯ http/https é“¾æ¥ï¼Œç›´æ¥æ‰“å¼€\n                openTranscriptUrl(path);\n            } else {\n                // æœ¬åœ°æ–‡ä»¶è·¯å¾„ï¼Œåªèƒ½å¤åˆ¶\n                showToast(`æœ¬åœ°æ–‡ä»¶è·¯å¾„: ${path}\\nå·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼Œè¯·åœ¨æ–‡ä»¶ç®¡ç†å™¨ä¸­æ‰‹åŠ¨æ‰“å¼€ã€‚`, 'info');\n            }\n        }\n\n        // æ˜¾ç¤ºæç¤ºä¿¡æ¯\n        function showToast(message, type = 'info') {\n            const toast = document.createElement('div');\n            toast.style.cssText = `\n                position: fixed;\n                top: 20px;\n                right: 20px;\n                background: ${type === 'success' ? '#28a745' : type === 'warning' ? '#ffc107' : type === 'error' ? '#dc3545' : '#007bff'};\n                color: white;\n                padding: 12px 16px;\n                border-radius: 6px;\n                font-size: 0.9rem;\n                z-index: 10000;\n                max-width: 400px;\n                word-wrap: break-word;\n                box-shadow: 0 4px 12px rgba(0,0,0,0.15);\n                animation: slideInRight 0.3s ease;\n            `;\n\n            toast.textContent = message;\n            document.body.appendChild(toast);\n\n            // 3ç§’åè‡ªåŠ¨æ¶ˆå¤±\n            setTimeout(() => {\n                toast.style.animation = 'slideOutRight 0.3s ease';\n                setTimeout(() => {\n                    if (toast.parentNode) {\n                        document.body.removeChild(toast);\n                    }\n                }, 300);\n            }, 3000);\n        }\n\n        // æ·»åŠ åŠ¨ç”»æ ·å¼\n        const style = document.createElement('style');\n        style.textContent = `\n            @keyframes slideInRight {\n                from {\n                    transform: translateX(100%);\n                    opacity: 0;\n                }\n                to {\n                    transform: translateX(0);\n                    opacity: 1;\n                }\n            }\n\n            @keyframes slideOutRight {\n                from {\n                    transform: translateX(0);\n                    opacity: 1;\n                }\n                to {\n                    transform: translateX(100%);\n                    opacity: 0;\n                }\n            }\n        `;\n        document.head.appendChild(style);\n\n        // æ ¼å¼åŒ–æ–‡ä»¶å¤§å°\n        function formatFileSize(bytes) {\n            if (bytes === 0) return '0 Bytes';\n            const k = 1024;\n            const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n            const i = Math.floor(Math.log(bytes) / Math.log(k));\n            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n        }"}}}
{"ts":"2025-11-05T02:29:29.885Z","event":"PostToolUse","phase":"","message":"PostToolUseäº‹ä»¶æ­£åœ¨æ‰§è¡Œ","description":"å·¥å…·æˆåŠŸæ‰§è¡Œåè§¦å‘ï¼Œå¸¸ç”¨äºæ ¼å¼åŒ–ã€æ ¡éªŒæˆ–è®°å½•ç»“æœã€‚","doc_url":"https://docs.claude.com/zh-CN/docs/claude-code/hooks#posttooluse","payload":{"session_id":"c7c21516-7e1e-49b2-8ae5-4e1bb98e9692","transcript_path":"C:\\Users\\WTCL\\.claude\\projects\\i--claude-code-proxy\\c7c21516-7e1e-49b2-8ae5-4e1bb98e9692.jsonl","cwd":"i:\\claude-code-proxy","permission_mode":"acceptEdits","hook_event_name":"PostToolUse","tool_name":"Edit","tool_input":{"file_path":"i:\\claude-code-proxy\\analyze\\hooks.html","old_string":"    // æ ¼å¼åŒ–æ–‡ä»¶å¤§å°\n        function formatFileSize(bytes) {\n            if (bytes === 0) return '0 Bytes';\n            const k = 1024;\n            const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n            const i = Math.floor(Math.log(bytes) / Math.log(k));\n            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n        }","new_string":"    // æ£€æŸ¥æ˜¯å¦ä¸º URL\n        function isUrl(text) {\n            try {\n                new URL(text);\n                return true;\n            } catch {\n                return false;\n            }\n        }\n\n        // å¤åˆ¶è½¬å½•è·¯å¾„åˆ°å‰ªè´´æ¿\n        async function copyTranscriptPath(path) {\n            try {\n                await navigator.clipboard.writeText(path);\n                showToast('è·¯å¾„å·²å¤åˆ¶åˆ°å‰ªè´´æ¿', 'success');\n            } catch (error) {\n                // é™çº§æ–¹æ¡ˆ\n                const textArea = document.createElement('textarea');\n                textArea.value = path;\n                document.body.appendChild(textArea);\n                textArea.select();\n                document.execCommand('copy');\n                document.body.removeChild(textArea);\n                showToast('è·¯å¾„å·²å¤åˆ¶åˆ°å‰ªè´´æ¿', 'success');\n            }\n        }\n\n        // æ‰“å¼€è½¬å½•é“¾æ¥ï¼ˆURLï¼‰\n        function openTranscriptUrl(url) {\n            window.open(url, '_blank');\n        }\n\n        // å°è¯•æ‰“å¼€æœ¬åœ°æ–‡ä»¶ï¼ˆé€šè¿‡æ–‡ä»¶é€‰æ‹©å™¨æ¨¡æ‹Ÿï¼‰\n        function tryOpenTranscriptFile(path) {\n            // ç”±äºæµè§ˆå™¨å®‰å…¨é™åˆ¶ï¼Œæ— æ³•ç›´æ¥æ‰“å¼€æœ¬åœ°æ–‡ä»¶è·¯å¾„\n            // è¿™é‡Œæä¾›å‡ ç§æ›¿ä»£æ–¹æ¡ˆï¼š\n\n            // æ–¹æ¡ˆ1ï¼šå¤åˆ¶è·¯å¾„åˆ°å‰ªè´´æ¿\n            copyTranscriptPath(path);\n\n            // æ–¹æ¡ˆ2ï¼šæ˜¾ç¤ºæç¤ºä¿¡æ¯\n            showToast('æµè§ˆå™¨å®‰å…¨é™åˆ¶æ— æ³•ç›´æ¥æ‰“å¼€æœ¬åœ°æ–‡ä»¶ï¼Œè·¯å¾„å·²å¤åˆ¶ã€‚è¯·åœ¨æ–‡ä»¶ç®¡ç†å™¨ä¸­æ‰‹åŠ¨æ‰“å¼€ã€‚', 'info');\n\n            // æ–¹æ¡ˆ3ï¼šå°è¯•åˆ›å»ºæ–‡ä»¶ä¸‹è½½ï¼ˆå¦‚æœè·¯å¾„æ˜¯å¯è®¿é—®çš„ï¼‰\n            if (path.startsWith('file://')) {\n                showToast('æ£€æµ‹åˆ°æ–‡ä»¶åè®®ï¼Œä½†æµè§ˆå™¨é™åˆ¶ç›´æ¥è®¿é—®ã€‚è¯·æ‰‹åŠ¨å¤åˆ¶è·¯å¾„ã€‚', 'warning');\n            } else if (path.startsWith('http://') || path.startsWith('https://')) {\n                // å¦‚æœæ˜¯ http/https é“¾æ¥ï¼Œç›´æ¥æ‰“å¼€\n                openTranscriptUrl(path);\n            } else {\n                // æœ¬åœ°æ–‡ä»¶è·¯å¾„ï¼Œåªèƒ½å¤åˆ¶\n                showToast(`æœ¬åœ°æ–‡ä»¶è·¯å¾„: ${path}\\nå·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼Œè¯·åœ¨æ–‡ä»¶ç®¡ç†å™¨ä¸­æ‰‹åŠ¨æ‰“å¼€ã€‚`, 'info');\n            }\n        }\n\n        // æ˜¾ç¤ºæç¤ºä¿¡æ¯\n        function showToast(message, type = 'info') {\n            const toast = document.createElement('div');\n            toast.style.cssText = `\n                position: fixed;\n                top: 20px;\n                right: 20px;\n                background: ${type === 'success' ? '#28a745' : type === 'warning' ? '#ffc107' : type === 'error' ? '#dc3545' : '#007bff'};\n                color: white;\n                padding: 12px 16px;\n                border-radius: 6px;\n                font-size: 0.9rem;\n                z-index: 10000;\n                max-width: 400px;\n                word-wrap: break-word;\n                box-shadow: 0 4px 12px rgba(0,0,0,0.15);\n                animation: slideInRight 0.3s ease;\n            `;\n\n            toast.textContent = message;\n            document.body.appendChild(toast);\n\n            // 3ç§’åè‡ªåŠ¨æ¶ˆå¤±\n            setTimeout(() => {\n                toast.style.animation = 'slideOutRight 0.3s ease';\n                setTimeout(() => {\n                    if (toast.parentNode) {\n                        document.body.removeChild(toast);\n                    }\n                }, 300);\n            }, 3000);\n        }\n\n        // æ·»åŠ åŠ¨ç”»æ ·å¼\n        const style = document.createElement('style');\n        style.textContent = `\n            @keyframes slideInRight {\n                from {\n                    transform: translateX(100%);\n                    opacity: 0;\n                }\n                to {\n                    transform: translateX(0);\n                    opacity: 1;\n                }\n            }\n\n            @keyframes slideOutRight {\n                from {\n                    transform: translateX(0);\n                    opacity: 1;\n                }\n                to {\n                    transform: translateX(100%);\n                    opacity: 0;\n                }\n            }\n        `;\n        document.head.appendChild(style);\n\n        // æ ¼å¼åŒ–æ–‡ä»¶å¤§å°\n        function formatFileSize(bytes) {\n            if (bytes === 0) return '0 Bytes';\n            const k = 1024;\n            const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n            const i = Math.floor(Math.log(bytes) / Math.log(k));\n            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n        }"},"tool_response":{"filePath":"i:\\claude-code-proxy\\analyze\\hooks.html","oldString":"    // æ ¼å¼åŒ–æ–‡ä»¶å¤§å°\n        function formatFileSize(bytes) {\n            if (bytes === 0) return '0 Bytes';\n            const k = 1024;\n            const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n            const i = Math.floor(Math.log(bytes) / Math.log(k));\n            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n        }","newString":"    // æ£€æŸ¥æ˜¯å¦ä¸º URL\n        function isUrl(text) {\n            try {\n                new URL(text);\n                return true;\n            } catch {\n                return false;\n            }\n        }\n\n        // å¤åˆ¶è½¬å½•è·¯å¾„åˆ°å‰ªè´´æ¿\n        async function copyTranscriptPath(path) {\n            try {\n                await navigator.clipboard.writeText(path);\n                showToast('è·¯å¾„å·²å¤åˆ¶åˆ°å‰ªè´´æ¿', 'success');\n            } catch (error) {\n                // é™çº§æ–¹æ¡ˆ\n                const textArea = document.createElement('textarea');\n                textArea.value = path;\n                document.body.appendChild(textArea);\n                textArea.select();\n                document.execCommand('copy');\n                document.body.removeChild(textArea);\n                showToast('è·¯å¾„å·²å¤åˆ¶åˆ°å‰ªè´´æ¿', 'success');\n            }\n        }\n\n        // æ‰“å¼€è½¬å½•é“¾æ¥ï¼ˆURLï¼‰\n        function openTranscriptUrl(url) {\n            window.open(url, '_blank');\n        }\n\n        // å°è¯•æ‰“å¼€æœ¬åœ°æ–‡ä»¶ï¼ˆé€šè¿‡æ–‡ä»¶é€‰æ‹©å™¨æ¨¡æ‹Ÿï¼‰\n        function tryOpenTranscriptFile(path) {\n            // ç”±äºæµè§ˆå™¨å®‰å…¨é™åˆ¶ï¼Œæ— æ³•ç›´æ¥æ‰“å¼€æœ¬åœ°æ–‡ä»¶è·¯å¾„\n            // è¿™é‡Œæä¾›å‡ ç§æ›¿ä»£æ–¹æ¡ˆï¼š\n\n            // æ–¹æ¡ˆ1ï¼šå¤åˆ¶è·¯å¾„åˆ°å‰ªè´´æ¿\n            copyTranscriptPath(path);\n\n            // æ–¹æ¡ˆ2ï¼šæ˜¾ç¤ºæç¤ºä¿¡æ¯\n            showToast('æµè§ˆå™¨å®‰å…¨é™åˆ¶æ— æ³•ç›´æ¥æ‰“å¼€æœ¬åœ°æ–‡ä»¶ï¼Œè·¯å¾„å·²å¤åˆ¶ã€‚è¯·åœ¨æ–‡ä»¶ç®¡ç†å™¨ä¸­æ‰‹åŠ¨æ‰“å¼€ã€‚', 'info');\n\n            // æ–¹æ¡ˆ3ï¼šå°è¯•åˆ›å»ºæ–‡ä»¶ä¸‹è½½ï¼ˆå¦‚æœè·¯å¾„æ˜¯å¯è®¿é—®çš„ï¼‰\n            if (path.startsWith('file://')) {\n                showToast('æ£€æµ‹åˆ°æ–‡ä»¶åè®®ï¼Œä½†æµè§ˆå™¨é™åˆ¶ç›´æ¥è®¿é—®ã€‚è¯·æ‰‹åŠ¨å¤åˆ¶è·¯å¾„ã€‚', 'warning');\n            } else if (path.startsWith('http://') || path.startsWith('https://')) {\n                // å¦‚æœæ˜¯ http/https é“¾æ¥ï¼Œç›´æ¥æ‰“å¼€\n                openTranscriptUrl(path);\n            } else {\n                // æœ¬åœ°æ–‡ä»¶è·¯å¾„ï¼Œåªèƒ½å¤åˆ¶\n                showToast(`æœ¬åœ°æ–‡ä»¶è·¯å¾„: ${path}\\nå·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼Œè¯·åœ¨æ–‡ä»¶ç®¡ç†å™¨ä¸­æ‰‹åŠ¨æ‰“å¼€ã€‚`, 'info');\n            }\n        }\n\n        // æ˜¾ç¤ºæç¤ºä¿¡æ¯\n        function showToast(message, type = 'info') {\n            const toast = document.createElement('div');\n            toast.style.cssText = `\n                position: fixed;\n                top: 20px;\n                right: 20px;\n                background: ${type === 'success' ? '#28a745' : type === 'warning' ? '#ffc107' : type === 'error' ? '#dc3545' : '#007bff'};\n                color: white;\n                padding: 12px 16px;\n                border-radius: 6px;\n                font-size: 0.9rem;\n                z-index: 10000;\n                max-width: 400px;\n                word-wrap: break-word;\n                box-shadow: 0 4px 12px rgba(0,0,0,0.15);\n                animation: slideInRight 0.3s ease;\n            `;\n\n            toast.textContent = message;\n            document.body.appendChild(toast);\n\n            // 3ç§’åè‡ªåŠ¨æ¶ˆå¤±\n            setTimeout(() => {\n                toast.style.animation = 'slideOutRight 0.3s ease';\n                setTimeout(() => {\n                    if (toast.parentNode) {\n                        document.body.removeChild(toast);\n                    }\n                }, 300);\n            }, 3000);\n        }\n\n        // æ·»åŠ åŠ¨ç”»æ ·å¼\n        const style = document.createElement('style');\n        style.textContent = `\n            @keyframes slideInRight {\n                from {\n                    transform: translateX(100%);\n                    opacity: 0;\n                }\n                to {\n                    transform: translateX(0);\n                    opacity: 1;\n                }\n            }\n\n            @keyframes slideOutRight {\n                from {\n                    transform: translateX(0);\n                    opacity: 1;\n                }\n                to {\n                    transform: translateX(100%);\n                    opacity: 0;\n                }\n            }\n        `;\n        document.head.appendChild(style);\n\n        // æ ¼å¼åŒ–æ–‡ä»¶å¤§å°\n        function formatFileSize(bytes) {\n            if (bytes === 0) return '0 Bytes';\n            const k = 1024;\n            const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n            const i = Math.floor(Math.log(bytes) / Math.log(k));\n            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n        }","originalFile":"<!DOCTYPE html>\n<html lang=\"zh-CN\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Hooks æ—¥å¿—åˆ†æ</title>\n    <style>\n        * {\n            margin: 0;\n            padding: 0;\n            box-sizing: border-box;\n        }\n\n        body {\n            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n            min-height: 100vh;\n            padding: 20px;\n        }\n\n        .container {\n            max-width: 1400px;\n            margin: 0 auto;\n        }\n\n        .header {\n            text-align: center;\n            color: white;\n            margin-bottom: 30px;\n        }\n\n        .header h1 {\n            font-size: 2.5rem;\n            margin-bottom: 10px;\n            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);\n        }\n\n        .header p {\n            font-size: 1.1rem;\n            opacity: 0.9;\n        }\n\n        /* æ–‡ä»¶ä¸Šä¼ ç»„ä»¶æ ·å¼ */\n        .upload-section {\n            margin-bottom: 30px;\n        }\n\n        .upload-card {\n            background: white;\n            border-radius: 15px;\n            padding: 25px;\n            box-shadow: 0 10px 30px rgba(0,0,0,0.1);\n            border: 2px dashed #cbd5e0;\n            transition: all 0.3s ease;\n        }\n\n        .upload-card:hover {\n            border-color: #667eea;\n            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.2);\n        }\n\n        .upload-header {\n            font-size: 1.2rem;\n            font-weight: bold;\n            color: #4a5568;\n            margin-bottom: 20px;\n            text-align: center;\n        }\n\n        .upload-area {\n            border: 2px dashed #e2e8f0;\n            border-radius: 10px;\n            padding: 40px 20px;\n            text-align: center;\n            transition: all 0.3s ease;\n            cursor: pointer;\n        }\n\n        .upload-area:hover {\n            border-color: #667eea;\n            background: #f7fafc;\n        }\n\n        .upload-area.dragover {\n            border-color: #667eea;\n            background: #edf2f7;\n            transform: scale(1.02);\n        }\n\n        .upload-icon {\n            font-size: 3rem;\n            margin-bottom: 15px;\n            opacity: 0.7;\n        }\n\n        .upload-text {\n            font-size: 1.1rem;\n            color: #4a5568;\n            margin-bottom: 10px;\n            font-weight: 500;\n        }\n\n        .upload-hint {\n            font-size: 0.9rem;\n            color: #718096;\n            margin-bottom: 20px;\n        }\n\n        .upload-btn {\n            background: #667eea;\n            color: white;\n            border: none;\n            padding: 12px 24px;\n            border-radius: 8px;\n            font-size: 1rem;\n            font-weight: 500;\n            cursor: pointer;\n            transition: all 0.3s ease;\n        }\n\n        .upload-btn:hover {\n            background: #5a67d8;\n            transform: translateY(-2px);\n            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);\n        }\n\n        .file-info {\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            background: #f7fafc;\n            padding: 15px 20px;\n            border-radius: 8px;\n            margin-top: 15px;\n        }\n\n        .file-name {\n            font-weight: 500;\n            color: #4a5568;\n            flex: 1;\n            overflow: hidden;\n            text-overflow: ellipsis;\n            white-space: nowrap;\n        }\n\n        .clear-btn {\n            background: #fc8181;\n            color: white;\n            border: none;\n            width: 30px;\n            height: 30px;\n            border-radius: 50%;\n            cursor: pointer;\n            font-size: 1rem;\n            transition: all 0.3s ease;\n        }\n\n        .clear-btn:hover {\n            background: #f56565;\n            transform: scale(1.1);\n        }\n\n        /* æ¶ˆæ¯æç¤ºæ ·å¼ */\n        .upload-message {\n            margin-top: 15px;\n            padding: 12px 16px;\n            border-radius: 8px;\n            font-size: 0.9rem;\n            animation: slideIn 0.3s ease;\n        }\n\n        .upload-success {\n            background: #d4edda;\n            color: #155724;\n            border: 1px solid #c3e6cb;\n        }\n\n        .upload-error {\n            background: #f8d7da;\n            color: #721c24;\n            border: 1px solid #f5c6cb;\n        }\n\n        @keyframes slideIn {\n            from {\n                opacity: 0;\n                transform: translateY(-10px);\n            }\n            to {\n                opacity: 1;\n                transform: translateY(0);\n            }\n        }\n\n        #file-input {\n            display: none;\n        }\n\n        .stats-grid {\n            display: grid;\n            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\n            gap: 20px;\n            margin-bottom: 30px;\n        }\n\n        .stat-card {\n            background: white;\n            border-radius: 15px;\n            padding: 25px;\n            box-shadow: 0 10px 30px rgba(0,0,0,0.2);\n            text-align: center;\n            transition: transform 0.3s ease, box-shadow 0.3s ease;\n        }\n\n        .stat-card:hover {\n            transform: translateY(-5px);\n            box-shadow: 0 15px 40px rgba(0,0,0,0.3);\n        }\n\n        .stat-number {\n            font-size: 3rem;\n            font-weight: bold;\n            margin-bottom: 10px;\n        }\n\n        .stat-label {\n            font-size: 1.1rem;\n            color: #666;\n            margin-bottom: 5px;\n        }\n\n        .stat-description {\n            font-size: 0.9rem;\n            color: #999;\n        }\n\n        .filter-section {\n            background: white;\n            border-radius: 15px;\n            padding: 20px;\n            box-shadow: 0 10px 30px rgba(0,0,0,0.2);\n            margin-bottom: 30px;\n        }\n\n        .filter-controls {\n            display: flex;\n            gap: 15px;\n            flex-wrap: wrap;\n            align-items: center;\n        }\n\n        .filter-group {\n            display: flex;\n            align-items: center;\n            gap: 10px;\n        }\n\n        .filter-label {\n            font-weight: bold;\n            color: #333;\n        }\n\n        .filter-select, .search-input {\n            padding: 8px 12px;\n            border: 2px solid #ddd;\n            border-radius: 5px;\n            font-size: 0.9rem;\n            transition: border-color 0.3s ease;\n        }\n\n        .filter-select:focus, .search-input:focus {\n            outline: none;\n            border-color: #667eea;\n        }\n\n        .search-input {\n            min-width: 200px;\n        }\n\n        .hooks-container {\n            display: grid;\n            gap: 30px;\n        }\n\n        .hook-item {\n            background: white;\n            border-radius: 15px;\n            padding: 25px;\n            box-shadow: 0 10px 30px rgba(0,0,0,0.2);\n        }\n\n        .hook-header {\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            margin-bottom: 20px;\n            padding-bottom: 15px;\n            border-bottom: 2px solid #667eea;\n        }\n\n        .hook-event {\n            font-size: 1.5rem;\n            font-weight: bold;\n            color: #667eea;\n        }\n\n        .hook-meta {\n            display: flex;\n            gap: 20px;\n            align-items: center;\n        }\n\n        .hook-timestamp {\n            font-size: 0.9rem;\n            color: #666;\n            background: #f0f4ff;\n            padding: 5px 12px;\n            border-radius: 20px;\n        }\n\n        .hook-message {\n            background: #f8f9fa;\n            border-left: 4px solid #667eea;\n            padding: 15px;\n            margin-bottom: 15px;\n            border-radius: 5px;\n        }\n\n        .hook-description {\n            color: #666;\n            font-style: italic;\n            margin-bottom: 15px;\n        }\n\n        .hook-details {\n            display: flex;\n            flex-direction: column;\n            gap: 20px;\n        }\n\n        .part-card {\n            background: #f8f9fa;\n            border-radius: 10px;\n            overflow: hidden;\n        }\n\n        .part-header {\n            background: #667eea;\n            color: white;\n            padding: 12px 15px;\n            font-weight: bold;\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            cursor: pointer;\n            transition: background 0.3s ease;\n        }\n\n        .part-header:hover {\n            background: #5a67d8;\n        }\n\n        .part-content {\n            padding: 15px;\n            font-family: 'Courier New', monospace;\n            font-size: 0.9rem;\n            background: #1a1a1a;\n            color: #ffffff;\n            overflow-y: auto;\n            white-space: pre-wrap;\n            line-height: 1.6;\n            min-height: 100px;\n            border-radius: 8px;\n            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.3);\n        }\n\n        .part-content.hidden {\n            display: none;\n        }\n\n        .toggle-icon {\n            transition: transform 0.3s ease;\n        }\n\n        .toggle-icon.rotated {\n            transform: rotate(180deg);\n        }\n\n        /* è‡ªå®šä¹‰æ»šåŠ¨æ¡æ ·å¼ */\n        .part-content::-webkit-scrollbar {\n            width: 8px;\n        }\n\n        .part-content::-webkit-scrollbar-track {\n            background: #2a2a2a;\n            border-radius: 4px;\n        }\n\n        .part-content::-webkit-scrollbar-thumb {\n            background: #4a4a4a;\n            border-radius: 4px;\n        }\n\n        .part-content::-webkit-scrollbar-thumb:hover {\n            background: #5a5a5a;\n        }\n\n        .event-badge {\n            display: inline-block;\n            padding: 4px 12px;\n            border-radius: 20px;\n            font-size: 0.8rem;\n            font-weight: bold;\n            margin-right: 10px;\n        }\n\n        .event-userprompt { background: #FF6B6B; color: white; }\n        .event-pretool { background: #4ECDC4; color: white; }\n        .event-posttool { background: #45B7D1; color: white; }\n        .event-notification { background: #9C27B0; color: white; }\n        .event-stop { background: #F44336; color: white; }\n        .event-subagent-stop { background: #FF9800; color: white; }\n        .event-pre-compact { background: #FFC107; color: white; }\n        .event-session-start { background: #4CAF50; color: white; }\n        .event-session-end { background: #607D8B; color: white; }\n        .event-default { background: #78909C; color: white; }\n\n        .no-data {\n            text-align: center;\n            padding: 60px 20px;\n            color: white;\n            font-size: 1.2rem;\n        }\n\n        .error-message {\n            background: #fff5f5;\n            border: 2px solid #fc8181;\n            color: #c53030;\n            padding: 20px;\n            border-radius: 10px;\n            text-align: center;\n            font-size: 1.1rem;\n            margin: 20px 0;\n        }\n\n        .json-key { color: #9C27B0; }\n        .json-string { color: #4CAF50; }\n        .json-number { color: #FF9800; }\n        .json-boolean { color: #F44336; }\n        .json-null { color: #9E9E9E; }\n        .json-url { color: #2196F3; text-decoration: underline; cursor: pointer; }\n\n        .transcript-path {\n            background: #fff3cd;\n            border: 1px solid #ffeaa7;\n            border-radius: 5px;\n            padding: 8px 12px;\n            margin-top: 10px;\n            font-size: 0.9rem;\n        }\n\n        .transcript-path-label {\n            font-weight: bold;\n            color: #856404;\n            margin-bottom: 5px;\n        }\n\n        .transcript-path-value {\n            color: #856404;\n            word-break: break-all;\n            font-family: monospace;\n            background: #f8f9fa;\n            padding: 4px 8px;\n            border-radius: 3px;\n        }\n\n        .has-transcript-badge {\n            background: #ffc107;\n            color: #212529;\n            padding: 2px 8px;\n            border-radius: 12px;\n            font-size: 0.7rem;\n            font-weight: bold;\n            margin-left: 10px;\n        }\n\n        .transcript-actions {\n            display: flex;\n            gap: 8px;\n            margin-top: 8px;\n        }\n\n        .transcript-btn {\n            background: #667eea;\n            color: white;\n            border: none;\n            padding: 6px 12px;\n            border-radius: 4px;\n            font-size: 0.8rem;\n            cursor: pointer;\n            transition: all 0.3s ease;\n            display: flex;\n            align-items: center;\n            gap: 4px;\n        }\n\n        .transcript-btn:hover {\n            background: #5a67d8;\n            transform: translateY(-1px);\n        }\n\n        .transcript-btn.copy {\n            background: #28a745;\n        }\n\n        .transcript-btn.copy:hover {\n            background: #218838;\n        }\n\n        .transcript-btn.open {\n            background: #007bff;\n        }\n\n        .transcript-btn.open:hover {\n            background: #0056b3;\n        }\n\n        .transcript-btn:disabled {\n            background: #6c757d;\n            cursor: not-allowed;\n            transform: none;\n        }\n\n        @media (max-width: 768px) {\n            .header h1 {\n                font-size: 2rem;\n            }\n\n            .stats-grid {\n                grid-template-columns: repeat(2, 1fr);\n            }\n\n            .filter-controls {\n                flex-direction: column;\n                align-items: stretch;\n            }\n\n            .search-input {\n                min-width: auto;\n            }\n        }\n    </style>\n</head>\n<body>\n    <div class=\"container\">\n        <div class=\"header\">\n            <h1>Hooks æ—¥å¿—åˆ†æ</h1>\n            <p>ä¸Šä¼ å¹¶åˆ†æ Claude Hooks äº‹ä»¶æ—¥å¿—</p>\n        </div>\n\n        <!-- æ–‡ä»¶ä¸Šä¼ ç»„ä»¶ -->\n        <div class=\"upload-section\">\n            <div class=\"upload-card\">\n                <div class=\"upload-header\">\n                    <span>ğŸ“ é€‰æ‹© Hooks æ—¥å¿—æ–‡ä»¶</span>\n                </div>\n                <div class=\"upload-area\" id=\"upload-area\">\n                    <div class=\"upload-content\">\n                        <div class=\"upload-icon\">ğŸ“„</div>\n                        <p class=\"upload-text\">ç‚¹å‡»é€‰æ‹©æ–‡ä»¶æˆ–æ‹–æ‹½æ–‡ä»¶åˆ°æ­¤å¤„</p>\n                        <p class=\"upload-hint\">æ”¯æŒ .log .txt æ ¼å¼çš„æ—¥å¿—æ–‡ä»¶ï¼Œæ¯è¡Œä¸€ä¸ª JSON å¯¹è±¡ï¼Œæœ€å¤§50MB</p>\n                        <input type=\"file\" id=\"file-input\" accept=\".log,.txt\" style=\"display: none;\">\n                        <button class=\"upload-btn\" onclick=\"document.getElementById('file-input').click()\">é€‰æ‹©æ–‡ä»¶</button>\n                    </div>\n                </div>\n                <div class=\"file-info\" id=\"file-info\" style=\"display: none;\">\n                    <span class=\"file-name\" id=\"file-name\"></span>\n                    <button class=\"clear-btn\" onclick=\"clearFile()\">âœ•</button>\n                </div>\n            </div>\n        </div>\n\n        <div id=\"stats-section\" style=\"display: none;\">\n            <div class=\"stats-grid\">\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"total-hooks\">0</div>\n                    <div class=\"stat-label\">æ€»äº‹ä»¶æ•°</div>\n                    <div class=\"stat-description\">æ‰€æœ‰ Hooks äº‹ä»¶</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"user-prompts\">0</div>\n                    <div class=\"stat-label\">ç”¨æˆ·æç¤ºäº‹ä»¶</div>\n                    <div class=\"stat-description\">UserPromptSubmit</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"pre-tools\">0</div>\n                    <div class=\"stat-label\">å·¥å…·æ‰§è¡Œå‰äº‹ä»¶</div>\n                    <div class=\"stat-description\">PreToolUse</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"post-tools\">0</div>\n                    <div class=\"stat-label\">å·¥å…·æ‰§è¡Œåäº‹ä»¶</div>\n                    <div class=\"stat-description\">PostToolUse</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"notifications\">0</div>\n                    <div class=\"stat-label\">é€šçŸ¥äº‹ä»¶</div>\n                    <div class=\"stat-description\">Notification</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"stops\">0</div>\n                    <div class=\"stat-label\">åœæ­¢äº‹ä»¶</div>\n                    <div class=\"stat-description\">Stop</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"subagent-stops\">0</div>\n                    <div class=\"stat-label\">å­ä»£ç†åœæ­¢äº‹ä»¶</div>\n                    <div class=\"stat-description\">SubagentStop</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"pre-compacts\">0</div>\n                    <div class=\"stat-label\">å‹ç¼©å‰äº‹ä»¶</div>\n                    <div class=\"stat-description\">PreCompact</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"session-starts\">0</div>\n                    <div class=\"stat-label\">ä¼šè¯å¼€å§‹äº‹ä»¶</div>\n                    <div class=\"stat-description\">SessionStart</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"session-ends\">0</div>\n                    <div class=\"stat-label\">ä¼šè¯ç»“æŸäº‹ä»¶</div>\n                    <div class=\"stat-description\">SessionEnd</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"transcript-count\">0</div>\n                    <div class=\"stat-label\">åŒ…å«è½¬å½•è·¯å¾„äº‹ä»¶</div>\n                    <div class=\"stat-description\">åŒ…å« transcript_path</div>\n                </div>\n            </div>\n\n            <div class=\"filter-section\">\n                <div class=\"filter-controls\">\n                    <div class=\"filter-group\">\n                        <label class=\"filter-label\">äº‹ä»¶ç±»å‹ï¼š</label>\n                        <select class=\"filter-select\" id=\"event-filter\">\n                            <option value=\"\">å…¨éƒ¨</option>\n                            <option value=\"UserPromptSubmit\">UserPromptSubmit</option>\n                            <option value=\"PreToolUse\">PreToolUse</option>\n                            <option value=\"PostToolUse\">PostToolUse</option>\n                            <option value=\"Notification\">Notification</option>\n                            <option value=\"Stop\">Stop</option>\n                            <option value=\"SubagentStop\">SubagentStop</option>\n                            <option value=\"PreCompact\">PreCompact</option>\n                            <option value=\"SessionStart\">SessionStart</option>\n                            <option value=\"SessionEnd\">SessionEnd</option>\n                        </select>\n                    </div>\n                    <div class=\"filter-group\">\n                        <label class=\"filter-label\">æœç´¢ï¼š</label>\n                        <input type=\"text\" class=\"search-input\" id=\"search-input\" placeholder=\"æœç´¢äº‹ä»¶å†…å®¹...\">\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <div id=\"hooks-container\" class=\"hooks-container\"></div>\n\n        <div id=\"no-data\" class=\"no-data\">\n            è¯·ä¸Šä¼  hooks.log æ–‡ä»¶å¼€å§‹åˆ†æ\n        </div>\n\n        <div id=\"error-message\" class=\"error-message\" style=\"display: none;\"></div>\n    </div>\n\n    <script>\n        let hooksData = [];\n        let filteredData = [];\n\n        // æ–‡ä»¶ä¸Šä¼ ç›¸å…³å‡½æ•°\n        function setupFileUpload() {\n            const uploadArea = document.getElementById('upload-area');\n            const fileInput = document.getElementById('file-input');\n\n            // ç‚¹å‡»ä¸Šä¼ åŒºåŸŸè§¦å‘æ–‡ä»¶é€‰æ‹©ï¼ˆä½†ä¸åŒ…æ‹¬æŒ‰é’®ï¼‰\n            uploadArea.addEventListener('click', function(event) {\n                // å¦‚æœç‚¹å‡»çš„æ˜¯æŒ‰é’®ï¼Œä¸å¤„ç†\n                if (event.target.tagName === 'BUTTON' || event.target.closest('button')) {\n                    return;\n                }\n                fileInput.click();\n            });\n\n            // æ–‡ä»¶é€‰æ‹©äº‹ä»¶\n            fileInput.addEventListener('change', handleFileSelect);\n\n            // æ‹–æ‹½äº‹ä»¶\n            uploadArea.addEventListener('dragover', handleDragOver);\n            uploadArea.addEventListener('dragleave', handleDragLeave);\n            uploadArea.addEventListener('drop', handleDrop);\n        }\n\n\n        function handleDragOver(e) {\n            e.preventDefault();\n            e.currentTarget.classList.add('dragover');\n        }\n\n        function handleDragLeave(e) {\n            e.preventDefault();\n            e.currentTarget.classList.remove('dragover');\n        }\n\n        function handleDrop(e) {\n            e.preventDefault();\n            e.currentTarget.classList.remove('dragover');\n            handleFiles(e.dataTransfer.files);\n        }\n\n        function handleFileSelect(event) {\n            const files = event.target.files;\n            handleFiles(files);\n        }\n\n        function handleFiles(files) {\n            if (files.length === 0) return;\n\n            const file = files[0];\n\n            // æ£€æŸ¥æ–‡ä»¶ç±»å‹\n            const validTypes = ['.log', '.txt'];\n            const fileExtension = file.name.substring(file.name.lastIndexOf('.')).toLowerCase();\n\n            if (!validTypes.includes(fileExtension)) {\n                showErrorMessage('è¯·é€‰æ‹© .log æˆ– .txt æ ¼å¼çš„æ—¥å¿—æ–‡ä»¶');\n                return;\n            }\n\n            // æ£€æŸ¥æ–‡ä»¶å¤§å° (é™åˆ¶ä¸º50MB)\n            if (file.size > 50 * 1024 * 1024) {\n                showErrorMessage('æ–‡ä»¶å¤§å°ä¸èƒ½è¶…è¿‡50MB');\n                return;\n            }\n\n            // æ˜¾ç¤ºæ–‡ä»¶ä¿¡æ¯\n            showFileInfo(file);\n\n            // è¯»å–æ–‡ä»¶å†…å®¹\n            const reader = new FileReader();\n            reader.onload = function(e) {\n                try {\n                    const content = e.target.result;\n                    console.log('æ–‡ä»¶è¯»å–æˆåŠŸï¼Œå†…å®¹é•¿åº¦:', content.length);\n                    console.log('æ–‡ä»¶å†…å®¹å‰100å­—ç¬¦:', content.substring(0, 100));\n\n                    if (!content || content.trim().length === 0) {\n                        showErrorMessage('æ–‡ä»¶å†…å®¹ä¸ºç©º');\n                        return;\n                    }\n\n                    parseHooksData(content);\n                    showSuccessMessage(`æˆåŠŸåŠ è½½æ–‡ä»¶: ${file.name}`);\n                } catch (error) {\n                    console.error('æ–‡ä»¶è§£æå¼‚å¸¸:', error);\n                    showErrorMessage('æ–‡ä»¶è§£æå¤±è´¥ï¼š' + error.message);\n                }\n            };\n            reader.onerror = function(error) {\n                console.error('æ–‡ä»¶è¯»å–å¤±è´¥:', error);\n                showErrorMessage('æ–‡ä»¶è¯»å–å¤±è´¥');\n            };\n            reader.readAsText(file);\n        }\n\n        function showFileInfo(file) {\n            const fileInfo = document.getElementById('file-info');\n            const fileName = document.getElementById('file-name');\n            const uploadArea = document.getElementById('upload-area');\n\n            fileName.textContent = file.name;\n            fileInfo.style.display = 'flex';\n            uploadArea.style.display = 'none';\n        }\n\n        function clearFile() {\n            const fileInfo = document.getElementById('file-info');\n            const uploadArea = document.getElementById('upload-area');\n            const fileInput = document.getElementById('file-input');\n\n            fileInfo.style.display = 'none';\n            uploadArea.style.display = 'block';\n\n            // æ¸…ç©ºæ–‡ä»¶è¾“å…¥æ¡†çš„å€¼\n            fileInput.value = '';\n\n            // æ¸…ç©ºæ•°æ®\n            hooksData = [];\n            filteredData = [];\n\n            // æ¸…ç©ºæ˜¾ç¤ºåŒºåŸŸ\n            document.getElementById('hooks-container').innerHTML = '';\n            document.getElementById('no-data').style.display = 'block';\n            document.getElementById('stats-section').style.display = 'none';\n\n            // æ˜¾ç¤ºæç¤º\n            showSuccessMessage('å·²æ¸…ç©ºæ–‡ä»¶ï¼Œè¯·é‡æ–°é€‰æ‹©æ—¥å¿—æ–‡ä»¶');\n        }\n\n        function showSuccessMessage(message) {\n            showMessage(message, 'success');\n        }\n\n        function showErrorMessage(message) {\n            showMessage(message, 'error');\n        }\n\n        function showMessage(message, type) {\n            // ç§»é™¤ä¹‹å‰çš„æ¶ˆæ¯\n            const existingMessages = document.querySelectorAll('.upload-message');\n            existingMessages.forEach(msg => msg.remove());\n\n            const messageClass = type === 'success' ? 'upload-success' : 'upload-error';\n            const messageDiv = document.createElement('div');\n            messageDiv.className = `upload-message ${messageClass}`;\n            messageDiv.textContent = message;\n\n            document.querySelector('.upload-card').appendChild(messageDiv);\n\n            // 3ç§’åè‡ªåŠ¨æ¶ˆå¤±\n            setTimeout(() => {\n                messageDiv.style.opacity = '0';\n                setTimeout(() => {\n                    if (messageDiv.parentNode) {\n                        messageDiv.parentNode.removeChild(messageDiv);\n                    }\n                }, 300);\n            }, 3000);\n        }\n\n        // è§£æ hooks æ•°æ®\n        function parseHooksData(content) {\n            console.log('å¼€å§‹è§£æ hooks æ•°æ®ï¼Œå†…å®¹é•¿åº¦:', content.length);\n\n            hooksData = [];\n            const lines = content.split('\\n').filter(line => line.trim());\n            console.log('åˆ†å‰²åçš„è¡Œæ•°:', lines.length);\n\n            for (let i = 0; i < lines.length; i++) {\n                const line = lines[i];\n                try {\n                    const hookData = JSON.parse(line);\n                    hooksData.push(hookData);\n                    console.log(`æˆåŠŸè§£æç¬¬ ${i + 1} è¡Œï¼Œäº‹ä»¶ç±»å‹:`, hookData.event);\n                } catch (error) {\n                    console.error(`è§£æç¬¬ ${i + 1} è¡Œå¤±è´¥:`, error.message);\n                    console.error('é—®é¢˜è¡Œçš„å†…å®¹:', line.substring(0, 100) + (line.length > 100 ? '...' : ''));\n                }\n            }\n\n            console.log('è§£æå®Œæˆï¼Œæ€»å…±è§£æåˆ°', hooksData.length, 'ä¸ªæœ‰æ•ˆäº‹ä»¶');\n\n            if (hooksData.length === 0) {\n                showErrorMessage('æœªæ‰¾åˆ°æœ‰æ•ˆçš„ hooks æ•°æ®ã€‚è¯·ç¡®ä¿æ–‡ä»¶æ ¼å¼æ­£ç¡®ï¼Œæ¯è¡Œåº”è¯¥æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„JSONå¯¹è±¡ã€‚');\n                console.error('è§£æå¤±è´¥ï¼Œæ²¡æœ‰æ‰¾åˆ°æœ‰æ•ˆçš„hooksæ•°æ®');\n                return;\n            }\n\n            filteredData = [...hooksData];\n            console.log('å‡†å¤‡æ˜¾ç¤ºæ•°æ®ï¼Œè¿‡æ»¤åçš„äº‹ä»¶æ•°é‡:', filteredData.length);\n            displayData();\n        }\n\n        // æ˜¾ç¤ºæ•°æ®\n        function displayData() {\n            document.getElementById('no-data').style.display = 'none';\n            document.getElementById('error-message').style.display = 'none';\n            document.getElementById('stats-section').style.display = 'block';\n\n            updateStatistics();\n            renderHooks();\n        }\n\n        // æ›´æ–°ç»Ÿè®¡ä¿¡æ¯\n        function updateStatistics() {\n            const stats = {\n                total: filteredData.length,\n                userPrompts: filteredData.filter(h => h.event === 'UserPromptSubmit').length,\n                preTools: filteredData.filter(h => h.event === 'PreToolUse').length,\n                postTools: filteredData.filter(h => h.event === 'PostToolUse').length,\n                notifications: filteredData.filter(h => h.event === 'Notification').length,\n                stops: filteredData.filter(h => h.event === 'Stop').length,\n                subagentStops: filteredData.filter(h => h.event === 'SubagentStop').length,\n                preCompacts: filteredData.filter(h => h.event === 'PreCompact').length,\n                sessionStarts: filteredData.filter(h => h.event === 'SessionStart').length,\n                sessionEnds: filteredData.filter(h => h.event === 'SessionEnd').length,\n                transcriptCount: filteredData.filter(h => hasTranscriptPath(h)).length\n            };\n\n            document.getElementById('total-hooks').textContent = stats.total;\n            document.getElementById('user-prompts').textContent = stats.userPrompts;\n            document.getElementById('pre-tools').textContent = stats.preTools;\n            document.getElementById('post-tools').textContent = stats.postTools;\n            document.getElementById('notifications').textContent = stats.notifications;\n            document.getElementById('stops').textContent = stats.stops;\n            document.getElementById('subagent-stops').textContent = stats.subagentStops;\n            document.getElementById('pre-compacts').textContent = stats.preCompacts;\n            document.getElementById('session-starts').textContent = stats.sessionStarts;\n            document.getElementById('session-ends').textContent = stats.sessionEnds;\n            document.getElementById('transcript-count').textContent = stats.transcriptCount;\n        }\n\n        // æ¸²æŸ“ hooks\n        function renderHooks() {\n            const container = document.getElementById('hooks-container');\n            container.innerHTML = '';\n\n            filteredData.forEach((hook, index) => {\n                const hookElement = createHookElement(hook, index);\n                container.appendChild(hookElement);\n            });\n\n            // æ·»åŠ åŠ¨ç”»\n            const elements = container.querySelectorAll('.hook-item');\n            elements.forEach((el, i) => {\n                el.style.opacity = '0';\n                el.style.transform = 'translateY(20px)';\n                setTimeout(() => {\n                    el.style.transition = 'opacity 0.3s ease, transform 0.3s ease';\n                    el.style.opacity = '1';\n                    el.style.transform = 'translateY(0)';\n                }, i * 50);\n            });\n        }\n\n        // æ£€æŸ¥æ˜¯å¦åŒ…å« transcript_path å­—æ®µ\n        function hasTranscriptPath(hook) {\n            if (!hook.payload) return false;\n\n            // æ£€æŸ¥ payload ä¸­æ˜¯å¦ç›´æ¥åŒ…å« transcript_path\n            if (hook.payload.transcript_path) return true;\n\n            // æ·±åº¦æœç´¢ payload å¯¹è±¡ä¸­çš„ transcript_path å­—æ®µ\n            return searchInObject(hook.payload, 'transcript_path');\n        }\n\n        // åœ¨å¯¹è±¡ä¸­é€’å½’æœç´¢æŒ‡å®šå­—æ®µ\n        function searchInObject(obj, fieldName) {\n            if (!obj || typeof obj !== 'object') return false;\n\n            for (const key in obj) {\n                if (key === fieldName) return true;\n\n                if (typeof obj[key] === 'object' && obj[key] !== null) {\n                    if (searchInObject(obj[key], fieldName)) return true;\n                }\n            }\n\n            return false;\n        }\n\n        // è·å– transcript_path çš„å€¼\n        function getTranscriptPath(hook) {\n            if (!hook.payload) return null;\n\n            // æ£€æŸ¥ payload ä¸­æ˜¯å¦ç›´æ¥åŒ…å« transcript_path\n            if (hook.payload.transcript_path) return hook.payload.transcript_path;\n\n            // æ·±åº¦æœç´¢å¹¶è¿”å› transcript_path çš„å€¼\n            return findValueInObject(hook.payload, 'transcript_path');\n        }\n\n        // åœ¨å¯¹è±¡ä¸­é€’å½’æŸ¥æ‰¾æŒ‡å®šå­—æ®µçš„å€¼\n        function findValueInObject(obj, fieldName) {\n            if (!obj || typeof obj !== 'object') return null;\n\n            for (const key in obj) {\n                if (key === fieldName) return obj[key];\n\n                if (typeof obj[key] === 'object' && obj[key] !== null) {\n                    const found = findValueInObject(obj[key], fieldName);\n                    if (found !== null) return found;\n                }\n            }\n\n            return null;\n        }\n\n        // åˆ›å»º hook å…ƒç´ \n        function createHookElement(hook, index) {\n            const div = document.createElement('div');\n            div.className = 'hook-item';\n\n            const eventClass = getEventClass(hook.event);\n            const formattedTime = formatTimestamp(hook.ts);\n            const eventDescription = getEventDescription(hook.event, hook.phase);\n            const hasTranscript = hasTranscriptPath(hook);\n            const transcriptPath = getTranscriptPath(hook);\n\n            div.innerHTML = `\n                <div class=\"hook-header\">\n                    <div class=\"hook-event\">\n                        <span class=\"event-badge ${eventClass}\">${hook.event}</span>\n                        ${hasTranscript ? '<span class=\"has-transcript-badge\">åŒ…å«è½¬å½•è·¯å¾„</span>' : ''}\n                    </div>\n                    <div class=\"hook-meta\">\n                        <div class=\"hook-timestamp\">${formattedTime}</div>\n                    </div>\n                </div>\n                <div class=\"hook-message\">${hook.message}</div>\n                <div class=\"hook-description\">${hook.description || eventDescription}</div>\n                ${hasTranscript && transcriptPath ? `\n                <div class=\"transcript-path\">\n                    <div class=\"transcript-path-label\">ğŸ“„ è½¬å½•è·¯å¾„ (transcript_path):</div>\n                    <div class=\"transcript-path-value\">${escapeHtml(transcriptPath)}</div>\n                    <div class=\"transcript-actions\">\n                        <button class=\"transcript-btn copy\" onclick=\"copyTranscriptPath('${escapeHtml(transcriptPath)}')\" title=\"å¤åˆ¶è·¯å¾„\">\n                            ğŸ“‹ å¤åˆ¶\n                        </button>\n                        ${isUrl(transcriptPath) ?\n                            `<button class=\"transcript-btn open\" onclick=\"openTranscriptUrl('${escapeHtml(transcriptPath)}')\" title=\"åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€\">\n                                ğŸ”— æ‰“å¼€é“¾æ¥\n                            </button>` :\n                            `<button class=\"transcript-btn open\" onclick=\"tryOpenTranscriptFile('${escapeHtml(transcriptPath)}')\" title=\"å°è¯•æ‰“å¼€æ–‡ä»¶\">\n                                ğŸ“‚ å°è¯•æ‰“å¼€\n                            </button>`\n                        }\n                    </div>\n                </div>\n                ` : ''}\n                <div class=\"hook-details\">\n                    <div class=\"part-card\">\n                        <div class=\"part-header\" onclick=\"toggleDetail('payload-${index}')\">\n                            <span>Payload</span>\n                            <span class=\"toggle-icon\" id=\"icon-payload-${index}\">â–¼</span>\n                        </div>\n                        <div class=\"part-content hidden\" id=\"payload-${index}\">\n                            ${formatJson(hook.payload)}\n                        </div>\n                    </div>\n                </div>\n            `;\n\n            return div;\n        }\n\n        // è·å–äº‹ä»¶æè¿°\n        function getEventDescription(event, phase) {\n            switch (event) {\n                case 'PreToolUse':\n                    return 'å·¥å…·æ‰§è¡Œå‰è§¦å‘ï¼Œå¯åŸºäºå‚æ•°é˜»æ­¢æˆ–è°ƒæ•´è°ƒç”¨ã€‚';\n                case 'PostToolUse':\n                    return 'å·¥å…·æˆåŠŸæ‰§è¡Œåè§¦å‘ï¼Œå¸¸ç”¨äºæ ¼å¼åŒ–ã€æ ¡éªŒæˆ–è®°å½•ç»“æœã€‚';\n                case 'UserPromptSubmit':\n                    return 'ç”¨æˆ·æäº¤æç¤ºå‰è§¦å‘ï¼Œå¯è¿›è¡Œæç¤ºæ ¡éªŒæˆ–å¢å¼ºã€‚';\n                case 'Notification':\n                    return 'å½“ç³»ç»Ÿå‘é€é€šçŸ¥ï¼ˆéœ€æˆæƒæˆ–ç­‰å¾…è¾“å…¥ï¼‰æ—¶è§¦å‘ã€‚';\n                case 'Stop':\n                    return 'ä¸»ä»£ç†å®Œæˆå“åº”æ—¶è§¦å‘ï¼ˆç”¨æˆ·ä¸­æ–­ä¸è§¦å‘ï¼‰ã€‚';\n                case 'SubagentStop':\n                    return 'å­ä»£ç†ä»»åŠ¡å®Œæˆæ—¶è§¦å‘ï¼Œç”¨äºè®°å½•å­ä»»åŠ¡ç»“æŸã€‚';\n                case 'PreCompact':\n                    return phase === 'manual'\n                        ? 'æ‰‹åŠ¨å‹ç¼©å‰è§¦å‘ï¼Œç”¨äºè®°å½•æˆ–å‡†å¤‡å‹ç¼©ã€‚'\n                        : 'è‡ªåŠ¨å‹ç¼©å‰è§¦å‘ï¼ˆä¸Šä¸‹æ–‡æ¥è¿‘ä¸Šé™ï¼‰ï¼Œç”¨äºè®°å½•æˆ–å‡†å¤‡å‹ç¼©ã€‚';\n                case 'SessionStart':\n                    switch (phase) {\n                        case 'startup':\n                            return 'æ–°ä¼šè¯å¯åŠ¨æ—¶è§¦å‘ï¼Œç”¨äºåŠ è½½ä¸Šä¸‹æ–‡æˆ–è®¾ç½®ç¯å¢ƒã€‚';\n                        case 'resume':\n                            return 'æ¢å¤ä¼šè¯æ—¶è§¦å‘ï¼Œç”¨äºç»§ç»­å…ˆå‰ä¸Šä¸‹æ–‡ã€‚';\n                        case 'clear':\n                            return 'æ¸…ç©ºä¼šè¯åè§¦å‘ï¼Œç”¨äºé‡ç½®ç¯å¢ƒä¸ä¸Šä¸‹æ–‡ã€‚';\n                        case 'compact':\n                            return 'å› å‹ç¼©æ“ä½œè§¦å‘çš„ä¼šè¯å¯åŠ¨ï¼Œç”¨äºç»´æŒä¸Šä¸‹æ–‡ã€‚';\n                        default:\n                            return 'ä¼šè¯å¯åŠ¨ç›¸å…³äº‹ä»¶ï¼Œåˆå§‹åŒ–æˆ–æ¢å¤ä¸Šä¸‹æ–‡ã€‚';\n                    }\n                case 'SessionEnd':\n                    return 'ä¼šè¯ç»“æŸæ—¶è§¦å‘ï¼Œå¸¸ç”¨äºæ”¶å°¾ä¸æ¸…ç†ã€‚';\n                default:\n                    return 'æœªçŸ¥äº‹ä»¶ã€‚';\n            }\n        }\n\n        // è·å–äº‹ä»¶æ ·å¼ç±»\n        function getEventClass(event) {\n            switch (event) {\n                case 'UserPromptSubmit': return 'event-userprompt';\n                case 'PreToolUse': return 'event-pretool';\n                case 'PostToolUse': return 'event-posttool';\n                case 'Notification': return 'event-notification';\n                case 'Stop': return 'event-stop';\n                case 'SubagentStop': return 'event-subagent-stop';\n                case 'PreCompact': return 'event-pre-compact';\n                case 'SessionStart': return 'event-session-start';\n                case 'SessionEnd': return 'event-session-end';\n                default: return 'event-default';\n            }\n        }\n\n        // æ ¼å¼åŒ–æ—¶é—´æˆ³\n        function formatTimestamp(ts) {\n            const date = new Date(ts);\n            return date.toLocaleString('zh-CN');\n        }\n\n        // æ ¼å¼åŒ– JSON\n        function formatJson(obj, indent = 0) {\n            if (!obj) return '';\n\n            try {\n                const spaces = '  '.repeat(indent);\n                let result = '';\n\n                if (Array.isArray(obj)) {\n                    result += '[\\n';\n                    obj.forEach((item, index) => {\n                        result += spaces + '  ';\n                        if (typeof item === 'object' && item !== null) {\n                            result += formatJson(item, indent + 1);\n                        } else {\n                            result += formatJsonValue(item);\n                        }\n                        if (index < obj.length - 1) result += ',';\n                        result += '\\n';\n                    });\n                    result += spaces + ']';\n                } else if (typeof obj === 'object' && obj !== null) {\n                    result += '{\\n';\n                    const keys = Object.keys(obj);\n                    keys.forEach((key, index) => {\n                        result += spaces + '  ';\n                        result += `<span class=\"json-key\">\"${escapeHtml(key)}\"</span>: `;\n\n                        if (typeof obj[key] === 'object' && obj[key] !== null) {\n                            result += formatJson(obj[key], indent + 1);\n                        } else {\n                            result += formatJsonValue(obj[key]);\n                        }\n\n                        if (index < keys.length - 1) result += ',';\n                        result += '\\n';\n                    });\n                    result += spaces + '}';\n                } else {\n                    result += formatJsonValue(obj);\n                }\n\n                return result;\n            } catch (error) {\n                return escapeHtml(JSON.stringify(obj));\n            }\n        }\n\n        // æ ¼å¼åŒ– JSON å€¼\n        function formatJsonValue(value) {\n            if (typeof value === 'string') {\n                if (value.startsWith('http://') || value.startsWith('https://')) {\n                    return `<span class=\"json-url\" onclick=\"window.open('${escapeHtml(value)}', '_blank')\">\"${escapeHtml(value)}\"</span>`;\n                }\n                return `<span class=\"json-string\">\"${escapeHtml(value)}\"</span>`;\n            } else if (typeof value === 'number') {\n                return `<span class=\"json-number\">${value}</span>`;\n            } else if (typeof value === 'boolean') {\n                return `<span class=\"json-boolean\">${value}</span>`;\n            } else if (value === null) {\n                return `<span class=\"json-null\">null</span>`;\n            } else {\n                return `<span style=\"color: #666;\">${value}</span>`;\n            }\n        }\n\n        // HTML è½¬ä¹‰\n        function escapeHtml(text) {\n            const div = document.createElement('div');\n            div.textContent = text;\n            return div.innerHTML;\n        }\n\n        // åˆ‡æ¢è¯¦æƒ…æ˜¾ç¤º\n        function toggleDetail(id) {\n            const content = document.getElementById(id);\n            const icon = document.getElementById('icon-' + id);\n\n            if (content.classList.contains('hidden')) {\n                content.classList.remove('hidden');\n                icon.classList.add('rotated');\n            } else {\n                content.classList.add('hidden');\n                icon.classList.remove('rotated');\n            }\n        }\n\n        // è¿‡æ»¤å’Œæœç´¢\n        document.getElementById('event-filter').addEventListener('change', applyFilters);\n        document.getElementById('search-input').addEventListener('input', applyFilters);\n\n        function applyFilters() {\n            const eventFilter = document.getElementById('event-filter').value;\n            const searchText = document.getElementById('search-input').value.toLowerCase();\n\n            filteredData = hooksData.filter(hook => {\n                const matchEvent = !eventFilter || hook.event === eventFilter;\n                const matchSearch = !searchText ||\n                    JSON.stringify(hook).toLowerCase().includes(searchText);\n\n                return matchEvent && matchSearch;\n            });\n\n            updateStatistics();\n            renderHooks();\n        }\n\n        // æ ¼å¼åŒ–æ–‡ä»¶å¤§å°\n        function formatFileSize(bytes) {\n            if (bytes === 0) return '0 Bytes';\n            const k = 1024;\n            const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n            const i = Math.floor(Math.log(bytes) / Math.log(k));\n            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n        }\n\n        // é¡µé¢åŠ è½½æ—¶æ‰§è¡Œ\n        document.addEventListener('DOMContentLoaded', function() {\n            // æ·»åŠ åˆå§‹åŠ è½½åŠ¨ç”»\n            const cards = document.querySelectorAll('.stat-card, .upload-card');\n            cards.forEach((card, index) => {\n                card.style.opacity = '0';\n                card.style.transform = 'translateY(20px)';\n                setTimeout(() => {\n                    card.style.transition = 'opacity 0.5s ease, transform 0.5s ease';\n                    card.style.opacity = '1';\n                    card.style.transform = 'translateY(0)';\n                }, index * 100);\n            });\n\n            // è®¾ç½®æ–‡ä»¶ä¸Šä¼ \n            setupFileUpload();\n        });\n\n            </script>\n</body>\n</html>","structuredPatch":[{"oldStart":1211,"oldLines":6,"newStart":1211,"newLines":121,"lines":["             renderHooks();","         }"," ","+        // æ£€æŸ¥æ˜¯å¦ä¸º URL","+        function isUrl(text) {","+            try {","+                new URL(text);","+                return true;","+            } catch {","+                return false;","+            }","+        }","+","+        // å¤åˆ¶è½¬å½•è·¯å¾„åˆ°å‰ªè´´æ¿","+        async function copyTranscriptPath(path) {","+            try {","+                await navigator.clipboard.writeText(path);","+                showToast('è·¯å¾„å·²å¤åˆ¶åˆ°å‰ªè´´æ¿', 'success');","+            } catch (error) {","+                // é™çº§æ–¹æ¡ˆ","+                const textArea = document.createElement('textarea');","+                textArea.value = path;","+                document.body.appendChild(textArea);","+                textArea.select();","+                document.execCommand('copy');","+                document.body.removeChild(textArea);","+                showToast('è·¯å¾„å·²å¤åˆ¶åˆ°å‰ªè´´æ¿', 'success');","+            }","+        }","+","+        // æ‰“å¼€è½¬å½•é“¾æ¥ï¼ˆURLï¼‰","+        function openTranscriptUrl(url) {","+            window.open(url, '_blank');","+        }","+","+        // å°è¯•æ‰“å¼€æœ¬åœ°æ–‡ä»¶ï¼ˆé€šè¿‡æ–‡ä»¶é€‰æ‹©å™¨æ¨¡æ‹Ÿï¼‰","+        function tryOpenTranscriptFile(path) {","+            // ç”±äºæµè§ˆå™¨å®‰å…¨é™åˆ¶ï¼Œæ— æ³•ç›´æ¥æ‰“å¼€æœ¬åœ°æ–‡ä»¶è·¯å¾„","+            // è¿™é‡Œæä¾›å‡ ç§æ›¿ä»£æ–¹æ¡ˆï¼š","+","+            // æ–¹æ¡ˆ1ï¼šå¤åˆ¶è·¯å¾„åˆ°å‰ªè´´æ¿","+            copyTranscriptPath(path);","+","+            // æ–¹æ¡ˆ2ï¼šæ˜¾ç¤ºæç¤ºä¿¡æ¯","+            showToast('æµè§ˆå™¨å®‰å…¨é™åˆ¶æ— æ³•ç›´æ¥æ‰“å¼€æœ¬åœ°æ–‡ä»¶ï¼Œè·¯å¾„å·²å¤åˆ¶ã€‚è¯·åœ¨æ–‡ä»¶ç®¡ç†å™¨ä¸­æ‰‹åŠ¨æ‰“å¼€ã€‚', 'info');","+","+            // æ–¹æ¡ˆ3ï¼šå°è¯•åˆ›å»ºæ–‡ä»¶ä¸‹è½½ï¼ˆå¦‚æœè·¯å¾„æ˜¯å¯è®¿é—®çš„ï¼‰","+            if (path.startsWith('file://')) {","+                showToast('æ£€æµ‹åˆ°æ–‡ä»¶åè®®ï¼Œä½†æµè§ˆå™¨é™åˆ¶ç›´æ¥è®¿é—®ã€‚è¯·æ‰‹åŠ¨å¤åˆ¶è·¯å¾„ã€‚', 'warning');","+            } else if (path.startsWith('http://') || path.startsWith('https://')) {","+                // å¦‚æœæ˜¯ http/https é“¾æ¥ï¼Œç›´æ¥æ‰“å¼€","+                openTranscriptUrl(path);","+            } else {","+                // æœ¬åœ°æ–‡ä»¶è·¯å¾„ï¼Œåªèƒ½å¤åˆ¶","+                showToast(`æœ¬åœ°æ–‡ä»¶è·¯å¾„: ${path}\\nå·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼Œè¯·åœ¨æ–‡ä»¶ç®¡ç†å™¨ä¸­æ‰‹åŠ¨æ‰“å¼€ã€‚`, 'info');","+            }","+        }","+","+        // æ˜¾ç¤ºæç¤ºä¿¡æ¯","+        function showToast(message, type = 'info') {","+            const toast = document.createElement('div');","+            toast.style.cssText = `","+                position: fixed;","+                top: 20px;","+                right: 20px;","+                background: ${type === 'success' ? '#28a745' : type === 'warning' ? '#ffc107' : type === 'error' ? '#dc3545' : '#007bff'};","+                color: white;","+                padding: 12px 16px;","+                border-radius: 6px;","+                font-size: 0.9rem;","+                z-index: 10000;","+                max-width: 400px;","+                word-wrap: break-word;","+                box-shadow: 0 4px 12px rgba(0,0,0,0.15);","+                animation: slideInRight 0.3s ease;","+            `;","+","+            toast.textContent = message;","+            document.body.appendChild(toast);","+","+            // 3ç§’åè‡ªåŠ¨æ¶ˆå¤±","+            setTimeout(() => {","+                toast.style.animation = 'slideOutRight 0.3s ease';","+                setTimeout(() => {","+                    if (toast.parentNode) {","+                        document.body.removeChild(toast);","+                    }","+                }, 300);","+            }, 3000);","+        }","+","+        // æ·»åŠ åŠ¨ç”»æ ·å¼","+        const style = document.createElement('style');","+        style.textContent = `","+            @keyframes slideInRight {","+                from {","+                    transform: translateX(100%);","+                    opacity: 0;","+                }","+                to {","+                    transform: translateX(0);","+                    opacity: 1;","+                }","+            }","+","+            @keyframes slideOutRight {","+                from {","+                    transform: translateX(0);","+                    opacity: 1;","+                }","+                to {","+                    transform: translateX(100%);","+                    opacity: 0;","+                }","+            }","+        `;","+        document.head.appendChild(style);","+","         // æ ¼å¼åŒ–æ–‡ä»¶å¤§å°","         function formatFileSize(bytes) {","             if (bytes === 0) return '0 Bytes';"]}],"userModified":false,"replaceAll":false}}}
{"ts":"2025-11-05T02:29:36.184Z","event":"PreToolUse","phase":"","message":"PreToolUseäº‹ä»¶æ­£åœ¨æ‰§è¡Œ","description":"å·¥å…·æ‰§è¡Œå‰è§¦å‘ï¼Œå¯åŸºäºå‚æ•°é˜»æ­¢æˆ–è°ƒæ•´è°ƒç”¨ã€‚","doc_url":"https://docs.claude.com/zh-CN/docs/claude-code/hooks#pretooluse","payload":{"session_id":"c7c21516-7e1e-49b2-8ae5-4e1bb98e9692","transcript_path":"C:\\Users\\WTCL\\.claude\\projects\\i--claude-code-proxy\\c7c21516-7e1e-49b2-8ae5-4e1bb98e9692.jsonl","cwd":"i:\\claude-code-proxy","permission_mode":"acceptEdits","hook_event_name":"PreToolUse","tool_name":"TodoWrite","tool_input":{"todos":[{"content":"ä¸º transcript_path æ·»åŠ æ‰“å¼€/å¤åˆ¶æŒ‰é’®åŠŸèƒ½","status":"completed","activeForm":"ä¸º transcript_path æ·»åŠ æ‰“å¼€/å¤åˆ¶æŒ‰é’®åŠŸèƒ½"}]}}}
{"ts":"2025-11-05T02:29:36.400Z","event":"PostToolUse","phase":"","message":"PostToolUseäº‹ä»¶æ­£åœ¨æ‰§è¡Œ","description":"å·¥å…·æˆåŠŸæ‰§è¡Œåè§¦å‘ï¼Œå¸¸ç”¨äºæ ¼å¼åŒ–ã€æ ¡éªŒæˆ–è®°å½•ç»“æœã€‚","doc_url":"https://docs.claude.com/zh-CN/docs/claude-code/hooks#posttooluse","payload":{"session_id":"c7c21516-7e1e-49b2-8ae5-4e1bb98e9692","transcript_path":"C:\\Users\\WTCL\\.claude\\projects\\i--claude-code-proxy\\c7c21516-7e1e-49b2-8ae5-4e1bb98e9692.jsonl","cwd":"i:\\claude-code-proxy","permission_mode":"acceptEdits","hook_event_name":"PostToolUse","tool_name":"TodoWrite","tool_input":{"todos":[{"content":"ä¸º transcript_path æ·»åŠ æ‰“å¼€/å¤åˆ¶æŒ‰é’®åŠŸèƒ½","status":"completed","activeForm":"ä¸º transcript_path æ·»åŠ æ‰“å¼€/å¤åˆ¶æŒ‰é’®åŠŸèƒ½"}]},"tool_response":{"oldTodos":[{"content":"ä¸º transcript_path æ·»åŠ æ‰“å¼€/å¤åˆ¶æŒ‰é’®åŠŸèƒ½","status":"in_progress","activeForm":"ä¸º transcript_path æ·»åŠ æ‰“å¼€/å¤åˆ¶æŒ‰é’®åŠŸèƒ½"}],"newTodos":[{"content":"ä¸º transcript_path æ·»åŠ æ‰“å¼€/å¤åˆ¶æŒ‰é’®åŠŸèƒ½","status":"completed","activeForm":"ä¸º transcript_path æ·»åŠ æ‰“å¼€/å¤åˆ¶æŒ‰é’®åŠŸèƒ½"}]}}}
{"ts":"2025-11-05T02:29:40.928Z","event":"Stop","phase":"","message":"Stopäº‹ä»¶æ­£åœ¨æ‰§è¡Œ","description":"ä¸»ä»£ç†å®Œæˆå“åº”æ—¶è§¦å‘ï¼ˆç”¨æˆ·ä¸­æ–­ä¸è§¦å‘ï¼‰ã€‚","doc_url":"https://docs.claude.com/zh-CN/docs/claude-code/hooks#stop","payload":{"session_id":"c7c21516-7e1e-49b2-8ae5-4e1bb98e9692","transcript_path":"C:\\Users\\WTCL\\.claude\\projects\\i--claude-code-proxy\\c7c21516-7e1e-49b2-8ae5-4e1bb98e9692.jsonl","cwd":"i:\\claude-code-proxy","permission_mode":"acceptEdits","hook_event_name":"Stop","stop_hook_active":false}}
{"ts":"2025-11-05T02:36:12.145Z","event":"UserPromptSubmit","phase":"","message":"UserPromptSubmitäº‹ä»¶æ­£åœ¨æ‰§è¡Œ","description":"ç”¨æˆ·æäº¤æç¤ºå‰è§¦å‘ï¼Œå¯è¿›è¡Œæç¤ºæ ¡éªŒæˆ–å¢å¼ºã€‚","doc_url":"https://docs.claude.com/zh-CN/docs/claude-code/hooks#userpromptsubmit","payload":{"session_id":"c7c21516-7e1e-49b2-8ae5-4e1bb98e9692","transcript_path":"C:\\Users\\WTCL\\.claude\\projects\\i--claude-code-proxy\\c7c21516-7e1e-49b2-8ae5-4e1bb98e9692.jsonl","cwd":"i:\\claude-code-proxy","permission_mode":"acceptEdits","hook_event_name":"UserPromptSubmit","prompt":"<ide_selection>The user selected the lines 40 to 40 from i:\\claude-code-proxy\\.claude\\hooks.log:\nä¸»ä»£ç†å®Œæˆå“åº”æ—¶è§¦å‘ï¼ˆç”¨æˆ·ä¸­æ–­ä¸è§¦å‘ï¼‰ã€‚\n\nThis may or may not be related to the current task.</ide_selection>\næµè§ˆå™¨ä¸æ˜¯æœ‰apiæ”¯æŒæ‰“å¼€æœ¬åœ°æ–‡ä»¶å—"}}
{"ts":"2025-11-05T02:36:35.769Z","event":"PreToolUse","phase":"","message":"PreToolUseäº‹ä»¶æ­£åœ¨æ‰§è¡Œ","description":"å·¥å…·æ‰§è¡Œå‰è§¦å‘ï¼Œå¯åŸºäºå‚æ•°é˜»æ­¢æˆ–è°ƒæ•´è°ƒç”¨ã€‚","doc_url":"https://docs.claude.com/zh-CN/docs/claude-code/hooks#pretooluse","payload":{"session_id":"c7c21516-7e1e-49b2-8ae5-4e1bb98e9692","transcript_path":"C:\\Users\\WTCL\\.claude\\projects\\i--claude-code-proxy\\c7c21516-7e1e-49b2-8ae5-4e1bb98e9692.jsonl","cwd":"i:\\claude-code-proxy","permission_mode":"acceptEdits","hook_event_name":"PreToolUse","tool_name":"TodoWrite","tool_input":{"todos":[{"content":"æ”¹è¿›æ–‡ä»¶æ‰“å¼€åŠŸèƒ½ï¼Œä½¿ç”¨File APIæ”¯æŒæœ¬åœ°æ–‡ä»¶é€‰æ‹©","status":"in_progress","activeForm":"æ”¹è¿›æ–‡ä»¶æ‰“å¼€åŠŸèƒ½ï¼Œä½¿ç”¨File APIæ”¯æŒæœ¬åœ°æ–‡ä»¶é€‰æ‹©"}]}}}
{"ts":"2025-11-05T02:36:36.027Z","event":"PostToolUse","phase":"","message":"PostToolUseäº‹ä»¶æ­£åœ¨æ‰§è¡Œ","description":"å·¥å…·æˆåŠŸæ‰§è¡Œåè§¦å‘ï¼Œå¸¸ç”¨äºæ ¼å¼åŒ–ã€æ ¡éªŒæˆ–è®°å½•ç»“æœã€‚","doc_url":"https://docs.claude.com/zh-CN/docs/claude-code/hooks#posttooluse","payload":{"session_id":"c7c21516-7e1e-49b2-8ae5-4e1bb98e9692","transcript_path":"C:\\Users\\WTCL\\.claude\\projects\\i--claude-code-proxy\\c7c21516-7e1e-49b2-8ae5-4e1bb98e9692.jsonl","cwd":"i:\\claude-code-proxy","permission_mode":"acceptEdits","hook_event_name":"PostToolUse","tool_name":"TodoWrite","tool_input":{"todos":[{"content":"æ”¹è¿›æ–‡ä»¶æ‰“å¼€åŠŸèƒ½ï¼Œä½¿ç”¨File APIæ”¯æŒæœ¬åœ°æ–‡ä»¶é€‰æ‹©","status":"in_progress","activeForm":"æ”¹è¿›æ–‡ä»¶æ‰“å¼€åŠŸèƒ½ï¼Œä½¿ç”¨File APIæ”¯æŒæœ¬åœ°æ–‡ä»¶é€‰æ‹©"}]},"tool_response":{"oldTodos":[],"newTodos":[{"content":"æ”¹è¿›æ–‡ä»¶æ‰“å¼€åŠŸèƒ½ï¼Œä½¿ç”¨File APIæ”¯æŒæœ¬åœ°æ–‡ä»¶é€‰æ‹©","status":"in_progress","activeForm":"æ”¹è¿›æ–‡ä»¶æ‰“å¼€åŠŸèƒ½ï¼Œä½¿ç”¨File APIæ”¯æŒæœ¬åœ°æ–‡ä»¶é€‰æ‹©"}]}}}
{"ts":"2025-11-05T02:37:39.309Z","event":"PreToolUse","phase":"","message":"PreToolUseäº‹ä»¶æ­£åœ¨æ‰§è¡Œ","description":"å·¥å…·æ‰§è¡Œå‰è§¦å‘ï¼Œå¯åŸºäºå‚æ•°é˜»æ­¢æˆ–è°ƒæ•´è°ƒç”¨ã€‚","doc_url":"https://docs.claude.com/zh-CN/docs/claude-code/hooks#pretooluse","payload":{"session_id":"c7c21516-7e1e-49b2-8ae5-4e1bb98e9692","transcript_path":"C:\\Users\\WTCL\\.claude\\projects\\i--claude-code-proxy\\c7c21516-7e1e-49b2-8ae5-4e1bb98e9692.jsonl","cwd":"i:\\claude-code-proxy","permission_mode":"acceptEdits","hook_event_name":"PreToolUse","tool_name":"Edit","tool_input":{"file_path":"i:\\claude-code-proxy\\analyze\\hooks.html","old_string":"  // å°è¯•æ‰“å¼€æœ¬åœ°æ–‡ä»¶ï¼ˆé€šè¿‡æ–‡ä»¶é€‰æ‹©å™¨æ¨¡æ‹Ÿï¼‰\n        function tryOpenTranscriptFile(path) {\n            // ç”±äºæµè§ˆå™¨å®‰å…¨é™åˆ¶ï¼Œæ— æ³•ç›´æ¥æ‰“å¼€æœ¬åœ°æ–‡ä»¶è·¯å¾„\n            // è¿™é‡Œæä¾›å‡ ç§æ›¿ä»£æ–¹æ¡ˆï¼š\n\n            // æ–¹æ¡ˆ1ï¼šå¤åˆ¶è·¯å¾„åˆ°å‰ªè´´æ¿\n            copyTranscriptPath(path);\n\n            // æ–¹æ¡ˆ2ï¼šæ˜¾ç¤ºæç¤ºä¿¡æ¯\n            showToast('æµè§ˆå™¨å®‰å…¨é™åˆ¶æ— æ³•ç›´æ¥æ‰“å¼€æœ¬åœ°æ–‡ä»¶ï¼Œè·¯å¾„å·²å¤åˆ¶ã€‚è¯·åœ¨æ–‡ä»¶ç®¡ç†å™¨ä¸­æ‰‹åŠ¨æ‰“å¼€ã€‚', 'info');\n\n            // æ–¹æ¡ˆ3ï¼šå°è¯•åˆ›å»ºæ–‡ä»¶ä¸‹è½½ï¼ˆå¦‚æœè·¯å¾„æ˜¯å¯è®¿é—®çš„ï¼‰\n            if (path.startsWith('file://')) {\n                showToast('æ£€æµ‹åˆ°æ–‡ä»¶åè®®ï¼Œä½†æµè§ˆå™¨é™åˆ¶ç›´æ¥è®¿é—®ã€‚è¯·æ‰‹åŠ¨å¤åˆ¶è·¯å¾„ã€‚', 'warning');\n            } else if (path.startsWith('http://') || path.startsWith('https://')) {\n                // å¦‚æœæ˜¯ http/https é“¾æ¥ï¼Œç›´æ¥æ‰“å¼€\n                openTranscriptUrl(path);\n            } else {\n                // æœ¬åœ°æ–‡ä»¶è·¯å¾„ï¼Œåªèƒ½å¤åˆ¶\n                showToast(`æœ¬åœ°æ–‡ä»¶è·¯å¾„: ${path}\\nå·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼Œè¯·åœ¨æ–‡ä»¶ç®¡ç†å™¨ä¸­æ‰‹åŠ¨æ‰“å¼€ã€‚`, 'info');\n            }\n        }","new_string":"  // å°è¯•æ‰“å¼€æœ¬åœ°æ–‡ä»¶ï¼ˆé€šè¿‡æ–‡ä»¶é€‰æ‹©å™¨ï¼‰\n        function tryOpenTranscriptFile(path) {\n            // æ–¹æ¡ˆ1ï¼šå¤åˆ¶è·¯å¾„åˆ°å‰ªè´´æ¿\n            copyTranscriptPath(path);\n\n            // æ–¹æ¡ˆ2ï¼šå¦‚æœæ˜¯ç½‘ç»œé“¾æ¥ï¼Œç›´æ¥æ‰“å¼€\n            if (path.startsWith('http://') || path.startsWith('https://')) {\n                openTranscriptUrl(path);\n                return;\n            }\n\n            // æ–¹æ¡ˆ3ï¼šä½¿ç”¨æ–‡ä»¶é€‰æ‹©å™¨è®©ç”¨æˆ·é€‰æ‹©æœ¬åœ°æ–‡ä»¶\n            if (path.startsWith('file://')) {\n                // file:// åè®®ï¼Œæå–æ–‡ä»¶è·¯å¾„\n                const cleanPath = path.replace(/^file:\\/\\//, '');\n                showFileSelector(cleanPath);\n            } else {\n                // æœ¬åœ°æ–‡ä»¶è·¯å¾„\n                showFileSelector(path);\n            }\n        }\n\n        // æ˜¾ç¤ºæ–‡ä»¶é€‰æ‹©å™¨\n        function showFileSelector(expectedPath) {\n            const input = document.createElement('input');\n            input.type = 'file';\n            input.style.display = 'none';\n\n            // ä»è·¯å¾„ä¸­æå–æ–‡ä»¶å\n            const fileName = expectedPath.split(/[/\\\\]/).pop();\n\n            input.addEventListener('change', function(event) {\n                const file = event.target.files[0];\n                if (file) {\n                    if (file.name === fileName) {\n                        // æ–‡ä»¶ååŒ¹é…ï¼Œè¯»å–å¹¶æ˜¾ç¤ºæ–‡ä»¶å†…å®¹\n                        readAndDisplayFile(file);\n                    } else {\n                        showToast(`é€‰æ‹©çš„æ–‡ä»¶åä¸åŒ¹é…\\næœŸæœ›: ${fileName}\\nå®é™…: ${file.name}`, 'warning');\n                        // ä»ç„¶æ˜¾ç¤ºé€‰æ‹©çš„æ–‡ä»¶å†…å®¹\n                        readAndDisplayFile(file);\n                    }\n                }\n                // æ¸…ç†inputå…ƒç´ \n                document.body.removeChild(input);\n            });\n\n            document.body.appendChild(input);\n\n            // æ˜¾ç¤ºæç¤ºï¼Œç„¶åè§¦å‘æ–‡ä»¶é€‰æ‹©\n            showToast(`è¯·é€‰æ‹©æ–‡ä»¶: ${fileName}`, 'info');\n            setTimeout(() => {\n                input.click();\n            }, 500);\n        }\n\n        // è¯»å–å¹¶æ˜¾ç¤ºæ–‡ä»¶å†…å®¹\n        function readAndDisplayFile(file) {\n            const reader = new FileReader();\n            reader.onload = function(e) {\n                const content = e.target.result;\n\n                // åˆ›å»ºä¸€ä¸ªæ¨¡æ€çª—å£æ˜¾ç¤ºæ–‡ä»¶å†…å®¹\n                showFileModal(file.name, content);\n            };\n\n            reader.onerror = function() {\n                showToast('æ–‡ä»¶è¯»å–å¤±è´¥', 'error');\n            };\n\n            reader.readAsText(file);\n        }\n\n        // æ˜¾ç¤ºæ–‡ä»¶å†…å®¹çš„æ¨¡æ€çª—å£\n        function showFileModal(fileName, content) {\n            // åˆ›å»ºæ¨¡æ€èƒŒæ™¯\n            const modal = document.createElement('div');\n            modal.style.cssText = `\n                position: fixed;\n                top: 0;\n                left: 0;\n                width: 100%;\n                height: 100%;\n                background: rgba(0, 0, 0, 0.8);\n                z-index: 10000;\n                display: flex;\n                justify-content: center;\n                align-items: center;\n                animation: fadeIn 0.3s ease;\n            `;\n\n            // åˆ›å»ºæ¨¡æ€å†…å®¹\n            const modalContent = document.createElement('div');\n            modalContent.style.cssText = `\n                background: white;\n                border-radius: 12px;\n                width: 90%;\n                max-width: 800px;\n                max-height: 80vh;\n                display: flex;\n                flex-direction: column;\n                box-shadow: 0 20px 60px rgba(0,0,0,0.3);\n                animation: slideUp 0.3s ease;\n            `;\n\n            // åˆ›å»ºå¤´éƒ¨\n            const header = document.createElement('div');\n            header.style.cssText = `\n                padding: 20px;\n                border-bottom: 1px solid #e0e0e0;\n                display: flex;\n                justify-content: space-between;\n                align-items: center;\n                background: #f8f9fa;\n                border-radius: 12px 12px 0 0;\n            `;\n\n            const title = document.createElement('h3');\n            title.textContent = `ğŸ“„ ${fileName}`;\n            title.style.cssText = `\n                margin: 0;\n                color: #333;\n                font-size: 1.2rem;\n            `;\n\n            const closeBtn = document.createElement('button');\n            closeBtn.textContent = 'âœ•';\n            closeBtn.style.cssText = `\n                background: none;\n                border: none;\n                font-size: 1.5rem;\n                cursor: pointer;\n                color: #666;\n                padding: 5px;\n                border-radius: 50%;\n                width: 32px;\n                height: 32px;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n            `;\n            closeBtn.onmouseover = () => closeBtn.style.background = '#e0e0e0';\n            closeBtn.onmouseout = () => closeBtn.style.background = 'none';\n\n            // åˆ›å»ºå†…å®¹åŒºåŸŸ\n            const contentArea = document.createElement('div');\n            contentArea.style.cssText = `\n                padding: 20px;\n                overflow-y: auto;\n                flex: 1;\n                font-family: 'Courier New', monospace;\n                font-size: 0.9rem;\n                line-height: 1.5;\n                background: #1a1a1a;\n                color: #ffffff;\n                white-space: pre-wrap;\n                border-radius: 0 0 12px 12px;\n                max-height: 60vh;\n            `;\n\n            // è®¾ç½®å†…å®¹\n            contentArea.textContent = content;\n\n            // ç»„è£…æ¨¡æ€çª—å£\n            header.appendChild(title);\n            header.appendChild(closeBtn);\n            modalContent.appendChild(header);\n            modalContent.appendChild(contentArea);\n            modal.appendChild(modalContent);\n\n            // æ·»åŠ å…³é—­äº‹ä»¶\n            closeBtn.onclick = () => document.body.removeChild(modal);\n            modal.onclick = (e) => {\n                if (e.target === modal) {\n                    document.body.removeChild(modal);\n                }\n            };\n\n            // æ·»åŠ åˆ°é¡µé¢\n            document.body.appendChild(modal);\n\n            // æ·»åŠ åŠ¨ç”»æ ·å¼\n            if (!document.getElementById('modal-animations')) {\n                const style = document.createElement('style');\n                style.id = 'modal-animations';\n                style.textContent = `\n                    @keyframes fadeIn {\n                        from { opacity: 0; }\n                        to { opacity: 1; }\n                    }\n                    @keyframes slideUp {\n                        from {\n                            opacity: 0;\n                            transform: translateY(50px);\n                        }\n                        to {\n                            opacity: 1;\n                            transform: translateY(0);\n                        }\n                    }\n                `;\n                document.head.appendChild(style);\n            }\n        }"}}}
{"ts":"2025-11-05T02:37:41.389Z","event":"PostToolUse","phase":"","message":"PostToolUseäº‹ä»¶æ­£åœ¨æ‰§è¡Œ","description":"å·¥å…·æˆåŠŸæ‰§è¡Œåè§¦å‘ï¼Œå¸¸ç”¨äºæ ¼å¼åŒ–ã€æ ¡éªŒæˆ–è®°å½•ç»“æœã€‚","doc_url":"https://docs.claude.com/zh-CN/docs/claude-code/hooks#posttooluse","payload":{"session_id":"c7c21516-7e1e-49b2-8ae5-4e1bb98e9692","transcript_path":"C:\\Users\\WTCL\\.claude\\projects\\i--claude-code-proxy\\c7c21516-7e1e-49b2-8ae5-4e1bb98e9692.jsonl","cwd":"i:\\claude-code-proxy","permission_mode":"acceptEdits","hook_event_name":"PostToolUse","tool_name":"Edit","tool_input":{"file_path":"i:\\claude-code-proxy\\analyze\\hooks.html","old_string":"  // å°è¯•æ‰“å¼€æœ¬åœ°æ–‡ä»¶ï¼ˆé€šè¿‡æ–‡ä»¶é€‰æ‹©å™¨æ¨¡æ‹Ÿï¼‰\n        function tryOpenTranscriptFile(path) {\n            // ç”±äºæµè§ˆå™¨å®‰å…¨é™åˆ¶ï¼Œæ— æ³•ç›´æ¥æ‰“å¼€æœ¬åœ°æ–‡ä»¶è·¯å¾„\n            // è¿™é‡Œæä¾›å‡ ç§æ›¿ä»£æ–¹æ¡ˆï¼š\n\n            // æ–¹æ¡ˆ1ï¼šå¤åˆ¶è·¯å¾„åˆ°å‰ªè´´æ¿\n            copyTranscriptPath(path);\n\n            // æ–¹æ¡ˆ2ï¼šæ˜¾ç¤ºæç¤ºä¿¡æ¯\n            showToast('æµè§ˆå™¨å®‰å…¨é™åˆ¶æ— æ³•ç›´æ¥æ‰“å¼€æœ¬åœ°æ–‡ä»¶ï¼Œè·¯å¾„å·²å¤åˆ¶ã€‚è¯·åœ¨æ–‡ä»¶ç®¡ç†å™¨ä¸­æ‰‹åŠ¨æ‰“å¼€ã€‚', 'info');\n\n            // æ–¹æ¡ˆ3ï¼šå°è¯•åˆ›å»ºæ–‡ä»¶ä¸‹è½½ï¼ˆå¦‚æœè·¯å¾„æ˜¯å¯è®¿é—®çš„ï¼‰\n            if (path.startsWith('file://')) {\n                showToast('æ£€æµ‹åˆ°æ–‡ä»¶åè®®ï¼Œä½†æµè§ˆå™¨é™åˆ¶ç›´æ¥è®¿é—®ã€‚è¯·æ‰‹åŠ¨å¤åˆ¶è·¯å¾„ã€‚', 'warning');\n            } else if (path.startsWith('http://') || path.startsWith('https://')) {\n                // å¦‚æœæ˜¯ http/https é“¾æ¥ï¼Œç›´æ¥æ‰“å¼€\n                openTranscriptUrl(path);\n            } else {\n                // æœ¬åœ°æ–‡ä»¶è·¯å¾„ï¼Œåªèƒ½å¤åˆ¶\n                showToast(`æœ¬åœ°æ–‡ä»¶è·¯å¾„: ${path}\\nå·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼Œè¯·åœ¨æ–‡ä»¶ç®¡ç†å™¨ä¸­æ‰‹åŠ¨æ‰“å¼€ã€‚`, 'info');\n            }\n        }","new_string":"  // å°è¯•æ‰“å¼€æœ¬åœ°æ–‡ä»¶ï¼ˆé€šè¿‡æ–‡ä»¶é€‰æ‹©å™¨ï¼‰\n        function tryOpenTranscriptFile(path) {\n            // æ–¹æ¡ˆ1ï¼šå¤åˆ¶è·¯å¾„åˆ°å‰ªè´´æ¿\n            copyTranscriptPath(path);\n\n            // æ–¹æ¡ˆ2ï¼šå¦‚æœæ˜¯ç½‘ç»œé“¾æ¥ï¼Œç›´æ¥æ‰“å¼€\n            if (path.startsWith('http://') || path.startsWith('https://')) {\n                openTranscriptUrl(path);\n                return;\n            }\n\n            // æ–¹æ¡ˆ3ï¼šä½¿ç”¨æ–‡ä»¶é€‰æ‹©å™¨è®©ç”¨æˆ·é€‰æ‹©æœ¬åœ°æ–‡ä»¶\n            if (path.startsWith('file://')) {\n                // file:// åè®®ï¼Œæå–æ–‡ä»¶è·¯å¾„\n                const cleanPath = path.replace(/^file:\\/\\//, '');\n                showFileSelector(cleanPath);\n            } else {\n                // æœ¬åœ°æ–‡ä»¶è·¯å¾„\n                showFileSelector(path);\n            }\n        }\n\n        // æ˜¾ç¤ºæ–‡ä»¶é€‰æ‹©å™¨\n        function showFileSelector(expectedPath) {\n            const input = document.createElement('input');\n            input.type = 'file';\n            input.style.display = 'none';\n\n            // ä»è·¯å¾„ä¸­æå–æ–‡ä»¶å\n            const fileName = expectedPath.split(/[/\\\\]/).pop();\n\n            input.addEventListener('change', function(event) {\n                const file = event.target.files[0];\n                if (file) {\n                    if (file.name === fileName) {\n                        // æ–‡ä»¶ååŒ¹é…ï¼Œè¯»å–å¹¶æ˜¾ç¤ºæ–‡ä»¶å†…å®¹\n                        readAndDisplayFile(file);\n                    } else {\n                        showToast(`é€‰æ‹©çš„æ–‡ä»¶åä¸åŒ¹é…\\næœŸæœ›: ${fileName}\\nå®é™…: ${file.name}`, 'warning');\n                        // ä»ç„¶æ˜¾ç¤ºé€‰æ‹©çš„æ–‡ä»¶å†…å®¹\n                        readAndDisplayFile(file);\n                    }\n                }\n                // æ¸…ç†inputå…ƒç´ \n                document.body.removeChild(input);\n            });\n\n            document.body.appendChild(input);\n\n            // æ˜¾ç¤ºæç¤ºï¼Œç„¶åè§¦å‘æ–‡ä»¶é€‰æ‹©\n            showToast(`è¯·é€‰æ‹©æ–‡ä»¶: ${fileName}`, 'info');\n            setTimeout(() => {\n                input.click();\n            }, 500);\n        }\n\n        // è¯»å–å¹¶æ˜¾ç¤ºæ–‡ä»¶å†…å®¹\n        function readAndDisplayFile(file) {\n            const reader = new FileReader();\n            reader.onload = function(e) {\n                const content = e.target.result;\n\n                // åˆ›å»ºä¸€ä¸ªæ¨¡æ€çª—å£æ˜¾ç¤ºæ–‡ä»¶å†…å®¹\n                showFileModal(file.name, content);\n            };\n\n            reader.onerror = function() {\n                showToast('æ–‡ä»¶è¯»å–å¤±è´¥', 'error');\n            };\n\n            reader.readAsText(file);\n        }\n\n        // æ˜¾ç¤ºæ–‡ä»¶å†…å®¹çš„æ¨¡æ€çª—å£\n        function showFileModal(fileName, content) {\n            // åˆ›å»ºæ¨¡æ€èƒŒæ™¯\n            const modal = document.createElement('div');\n            modal.style.cssText = `\n                position: fixed;\n                top: 0;\n                left: 0;\n                width: 100%;\n                height: 100%;\n                background: rgba(0, 0, 0, 0.8);\n                z-index: 10000;\n                display: flex;\n                justify-content: center;\n                align-items: center;\n                animation: fadeIn 0.3s ease;\n            `;\n\n            // åˆ›å»ºæ¨¡æ€å†…å®¹\n            const modalContent = document.createElement('div');\n            modalContent.style.cssText = `\n                background: white;\n                border-radius: 12px;\n                width: 90%;\n                max-width: 800px;\n                max-height: 80vh;\n                display: flex;\n                flex-direction: column;\n                box-shadow: 0 20px 60px rgba(0,0,0,0.3);\n                animation: slideUp 0.3s ease;\n            `;\n\n            // åˆ›å»ºå¤´éƒ¨\n            const header = document.createElement('div');\n            header.style.cssText = `\n                padding: 20px;\n                border-bottom: 1px solid #e0e0e0;\n                display: flex;\n                justify-content: space-between;\n                align-items: center;\n                background: #f8f9fa;\n                border-radius: 12px 12px 0 0;\n            `;\n\n            const title = document.createElement('h3');\n            title.textContent = `ğŸ“„ ${fileName}`;\n            title.style.cssText = `\n                margin: 0;\n                color: #333;\n                font-size: 1.2rem;\n            `;\n\n            const closeBtn = document.createElement('button');\n            closeBtn.textContent = 'âœ•';\n            closeBtn.style.cssText = `\n                background: none;\n                border: none;\n                font-size: 1.5rem;\n                cursor: pointer;\n                color: #666;\n                padding: 5px;\n                border-radius: 50%;\n                width: 32px;\n                height: 32px;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n            `;\n            closeBtn.onmouseover = () => closeBtn.style.background = '#e0e0e0';\n            closeBtn.onmouseout = () => closeBtn.style.background = 'none';\n\n            // åˆ›å»ºå†…å®¹åŒºåŸŸ\n            const contentArea = document.createElement('div');\n            contentArea.style.cssText = `\n                padding: 20px;\n                overflow-y: auto;\n                flex: 1;\n                font-family: 'Courier New', monospace;\n                font-size: 0.9rem;\n                line-height: 1.5;\n                background: #1a1a1a;\n                color: #ffffff;\n                white-space: pre-wrap;\n                border-radius: 0 0 12px 12px;\n                max-height: 60vh;\n            `;\n\n            // è®¾ç½®å†…å®¹\n            contentArea.textContent = content;\n\n            // ç»„è£…æ¨¡æ€çª—å£\n            header.appendChild(title);\n            header.appendChild(closeBtn);\n            modalContent.appendChild(header);\n            modalContent.appendChild(contentArea);\n            modal.appendChild(modalContent);\n\n            // æ·»åŠ å…³é—­äº‹ä»¶\n            closeBtn.onclick = () => document.body.removeChild(modal);\n            modal.onclick = (e) => {\n                if (e.target === modal) {\n                    document.body.removeChild(modal);\n                }\n            };\n\n            // æ·»åŠ åˆ°é¡µé¢\n            document.body.appendChild(modal);\n\n            // æ·»åŠ åŠ¨ç”»æ ·å¼\n            if (!document.getElementById('modal-animations')) {\n                const style = document.createElement('style');\n                style.id = 'modal-animations';\n                style.textContent = `\n                    @keyframes fadeIn {\n                        from { opacity: 0; }\n                        to { opacity: 1; }\n                    }\n                    @keyframes slideUp {\n                        from {\n                            opacity: 0;\n                            transform: translateY(50px);\n                        }\n                        to {\n                            opacity: 1;\n                            transform: translateY(0);\n                        }\n                    }\n                `;\n                document.head.appendChild(style);\n            }\n        }"},"tool_response":{"filePath":"i:\\claude-code-proxy\\analyze\\hooks.html","oldString":"  // å°è¯•æ‰“å¼€æœ¬åœ°æ–‡ä»¶ï¼ˆé€šè¿‡æ–‡ä»¶é€‰æ‹©å™¨æ¨¡æ‹Ÿï¼‰\n        function tryOpenTranscriptFile(path) {\n            // ç”±äºæµè§ˆå™¨å®‰å…¨é™åˆ¶ï¼Œæ— æ³•ç›´æ¥æ‰“å¼€æœ¬åœ°æ–‡ä»¶è·¯å¾„\n            // è¿™é‡Œæä¾›å‡ ç§æ›¿ä»£æ–¹æ¡ˆï¼š\n\n            // æ–¹æ¡ˆ1ï¼šå¤åˆ¶è·¯å¾„åˆ°å‰ªè´´æ¿\n            copyTranscriptPath(path);\n\n            // æ–¹æ¡ˆ2ï¼šæ˜¾ç¤ºæç¤ºä¿¡æ¯\n            showToast('æµè§ˆå™¨å®‰å…¨é™åˆ¶æ— æ³•ç›´æ¥æ‰“å¼€æœ¬åœ°æ–‡ä»¶ï¼Œè·¯å¾„å·²å¤åˆ¶ã€‚è¯·åœ¨æ–‡ä»¶ç®¡ç†å™¨ä¸­æ‰‹åŠ¨æ‰“å¼€ã€‚', 'info');\n\n            // æ–¹æ¡ˆ3ï¼šå°è¯•åˆ›å»ºæ–‡ä»¶ä¸‹è½½ï¼ˆå¦‚æœè·¯å¾„æ˜¯å¯è®¿é—®çš„ï¼‰\n            if (path.startsWith('file://')) {\n                showToast('æ£€æµ‹åˆ°æ–‡ä»¶åè®®ï¼Œä½†æµè§ˆå™¨é™åˆ¶ç›´æ¥è®¿é—®ã€‚è¯·æ‰‹åŠ¨å¤åˆ¶è·¯å¾„ã€‚', 'warning');\n            } else if (path.startsWith('http://') || path.startsWith('https://')) {\n                // å¦‚æœæ˜¯ http/https é“¾æ¥ï¼Œç›´æ¥æ‰“å¼€\n                openTranscriptUrl(path);\n            } else {\n                // æœ¬åœ°æ–‡ä»¶è·¯å¾„ï¼Œåªèƒ½å¤åˆ¶\n                showToast(`æœ¬åœ°æ–‡ä»¶è·¯å¾„: ${path}\\nå·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼Œè¯·åœ¨æ–‡ä»¶ç®¡ç†å™¨ä¸­æ‰‹åŠ¨æ‰“å¼€ã€‚`, 'info');\n            }\n        }","newString":"  // å°è¯•æ‰“å¼€æœ¬åœ°æ–‡ä»¶ï¼ˆé€šè¿‡æ–‡ä»¶é€‰æ‹©å™¨ï¼‰\n        function tryOpenTranscriptFile(path) {\n            // æ–¹æ¡ˆ1ï¼šå¤åˆ¶è·¯å¾„åˆ°å‰ªè´´æ¿\n            copyTranscriptPath(path);\n\n            // æ–¹æ¡ˆ2ï¼šå¦‚æœæ˜¯ç½‘ç»œé“¾æ¥ï¼Œç›´æ¥æ‰“å¼€\n            if (path.startsWith('http://') || path.startsWith('https://')) {\n                openTranscriptUrl(path);\n                return;\n            }\n\n            // æ–¹æ¡ˆ3ï¼šä½¿ç”¨æ–‡ä»¶é€‰æ‹©å™¨è®©ç”¨æˆ·é€‰æ‹©æœ¬åœ°æ–‡ä»¶\n            if (path.startsWith('file://')) {\n                // file:// åè®®ï¼Œæå–æ–‡ä»¶è·¯å¾„\n                const cleanPath = path.replace(/^file:\\/\\//, '');\n                showFileSelector(cleanPath);\n            } else {\n                // æœ¬åœ°æ–‡ä»¶è·¯å¾„\n                showFileSelector(path);\n            }\n        }\n\n        // æ˜¾ç¤ºæ–‡ä»¶é€‰æ‹©å™¨\n        function showFileSelector(expectedPath) {\n            const input = document.createElement('input');\n            input.type = 'file';\n            input.style.display = 'none';\n\n            // ä»è·¯å¾„ä¸­æå–æ–‡ä»¶å\n            const fileName = expectedPath.split(/[/\\\\]/).pop();\n\n            input.addEventListener('change', function(event) {\n                const file = event.target.files[0];\n                if (file) {\n                    if (file.name === fileName) {\n                        // æ–‡ä»¶ååŒ¹é…ï¼Œè¯»å–å¹¶æ˜¾ç¤ºæ–‡ä»¶å†…å®¹\n                        readAndDisplayFile(file);\n                    } else {\n                        showToast(`é€‰æ‹©çš„æ–‡ä»¶åä¸åŒ¹é…\\næœŸæœ›: ${fileName}\\nå®é™…: ${file.name}`, 'warning');\n                        // ä»ç„¶æ˜¾ç¤ºé€‰æ‹©çš„æ–‡ä»¶å†…å®¹\n                        readAndDisplayFile(file);\n                    }\n                }\n                // æ¸…ç†inputå…ƒç´ \n                document.body.removeChild(input);\n            });\n\n            document.body.appendChild(input);\n\n            // æ˜¾ç¤ºæç¤ºï¼Œç„¶åè§¦å‘æ–‡ä»¶é€‰æ‹©\n            showToast(`è¯·é€‰æ‹©æ–‡ä»¶: ${fileName}`, 'info');\n            setTimeout(() => {\n                input.click();\n            }, 500);\n        }\n\n        // è¯»å–å¹¶æ˜¾ç¤ºæ–‡ä»¶å†…å®¹\n        function readAndDisplayFile(file) {\n            const reader = new FileReader();\n            reader.onload = function(e) {\n                const content = e.target.result;\n\n                // åˆ›å»ºä¸€ä¸ªæ¨¡æ€çª—å£æ˜¾ç¤ºæ–‡ä»¶å†…å®¹\n                showFileModal(file.name, content);\n            };\n\n            reader.onerror = function() {\n                showToast('æ–‡ä»¶è¯»å–å¤±è´¥', 'error');\n            };\n\n            reader.readAsText(file);\n        }\n\n        // æ˜¾ç¤ºæ–‡ä»¶å†…å®¹çš„æ¨¡æ€çª—å£\n        function showFileModal(fileName, content) {\n            // åˆ›å»ºæ¨¡æ€èƒŒæ™¯\n            const modal = document.createElement('div');\n            modal.style.cssText = `\n                position: fixed;\n                top: 0;\n                left: 0;\n                width: 100%;\n                height: 100%;\n                background: rgba(0, 0, 0, 0.8);\n                z-index: 10000;\n                display: flex;\n                justify-content: center;\n                align-items: center;\n                animation: fadeIn 0.3s ease;\n            `;\n\n            // åˆ›å»ºæ¨¡æ€å†…å®¹\n            const modalContent = document.createElement('div');\n            modalContent.style.cssText = `\n                background: white;\n                border-radius: 12px;\n                width: 90%;\n                max-width: 800px;\n                max-height: 80vh;\n                display: flex;\n                flex-direction: column;\n                box-shadow: 0 20px 60px rgba(0,0,0,0.3);\n                animation: slideUp 0.3s ease;\n            `;\n\n            // åˆ›å»ºå¤´éƒ¨\n            const header = document.createElement('div');\n            header.style.cssText = `\n                padding: 20px;\n                border-bottom: 1px solid #e0e0e0;\n                display: flex;\n                justify-content: space-between;\n                align-items: center;\n                background: #f8f9fa;\n                border-radius: 12px 12px 0 0;\n            `;\n\n            const title = document.createElement('h3');\n            title.textContent = `ğŸ“„ ${fileName}`;\n            title.style.cssText = `\n                margin: 0;\n                color: #333;\n                font-size: 1.2rem;\n            `;\n\n            const closeBtn = document.createElement('button');\n            closeBtn.textContent = 'âœ•';\n            closeBtn.style.cssText = `\n                background: none;\n                border: none;\n                font-size: 1.5rem;\n                cursor: pointer;\n                color: #666;\n                padding: 5px;\n                border-radius: 50%;\n                width: 32px;\n                height: 32px;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n            `;\n            closeBtn.onmouseover = () => closeBtn.style.background = '#e0e0e0';\n            closeBtn.onmouseout = () => closeBtn.style.background = 'none';\n\n            // åˆ›å»ºå†…å®¹åŒºåŸŸ\n            const contentArea = document.createElement('div');\n            contentArea.style.cssText = `\n                padding: 20px;\n                overflow-y: auto;\n                flex: 1;\n                font-family: 'Courier New', monospace;\n                font-size: 0.9rem;\n                line-height: 1.5;\n                background: #1a1a1a;\n                color: #ffffff;\n                white-space: pre-wrap;\n                border-radius: 0 0 12px 12px;\n                max-height: 60vh;\n            `;\n\n            // è®¾ç½®å†…å®¹\n            contentArea.textContent = content;\n\n            // ç»„è£…æ¨¡æ€çª—å£\n            header.appendChild(title);\n            header.appendChild(closeBtn);\n            modalContent.appendChild(header);\n            modalContent.appendChild(contentArea);\n            modal.appendChild(modalContent);\n\n            // æ·»åŠ å…³é—­äº‹ä»¶\n            closeBtn.onclick = () => document.body.removeChild(modal);\n            modal.onclick = (e) => {\n                if (e.target === modal) {\n                    document.body.removeChild(modal);\n                }\n            };\n\n            // æ·»åŠ åˆ°é¡µé¢\n            document.body.appendChild(modal);\n\n            // æ·»åŠ åŠ¨ç”»æ ·å¼\n            if (!document.getElementById('modal-animations')) {\n                const style = document.createElement('style');\n                style.id = 'modal-animations';\n                style.textContent = `\n                    @keyframes fadeIn {\n                        from { opacity: 0; }\n                        to { opacity: 1; }\n                    }\n                    @keyframes slideUp {\n                        from {\n                            opacity: 0;\n                            transform: translateY(50px);\n                        }\n                        to {\n                            opacity: 1;\n                            transform: translateY(0);\n                        }\n                    }\n                `;\n                document.head.appendChild(style);\n            }\n        }","originalFile":"<!DOCTYPE html>\n<html lang=\"zh-CN\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Hooks æ—¥å¿—åˆ†æ</title>\n    <style>\n        * {\n            margin: 0;\n            padding: 0;\n            box-sizing: border-box;\n        }\n\n        body {\n            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n            min-height: 100vh;\n            padding: 20px;\n        }\n\n        .container {\n            max-width: 1400px;\n            margin: 0 auto;\n        }\n\n        .header {\n            text-align: center;\n            color: white;\n            margin-bottom: 30px;\n        }\n\n        .header h1 {\n            font-size: 2.5rem;\n            margin-bottom: 10px;\n            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);\n        }\n\n        .header p {\n            font-size: 1.1rem;\n            opacity: 0.9;\n        }\n\n        /* æ–‡ä»¶ä¸Šä¼ ç»„ä»¶æ ·å¼ */\n        .upload-section {\n            margin-bottom: 30px;\n        }\n\n        .upload-card {\n            background: white;\n            border-radius: 15px;\n            padding: 25px;\n            box-shadow: 0 10px 30px rgba(0,0,0,0.1);\n            border: 2px dashed #cbd5e0;\n            transition: all 0.3s ease;\n        }\n\n        .upload-card:hover {\n            border-color: #667eea;\n            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.2);\n        }\n\n        .upload-header {\n            font-size: 1.2rem;\n            font-weight: bold;\n            color: #4a5568;\n            margin-bottom: 20px;\n            text-align: center;\n        }\n\n        .upload-area {\n            border: 2px dashed #e2e8f0;\n            border-radius: 10px;\n            padding: 40px 20px;\n            text-align: center;\n            transition: all 0.3s ease;\n            cursor: pointer;\n        }\n\n        .upload-area:hover {\n            border-color: #667eea;\n            background: #f7fafc;\n        }\n\n        .upload-area.dragover {\n            border-color: #667eea;\n            background: #edf2f7;\n            transform: scale(1.02);\n        }\n\n        .upload-icon {\n            font-size: 3rem;\n            margin-bottom: 15px;\n            opacity: 0.7;\n        }\n\n        .upload-text {\n            font-size: 1.1rem;\n            color: #4a5568;\n            margin-bottom: 10px;\n            font-weight: 500;\n        }\n\n        .upload-hint {\n            font-size: 0.9rem;\n            color: #718096;\n            margin-bottom: 20px;\n        }\n\n        .upload-btn {\n            background: #667eea;\n            color: white;\n            border: none;\n            padding: 12px 24px;\n            border-radius: 8px;\n            font-size: 1rem;\n            font-weight: 500;\n            cursor: pointer;\n            transition: all 0.3s ease;\n        }\n\n        .upload-btn:hover {\n            background: #5a67d8;\n            transform: translateY(-2px);\n            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);\n        }\n\n        .file-info {\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            background: #f7fafc;\n            padding: 15px 20px;\n            border-radius: 8px;\n            margin-top: 15px;\n        }\n\n        .file-name {\n            font-weight: 500;\n            color: #4a5568;\n            flex: 1;\n            overflow: hidden;\n            text-overflow: ellipsis;\n            white-space: nowrap;\n        }\n\n        .clear-btn {\n            background: #fc8181;\n            color: white;\n            border: none;\n            width: 30px;\n            height: 30px;\n            border-radius: 50%;\n            cursor: pointer;\n            font-size: 1rem;\n            transition: all 0.3s ease;\n        }\n\n        .clear-btn:hover {\n            background: #f56565;\n            transform: scale(1.1);\n        }\n\n        /* æ¶ˆæ¯æç¤ºæ ·å¼ */\n        .upload-message {\n            margin-top: 15px;\n            padding: 12px 16px;\n            border-radius: 8px;\n            font-size: 0.9rem;\n            animation: slideIn 0.3s ease;\n        }\n\n        .upload-success {\n            background: #d4edda;\n            color: #155724;\n            border: 1px solid #c3e6cb;\n        }\n\n        .upload-error {\n            background: #f8d7da;\n            color: #721c24;\n            border: 1px solid #f5c6cb;\n        }\n\n        @keyframes slideIn {\n            from {\n                opacity: 0;\n                transform: translateY(-10px);\n            }\n            to {\n                opacity: 1;\n                transform: translateY(0);\n            }\n        }\n\n        #file-input {\n            display: none;\n        }\n\n        .stats-grid {\n            display: grid;\n            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\n            gap: 20px;\n            margin-bottom: 30px;\n        }\n\n        .stat-card {\n            background: white;\n            border-radius: 15px;\n            padding: 25px;\n            box-shadow: 0 10px 30px rgba(0,0,0,0.2);\n            text-align: center;\n            transition: transform 0.3s ease, box-shadow 0.3s ease;\n        }\n\n        .stat-card:hover {\n            transform: translateY(-5px);\n            box-shadow: 0 15px 40px rgba(0,0,0,0.3);\n        }\n\n        .stat-number {\n            font-size: 3rem;\n            font-weight: bold;\n            margin-bottom: 10px;\n        }\n\n        .stat-label {\n            font-size: 1.1rem;\n            color: #666;\n            margin-bottom: 5px;\n        }\n\n        .stat-description {\n            font-size: 0.9rem;\n            color: #999;\n        }\n\n        .filter-section {\n            background: white;\n            border-radius: 15px;\n            padding: 20px;\n            box-shadow: 0 10px 30px rgba(0,0,0,0.2);\n            margin-bottom: 30px;\n        }\n\n        .filter-controls {\n            display: flex;\n            gap: 15px;\n            flex-wrap: wrap;\n            align-items: center;\n        }\n\n        .filter-group {\n            display: flex;\n            align-items: center;\n            gap: 10px;\n        }\n\n        .filter-label {\n            font-weight: bold;\n            color: #333;\n        }\n\n        .filter-select, .search-input {\n            padding: 8px 12px;\n            border: 2px solid #ddd;\n            border-radius: 5px;\n            font-size: 0.9rem;\n            transition: border-color 0.3s ease;\n        }\n\n        .filter-select:focus, .search-input:focus {\n            outline: none;\n            border-color: #667eea;\n        }\n\n        .search-input {\n            min-width: 200px;\n        }\n\n        .hooks-container {\n            display: grid;\n            gap: 30px;\n        }\n\n        .hook-item {\n            background: white;\n            border-radius: 15px;\n            padding: 25px;\n            box-shadow: 0 10px 30px rgba(0,0,0,0.2);\n        }\n\n        .hook-header {\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            margin-bottom: 20px;\n            padding-bottom: 15px;\n            border-bottom: 2px solid #667eea;\n        }\n\n        .hook-event {\n            font-size: 1.5rem;\n            font-weight: bold;\n            color: #667eea;\n        }\n\n        .hook-meta {\n            display: flex;\n            gap: 20px;\n            align-items: center;\n        }\n\n        .hook-timestamp {\n            font-size: 0.9rem;\n            color: #666;\n            background: #f0f4ff;\n            padding: 5px 12px;\n            border-radius: 20px;\n        }\n\n        .hook-message {\n            background: #f8f9fa;\n            border-left: 4px solid #667eea;\n            padding: 15px;\n            margin-bottom: 15px;\n            border-radius: 5px;\n        }\n\n        .hook-description {\n            color: #666;\n            font-style: italic;\n            margin-bottom: 15px;\n        }\n\n        .hook-details {\n            display: flex;\n            flex-direction: column;\n            gap: 20px;\n        }\n\n        .part-card {\n            background: #f8f9fa;\n            border-radius: 10px;\n            overflow: hidden;\n        }\n\n        .part-header {\n            background: #667eea;\n            color: white;\n            padding: 12px 15px;\n            font-weight: bold;\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            cursor: pointer;\n            transition: background 0.3s ease;\n        }\n\n        .part-header:hover {\n            background: #5a67d8;\n        }\n\n        .part-content {\n            padding: 15px;\n            font-family: 'Courier New', monospace;\n            font-size: 0.9rem;\n            background: #1a1a1a;\n            color: #ffffff;\n            overflow-y: auto;\n            white-space: pre-wrap;\n            line-height: 1.6;\n            min-height: 100px;\n            border-radius: 8px;\n            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.3);\n        }\n\n        .part-content.hidden {\n            display: none;\n        }\n\n        .toggle-icon {\n            transition: transform 0.3s ease;\n        }\n\n        .toggle-icon.rotated {\n            transform: rotate(180deg);\n        }\n\n        /* è‡ªå®šä¹‰æ»šåŠ¨æ¡æ ·å¼ */\n        .part-content::-webkit-scrollbar {\n            width: 8px;\n        }\n\n        .part-content::-webkit-scrollbar-track {\n            background: #2a2a2a;\n            border-radius: 4px;\n        }\n\n        .part-content::-webkit-scrollbar-thumb {\n            background: #4a4a4a;\n            border-radius: 4px;\n        }\n\n        .part-content::-webkit-scrollbar-thumb:hover {\n            background: #5a5a5a;\n        }\n\n        .event-badge {\n            display: inline-block;\n            padding: 4px 12px;\n            border-radius: 20px;\n            font-size: 0.8rem;\n            font-weight: bold;\n            margin-right: 10px;\n        }\n\n        .event-userprompt { background: #FF6B6B; color: white; }\n        .event-pretool { background: #4ECDC4; color: white; }\n        .event-posttool { background: #45B7D1; color: white; }\n        .event-notification { background: #9C27B0; color: white; }\n        .event-stop { background: #F44336; color: white; }\n        .event-subagent-stop { background: #FF9800; color: white; }\n        .event-pre-compact { background: #FFC107; color: white; }\n        .event-session-start { background: #4CAF50; color: white; }\n        .event-session-end { background: #607D8B; color: white; }\n        .event-default { background: #78909C; color: white; }\n\n        .no-data {\n            text-align: center;\n            padding: 60px 20px;\n            color: white;\n            font-size: 1.2rem;\n        }\n\n        .error-message {\n            background: #fff5f5;\n            border: 2px solid #fc8181;\n            color: #c53030;\n            padding: 20px;\n            border-radius: 10px;\n            text-align: center;\n            font-size: 1.1rem;\n            margin: 20px 0;\n        }\n\n        .json-key { color: #9C27B0; }\n        .json-string { color: #4CAF50; }\n        .json-number { color: #FF9800; }\n        .json-boolean { color: #F44336; }\n        .json-null { color: #9E9E9E; }\n        .json-url { color: #2196F3; text-decoration: underline; cursor: pointer; }\n\n        .transcript-path {\n            background: #fff3cd;\n            border: 1px solid #ffeaa7;\n            border-radius: 5px;\n            padding: 8px 12px;\n            margin-top: 10px;\n            font-size: 0.9rem;\n        }\n\n        .transcript-path-label {\n            font-weight: bold;\n            color: #856404;\n            margin-bottom: 5px;\n        }\n\n        .transcript-path-value {\n            color: #856404;\n            word-break: break-all;\n            font-family: monospace;\n            background: #f8f9fa;\n            padding: 4px 8px;\n            border-radius: 3px;\n        }\n\n        .has-transcript-badge {\n            background: #ffc107;\n            color: #212529;\n            padding: 2px 8px;\n            border-radius: 12px;\n            font-size: 0.7rem;\n            font-weight: bold;\n            margin-left: 10px;\n        }\n\n        .transcript-actions {\n            display: flex;\n            gap: 8px;\n            margin-top: 8px;\n        }\n\n        .transcript-btn {\n            background: #667eea;\n            color: white;\n            border: none;\n            padding: 6px 12px;\n            border-radius: 4px;\n            font-size: 0.8rem;\n            cursor: pointer;\n            transition: all 0.3s ease;\n            display: flex;\n            align-items: center;\n            gap: 4px;\n        }\n\n        .transcript-btn:hover {\n            background: #5a67d8;\n            transform: translateY(-1px);\n        }\n\n        .transcript-btn.copy {\n            background: #28a745;\n        }\n\n        .transcript-btn.copy:hover {\n            background: #218838;\n        }\n\n        .transcript-btn.open {\n            background: #007bff;\n        }\n\n        .transcript-btn.open:hover {\n            background: #0056b3;\n        }\n\n        .transcript-btn:disabled {\n            background: #6c757d;\n            cursor: not-allowed;\n            transform: none;\n        }\n\n        @media (max-width: 768px) {\n            .header h1 {\n                font-size: 2rem;\n            }\n\n            .stats-grid {\n                grid-template-columns: repeat(2, 1fr);\n            }\n\n            .filter-controls {\n                flex-direction: column;\n                align-items: stretch;\n            }\n\n            .search-input {\n                min-width: auto;\n            }\n        }\n    </style>\n</head>\n<body>\n    <div class=\"container\">\n        <div class=\"header\">\n            <h1>Hooks æ—¥å¿—åˆ†æ</h1>\n            <p>ä¸Šä¼ å¹¶åˆ†æ Claude Hooks äº‹ä»¶æ—¥å¿—</p>\n        </div>\n\n        <!-- æ–‡ä»¶ä¸Šä¼ ç»„ä»¶ -->\n        <div class=\"upload-section\">\n            <div class=\"upload-card\">\n                <div class=\"upload-header\">\n                    <span>ğŸ“ é€‰æ‹© Hooks æ—¥å¿—æ–‡ä»¶</span>\n                </div>\n                <div class=\"upload-area\" id=\"upload-area\">\n                    <div class=\"upload-content\">\n                        <div class=\"upload-icon\">ğŸ“„</div>\n                        <p class=\"upload-text\">ç‚¹å‡»é€‰æ‹©æ–‡ä»¶æˆ–æ‹–æ‹½æ–‡ä»¶åˆ°æ­¤å¤„</p>\n                        <p class=\"upload-hint\">æ”¯æŒ .log .txt æ ¼å¼çš„æ—¥å¿—æ–‡ä»¶ï¼Œæ¯è¡Œä¸€ä¸ª JSON å¯¹è±¡ï¼Œæœ€å¤§50MB</p>\n                        <input type=\"file\" id=\"file-input\" accept=\".log,.txt\" style=\"display: none;\">\n                        <button class=\"upload-btn\" onclick=\"document.getElementById('file-input').click()\">é€‰æ‹©æ–‡ä»¶</button>\n                    </div>\n                </div>\n                <div class=\"file-info\" id=\"file-info\" style=\"display: none;\">\n                    <span class=\"file-name\" id=\"file-name\"></span>\n                    <button class=\"clear-btn\" onclick=\"clearFile()\">âœ•</button>\n                </div>\n            </div>\n        </div>\n\n        <div id=\"stats-section\" style=\"display: none;\">\n            <div class=\"stats-grid\">\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"total-hooks\">0</div>\n                    <div class=\"stat-label\">æ€»äº‹ä»¶æ•°</div>\n                    <div class=\"stat-description\">æ‰€æœ‰ Hooks äº‹ä»¶</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"user-prompts\">0</div>\n                    <div class=\"stat-label\">ç”¨æˆ·æç¤ºäº‹ä»¶</div>\n                    <div class=\"stat-description\">UserPromptSubmit</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"pre-tools\">0</div>\n                    <div class=\"stat-label\">å·¥å…·æ‰§è¡Œå‰äº‹ä»¶</div>\n                    <div class=\"stat-description\">PreToolUse</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"post-tools\">0</div>\n                    <div class=\"stat-label\">å·¥å…·æ‰§è¡Œåäº‹ä»¶</div>\n                    <div class=\"stat-description\">PostToolUse</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"notifications\">0</div>\n                    <div class=\"stat-label\">é€šçŸ¥äº‹ä»¶</div>\n                    <div class=\"stat-description\">Notification</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"stops\">0</div>\n                    <div class=\"stat-label\">åœæ­¢äº‹ä»¶</div>\n                    <div class=\"stat-description\">Stop</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"subagent-stops\">0</div>\n                    <div class=\"stat-label\">å­ä»£ç†åœæ­¢äº‹ä»¶</div>\n                    <div class=\"stat-description\">SubagentStop</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"pre-compacts\">0</div>\n                    <div class=\"stat-label\">å‹ç¼©å‰äº‹ä»¶</div>\n                    <div class=\"stat-description\">PreCompact</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"session-starts\">0</div>\n                    <div class=\"stat-label\">ä¼šè¯å¼€å§‹äº‹ä»¶</div>\n                    <div class=\"stat-description\">SessionStart</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"session-ends\">0</div>\n                    <div class=\"stat-label\">ä¼šè¯ç»“æŸäº‹ä»¶</div>\n                    <div class=\"stat-description\">SessionEnd</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"transcript-count\">0</div>\n                    <div class=\"stat-label\">åŒ…å«è½¬å½•è·¯å¾„äº‹ä»¶</div>\n                    <div class=\"stat-description\">åŒ…å« transcript_path</div>\n                </div>\n            </div>\n\n            <div class=\"filter-section\">\n                <div class=\"filter-controls\">\n                    <div class=\"filter-group\">\n                        <label class=\"filter-label\">äº‹ä»¶ç±»å‹ï¼š</label>\n                        <select class=\"filter-select\" id=\"event-filter\">\n                            <option value=\"\">å…¨éƒ¨</option>\n                            <option value=\"UserPromptSubmit\">UserPromptSubmit</option>\n                            <option value=\"PreToolUse\">PreToolUse</option>\n                            <option value=\"PostToolUse\">PostToolUse</option>\n                            <option value=\"Notification\">Notification</option>\n                            <option value=\"Stop\">Stop</option>\n                            <option value=\"SubagentStop\">SubagentStop</option>\n                            <option value=\"PreCompact\">PreCompact</option>\n                            <option value=\"SessionStart\">SessionStart</option>\n                            <option value=\"SessionEnd\">SessionEnd</option>\n                        </select>\n                    </div>\n                    <div class=\"filter-group\">\n                        <label class=\"filter-label\">æœç´¢ï¼š</label>\n                        <input type=\"text\" class=\"search-input\" id=\"search-input\" placeholder=\"æœç´¢äº‹ä»¶å†…å®¹...\">\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <div id=\"hooks-container\" class=\"hooks-container\"></div>\n\n        <div id=\"no-data\" class=\"no-data\">\n            è¯·ä¸Šä¼  hooks.log æ–‡ä»¶å¼€å§‹åˆ†æ\n        </div>\n\n        <div id=\"error-message\" class=\"error-message\" style=\"display: none;\"></div>\n    </div>\n\n    <script>\n        let hooksData = [];\n        let filteredData = [];\n\n        // æ–‡ä»¶ä¸Šä¼ ç›¸å…³å‡½æ•°\n        function setupFileUpload() {\n            const uploadArea = document.getElementById('upload-area');\n            const fileInput = document.getElementById('file-input');\n\n            // ç‚¹å‡»ä¸Šä¼ åŒºåŸŸè§¦å‘æ–‡ä»¶é€‰æ‹©ï¼ˆä½†ä¸åŒ…æ‹¬æŒ‰é’®ï¼‰\n            uploadArea.addEventListener('click', function(event) {\n                // å¦‚æœç‚¹å‡»çš„æ˜¯æŒ‰é’®ï¼Œä¸å¤„ç†\n                if (event.target.tagName === 'BUTTON' || event.target.closest('button')) {\n                    return;\n                }\n                fileInput.click();\n            });\n\n            // æ–‡ä»¶é€‰æ‹©äº‹ä»¶\n            fileInput.addEventListener('change', handleFileSelect);\n\n            // æ‹–æ‹½äº‹ä»¶\n            uploadArea.addEventListener('dragover', handleDragOver);\n            uploadArea.addEventListener('dragleave', handleDragLeave);\n            uploadArea.addEventListener('drop', handleDrop);\n        }\n\n\n        function handleDragOver(e) {\n            e.preventDefault();\n            e.currentTarget.classList.add('dragover');\n        }\n\n        function handleDragLeave(e) {\n            e.preventDefault();\n            e.currentTarget.classList.remove('dragover');\n        }\n\n        function handleDrop(e) {\n            e.preventDefault();\n            e.currentTarget.classList.remove('dragover');\n            handleFiles(e.dataTransfer.files);\n        }\n\n        function handleFileSelect(event) {\n            const files = event.target.files;\n            handleFiles(files);\n        }\n\n        function handleFiles(files) {\n            if (files.length === 0) return;\n\n            const file = files[0];\n\n            // æ£€æŸ¥æ–‡ä»¶ç±»å‹\n            const validTypes = ['.log', '.txt'];\n            const fileExtension = file.name.substring(file.name.lastIndexOf('.')).toLowerCase();\n\n            if (!validTypes.includes(fileExtension)) {\n                showErrorMessage('è¯·é€‰æ‹© .log æˆ– .txt æ ¼å¼çš„æ—¥å¿—æ–‡ä»¶');\n                return;\n            }\n\n            // æ£€æŸ¥æ–‡ä»¶å¤§å° (é™åˆ¶ä¸º50MB)\n            if (file.size > 50 * 1024 * 1024) {\n                showErrorMessage('æ–‡ä»¶å¤§å°ä¸èƒ½è¶…è¿‡50MB');\n                return;\n            }\n\n            // æ˜¾ç¤ºæ–‡ä»¶ä¿¡æ¯\n            showFileInfo(file);\n\n            // è¯»å–æ–‡ä»¶å†…å®¹\n            const reader = new FileReader();\n            reader.onload = function(e) {\n                try {\n                    const content = e.target.result;\n                    console.log('æ–‡ä»¶è¯»å–æˆåŠŸï¼Œå†…å®¹é•¿åº¦:', content.length);\n                    console.log('æ–‡ä»¶å†…å®¹å‰100å­—ç¬¦:', content.substring(0, 100));\n\n                    if (!content || content.trim().length === 0) {\n                        showErrorMessage('æ–‡ä»¶å†…å®¹ä¸ºç©º');\n                        return;\n                    }\n\n                    parseHooksData(content);\n                    showSuccessMessage(`æˆåŠŸåŠ è½½æ–‡ä»¶: ${file.name}`);\n                } catch (error) {\n                    console.error('æ–‡ä»¶è§£æå¼‚å¸¸:', error);\n                    showErrorMessage('æ–‡ä»¶è§£æå¤±è´¥ï¼š' + error.message);\n                }\n            };\n            reader.onerror = function(error) {\n                console.error('æ–‡ä»¶è¯»å–å¤±è´¥:', error);\n                showErrorMessage('æ–‡ä»¶è¯»å–å¤±è´¥');\n            };\n            reader.readAsText(file);\n        }\n\n        function showFileInfo(file) {\n            const fileInfo = document.getElementById('file-info');\n            const fileName = document.getElementById('file-name');\n            const uploadArea = document.getElementById('upload-area');\n\n            fileName.textContent = file.name;\n            fileInfo.style.display = 'flex';\n            uploadArea.style.display = 'none';\n        }\n\n        function clearFile() {\n            const fileInfo = document.getElementById('file-info');\n            const uploadArea = document.getElementById('upload-area');\n            const fileInput = document.getElementById('file-input');\n\n            fileInfo.style.display = 'none';\n            uploadArea.style.display = 'block';\n\n            // æ¸…ç©ºæ–‡ä»¶è¾“å…¥æ¡†çš„å€¼\n            fileInput.value = '';\n\n            // æ¸…ç©ºæ•°æ®\n            hooksData = [];\n            filteredData = [];\n\n            // æ¸…ç©ºæ˜¾ç¤ºåŒºåŸŸ\n            document.getElementById('hooks-container').innerHTML = '';\n            document.getElementById('no-data').style.display = 'block';\n            document.getElementById('stats-section').style.display = 'none';\n\n            // æ˜¾ç¤ºæç¤º\n            showSuccessMessage('å·²æ¸…ç©ºæ–‡ä»¶ï¼Œè¯·é‡æ–°é€‰æ‹©æ—¥å¿—æ–‡ä»¶');\n        }\n\n        function showSuccessMessage(message) {\n            showMessage(message, 'success');\n        }\n\n        function showErrorMessage(message) {\n            showMessage(message, 'error');\n        }\n\n        function showMessage(message, type) {\n            // ç§»é™¤ä¹‹å‰çš„æ¶ˆæ¯\n            const existingMessages = document.querySelectorAll('.upload-message');\n            existingMessages.forEach(msg => msg.remove());\n\n            const messageClass = type === 'success' ? 'upload-success' : 'upload-error';\n            const messageDiv = document.createElement('div');\n            messageDiv.className = `upload-message ${messageClass}`;\n            messageDiv.textContent = message;\n\n            document.querySelector('.upload-card').appendChild(messageDiv);\n\n            // 3ç§’åè‡ªåŠ¨æ¶ˆå¤±\n            setTimeout(() => {\n                messageDiv.style.opacity = '0';\n                setTimeout(() => {\n                    if (messageDiv.parentNode) {\n                        messageDiv.parentNode.removeChild(messageDiv);\n                    }\n                }, 300);\n            }, 3000);\n        }\n\n        // è§£æ hooks æ•°æ®\n        function parseHooksData(content) {\n            console.log('å¼€å§‹è§£æ hooks æ•°æ®ï¼Œå†…å®¹é•¿åº¦:', content.length);\n\n            hooksData = [];\n            const lines = content.split('\\n').filter(line => line.trim());\n            console.log('åˆ†å‰²åçš„è¡Œæ•°:', lines.length);\n\n            for (let i = 0; i < lines.length; i++) {\n                const line = lines[i];\n                try {\n                    const hookData = JSON.parse(line);\n                    hooksData.push(hookData);\n                    console.log(`æˆåŠŸè§£æç¬¬ ${i + 1} è¡Œï¼Œäº‹ä»¶ç±»å‹:`, hookData.event);\n                } catch (error) {\n                    console.error(`è§£æç¬¬ ${i + 1} è¡Œå¤±è´¥:`, error.message);\n                    console.error('é—®é¢˜è¡Œçš„å†…å®¹:', line.substring(0, 100) + (line.length > 100 ? '...' : ''));\n                }\n            }\n\n            console.log('è§£æå®Œæˆï¼Œæ€»å…±è§£æåˆ°', hooksData.length, 'ä¸ªæœ‰æ•ˆäº‹ä»¶');\n\n            if (hooksData.length === 0) {\n                showErrorMessage('æœªæ‰¾åˆ°æœ‰æ•ˆçš„ hooks æ•°æ®ã€‚è¯·ç¡®ä¿æ–‡ä»¶æ ¼å¼æ­£ç¡®ï¼Œæ¯è¡Œåº”è¯¥æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„JSONå¯¹è±¡ã€‚');\n                console.error('è§£æå¤±è´¥ï¼Œæ²¡æœ‰æ‰¾åˆ°æœ‰æ•ˆçš„hooksæ•°æ®');\n                return;\n            }\n\n            filteredData = [...hooksData];\n            console.log('å‡†å¤‡æ˜¾ç¤ºæ•°æ®ï¼Œè¿‡æ»¤åçš„äº‹ä»¶æ•°é‡:', filteredData.length);\n            displayData();\n        }\n\n        // æ˜¾ç¤ºæ•°æ®\n        function displayData() {\n            document.getElementById('no-data').style.display = 'none';\n            document.getElementById('error-message').style.display = 'none';\n            document.getElementById('stats-section').style.display = 'block';\n\n            updateStatistics();\n            renderHooks();\n        }\n\n        // æ›´æ–°ç»Ÿè®¡ä¿¡æ¯\n        function updateStatistics() {\n            const stats = {\n                total: filteredData.length,\n                userPrompts: filteredData.filter(h => h.event === 'UserPromptSubmit').length,\n                preTools: filteredData.filter(h => h.event === 'PreToolUse').length,\n                postTools: filteredData.filter(h => h.event === 'PostToolUse').length,\n                notifications: filteredData.filter(h => h.event === 'Notification').length,\n                stops: filteredData.filter(h => h.event === 'Stop').length,\n                subagentStops: filteredData.filter(h => h.event === 'SubagentStop').length,\n                preCompacts: filteredData.filter(h => h.event === 'PreCompact').length,\n                sessionStarts: filteredData.filter(h => h.event === 'SessionStart').length,\n                sessionEnds: filteredData.filter(h => h.event === 'SessionEnd').length,\n                transcriptCount: filteredData.filter(h => hasTranscriptPath(h)).length\n            };\n\n            document.getElementById('total-hooks').textContent = stats.total;\n            document.getElementById('user-prompts').textContent = stats.userPrompts;\n            document.getElementById('pre-tools').textContent = stats.preTools;\n            document.getElementById('post-tools').textContent = stats.postTools;\n            document.getElementById('notifications').textContent = stats.notifications;\n            document.getElementById('stops').textContent = stats.stops;\n            document.getElementById('subagent-stops').textContent = stats.subagentStops;\n            document.getElementById('pre-compacts').textContent = stats.preCompacts;\n            document.getElementById('session-starts').textContent = stats.sessionStarts;\n            document.getElementById('session-ends').textContent = stats.sessionEnds;\n            document.getElementById('transcript-count').textContent = stats.transcriptCount;\n        }\n\n        // æ¸²æŸ“ hooks\n        function renderHooks() {\n            const container = document.getElementById('hooks-container');\n            container.innerHTML = '';\n\n            filteredData.forEach((hook, index) => {\n                const hookElement = createHookElement(hook, index);\n                container.appendChild(hookElement);\n            });\n\n            // æ·»åŠ åŠ¨ç”»\n            const elements = container.querySelectorAll('.hook-item');\n            elements.forEach((el, i) => {\n                el.style.opacity = '0';\n                el.style.transform = 'translateY(20px)';\n                setTimeout(() => {\n                    el.style.transition = 'opacity 0.3s ease, transform 0.3s ease';\n                    el.style.opacity = '1';\n                    el.style.transform = 'translateY(0)';\n                }, i * 50);\n            });\n        }\n\n        // æ£€æŸ¥æ˜¯å¦åŒ…å« transcript_path å­—æ®µ\n        function hasTranscriptPath(hook) {\n            if (!hook.payload) return false;\n\n            // æ£€æŸ¥ payload ä¸­æ˜¯å¦ç›´æ¥åŒ…å« transcript_path\n            if (hook.payload.transcript_path) return true;\n\n            // æ·±åº¦æœç´¢ payload å¯¹è±¡ä¸­çš„ transcript_path å­—æ®µ\n            return searchInObject(hook.payload, 'transcript_path');\n        }\n\n        // åœ¨å¯¹è±¡ä¸­é€’å½’æœç´¢æŒ‡å®šå­—æ®µ\n        function searchInObject(obj, fieldName) {\n            if (!obj || typeof obj !== 'object') return false;\n\n            for (const key in obj) {\n                if (key === fieldName) return true;\n\n                if (typeof obj[key] === 'object' && obj[key] !== null) {\n                    if (searchInObject(obj[key], fieldName)) return true;\n                }\n            }\n\n            return false;\n        }\n\n        // è·å– transcript_path çš„å€¼\n        function getTranscriptPath(hook) {\n            if (!hook.payload) return null;\n\n            // æ£€æŸ¥ payload ä¸­æ˜¯å¦ç›´æ¥åŒ…å« transcript_path\n            if (hook.payload.transcript_path) return hook.payload.transcript_path;\n\n            // æ·±åº¦æœç´¢å¹¶è¿”å› transcript_path çš„å€¼\n            return findValueInObject(hook.payload, 'transcript_path');\n        }\n\n        // åœ¨å¯¹è±¡ä¸­é€’å½’æŸ¥æ‰¾æŒ‡å®šå­—æ®µçš„å€¼\n        function findValueInObject(obj, fieldName) {\n            if (!obj || typeof obj !== 'object') return null;\n\n            for (const key in obj) {\n                if (key === fieldName) return obj[key];\n\n                if (typeof obj[key] === 'object' && obj[key] !== null) {\n                    const found = findValueInObject(obj[key], fieldName);\n                    if (found !== null) return found;\n                }\n            }\n\n            return null;\n        }\n\n        // åˆ›å»º hook å…ƒç´ \n        function createHookElement(hook, index) {\n            const div = document.createElement('div');\n            div.className = 'hook-item';\n\n            const eventClass = getEventClass(hook.event);\n            const formattedTime = formatTimestamp(hook.ts);\n            const eventDescription = getEventDescription(hook.event, hook.phase);\n            const hasTranscript = hasTranscriptPath(hook);\n            const transcriptPath = getTranscriptPath(hook);\n\n            div.innerHTML = `\n                <div class=\"hook-header\">\n                    <div class=\"hook-event\">\n                        <span class=\"event-badge ${eventClass}\">${hook.event}</span>\n                        ${hasTranscript ? '<span class=\"has-transcript-badge\">åŒ…å«è½¬å½•è·¯å¾„</span>' : ''}\n                    </div>\n                    <div class=\"hook-meta\">\n                        <div class=\"hook-timestamp\">${formattedTime}</div>\n                    </div>\n                </div>\n                <div class=\"hook-message\">${hook.message}</div>\n                <div class=\"hook-description\">${hook.description || eventDescription}</div>\n                ${hasTranscript && transcriptPath ? `\n                <div class=\"transcript-path\">\n                    <div class=\"transcript-path-label\">ğŸ“„ è½¬å½•è·¯å¾„ (transcript_path):</div>\n                    <div class=\"transcript-path-value\">${escapeHtml(transcriptPath)}</div>\n                    <div class=\"transcript-actions\">\n                        <button class=\"transcript-btn copy\" onclick=\"copyTranscriptPath('${escapeHtml(transcriptPath)}')\" title=\"å¤åˆ¶è·¯å¾„\">\n                            ğŸ“‹ å¤åˆ¶\n                        </button>\n                        ${isUrl(transcriptPath) ?\n                            `<button class=\"transcript-btn open\" onclick=\"openTranscriptUrl('${escapeHtml(transcriptPath)}')\" title=\"åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€\">\n                                ğŸ”— æ‰“å¼€é“¾æ¥\n                            </button>` :\n                            `<button class=\"transcript-btn open\" onclick=\"tryOpenTranscriptFile('${escapeHtml(transcriptPath)}')\" title=\"å°è¯•æ‰“å¼€æ–‡ä»¶\">\n                                ğŸ“‚ å°è¯•æ‰“å¼€\n                            </button>`\n                        }\n                    </div>\n                </div>\n                ` : ''}\n                <div class=\"hook-details\">\n                    <div class=\"part-card\">\n                        <div class=\"part-header\" onclick=\"toggleDetail('payload-${index}')\">\n                            <span>Payload</span>\n                            <span class=\"toggle-icon\" id=\"icon-payload-${index}\">â–¼</span>\n                        </div>\n                        <div class=\"part-content hidden\" id=\"payload-${index}\">\n                            ${formatJson(hook.payload)}\n                        </div>\n                    </div>\n                </div>\n            `;\n\n            return div;\n        }\n\n        // è·å–äº‹ä»¶æè¿°\n        function getEventDescription(event, phase) {\n            switch (event) {\n                case 'PreToolUse':\n                    return 'å·¥å…·æ‰§è¡Œå‰è§¦å‘ï¼Œå¯åŸºäºå‚æ•°é˜»æ­¢æˆ–è°ƒæ•´è°ƒç”¨ã€‚';\n                case 'PostToolUse':\n                    return 'å·¥å…·æˆåŠŸæ‰§è¡Œåè§¦å‘ï¼Œå¸¸ç”¨äºæ ¼å¼åŒ–ã€æ ¡éªŒæˆ–è®°å½•ç»“æœã€‚';\n                case 'UserPromptSubmit':\n                    return 'ç”¨æˆ·æäº¤æç¤ºå‰è§¦å‘ï¼Œå¯è¿›è¡Œæç¤ºæ ¡éªŒæˆ–å¢å¼ºã€‚';\n                case 'Notification':\n                    return 'å½“ç³»ç»Ÿå‘é€é€šçŸ¥ï¼ˆéœ€æˆæƒæˆ–ç­‰å¾…è¾“å…¥ï¼‰æ—¶è§¦å‘ã€‚';\n                case 'Stop':\n                    return 'ä¸»ä»£ç†å®Œæˆå“åº”æ—¶è§¦å‘ï¼ˆç”¨æˆ·ä¸­æ–­ä¸è§¦å‘ï¼‰ã€‚';\n                case 'SubagentStop':\n                    return 'å­ä»£ç†ä»»åŠ¡å®Œæˆæ—¶è§¦å‘ï¼Œç”¨äºè®°å½•å­ä»»åŠ¡ç»“æŸã€‚';\n                case 'PreCompact':\n                    return phase === 'manual'\n                        ? 'æ‰‹åŠ¨å‹ç¼©å‰è§¦å‘ï¼Œç”¨äºè®°å½•æˆ–å‡†å¤‡å‹ç¼©ã€‚'\n                        : 'è‡ªåŠ¨å‹ç¼©å‰è§¦å‘ï¼ˆä¸Šä¸‹æ–‡æ¥è¿‘ä¸Šé™ï¼‰ï¼Œç”¨äºè®°å½•æˆ–å‡†å¤‡å‹ç¼©ã€‚';\n                case 'SessionStart':\n                    switch (phase) {\n                        case 'startup':\n                            return 'æ–°ä¼šè¯å¯åŠ¨æ—¶è§¦å‘ï¼Œç”¨äºåŠ è½½ä¸Šä¸‹æ–‡æˆ–è®¾ç½®ç¯å¢ƒã€‚';\n                        case 'resume':\n                            return 'æ¢å¤ä¼šè¯æ—¶è§¦å‘ï¼Œç”¨äºç»§ç»­å…ˆå‰ä¸Šä¸‹æ–‡ã€‚';\n                        case 'clear':\n                            return 'æ¸…ç©ºä¼šè¯åè§¦å‘ï¼Œç”¨äºé‡ç½®ç¯å¢ƒä¸ä¸Šä¸‹æ–‡ã€‚';\n                        case 'compact':\n                            return 'å› å‹ç¼©æ“ä½œè§¦å‘çš„ä¼šè¯å¯åŠ¨ï¼Œç”¨äºç»´æŒä¸Šä¸‹æ–‡ã€‚';\n                        default:\n                            return 'ä¼šè¯å¯åŠ¨ç›¸å…³äº‹ä»¶ï¼Œåˆå§‹åŒ–æˆ–æ¢å¤ä¸Šä¸‹æ–‡ã€‚';\n                    }\n                case 'SessionEnd':\n                    return 'ä¼šè¯ç»“æŸæ—¶è§¦å‘ï¼Œå¸¸ç”¨äºæ”¶å°¾ä¸æ¸…ç†ã€‚';\n                default:\n                    return 'æœªçŸ¥äº‹ä»¶ã€‚';\n            }\n        }\n\n        // è·å–äº‹ä»¶æ ·å¼ç±»\n        function getEventClass(event) {\n            switch (event) {\n                case 'UserPromptSubmit': return 'event-userprompt';\n                case 'PreToolUse': return 'event-pretool';\n                case 'PostToolUse': return 'event-posttool';\n                case 'Notification': return 'event-notification';\n                case 'Stop': return 'event-stop';\n                case 'SubagentStop': return 'event-subagent-stop';\n                case 'PreCompact': return 'event-pre-compact';\n                case 'SessionStart': return 'event-session-start';\n                case 'SessionEnd': return 'event-session-end';\n                default: return 'event-default';\n            }\n        }\n\n        // æ ¼å¼åŒ–æ—¶é—´æˆ³\n        function formatTimestamp(ts) {\n            const date = new Date(ts);\n            return date.toLocaleString('zh-CN');\n        }\n\n        // æ ¼å¼åŒ– JSON\n        function formatJson(obj, indent = 0) {\n            if (!obj) return '';\n\n            try {\n                const spaces = '  '.repeat(indent);\n                let result = '';\n\n                if (Array.isArray(obj)) {\n                    result += '[\\n';\n                    obj.forEach((item, index) => {\n                        result += spaces + '  ';\n                        if (typeof item === 'object' && item !== null) {\n                            result += formatJson(item, indent + 1);\n                        } else {\n                            result += formatJsonValue(item);\n                        }\n                        if (index < obj.length - 1) result += ',';\n                        result += '\\n';\n                    });\n                    result += spaces + ']';\n                } else if (typeof obj === 'object' && obj !== null) {\n                    result += '{\\n';\n                    const keys = Object.keys(obj);\n                    keys.forEach((key, index) => {\n                        result += spaces + '  ';\n                        result += `<span class=\"json-key\">\"${escapeHtml(key)}\"</span>: `;\n\n                        if (typeof obj[key] === 'object' && obj[key] !== null) {\n                            result += formatJson(obj[key], indent + 1);\n                        } else {\n                            result += formatJsonValue(obj[key]);\n                        }\n\n                        if (index < keys.length - 1) result += ',';\n                        result += '\\n';\n                    });\n                    result += spaces + '}';\n                } else {\n                    result += formatJsonValue(obj);\n                }\n\n                return result;\n            } catch (error) {\n                return escapeHtml(JSON.stringify(obj));\n            }\n        }\n\n        // æ ¼å¼åŒ– JSON å€¼\n        function formatJsonValue(value) {\n            if (typeof value === 'string') {\n                if (value.startsWith('http://') || value.startsWith('https://')) {\n                    return `<span class=\"json-url\" onclick=\"window.open('${escapeHtml(value)}', '_blank')\">\"${escapeHtml(value)}\"</span>`;\n                }\n                return `<span class=\"json-string\">\"${escapeHtml(value)}\"</span>`;\n            } else if (typeof value === 'number') {\n                return `<span class=\"json-number\">${value}</span>`;\n            } else if (typeof value === 'boolean') {\n                return `<span class=\"json-boolean\">${value}</span>`;\n            } else if (value === null) {\n                return `<span class=\"json-null\">null</span>`;\n            } else {\n                return `<span style=\"color: #666;\">${value}</span>`;\n            }\n        }\n\n        // HTML è½¬ä¹‰\n        function escapeHtml(text) {\n            const div = document.createElement('div');\n            div.textContent = text;\n            return div.innerHTML;\n        }\n\n        // åˆ‡æ¢è¯¦æƒ…æ˜¾ç¤º\n        function toggleDetail(id) {\n            const content = document.getElementById(id);\n            const icon = document.getElementById('icon-' + id);\n\n            if (content.classList.contains('hidden')) {\n                content.classList.remove('hidden');\n                icon.classList.add('rotated');\n            } else {\n                content.classList.add('hidden');\n                icon.classList.remove('rotated');\n            }\n        }\n\n        // è¿‡æ»¤å’Œæœç´¢\n        document.getElementById('event-filter').addEventListener('change', applyFilters);\n        document.getElementById('search-input').addEventListener('input', applyFilters);\n\n        function applyFilters() {\n            const eventFilter = document.getElementById('event-filter').value;\n            const searchText = document.getElementById('search-input').value.toLowerCase();\n\n            filteredData = hooksData.filter(hook => {\n                const matchEvent = !eventFilter || hook.event === eventFilter;\n                const matchSearch = !searchText ||\n                    JSON.stringify(hook).toLowerCase().includes(searchText);\n\n                return matchEvent && matchSearch;\n            });\n\n            updateStatistics();\n            renderHooks();\n        }\n\n        // æ£€æŸ¥æ˜¯å¦ä¸º URL\n        function isUrl(text) {\n            try {\n                new URL(text);\n                return true;\n            } catch {\n                return false;\n            }\n        }\n\n        // å¤åˆ¶è½¬å½•è·¯å¾„åˆ°å‰ªè´´æ¿\n        async function copyTranscriptPath(path) {\n            try {\n                await navigator.clipboard.writeText(path);\n                showToast('è·¯å¾„å·²å¤åˆ¶åˆ°å‰ªè´´æ¿', 'success');\n            } catch (error) {\n                // é™çº§æ–¹æ¡ˆ\n                const textArea = document.createElement('textarea');\n                textArea.value = path;\n                document.body.appendChild(textArea);\n                textArea.select();\n                document.execCommand('copy');\n                document.body.removeChild(textArea);\n                showToast('è·¯å¾„å·²å¤åˆ¶åˆ°å‰ªè´´æ¿', 'success');\n            }\n        }\n\n        // æ‰“å¼€è½¬å½•é“¾æ¥ï¼ˆURLï¼‰\n        function openTranscriptUrl(url) {\n            window.open(url, '_blank');\n        }\n\n        // å°è¯•æ‰“å¼€æœ¬åœ°æ–‡ä»¶ï¼ˆé€šè¿‡æ–‡ä»¶é€‰æ‹©å™¨æ¨¡æ‹Ÿï¼‰\n        function tryOpenTranscriptFile(path) {\n            // ç”±äºæµè§ˆå™¨å®‰å…¨é™åˆ¶ï¼Œæ— æ³•ç›´æ¥æ‰“å¼€æœ¬åœ°æ–‡ä»¶è·¯å¾„\n            // è¿™é‡Œæä¾›å‡ ç§æ›¿ä»£æ–¹æ¡ˆï¼š\n\n            // æ–¹æ¡ˆ1ï¼šå¤åˆ¶è·¯å¾„åˆ°å‰ªè´´æ¿\n            copyTranscriptPath(path);\n\n            // æ–¹æ¡ˆ2ï¼šæ˜¾ç¤ºæç¤ºä¿¡æ¯\n            showToast('æµè§ˆå™¨å®‰å…¨é™åˆ¶æ— æ³•ç›´æ¥æ‰“å¼€æœ¬åœ°æ–‡ä»¶ï¼Œè·¯å¾„å·²å¤åˆ¶ã€‚è¯·åœ¨æ–‡ä»¶ç®¡ç†å™¨ä¸­æ‰‹åŠ¨æ‰“å¼€ã€‚', 'info');\n\n            // æ–¹æ¡ˆ3ï¼šå°è¯•åˆ›å»ºæ–‡ä»¶ä¸‹è½½ï¼ˆå¦‚æœè·¯å¾„æ˜¯å¯è®¿é—®çš„ï¼‰\n            if (path.startsWith('file://')) {\n                showToast('æ£€æµ‹åˆ°æ–‡ä»¶åè®®ï¼Œä½†æµè§ˆå™¨é™åˆ¶ç›´æ¥è®¿é—®ã€‚è¯·æ‰‹åŠ¨å¤åˆ¶è·¯å¾„ã€‚', 'warning');\n            } else if (path.startsWith('http://') || path.startsWith('https://')) {\n                // å¦‚æœæ˜¯ http/https é“¾æ¥ï¼Œç›´æ¥æ‰“å¼€\n                openTranscriptUrl(path);\n            } else {\n                // æœ¬åœ°æ–‡ä»¶è·¯å¾„ï¼Œåªèƒ½å¤åˆ¶\n                showToast(`æœ¬åœ°æ–‡ä»¶è·¯å¾„: ${path}\\nå·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼Œè¯·åœ¨æ–‡ä»¶ç®¡ç†å™¨ä¸­æ‰‹åŠ¨æ‰“å¼€ã€‚`, 'info');\n            }\n        }\n\n        // æ˜¾ç¤ºæç¤ºä¿¡æ¯\n        function showToast(message, type = 'info') {\n            const toast = document.createElement('div');\n            toast.style.cssText = `\n                position: fixed;\n                top: 20px;\n                right: 20px;\n                background: ${type === 'success' ? '#28a745' : type === 'warning' ? '#ffc107' : type === 'error' ? '#dc3545' : '#007bff'};\n                color: white;\n                padding: 12px 16px;\n                border-radius: 6px;\n                font-size: 0.9rem;\n                z-index: 10000;\n                max-width: 400px;\n                word-wrap: break-word;\n                box-shadow: 0 4px 12px rgba(0,0,0,0.15);\n                animation: slideInRight 0.3s ease;\n            `;\n\n            toast.textContent = message;\n            document.body.appendChild(toast);\n\n            // 3ç§’åè‡ªåŠ¨æ¶ˆå¤±\n            setTimeout(() => {\n                toast.style.animation = 'slideOutRight 0.3s ease';\n                setTimeout(() => {\n                    if (toast.parentNode) {\n                        document.body.removeChild(toast);\n                    }\n                }, 300);\n            }, 3000);\n        }\n\n        // æ·»åŠ åŠ¨ç”»æ ·å¼\n        const style = document.createElement('style');\n        style.textContent = `\n            @keyframes slideInRight {\n                from {\n                    transform: translateX(100%);\n                    opacity: 0;\n                }\n                to {\n                    transform: translateX(0);\n                    opacity: 1;\n                }\n            }\n\n            @keyframes slideOutRight {\n                from {\n                    transform: translateX(0);\n                    opacity: 1;\n                }\n                to {\n                    transform: translateX(100%);\n                    opacity: 0;\n                }\n            }\n        `;\n        document.head.appendChild(style);\n\n        // æ ¼å¼åŒ–æ–‡ä»¶å¤§å°\n        function formatFileSize(bytes) {\n            if (bytes === 0) return '0 Bytes';\n            const k = 1024;\n            const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n            const i = Math.floor(Math.log(bytes) / Math.log(k));\n            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n        }\n\n        // é¡µé¢åŠ è½½æ—¶æ‰§è¡Œ\n        document.addEventListener('DOMContentLoaded', function() {\n            // æ·»åŠ åˆå§‹åŠ è½½åŠ¨ç”»\n            const cards = document.querySelectorAll('.stat-card, .upload-card');\n            cards.forEach((card, index) => {\n                card.style.opacity = '0';\n                card.style.transform = 'translateY(20px)';\n                setTimeout(() => {\n                    card.style.transition = 'opacity 0.5s ease, transform 0.5s ease';\n                    card.style.opacity = '1';\n                    card.style.transform = 'translateY(0)';\n                }, index * 100);\n            });\n\n            // è®¾ç½®æ–‡ä»¶ä¸Šä¼ \n            setupFileUpload();\n        });\n\n            </script>\n</body>\n</html>","structuredPatch":[{"oldStart":1243,"oldLines":29,"newStart":1243,"newLines":211,"lines":["             window.open(url, '_blank');","         }"," ","-        // å°è¯•æ‰“å¼€æœ¬åœ°æ–‡ä»¶ï¼ˆé€šè¿‡æ–‡ä»¶é€‰æ‹©å™¨æ¨¡æ‹Ÿï¼‰","+        // å°è¯•æ‰“å¼€æœ¬åœ°æ–‡ä»¶ï¼ˆé€šè¿‡æ–‡ä»¶é€‰æ‹©å™¨ï¼‰","         function tryOpenTranscriptFile(path) {","-            // ç”±äºæµè§ˆå™¨å®‰å…¨é™åˆ¶ï¼Œæ— æ³•ç›´æ¥æ‰“å¼€æœ¬åœ°æ–‡ä»¶è·¯å¾„","-            // è¿™é‡Œæä¾›å‡ ç§æ›¿ä»£æ–¹æ¡ˆï¼š","-","             // æ–¹æ¡ˆ1ï¼šå¤åˆ¶è·¯å¾„åˆ°å‰ªè´´æ¿","             copyTranscriptPath(path);"," ","-            // æ–¹æ¡ˆ2ï¼šæ˜¾ç¤ºæç¤ºä¿¡æ¯","-            showToast('æµè§ˆå™¨å®‰å…¨é™åˆ¶æ— æ³•ç›´æ¥æ‰“å¼€æœ¬åœ°æ–‡ä»¶ï¼Œè·¯å¾„å·²å¤åˆ¶ã€‚è¯·åœ¨æ–‡ä»¶ç®¡ç†å™¨ä¸­æ‰‹åŠ¨æ‰“å¼€ã€‚', 'info');","+            // æ–¹æ¡ˆ2ï¼šå¦‚æœæ˜¯ç½‘ç»œé“¾æ¥ï¼Œç›´æ¥æ‰“å¼€","+            if (path.startsWith('http://') || path.startsWith('https://')) {","+                openTranscriptUrl(path);","+                return;","+            }"," ","-            // æ–¹æ¡ˆ3ï¼šå°è¯•åˆ›å»ºæ–‡ä»¶ä¸‹è½½ï¼ˆå¦‚æœè·¯å¾„æ˜¯å¯è®¿é—®çš„ï¼‰","+            // æ–¹æ¡ˆ3ï¼šä½¿ç”¨æ–‡ä»¶é€‰æ‹©å™¨è®©ç”¨æˆ·é€‰æ‹©æœ¬åœ°æ–‡ä»¶","             if (path.startsWith('file://')) {","-                showToast('æ£€æµ‹åˆ°æ–‡ä»¶åè®®ï¼Œä½†æµè§ˆå™¨é™åˆ¶ç›´æ¥è®¿é—®ã€‚è¯·æ‰‹åŠ¨å¤åˆ¶è·¯å¾„ã€‚', 'warning');","-            } else if (path.startsWith('http://') || path.startsWith('https://')) {","-                // å¦‚æœæ˜¯ http/https é“¾æ¥ï¼Œç›´æ¥æ‰“å¼€","-                openTranscriptUrl(path);","+                // file:// åè®®ï¼Œæå–æ–‡ä»¶è·¯å¾„","+                const cleanPath = path.replace(/^file:\\/\\//, '');","+                showFileSelector(cleanPath);","             } else {","-                // æœ¬åœ°æ–‡ä»¶è·¯å¾„ï¼Œåªèƒ½å¤åˆ¶","-                showToast(`æœ¬åœ°æ–‡ä»¶è·¯å¾„: ${path}\\nå·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼Œè¯·åœ¨æ–‡ä»¶ç®¡ç†å™¨ä¸­æ‰‹åŠ¨æ‰“å¼€ã€‚`, 'info');","+                // æœ¬åœ°æ–‡ä»¶è·¯å¾„","+                showFileSelector(path);","             }","         }"," ","+        // æ˜¾ç¤ºæ–‡ä»¶é€‰æ‹©å™¨","+        function showFileSelector(expectedPath) {","+            const input = document.createElement('input');","+            input.type = 'file';","+            input.style.display = 'none';","+","+            // ä»è·¯å¾„ä¸­æå–æ–‡ä»¶å","+            const fileName = expectedPath.split(/[/\\\\]/).pop();","+","+            input.addEventListener('change', function(event) {","+                const file = event.target.files[0];","+                if (file) {","+                    if (file.name === fileName) {","+                        // æ–‡ä»¶ååŒ¹é…ï¼Œè¯»å–å¹¶æ˜¾ç¤ºæ–‡ä»¶å†…å®¹","+                        readAndDisplayFile(file);","+                    } else {","+                        showToast(`é€‰æ‹©çš„æ–‡ä»¶åä¸åŒ¹é…\\næœŸæœ›: ${fileName}\\nå®é™…: ${file.name}`, 'warning');","+                        // ä»ç„¶æ˜¾ç¤ºé€‰æ‹©çš„æ–‡ä»¶å†…å®¹","+                        readAndDisplayFile(file);","+                    }","+                }","+                // æ¸…ç†inputå…ƒç´ ","+                document.body.removeChild(input);","+            });","+","+            document.body.appendChild(input);","+","+            // æ˜¾ç¤ºæç¤ºï¼Œç„¶åè§¦å‘æ–‡ä»¶é€‰æ‹©","+            showToast(`è¯·é€‰æ‹©æ–‡ä»¶: ${fileName}`, 'info');","+            setTimeout(() => {","+                input.click();","+            }, 500);","+        }","+","+        // è¯»å–å¹¶æ˜¾ç¤ºæ–‡ä»¶å†…å®¹","+        function readAndDisplayFile(file) {","+            const reader = new FileReader();","+            reader.onload = function(e) {","+                const content = e.target.result;","+","+                // åˆ›å»ºä¸€ä¸ªæ¨¡æ€çª—å£æ˜¾ç¤ºæ–‡ä»¶å†…å®¹","+                showFileModal(file.name, content);","+            };","+","+            reader.onerror = function() {","+                showToast('æ–‡ä»¶è¯»å–å¤±è´¥', 'error');","+            };","+","+            reader.readAsText(file);","+        }","+","+        // æ˜¾ç¤ºæ–‡ä»¶å†…å®¹çš„æ¨¡æ€çª—å£","+        function showFileModal(fileName, content) {","+            // åˆ›å»ºæ¨¡æ€èƒŒæ™¯","+            const modal = document.createElement('div');","+            modal.style.cssText = `","+                position: fixed;","+                top: 0;","+                left: 0;","+                width: 100%;","+                height: 100%;","+                background: rgba(0, 0, 0, 0.8);","+                z-index: 10000;","+                display: flex;","+                justify-content: center;","+                align-items: center;","+                animation: fadeIn 0.3s ease;","+            `;","+","+            // åˆ›å»ºæ¨¡æ€å†…å®¹","+            const modalContent = document.createElement('div');","+            modalContent.style.cssText = `","+                background: white;","+                border-radius: 12px;","+                width: 90%;","+                max-width: 800px;","+                max-height: 80vh;","+                display: flex;","+                flex-direction: column;","+                box-shadow: 0 20px 60px rgba(0,0,0,0.3);","+                animation: slideUp 0.3s ease;","+            `;","+","+            // åˆ›å»ºå¤´éƒ¨","+            const header = document.createElement('div');","+            header.style.cssText = `","+                padding: 20px;","+                border-bottom: 1px solid #e0e0e0;","+                display: flex;","+                justify-content: space-between;","+                align-items: center;","+                background: #f8f9fa;","+                border-radius: 12px 12px 0 0;","+            `;","+","+            const title = document.createElement('h3');","+            title.textContent = `ğŸ“„ ${fileName}`;","+            title.style.cssText = `","+                margin: 0;","+                color: #333;","+                font-size: 1.2rem;","+            `;","+","+            const closeBtn = document.createElement('button');","+            closeBtn.textContent = 'âœ•';","+            closeBtn.style.cssText = `","+                background: none;","+                border: none;","+                font-size: 1.5rem;","+                cursor: pointer;","+                color: #666;","+                padding: 5px;","+                border-radius: 50%;","+                width: 32px;","+                height: 32px;","+                display: flex;","+                align-items: center;","+                justify-content: center;","+            `;","+            closeBtn.onmouseover = () => closeBtn.style.background = '#e0e0e0';","+            closeBtn.onmouseout = () => closeBtn.style.background = 'none';","+","+            // åˆ›å»ºå†…å®¹åŒºåŸŸ","+            const contentArea = document.createElement('div');","+            contentArea.style.cssText = `","+                padding: 20px;","+                overflow-y: auto;","+                flex: 1;","+                font-family: 'Courier New', monospace;","+                font-size: 0.9rem;","+                line-height: 1.5;","+                background: #1a1a1a;","+                color: #ffffff;","+                white-space: pre-wrap;","+                border-radius: 0 0 12px 12px;","+                max-height: 60vh;","+            `;","+","+            // è®¾ç½®å†…å®¹","+            contentArea.textContent = content;","+","+            // ç»„è£…æ¨¡æ€çª—å£","+            header.appendChild(title);","+            header.appendChild(closeBtn);","+            modalContent.appendChild(header);","+            modalContent.appendChild(contentArea);","+            modal.appendChild(modalContent);","+","+            // æ·»åŠ å…³é—­äº‹ä»¶","+            closeBtn.onclick = () => document.body.removeChild(modal);","+            modal.onclick = (e) => {","+                if (e.target === modal) {","+                    document.body.removeChild(modal);","+                }","+            };","+","+            // æ·»åŠ åˆ°é¡µé¢","+            document.body.appendChild(modal);","+","+            // æ·»åŠ åŠ¨ç”»æ ·å¼","+            if (!document.getElementById('modal-animations')) {","+                const style = document.createElement('style');","+                style.id = 'modal-animations';","+                style.textContent = `","+                    @keyframes fadeIn {","+                        from { opacity: 0; }","+                        to { opacity: 1; }","+                    }","+                    @keyframes slideUp {","+                        from {","+                            opacity: 0;","+                            transform: translateY(50px);","+                        }","+                        to {","+                            opacity: 1;","+                            transform: translateY(0);","+                        }","+                    }","+                `;","+                document.head.appendChild(style);","+            }","+        }","+","         // æ˜¾ç¤ºæç¤ºä¿¡æ¯","         function showToast(message, type = 'info') {","             const toast = document.createElement('div');"]}],"userModified":false,"replaceAll":false}}}
{"ts":"2025-11-05T02:37:53.867Z","event":"PreToolUse","phase":"","message":"PreToolUseäº‹ä»¶æ­£åœ¨æ‰§è¡Œ","description":"å·¥å…·æ‰§è¡Œå‰è§¦å‘ï¼Œå¯åŸºäºå‚æ•°é˜»æ­¢æˆ–è°ƒæ•´è°ƒç”¨ã€‚","doc_url":"https://docs.claude.com/zh-CN/docs/claude-code/hooks#pretooluse","payload":{"session_id":"c7c21516-7e1e-49b2-8ae5-4e1bb98e9692","transcript_path":"C:\\Users\\WTCL\\.claude\\projects\\i--claude-code-proxy\\c7c21516-7e1e-49b2-8ae5-4e1bb98e9692.jsonl","cwd":"i:\\claude-code-proxy","permission_mode":"acceptEdits","hook_event_name":"PreToolUse","tool_name":"Edit","tool_input":{"file_path":"i:\\claude-code-proxy\\analyze\\hooks.html","old_string":"const closeBtn = document.createElement('button');\n            closeBtn.textContent = 'âœ•';\n            closeBtn.style.cssText = `\n                background: none;\n                border: none;\n                font-size: 1.5rem;\n                cursor: pointer;\n                color: #666;\n                padding: 5px;\n                border-radius: 50%;\n                width: 32px;\n                height: 32px;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n            `;\n            closeBtn.onmouseover = () => closeBtn.style.background = '#e0e0e0';\n            closeBtn.onmouseout = () => closeBtn.style.background = 'none';","new_string":"// åˆ›å»ºæ“ä½œæŒ‰é’®åŒºåŸŸ\n            const actions = document.createElement('div');\n            actions.style.cssText = `\n                display: flex;\n                gap: 10px;\n                align-items: center;\n            `;\n\n            const copyBtn = document.createElement('button');\n            copyBtn.textContent = 'ğŸ“‹ å¤åˆ¶å†…å®¹';\n            copyBtn.style.cssText = `\n                background: #28a745;\n                color: white;\n                border: none;\n                padding: 6px 12px;\n                border-radius: 4px;\n                font-size: 0.8rem;\n                cursor: pointer;\n                transition: background 0.3s ease;\n            `;\n            copyBtn.onmouseover = () => copyBtn.style.background = '#218838';\n            copyBtn.onmouseout = () => copyBtn.style.background = '#28a745';\n\n            const closeBtn = document.createElement('button');\n            closeBtn.textContent = 'âœ•';\n            closeBtn.style.cssText = `\n                background: none;\n                border: none;\n                font-size: 1.5rem;\n                cursor: pointer;\n                color: #666;\n                padding: 5px;\n                border-radius: 50%;\n                width: 32px;\n                height: 32px;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n            `;\n            closeBtn.onmouseover = () => closeBtn.style.background = '#e0e0e0';\n            closeBtn.onmouseout = () => closeBtn.style.background = 'none';\n\n            // æ·»åŠ å¤åˆ¶åŠŸèƒ½\n            copyBtn.onclick = async () => {\n                try {\n                    await navigator.clipboard.writeText(content);\n                    showToast('æ–‡ä»¶å†…å®¹å·²å¤åˆ¶åˆ°å‰ªè´´æ¿', 'success');\n                } catch (error) {\n                    // é™çº§æ–¹æ¡ˆ\n                    const textArea = document.createElement('textarea');\n                    textArea.value = content;\n                    document.body.appendChild(textArea);\n                    textArea.select();\n                    document.execCommand('copy');\n                    document.body.removeChild(textArea);\n                    showToast('æ–‡ä»¶å†…å®¹å·²å¤åˆ¶åˆ°å‰ªè´´æ¿', 'success');\n                }\n            };"}}}
{"ts":"2025-11-05T02:37:55.593Z","event":"PostToolUse","phase":"","message":"PostToolUseäº‹ä»¶æ­£åœ¨æ‰§è¡Œ","description":"å·¥å…·æˆåŠŸæ‰§è¡Œåè§¦å‘ï¼Œå¸¸ç”¨äºæ ¼å¼åŒ–ã€æ ¡éªŒæˆ–è®°å½•ç»“æœã€‚","doc_url":"https://docs.claude.com/zh-CN/docs/claude-code/hooks#posttooluse","payload":{"session_id":"c7c21516-7e1e-49b2-8ae5-4e1bb98e9692","transcript_path":"C:\\Users\\WTCL\\.claude\\projects\\i--claude-code-proxy\\c7c21516-7e1e-49b2-8ae5-4e1bb98e9692.jsonl","cwd":"i:\\claude-code-proxy","permission_mode":"acceptEdits","hook_event_name":"PostToolUse","tool_name":"Edit","tool_input":{"file_path":"i:\\claude-code-proxy\\analyze\\hooks.html","old_string":"const closeBtn = document.createElement('button');\n            closeBtn.textContent = 'âœ•';\n            closeBtn.style.cssText = `\n                background: none;\n                border: none;\n                font-size: 1.5rem;\n                cursor: pointer;\n                color: #666;\n                padding: 5px;\n                border-radius: 50%;\n                width: 32px;\n                height: 32px;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n            `;\n            closeBtn.onmouseover = () => closeBtn.style.background = '#e0e0e0';\n            closeBtn.onmouseout = () => closeBtn.style.background = 'none';","new_string":"// åˆ›å»ºæ“ä½œæŒ‰é’®åŒºåŸŸ\n            const actions = document.createElement('div');\n            actions.style.cssText = `\n                display: flex;\n                gap: 10px;\n                align-items: center;\n            `;\n\n            const copyBtn = document.createElement('button');\n            copyBtn.textContent = 'ğŸ“‹ å¤åˆ¶å†…å®¹';\n            copyBtn.style.cssText = `\n                background: #28a745;\n                color: white;\n                border: none;\n                padding: 6px 12px;\n                border-radius: 4px;\n                font-size: 0.8rem;\n                cursor: pointer;\n                transition: background 0.3s ease;\n            `;\n            copyBtn.onmouseover = () => copyBtn.style.background = '#218838';\n            copyBtn.onmouseout = () => copyBtn.style.background = '#28a745';\n\n            const closeBtn = document.createElement('button');\n            closeBtn.textContent = 'âœ•';\n            closeBtn.style.cssText = `\n                background: none;\n                border: none;\n                font-size: 1.5rem;\n                cursor: pointer;\n                color: #666;\n                padding: 5px;\n                border-radius: 50%;\n                width: 32px;\n                height: 32px;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n            `;\n            closeBtn.onmouseover = () => closeBtn.style.background = '#e0e0e0';\n            closeBtn.onmouseout = () => closeBtn.style.background = 'none';\n\n            // æ·»åŠ å¤åˆ¶åŠŸèƒ½\n            copyBtn.onclick = async () => {\n                try {\n                    await navigator.clipboard.writeText(content);\n                    showToast('æ–‡ä»¶å†…å®¹å·²å¤åˆ¶åˆ°å‰ªè´´æ¿', 'success');\n                } catch (error) {\n                    // é™çº§æ–¹æ¡ˆ\n                    const textArea = document.createElement('textarea');\n                    textArea.value = content;\n                    document.body.appendChild(textArea);\n                    textArea.select();\n                    document.execCommand('copy');\n                    document.body.removeChild(textArea);\n                    showToast('æ–‡ä»¶å†…å®¹å·²å¤åˆ¶åˆ°å‰ªè´´æ¿', 'success');\n                }\n            };"},"tool_response":{"filePath":"i:\\claude-code-proxy\\analyze\\hooks.html","oldString":"const closeBtn = document.createElement('button');\n            closeBtn.textContent = 'âœ•';\n            closeBtn.style.cssText = `\n                background: none;\n                border: none;\n                font-size: 1.5rem;\n                cursor: pointer;\n                color: #666;\n                padding: 5px;\n                border-radius: 50%;\n                width: 32px;\n                height: 32px;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n            `;\n            closeBtn.onmouseover = () => closeBtn.style.background = '#e0e0e0';\n            closeBtn.onmouseout = () => closeBtn.style.background = 'none';","newString":"// åˆ›å»ºæ“ä½œæŒ‰é’®åŒºåŸŸ\n            const actions = document.createElement('div');\n            actions.style.cssText = `\n                display: flex;\n                gap: 10px;\n                align-items: center;\n            `;\n\n            const copyBtn = document.createElement('button');\n            copyBtn.textContent = 'ğŸ“‹ å¤åˆ¶å†…å®¹';\n            copyBtn.style.cssText = `\n                background: #28a745;\n                color: white;\n                border: none;\n                padding: 6px 12px;\n                border-radius: 4px;\n                font-size: 0.8rem;\n                cursor: pointer;\n                transition: background 0.3s ease;\n            `;\n            copyBtn.onmouseover = () => copyBtn.style.background = '#218838';\n            copyBtn.onmouseout = () => copyBtn.style.background = '#28a745';\n\n            const closeBtn = document.createElement('button');\n            closeBtn.textContent = 'âœ•';\n            closeBtn.style.cssText = `\n                background: none;\n                border: none;\n                font-size: 1.5rem;\n                cursor: pointer;\n                color: #666;\n                padding: 5px;\n                border-radius: 50%;\n                width: 32px;\n                height: 32px;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n            `;\n            closeBtn.onmouseover = () => closeBtn.style.background = '#e0e0e0';\n            closeBtn.onmouseout = () => closeBtn.style.background = 'none';\n\n            // æ·»åŠ å¤åˆ¶åŠŸèƒ½\n            copyBtn.onclick = async () => {\n                try {\n                    await navigator.clipboard.writeText(content);\n                    showToast('æ–‡ä»¶å†…å®¹å·²å¤åˆ¶åˆ°å‰ªè´´æ¿', 'success');\n                } catch (error) {\n                    // é™çº§æ–¹æ¡ˆ\n                    const textArea = document.createElement('textarea');\n                    textArea.value = content;\n                    document.body.appendChild(textArea);\n                    textArea.select();\n                    document.execCommand('copy');\n                    document.body.removeChild(textArea);\n                    showToast('æ–‡ä»¶å†…å®¹å·²å¤åˆ¶åˆ°å‰ªè´´æ¿', 'success');\n                }\n            };","originalFile":"<!DOCTYPE html>\n<html lang=\"zh-CN\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Hooks æ—¥å¿—åˆ†æ</title>\n    <style>\n        * {\n            margin: 0;\n            padding: 0;\n            box-sizing: border-box;\n        }\n\n        body {\n            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n            min-height: 100vh;\n            padding: 20px;\n        }\n\n        .container {\n            max-width: 1400px;\n            margin: 0 auto;\n        }\n\n        .header {\n            text-align: center;\n            color: white;\n            margin-bottom: 30px;\n        }\n\n        .header h1 {\n            font-size: 2.5rem;\n            margin-bottom: 10px;\n            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);\n        }\n\n        .header p {\n            font-size: 1.1rem;\n            opacity: 0.9;\n        }\n\n        /* æ–‡ä»¶ä¸Šä¼ ç»„ä»¶æ ·å¼ */\n        .upload-section {\n            margin-bottom: 30px;\n        }\n\n        .upload-card {\n            background: white;\n            border-radius: 15px;\n            padding: 25px;\n            box-shadow: 0 10px 30px rgba(0,0,0,0.1);\n            border: 2px dashed #cbd5e0;\n            transition: all 0.3s ease;\n        }\n\n        .upload-card:hover {\n            border-color: #667eea;\n            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.2);\n        }\n\n        .upload-header {\n            font-size: 1.2rem;\n            font-weight: bold;\n            color: #4a5568;\n            margin-bottom: 20px;\n            text-align: center;\n        }\n\n        .upload-area {\n            border: 2px dashed #e2e8f0;\n            border-radius: 10px;\n            padding: 40px 20px;\n            text-align: center;\n            transition: all 0.3s ease;\n            cursor: pointer;\n        }\n\n        .upload-area:hover {\n            border-color: #667eea;\n            background: #f7fafc;\n        }\n\n        .upload-area.dragover {\n            border-color: #667eea;\n            background: #edf2f7;\n            transform: scale(1.02);\n        }\n\n        .upload-icon {\n            font-size: 3rem;\n            margin-bottom: 15px;\n            opacity: 0.7;\n        }\n\n        .upload-text {\n            font-size: 1.1rem;\n            color: #4a5568;\n            margin-bottom: 10px;\n            font-weight: 500;\n        }\n\n        .upload-hint {\n            font-size: 0.9rem;\n            color: #718096;\n            margin-bottom: 20px;\n        }\n\n        .upload-btn {\n            background: #667eea;\n            color: white;\n            border: none;\n            padding: 12px 24px;\n            border-radius: 8px;\n            font-size: 1rem;\n            font-weight: 500;\n            cursor: pointer;\n            transition: all 0.3s ease;\n        }\n\n        .upload-btn:hover {\n            background: #5a67d8;\n            transform: translateY(-2px);\n            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);\n        }\n\n        .file-info {\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            background: #f7fafc;\n            padding: 15px 20px;\n            border-radius: 8px;\n            margin-top: 15px;\n        }\n\n        .file-name {\n            font-weight: 500;\n            color: #4a5568;\n            flex: 1;\n            overflow: hidden;\n            text-overflow: ellipsis;\n            white-space: nowrap;\n        }\n\n        .clear-btn {\n            background: #fc8181;\n            color: white;\n            border: none;\n            width: 30px;\n            height: 30px;\n            border-radius: 50%;\n            cursor: pointer;\n            font-size: 1rem;\n            transition: all 0.3s ease;\n        }\n\n        .clear-btn:hover {\n            background: #f56565;\n            transform: scale(1.1);\n        }\n\n        /* æ¶ˆæ¯æç¤ºæ ·å¼ */\n        .upload-message {\n            margin-top: 15px;\n            padding: 12px 16px;\n            border-radius: 8px;\n            font-size: 0.9rem;\n            animation: slideIn 0.3s ease;\n        }\n\n        .upload-success {\n            background: #d4edda;\n            color: #155724;\n            border: 1px solid #c3e6cb;\n        }\n\n        .upload-error {\n            background: #f8d7da;\n            color: #721c24;\n            border: 1px solid #f5c6cb;\n        }\n\n        @keyframes slideIn {\n            from {\n                opacity: 0;\n                transform: translateY(-10px);\n            }\n            to {\n                opacity: 1;\n                transform: translateY(0);\n            }\n        }\n\n        #file-input {\n            display: none;\n        }\n\n        .stats-grid {\n            display: grid;\n            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\n            gap: 20px;\n            margin-bottom: 30px;\n        }\n\n        .stat-card {\n            background: white;\n            border-radius: 15px;\n            padding: 25px;\n            box-shadow: 0 10px 30px rgba(0,0,0,0.2);\n            text-align: center;\n            transition: transform 0.3s ease, box-shadow 0.3s ease;\n        }\n\n        .stat-card:hover {\n            transform: translateY(-5px);\n            box-shadow: 0 15px 40px rgba(0,0,0,0.3);\n        }\n\n        .stat-number {\n            font-size: 3rem;\n            font-weight: bold;\n            margin-bottom: 10px;\n        }\n\n        .stat-label {\n            font-size: 1.1rem;\n            color: #666;\n            margin-bottom: 5px;\n        }\n\n        .stat-description {\n            font-size: 0.9rem;\n            color: #999;\n        }\n\n        .filter-section {\n            background: white;\n            border-radius: 15px;\n            padding: 20px;\n            box-shadow: 0 10px 30px rgba(0,0,0,0.2);\n            margin-bottom: 30px;\n        }\n\n        .filter-controls {\n            display: flex;\n            gap: 15px;\n            flex-wrap: wrap;\n            align-items: center;\n        }\n\n        .filter-group {\n            display: flex;\n            align-items: center;\n            gap: 10px;\n        }\n\n        .filter-label {\n            font-weight: bold;\n            color: #333;\n        }\n\n        .filter-select, .search-input {\n            padding: 8px 12px;\n            border: 2px solid #ddd;\n            border-radius: 5px;\n            font-size: 0.9rem;\n            transition: border-color 0.3s ease;\n        }\n\n        .filter-select:focus, .search-input:focus {\n            outline: none;\n            border-color: #667eea;\n        }\n\n        .search-input {\n            min-width: 200px;\n        }\n\n        .hooks-container {\n            display: grid;\n            gap: 30px;\n        }\n\n        .hook-item {\n            background: white;\n            border-radius: 15px;\n            padding: 25px;\n            box-shadow: 0 10px 30px rgba(0,0,0,0.2);\n        }\n\n        .hook-header {\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            margin-bottom: 20px;\n            padding-bottom: 15px;\n            border-bottom: 2px solid #667eea;\n        }\n\n        .hook-event {\n            font-size: 1.5rem;\n            font-weight: bold;\n            color: #667eea;\n        }\n\n        .hook-meta {\n            display: flex;\n            gap: 20px;\n            align-items: center;\n        }\n\n        .hook-timestamp {\n            font-size: 0.9rem;\n            color: #666;\n            background: #f0f4ff;\n            padding: 5px 12px;\n            border-radius: 20px;\n        }\n\n        .hook-message {\n            background: #f8f9fa;\n            border-left: 4px solid #667eea;\n            padding: 15px;\n            margin-bottom: 15px;\n            border-radius: 5px;\n        }\n\n        .hook-description {\n            color: #666;\n            font-style: italic;\n            margin-bottom: 15px;\n        }\n\n        .hook-details {\n            display: flex;\n            flex-direction: column;\n            gap: 20px;\n        }\n\n        .part-card {\n            background: #f8f9fa;\n            border-radius: 10px;\n            overflow: hidden;\n        }\n\n        .part-header {\n            background: #667eea;\n            color: white;\n            padding: 12px 15px;\n            font-weight: bold;\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            cursor: pointer;\n            transition: background 0.3s ease;\n        }\n\n        .part-header:hover {\n            background: #5a67d8;\n        }\n\n        .part-content {\n            padding: 15px;\n            font-family: 'Courier New', monospace;\n            font-size: 0.9rem;\n            background: #1a1a1a;\n            color: #ffffff;\n            overflow-y: auto;\n            white-space: pre-wrap;\n            line-height: 1.6;\n            min-height: 100px;\n            border-radius: 8px;\n            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.3);\n        }\n\n        .part-content.hidden {\n            display: none;\n        }\n\n        .toggle-icon {\n            transition: transform 0.3s ease;\n        }\n\n        .toggle-icon.rotated {\n            transform: rotate(180deg);\n        }\n\n        /* è‡ªå®šä¹‰æ»šåŠ¨æ¡æ ·å¼ */\n        .part-content::-webkit-scrollbar {\n            width: 8px;\n        }\n\n        .part-content::-webkit-scrollbar-track {\n            background: #2a2a2a;\n            border-radius: 4px;\n        }\n\n        .part-content::-webkit-scrollbar-thumb {\n            background: #4a4a4a;\n            border-radius: 4px;\n        }\n\n        .part-content::-webkit-scrollbar-thumb:hover {\n            background: #5a5a5a;\n        }\n\n        .event-badge {\n            display: inline-block;\n            padding: 4px 12px;\n            border-radius: 20px;\n            font-size: 0.8rem;\n            font-weight: bold;\n            margin-right: 10px;\n        }\n\n        .event-userprompt { background: #FF6B6B; color: white; }\n        .event-pretool { background: #4ECDC4; color: white; }\n        .event-posttool { background: #45B7D1; color: white; }\n        .event-notification { background: #9C27B0; color: white; }\n        .event-stop { background: #F44336; color: white; }\n        .event-subagent-stop { background: #FF9800; color: white; }\n        .event-pre-compact { background: #FFC107; color: white; }\n        .event-session-start { background: #4CAF50; color: white; }\n        .event-session-end { background: #607D8B; color: white; }\n        .event-default { background: #78909C; color: white; }\n\n        .no-data {\n            text-align: center;\n            padding: 60px 20px;\n            color: white;\n            font-size: 1.2rem;\n        }\n\n        .error-message {\n            background: #fff5f5;\n            border: 2px solid #fc8181;\n            color: #c53030;\n            padding: 20px;\n            border-radius: 10px;\n            text-align: center;\n            font-size: 1.1rem;\n            margin: 20px 0;\n        }\n\n        .json-key { color: #9C27B0; }\n        .json-string { color: #4CAF50; }\n        .json-number { color: #FF9800; }\n        .json-boolean { color: #F44336; }\n        .json-null { color: #9E9E9E; }\n        .json-url { color: #2196F3; text-decoration: underline; cursor: pointer; }\n\n        .transcript-path {\n            background: #fff3cd;\n            border: 1px solid #ffeaa7;\n            border-radius: 5px;\n            padding: 8px 12px;\n            margin-top: 10px;\n            font-size: 0.9rem;\n        }\n\n        .transcript-path-label {\n            font-weight: bold;\n            color: #856404;\n            margin-bottom: 5px;\n        }\n\n        .transcript-path-value {\n            color: #856404;\n            word-break: break-all;\n            font-family: monospace;\n            background: #f8f9fa;\n            padding: 4px 8px;\n            border-radius: 3px;\n        }\n\n        .has-transcript-badge {\n            background: #ffc107;\n            color: #212529;\n            padding: 2px 8px;\n            border-radius: 12px;\n            font-size: 0.7rem;\n            font-weight: bold;\n            margin-left: 10px;\n        }\n\n        .transcript-actions {\n            display: flex;\n            gap: 8px;\n            margin-top: 8px;\n        }\n\n        .transcript-btn {\n            background: #667eea;\n            color: white;\n            border: none;\n            padding: 6px 12px;\n            border-radius: 4px;\n            font-size: 0.8rem;\n            cursor: pointer;\n            transition: all 0.3s ease;\n            display: flex;\n            align-items: center;\n            gap: 4px;\n        }\n\n        .transcript-btn:hover {\n            background: #5a67d8;\n            transform: translateY(-1px);\n        }\n\n        .transcript-btn.copy {\n            background: #28a745;\n        }\n\n        .transcript-btn.copy:hover {\n            background: #218838;\n        }\n\n        .transcript-btn.open {\n            background: #007bff;\n        }\n\n        .transcript-btn.open:hover {\n            background: #0056b3;\n        }\n\n        .transcript-btn:disabled {\n            background: #6c757d;\n            cursor: not-allowed;\n            transform: none;\n        }\n\n        @media (max-width: 768px) {\n            .header h1 {\n                font-size: 2rem;\n            }\n\n            .stats-grid {\n                grid-template-columns: repeat(2, 1fr);\n            }\n\n            .filter-controls {\n                flex-direction: column;\n                align-items: stretch;\n            }\n\n            .search-input {\n                min-width: auto;\n            }\n        }\n    </style>\n</head>\n<body>\n    <div class=\"container\">\n        <div class=\"header\">\n            <h1>Hooks æ—¥å¿—åˆ†æ</h1>\n            <p>ä¸Šä¼ å¹¶åˆ†æ Claude Hooks äº‹ä»¶æ—¥å¿—</p>\n        </div>\n\n        <!-- æ–‡ä»¶ä¸Šä¼ ç»„ä»¶ -->\n        <div class=\"upload-section\">\n            <div class=\"upload-card\">\n                <div class=\"upload-header\">\n                    <span>ğŸ“ é€‰æ‹© Hooks æ—¥å¿—æ–‡ä»¶</span>\n                </div>\n                <div class=\"upload-area\" id=\"upload-area\">\n                    <div class=\"upload-content\">\n                        <div class=\"upload-icon\">ğŸ“„</div>\n                        <p class=\"upload-text\">ç‚¹å‡»é€‰æ‹©æ–‡ä»¶æˆ–æ‹–æ‹½æ–‡ä»¶åˆ°æ­¤å¤„</p>\n                        <p class=\"upload-hint\">æ”¯æŒ .log .txt æ ¼å¼çš„æ—¥å¿—æ–‡ä»¶ï¼Œæ¯è¡Œä¸€ä¸ª JSON å¯¹è±¡ï¼Œæœ€å¤§50MB</p>\n                        <input type=\"file\" id=\"file-input\" accept=\".log,.txt\" style=\"display: none;\">\n                        <button class=\"upload-btn\" onclick=\"document.getElementById('file-input').click()\">é€‰æ‹©æ–‡ä»¶</button>\n                    </div>\n                </div>\n                <div class=\"file-info\" id=\"file-info\" style=\"display: none;\">\n                    <span class=\"file-name\" id=\"file-name\"></span>\n                    <button class=\"clear-btn\" onclick=\"clearFile()\">âœ•</button>\n                </div>\n            </div>\n        </div>\n\n        <div id=\"stats-section\" style=\"display: none;\">\n            <div class=\"stats-grid\">\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"total-hooks\">0</div>\n                    <div class=\"stat-label\">æ€»äº‹ä»¶æ•°</div>\n                    <div class=\"stat-description\">æ‰€æœ‰ Hooks äº‹ä»¶</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"user-prompts\">0</div>\n                    <div class=\"stat-label\">ç”¨æˆ·æç¤ºäº‹ä»¶</div>\n                    <div class=\"stat-description\">UserPromptSubmit</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"pre-tools\">0</div>\n                    <div class=\"stat-label\">å·¥å…·æ‰§è¡Œå‰äº‹ä»¶</div>\n                    <div class=\"stat-description\">PreToolUse</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"post-tools\">0</div>\n                    <div class=\"stat-label\">å·¥å…·æ‰§è¡Œåäº‹ä»¶</div>\n                    <div class=\"stat-description\">PostToolUse</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"notifications\">0</div>\n                    <div class=\"stat-label\">é€šçŸ¥äº‹ä»¶</div>\n                    <div class=\"stat-description\">Notification</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"stops\">0</div>\n                    <div class=\"stat-label\">åœæ­¢äº‹ä»¶</div>\n                    <div class=\"stat-description\">Stop</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"subagent-stops\">0</div>\n                    <div class=\"stat-label\">å­ä»£ç†åœæ­¢äº‹ä»¶</div>\n                    <div class=\"stat-description\">SubagentStop</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"pre-compacts\">0</div>\n                    <div class=\"stat-label\">å‹ç¼©å‰äº‹ä»¶</div>\n                    <div class=\"stat-description\">PreCompact</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"session-starts\">0</div>\n                    <div class=\"stat-label\">ä¼šè¯å¼€å§‹äº‹ä»¶</div>\n                    <div class=\"stat-description\">SessionStart</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"session-ends\">0</div>\n                    <div class=\"stat-label\">ä¼šè¯ç»“æŸäº‹ä»¶</div>\n                    <div class=\"stat-description\">SessionEnd</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"transcript-count\">0</div>\n                    <div class=\"stat-label\">åŒ…å«è½¬å½•è·¯å¾„äº‹ä»¶</div>\n                    <div class=\"stat-description\">åŒ…å« transcript_path</div>\n                </div>\n            </div>\n\n            <div class=\"filter-section\">\n                <div class=\"filter-controls\">\n                    <div class=\"filter-group\">\n                        <label class=\"filter-label\">äº‹ä»¶ç±»å‹ï¼š</label>\n                        <select class=\"filter-select\" id=\"event-filter\">\n                            <option value=\"\">å…¨éƒ¨</option>\n                            <option value=\"UserPromptSubmit\">UserPromptSubmit</option>\n                            <option value=\"PreToolUse\">PreToolUse</option>\n                            <option value=\"PostToolUse\">PostToolUse</option>\n                            <option value=\"Notification\">Notification</option>\n                            <option value=\"Stop\">Stop</option>\n                            <option value=\"SubagentStop\">SubagentStop</option>\n                            <option value=\"PreCompact\">PreCompact</option>\n                            <option value=\"SessionStart\">SessionStart</option>\n                            <option value=\"SessionEnd\">SessionEnd</option>\n                        </select>\n                    </div>\n                    <div class=\"filter-group\">\n                        <label class=\"filter-label\">æœç´¢ï¼š</label>\n                        <input type=\"text\" class=\"search-input\" id=\"search-input\" placeholder=\"æœç´¢äº‹ä»¶å†…å®¹...\">\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <div id=\"hooks-container\" class=\"hooks-container\"></div>\n\n        <div id=\"no-data\" class=\"no-data\">\n            è¯·ä¸Šä¼  hooks.log æ–‡ä»¶å¼€å§‹åˆ†æ\n        </div>\n\n        <div id=\"error-message\" class=\"error-message\" style=\"display: none;\"></div>\n    </div>\n\n    <script>\n        let hooksData = [];\n        let filteredData = [];\n\n        // æ–‡ä»¶ä¸Šä¼ ç›¸å…³å‡½æ•°\n        function setupFileUpload() {\n            const uploadArea = document.getElementById('upload-area');\n            const fileInput = document.getElementById('file-input');\n\n            // ç‚¹å‡»ä¸Šä¼ åŒºåŸŸè§¦å‘æ–‡ä»¶é€‰æ‹©ï¼ˆä½†ä¸åŒ…æ‹¬æŒ‰é’®ï¼‰\n            uploadArea.addEventListener('click', function(event) {\n                // å¦‚æœç‚¹å‡»çš„æ˜¯æŒ‰é’®ï¼Œä¸å¤„ç†\n                if (event.target.tagName === 'BUTTON' || event.target.closest('button')) {\n                    return;\n                }\n                fileInput.click();\n            });\n\n            // æ–‡ä»¶é€‰æ‹©äº‹ä»¶\n            fileInput.addEventListener('change', handleFileSelect);\n\n            // æ‹–æ‹½äº‹ä»¶\n            uploadArea.addEventListener('dragover', handleDragOver);\n            uploadArea.addEventListener('dragleave', handleDragLeave);\n            uploadArea.addEventListener('drop', handleDrop);\n        }\n\n\n        function handleDragOver(e) {\n            e.preventDefault();\n            e.currentTarget.classList.add('dragover');\n        }\n\n        function handleDragLeave(e) {\n            e.preventDefault();\n            e.currentTarget.classList.remove('dragover');\n        }\n\n        function handleDrop(e) {\n            e.preventDefault();\n            e.currentTarget.classList.remove('dragover');\n            handleFiles(e.dataTransfer.files);\n        }\n\n        function handleFileSelect(event) {\n            const files = event.target.files;\n            handleFiles(files);\n        }\n\n        function handleFiles(files) {\n            if (files.length === 0) return;\n\n            const file = files[0];\n\n            // æ£€æŸ¥æ–‡ä»¶ç±»å‹\n            const validTypes = ['.log', '.txt'];\n            const fileExtension = file.name.substring(file.name.lastIndexOf('.')).toLowerCase();\n\n            if (!validTypes.includes(fileExtension)) {\n                showErrorMessage('è¯·é€‰æ‹© .log æˆ– .txt æ ¼å¼çš„æ—¥å¿—æ–‡ä»¶');\n                return;\n            }\n\n            // æ£€æŸ¥æ–‡ä»¶å¤§å° (é™åˆ¶ä¸º50MB)\n            if (file.size > 50 * 1024 * 1024) {\n                showErrorMessage('æ–‡ä»¶å¤§å°ä¸èƒ½è¶…è¿‡50MB');\n                return;\n            }\n\n            // æ˜¾ç¤ºæ–‡ä»¶ä¿¡æ¯\n            showFileInfo(file);\n\n            // è¯»å–æ–‡ä»¶å†…å®¹\n            const reader = new FileReader();\n            reader.onload = function(e) {\n                try {\n                    const content = e.target.result;\n                    console.log('æ–‡ä»¶è¯»å–æˆåŠŸï¼Œå†…å®¹é•¿åº¦:', content.length);\n                    console.log('æ–‡ä»¶å†…å®¹å‰100å­—ç¬¦:', content.substring(0, 100));\n\n                    if (!content || content.trim().length === 0) {\n                        showErrorMessage('æ–‡ä»¶å†…å®¹ä¸ºç©º');\n                        return;\n                    }\n\n                    parseHooksData(content);\n                    showSuccessMessage(`æˆåŠŸåŠ è½½æ–‡ä»¶: ${file.name}`);\n                } catch (error) {\n                    console.error('æ–‡ä»¶è§£æå¼‚å¸¸:', error);\n                    showErrorMessage('æ–‡ä»¶è§£æå¤±è´¥ï¼š' + error.message);\n                }\n            };\n            reader.onerror = function(error) {\n                console.error('æ–‡ä»¶è¯»å–å¤±è´¥:', error);\n                showErrorMessage('æ–‡ä»¶è¯»å–å¤±è´¥');\n            };\n            reader.readAsText(file);\n        }\n\n        function showFileInfo(file) {\n            const fileInfo = document.getElementById('file-info');\n            const fileName = document.getElementById('file-name');\n            const uploadArea = document.getElementById('upload-area');\n\n            fileName.textContent = file.name;\n            fileInfo.style.display = 'flex';\n            uploadArea.style.display = 'none';\n        }\n\n        function clearFile() {\n            const fileInfo = document.getElementById('file-info');\n            const uploadArea = document.getElementById('upload-area');\n            const fileInput = document.getElementById('file-input');\n\n            fileInfo.style.display = 'none';\n            uploadArea.style.display = 'block';\n\n            // æ¸…ç©ºæ–‡ä»¶è¾“å…¥æ¡†çš„å€¼\n            fileInput.value = '';\n\n            // æ¸…ç©ºæ•°æ®\n            hooksData = [];\n            filteredData = [];\n\n            // æ¸…ç©ºæ˜¾ç¤ºåŒºåŸŸ\n            document.getElementById('hooks-container').innerHTML = '';\n            document.getElementById('no-data').style.display = 'block';\n            document.getElementById('stats-section').style.display = 'none';\n\n            // æ˜¾ç¤ºæç¤º\n            showSuccessMessage('å·²æ¸…ç©ºæ–‡ä»¶ï¼Œè¯·é‡æ–°é€‰æ‹©æ—¥å¿—æ–‡ä»¶');\n        }\n\n        function showSuccessMessage(message) {\n            showMessage(message, 'success');\n        }\n\n        function showErrorMessage(message) {\n            showMessage(message, 'error');\n        }\n\n        function showMessage(message, type) {\n            // ç§»é™¤ä¹‹å‰çš„æ¶ˆæ¯\n            const existingMessages = document.querySelectorAll('.upload-message');\n            existingMessages.forEach(msg => msg.remove());\n\n            const messageClass = type === 'success' ? 'upload-success' : 'upload-error';\n            const messageDiv = document.createElement('div');\n            messageDiv.className = `upload-message ${messageClass}`;\n            messageDiv.textContent = message;\n\n            document.querySelector('.upload-card').appendChild(messageDiv);\n\n            // 3ç§’åè‡ªåŠ¨æ¶ˆå¤±\n            setTimeout(() => {\n                messageDiv.style.opacity = '0';\n                setTimeout(() => {\n                    if (messageDiv.parentNode) {\n                        messageDiv.parentNode.removeChild(messageDiv);\n                    }\n                }, 300);\n            }, 3000);\n        }\n\n        // è§£æ hooks æ•°æ®\n        function parseHooksData(content) {\n            console.log('å¼€å§‹è§£æ hooks æ•°æ®ï¼Œå†…å®¹é•¿åº¦:', content.length);\n\n            hooksData = [];\n            const lines = content.split('\\n').filter(line => line.trim());\n            console.log('åˆ†å‰²åçš„è¡Œæ•°:', lines.length);\n\n            for (let i = 0; i < lines.length; i++) {\n                const line = lines[i];\n                try {\n                    const hookData = JSON.parse(line);\n                    hooksData.push(hookData);\n                    console.log(`æˆåŠŸè§£æç¬¬ ${i + 1} è¡Œï¼Œäº‹ä»¶ç±»å‹:`, hookData.event);\n                } catch (error) {\n                    console.error(`è§£æç¬¬ ${i + 1} è¡Œå¤±è´¥:`, error.message);\n                    console.error('é—®é¢˜è¡Œçš„å†…å®¹:', line.substring(0, 100) + (line.length > 100 ? '...' : ''));\n                }\n            }\n\n            console.log('è§£æå®Œæˆï¼Œæ€»å…±è§£æåˆ°', hooksData.length, 'ä¸ªæœ‰æ•ˆäº‹ä»¶');\n\n            if (hooksData.length === 0) {\n                showErrorMessage('æœªæ‰¾åˆ°æœ‰æ•ˆçš„ hooks æ•°æ®ã€‚è¯·ç¡®ä¿æ–‡ä»¶æ ¼å¼æ­£ç¡®ï¼Œæ¯è¡Œåº”è¯¥æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„JSONå¯¹è±¡ã€‚');\n                console.error('è§£æå¤±è´¥ï¼Œæ²¡æœ‰æ‰¾åˆ°æœ‰æ•ˆçš„hooksæ•°æ®');\n                return;\n            }\n\n            filteredData = [...hooksData];\n            console.log('å‡†å¤‡æ˜¾ç¤ºæ•°æ®ï¼Œè¿‡æ»¤åçš„äº‹ä»¶æ•°é‡:', filteredData.length);\n            displayData();\n        }\n\n        // æ˜¾ç¤ºæ•°æ®\n        function displayData() {\n            document.getElementById('no-data').style.display = 'none';\n            document.getElementById('error-message').style.display = 'none';\n            document.getElementById('stats-section').style.display = 'block';\n\n            updateStatistics();\n            renderHooks();\n        }\n\n        // æ›´æ–°ç»Ÿè®¡ä¿¡æ¯\n        function updateStatistics() {\n            const stats = {\n                total: filteredData.length,\n                userPrompts: filteredData.filter(h => h.event === 'UserPromptSubmit').length,\n                preTools: filteredData.filter(h => h.event === 'PreToolUse').length,\n                postTools: filteredData.filter(h => h.event === 'PostToolUse').length,\n                notifications: filteredData.filter(h => h.event === 'Notification').length,\n                stops: filteredData.filter(h => h.event === 'Stop').length,\n                subagentStops: filteredData.filter(h => h.event === 'SubagentStop').length,\n                preCompacts: filteredData.filter(h => h.event === 'PreCompact').length,\n                sessionStarts: filteredData.filter(h => h.event === 'SessionStart').length,\n                sessionEnds: filteredData.filter(h => h.event === 'SessionEnd').length,\n                transcriptCount: filteredData.filter(h => hasTranscriptPath(h)).length\n            };\n\n            document.getElementById('total-hooks').textContent = stats.total;\n            document.getElementById('user-prompts').textContent = stats.userPrompts;\n            document.getElementById('pre-tools').textContent = stats.preTools;\n            document.getElementById('post-tools').textContent = stats.postTools;\n            document.getElementById('notifications').textContent = stats.notifications;\n            document.getElementById('stops').textContent = stats.stops;\n            document.getElementById('subagent-stops').textContent = stats.subagentStops;\n            document.getElementById('pre-compacts').textContent = stats.preCompacts;\n            document.getElementById('session-starts').textContent = stats.sessionStarts;\n            document.getElementById('session-ends').textContent = stats.sessionEnds;\n            document.getElementById('transcript-count').textContent = stats.transcriptCount;\n        }\n\n        // æ¸²æŸ“ hooks\n        function renderHooks() {\n            const container = document.getElementById('hooks-container');\n            container.innerHTML = '';\n\n            filteredData.forEach((hook, index) => {\n                const hookElement = createHookElement(hook, index);\n                container.appendChild(hookElement);\n            });\n\n            // æ·»åŠ åŠ¨ç”»\n            const elements = container.querySelectorAll('.hook-item');\n            elements.forEach((el, i) => {\n                el.style.opacity = '0';\n                el.style.transform = 'translateY(20px)';\n                setTimeout(() => {\n                    el.style.transition = 'opacity 0.3s ease, transform 0.3s ease';\n                    el.style.opacity = '1';\n                    el.style.transform = 'translateY(0)';\n                }, i * 50);\n            });\n        }\n\n        // æ£€æŸ¥æ˜¯å¦åŒ…å« transcript_path å­—æ®µ\n        function hasTranscriptPath(hook) {\n            if (!hook.payload) return false;\n\n            // æ£€æŸ¥ payload ä¸­æ˜¯å¦ç›´æ¥åŒ…å« transcript_path\n            if (hook.payload.transcript_path) return true;\n\n            // æ·±åº¦æœç´¢ payload å¯¹è±¡ä¸­çš„ transcript_path å­—æ®µ\n            return searchInObject(hook.payload, 'transcript_path');\n        }\n\n        // åœ¨å¯¹è±¡ä¸­é€’å½’æœç´¢æŒ‡å®šå­—æ®µ\n        function searchInObject(obj, fieldName) {\n            if (!obj || typeof obj !== 'object') return false;\n\n            for (const key in obj) {\n                if (key === fieldName) return true;\n\n                if (typeof obj[key] === 'object' && obj[key] !== null) {\n                    if (searchInObject(obj[key], fieldName)) return true;\n                }\n            }\n\n            return false;\n        }\n\n        // è·å– transcript_path çš„å€¼\n        function getTranscriptPath(hook) {\n            if (!hook.payload) return null;\n\n            // æ£€æŸ¥ payload ä¸­æ˜¯å¦ç›´æ¥åŒ…å« transcript_path\n            if (hook.payload.transcript_path) return hook.payload.transcript_path;\n\n            // æ·±åº¦æœç´¢å¹¶è¿”å› transcript_path çš„å€¼\n            return findValueInObject(hook.payload, 'transcript_path');\n        }\n\n        // åœ¨å¯¹è±¡ä¸­é€’å½’æŸ¥æ‰¾æŒ‡å®šå­—æ®µçš„å€¼\n        function findValueInObject(obj, fieldName) {\n            if (!obj || typeof obj !== 'object') return null;\n\n            for (const key in obj) {\n                if (key === fieldName) return obj[key];\n\n                if (typeof obj[key] === 'object' && obj[key] !== null) {\n                    const found = findValueInObject(obj[key], fieldName);\n                    if (found !== null) return found;\n                }\n            }\n\n            return null;\n        }\n\n        // åˆ›å»º hook å…ƒç´ \n        function createHookElement(hook, index) {\n            const div = document.createElement('div');\n            div.className = 'hook-item';\n\n            const eventClass = getEventClass(hook.event);\n            const formattedTime = formatTimestamp(hook.ts);\n            const eventDescription = getEventDescription(hook.event, hook.phase);\n            const hasTranscript = hasTranscriptPath(hook);\n            const transcriptPath = getTranscriptPath(hook);\n\n            div.innerHTML = `\n                <div class=\"hook-header\">\n                    <div class=\"hook-event\">\n                        <span class=\"event-badge ${eventClass}\">${hook.event}</span>\n                        ${hasTranscript ? '<span class=\"has-transcript-badge\">åŒ…å«è½¬å½•è·¯å¾„</span>' : ''}\n                    </div>\n                    <div class=\"hook-meta\">\n                        <div class=\"hook-timestamp\">${formattedTime}</div>\n                    </div>\n                </div>\n                <div class=\"hook-message\">${hook.message}</div>\n                <div class=\"hook-description\">${hook.description || eventDescription}</div>\n                ${hasTranscript && transcriptPath ? `\n                <div class=\"transcript-path\">\n                    <div class=\"transcript-path-label\">ğŸ“„ è½¬å½•è·¯å¾„ (transcript_path):</div>\n                    <div class=\"transcript-path-value\">${escapeHtml(transcriptPath)}</div>\n                    <div class=\"transcript-actions\">\n                        <button class=\"transcript-btn copy\" onclick=\"copyTranscriptPath('${escapeHtml(transcriptPath)}')\" title=\"å¤åˆ¶è·¯å¾„\">\n                            ğŸ“‹ å¤åˆ¶\n                        </button>\n                        ${isUrl(transcriptPath) ?\n                            `<button class=\"transcript-btn open\" onclick=\"openTranscriptUrl('${escapeHtml(transcriptPath)}')\" title=\"åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€\">\n                                ğŸ”— æ‰“å¼€é“¾æ¥\n                            </button>` :\n                            `<button class=\"transcript-btn open\" onclick=\"tryOpenTranscriptFile('${escapeHtml(transcriptPath)}')\" title=\"å°è¯•æ‰“å¼€æ–‡ä»¶\">\n                                ğŸ“‚ å°è¯•æ‰“å¼€\n                            </button>`\n                        }\n                    </div>\n                </div>\n                ` : ''}\n                <div class=\"hook-details\">\n                    <div class=\"part-card\">\n                        <div class=\"part-header\" onclick=\"toggleDetail('payload-${index}')\">\n                            <span>Payload</span>\n                            <span class=\"toggle-icon\" id=\"icon-payload-${index}\">â–¼</span>\n                        </div>\n                        <div class=\"part-content hidden\" id=\"payload-${index}\">\n                            ${formatJson(hook.payload)}\n                        </div>\n                    </div>\n                </div>\n            `;\n\n            return div;\n        }\n\n        // è·å–äº‹ä»¶æè¿°\n        function getEventDescription(event, phase) {\n            switch (event) {\n                case 'PreToolUse':\n                    return 'å·¥å…·æ‰§è¡Œå‰è§¦å‘ï¼Œå¯åŸºäºå‚æ•°é˜»æ­¢æˆ–è°ƒæ•´è°ƒç”¨ã€‚';\n                case 'PostToolUse':\n                    return 'å·¥å…·æˆåŠŸæ‰§è¡Œåè§¦å‘ï¼Œå¸¸ç”¨äºæ ¼å¼åŒ–ã€æ ¡éªŒæˆ–è®°å½•ç»“æœã€‚';\n                case 'UserPromptSubmit':\n                    return 'ç”¨æˆ·æäº¤æç¤ºå‰è§¦å‘ï¼Œå¯è¿›è¡Œæç¤ºæ ¡éªŒæˆ–å¢å¼ºã€‚';\n                case 'Notification':\n                    return 'å½“ç³»ç»Ÿå‘é€é€šçŸ¥ï¼ˆéœ€æˆæƒæˆ–ç­‰å¾…è¾“å…¥ï¼‰æ—¶è§¦å‘ã€‚';\n                case 'Stop':\n                    return 'ä¸»ä»£ç†å®Œæˆå“åº”æ—¶è§¦å‘ï¼ˆç”¨æˆ·ä¸­æ–­ä¸è§¦å‘ï¼‰ã€‚';\n                case 'SubagentStop':\n                    return 'å­ä»£ç†ä»»åŠ¡å®Œæˆæ—¶è§¦å‘ï¼Œç”¨äºè®°å½•å­ä»»åŠ¡ç»“æŸã€‚';\n                case 'PreCompact':\n                    return phase === 'manual'\n                        ? 'æ‰‹åŠ¨å‹ç¼©å‰è§¦å‘ï¼Œç”¨äºè®°å½•æˆ–å‡†å¤‡å‹ç¼©ã€‚'\n                        : 'è‡ªåŠ¨å‹ç¼©å‰è§¦å‘ï¼ˆä¸Šä¸‹æ–‡æ¥è¿‘ä¸Šé™ï¼‰ï¼Œç”¨äºè®°å½•æˆ–å‡†å¤‡å‹ç¼©ã€‚';\n                case 'SessionStart':\n                    switch (phase) {\n                        case 'startup':\n                            return 'æ–°ä¼šè¯å¯åŠ¨æ—¶è§¦å‘ï¼Œç”¨äºåŠ è½½ä¸Šä¸‹æ–‡æˆ–è®¾ç½®ç¯å¢ƒã€‚';\n                        case 'resume':\n                            return 'æ¢å¤ä¼šè¯æ—¶è§¦å‘ï¼Œç”¨äºç»§ç»­å…ˆå‰ä¸Šä¸‹æ–‡ã€‚';\n                        case 'clear':\n                            return 'æ¸…ç©ºä¼šè¯åè§¦å‘ï¼Œç”¨äºé‡ç½®ç¯å¢ƒä¸ä¸Šä¸‹æ–‡ã€‚';\n                        case 'compact':\n                            return 'å› å‹ç¼©æ“ä½œè§¦å‘çš„ä¼šè¯å¯åŠ¨ï¼Œç”¨äºç»´æŒä¸Šä¸‹æ–‡ã€‚';\n                        default:\n                            return 'ä¼šè¯å¯åŠ¨ç›¸å…³äº‹ä»¶ï¼Œåˆå§‹åŒ–æˆ–æ¢å¤ä¸Šä¸‹æ–‡ã€‚';\n                    }\n                case 'SessionEnd':\n                    return 'ä¼šè¯ç»“æŸæ—¶è§¦å‘ï¼Œå¸¸ç”¨äºæ”¶å°¾ä¸æ¸…ç†ã€‚';\n                default:\n                    return 'æœªçŸ¥äº‹ä»¶ã€‚';\n            }\n        }\n\n        // è·å–äº‹ä»¶æ ·å¼ç±»\n        function getEventClass(event) {\n            switch (event) {\n                case 'UserPromptSubmit': return 'event-userprompt';\n                case 'PreToolUse': return 'event-pretool';\n                case 'PostToolUse': return 'event-posttool';\n                case 'Notification': return 'event-notification';\n                case 'Stop': return 'event-stop';\n                case 'SubagentStop': return 'event-subagent-stop';\n                case 'PreCompact': return 'event-pre-compact';\n                case 'SessionStart': return 'event-session-start';\n                case 'SessionEnd': return 'event-session-end';\n                default: return 'event-default';\n            }\n        }\n\n        // æ ¼å¼åŒ–æ—¶é—´æˆ³\n        function formatTimestamp(ts) {\n            const date = new Date(ts);\n            return date.toLocaleString('zh-CN');\n        }\n\n        // æ ¼å¼åŒ– JSON\n        function formatJson(obj, indent = 0) {\n            if (!obj) return '';\n\n            try {\n                const spaces = '  '.repeat(indent);\n                let result = '';\n\n                if (Array.isArray(obj)) {\n                    result += '[\\n';\n                    obj.forEach((item, index) => {\n                        result += spaces + '  ';\n                        if (typeof item === 'object' && item !== null) {\n                            result += formatJson(item, indent + 1);\n                        } else {\n                            result += formatJsonValue(item);\n                        }\n                        if (index < obj.length - 1) result += ',';\n                        result += '\\n';\n                    });\n                    result += spaces + ']';\n                } else if (typeof obj === 'object' && obj !== null) {\n                    result += '{\\n';\n                    const keys = Object.keys(obj);\n                    keys.forEach((key, index) => {\n                        result += spaces + '  ';\n                        result += `<span class=\"json-key\">\"${escapeHtml(key)}\"</span>: `;\n\n                        if (typeof obj[key] === 'object' && obj[key] !== null) {\n                            result += formatJson(obj[key], indent + 1);\n                        } else {\n                            result += formatJsonValue(obj[key]);\n                        }\n\n                        if (index < keys.length - 1) result += ',';\n                        result += '\\n';\n                    });\n                    result += spaces + '}';\n                } else {\n                    result += formatJsonValue(obj);\n                }\n\n                return result;\n            } catch (error) {\n                return escapeHtml(JSON.stringify(obj));\n            }\n        }\n\n        // æ ¼å¼åŒ– JSON å€¼\n        function formatJsonValue(value) {\n            if (typeof value === 'string') {\n                if (value.startsWith('http://') || value.startsWith('https://')) {\n                    return `<span class=\"json-url\" onclick=\"window.open('${escapeHtml(value)}', '_blank')\">\"${escapeHtml(value)}\"</span>`;\n                }\n                return `<span class=\"json-string\">\"${escapeHtml(value)}\"</span>`;\n            } else if (typeof value === 'number') {\n                return `<span class=\"json-number\">${value}</span>`;\n            } else if (typeof value === 'boolean') {\n                return `<span class=\"json-boolean\">${value}</span>`;\n            } else if (value === null) {\n                return `<span class=\"json-null\">null</span>`;\n            } else {\n                return `<span style=\"color: #666;\">${value}</span>`;\n            }\n        }\n\n        // HTML è½¬ä¹‰\n        function escapeHtml(text) {\n            const div = document.createElement('div');\n            div.textContent = text;\n            return div.innerHTML;\n        }\n\n        // åˆ‡æ¢è¯¦æƒ…æ˜¾ç¤º\n        function toggleDetail(id) {\n            const content = document.getElementById(id);\n            const icon = document.getElementById('icon-' + id);\n\n            if (content.classList.contains('hidden')) {\n                content.classList.remove('hidden');\n                icon.classList.add('rotated');\n            } else {\n                content.classList.add('hidden');\n                icon.classList.remove('rotated');\n            }\n        }\n\n        // è¿‡æ»¤å’Œæœç´¢\n        document.getElementById('event-filter').addEventListener('change', applyFilters);\n        document.getElementById('search-input').addEventListener('input', applyFilters);\n\n        function applyFilters() {\n            const eventFilter = document.getElementById('event-filter').value;\n            const searchText = document.getElementById('search-input').value.toLowerCase();\n\n            filteredData = hooksData.filter(hook => {\n                const matchEvent = !eventFilter || hook.event === eventFilter;\n                const matchSearch = !searchText ||\n                    JSON.stringify(hook).toLowerCase().includes(searchText);\n\n                return matchEvent && matchSearch;\n            });\n\n            updateStatistics();\n            renderHooks();\n        }\n\n        // æ£€æŸ¥æ˜¯å¦ä¸º URL\n        function isUrl(text) {\n            try {\n                new URL(text);\n                return true;\n            } catch {\n                return false;\n            }\n        }\n\n        // å¤åˆ¶è½¬å½•è·¯å¾„åˆ°å‰ªè´´æ¿\n        async function copyTranscriptPath(path) {\n            try {\n                await navigator.clipboard.writeText(path);\n                showToast('è·¯å¾„å·²å¤åˆ¶åˆ°å‰ªè´´æ¿', 'success');\n            } catch (error) {\n                // é™çº§æ–¹æ¡ˆ\n                const textArea = document.createElement('textarea');\n                textArea.value = path;\n                document.body.appendChild(textArea);\n                textArea.select();\n                document.execCommand('copy');\n                document.body.removeChild(textArea);\n                showToast('è·¯å¾„å·²å¤åˆ¶åˆ°å‰ªè´´æ¿', 'success');\n            }\n        }\n\n        // æ‰“å¼€è½¬å½•é“¾æ¥ï¼ˆURLï¼‰\n        function openTranscriptUrl(url) {\n            window.open(url, '_blank');\n        }\n\n        // å°è¯•æ‰“å¼€æœ¬åœ°æ–‡ä»¶ï¼ˆé€šè¿‡æ–‡ä»¶é€‰æ‹©å™¨ï¼‰\n        function tryOpenTranscriptFile(path) {\n            // æ–¹æ¡ˆ1ï¼šå¤åˆ¶è·¯å¾„åˆ°å‰ªè´´æ¿\n            copyTranscriptPath(path);\n\n            // æ–¹æ¡ˆ2ï¼šå¦‚æœæ˜¯ç½‘ç»œé“¾æ¥ï¼Œç›´æ¥æ‰“å¼€\n            if (path.startsWith('http://') || path.startsWith('https://')) {\n                openTranscriptUrl(path);\n                return;\n            }\n\n            // æ–¹æ¡ˆ3ï¼šä½¿ç”¨æ–‡ä»¶é€‰æ‹©å™¨è®©ç”¨æˆ·é€‰æ‹©æœ¬åœ°æ–‡ä»¶\n            if (path.startsWith('file://')) {\n                // file:// åè®®ï¼Œæå–æ–‡ä»¶è·¯å¾„\n                const cleanPath = path.replace(/^file:\\/\\//, '');\n                showFileSelector(cleanPath);\n            } else {\n                // æœ¬åœ°æ–‡ä»¶è·¯å¾„\n                showFileSelector(path);\n            }\n        }\n\n        // æ˜¾ç¤ºæ–‡ä»¶é€‰æ‹©å™¨\n        function showFileSelector(expectedPath) {\n            const input = document.createElement('input');\n            input.type = 'file';\n            input.style.display = 'none';\n\n            // ä»è·¯å¾„ä¸­æå–æ–‡ä»¶å\n            const fileName = expectedPath.split(/[/\\\\]/).pop();\n\n            input.addEventListener('change', function(event) {\n                const file = event.target.files[0];\n                if (file) {\n                    if (file.name === fileName) {\n                        // æ–‡ä»¶ååŒ¹é…ï¼Œè¯»å–å¹¶æ˜¾ç¤ºæ–‡ä»¶å†…å®¹\n                        readAndDisplayFile(file);\n                    } else {\n                        showToast(`é€‰æ‹©çš„æ–‡ä»¶åä¸åŒ¹é…\\næœŸæœ›: ${fileName}\\nå®é™…: ${file.name}`, 'warning');\n                        // ä»ç„¶æ˜¾ç¤ºé€‰æ‹©çš„æ–‡ä»¶å†…å®¹\n                        readAndDisplayFile(file);\n                    }\n                }\n                // æ¸…ç†inputå…ƒç´ \n                document.body.removeChild(input);\n            });\n\n            document.body.appendChild(input);\n\n            // æ˜¾ç¤ºæç¤ºï¼Œç„¶åè§¦å‘æ–‡ä»¶é€‰æ‹©\n            showToast(`è¯·é€‰æ‹©æ–‡ä»¶: ${fileName}`, 'info');\n            setTimeout(() => {\n                input.click();\n            }, 500);\n        }\n\n        // è¯»å–å¹¶æ˜¾ç¤ºæ–‡ä»¶å†…å®¹\n        function readAndDisplayFile(file) {\n            const reader = new FileReader();\n            reader.onload = function(e) {\n                const content = e.target.result;\n\n                // åˆ›å»ºä¸€ä¸ªæ¨¡æ€çª—å£æ˜¾ç¤ºæ–‡ä»¶å†…å®¹\n                showFileModal(file.name, content);\n            };\n\n            reader.onerror = function() {\n                showToast('æ–‡ä»¶è¯»å–å¤±è´¥', 'error');\n            };\n\n            reader.readAsText(file);\n        }\n\n        // æ˜¾ç¤ºæ–‡ä»¶å†…å®¹çš„æ¨¡æ€çª—å£\n        function showFileModal(fileName, content) {\n            // åˆ›å»ºæ¨¡æ€èƒŒæ™¯\n            const modal = document.createElement('div');\n            modal.style.cssText = `\n                position: fixed;\n                top: 0;\n                left: 0;\n                width: 100%;\n                height: 100%;\n                background: rgba(0, 0, 0, 0.8);\n                z-index: 10000;\n                display: flex;\n                justify-content: center;\n                align-items: center;\n                animation: fadeIn 0.3s ease;\n            `;\n\n            // åˆ›å»ºæ¨¡æ€å†…å®¹\n            const modalContent = document.createElement('div');\n            modalContent.style.cssText = `\n                background: white;\n                border-radius: 12px;\n                width: 90%;\n                max-width: 800px;\n                max-height: 80vh;\n                display: flex;\n                flex-direction: column;\n                box-shadow: 0 20px 60px rgba(0,0,0,0.3);\n                animation: slideUp 0.3s ease;\n            `;\n\n            // åˆ›å»ºå¤´éƒ¨\n            const header = document.createElement('div');\n            header.style.cssText = `\n                padding: 20px;\n                border-bottom: 1px solid #e0e0e0;\n                display: flex;\n                justify-content: space-between;\n                align-items: center;\n                background: #f8f9fa;\n                border-radius: 12px 12px 0 0;\n            `;\n\n            const title = document.createElement('h3');\n            title.textContent = `ğŸ“„ ${fileName}`;\n            title.style.cssText = `\n                margin: 0;\n                color: #333;\n                font-size: 1.2rem;\n            `;\n\n            const closeBtn = document.createElement('button');\n            closeBtn.textContent = 'âœ•';\n            closeBtn.style.cssText = `\n                background: none;\n                border: none;\n                font-size: 1.5rem;\n                cursor: pointer;\n                color: #666;\n                padding: 5px;\n                border-radius: 50%;\n                width: 32px;\n                height: 32px;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n            `;\n            closeBtn.onmouseover = () => closeBtn.style.background = '#e0e0e0';\n            closeBtn.onmouseout = () => closeBtn.style.background = 'none';\n\n            // åˆ›å»ºå†…å®¹åŒºåŸŸ\n            const contentArea = document.createElement('div');\n            contentArea.style.cssText = `\n                padding: 20px;\n                overflow-y: auto;\n                flex: 1;\n                font-family: 'Courier New', monospace;\n                font-size: 0.9rem;\n                line-height: 1.5;\n                background: #1a1a1a;\n                color: #ffffff;\n                white-space: pre-wrap;\n                border-radius: 0 0 12px 12px;\n                max-height: 60vh;\n            `;\n\n            // è®¾ç½®å†…å®¹\n            contentArea.textContent = content;\n\n            // ç»„è£…æ¨¡æ€çª—å£\n            header.appendChild(title);\n            header.appendChild(closeBtn);\n            modalContent.appendChild(header);\n            modalContent.appendChild(contentArea);\n            modal.appendChild(modalContent);\n\n            // æ·»åŠ å…³é—­äº‹ä»¶\n            closeBtn.onclick = () => document.body.removeChild(modal);\n            modal.onclick = (e) => {\n                if (e.target === modal) {\n                    document.body.removeChild(modal);\n                }\n            };\n\n            // æ·»åŠ åˆ°é¡µé¢\n            document.body.appendChild(modal);\n\n            // æ·»åŠ åŠ¨ç”»æ ·å¼\n            if (!document.getElementById('modal-animations')) {\n                const style = document.createElement('style');\n                style.id = 'modal-animations';\n                style.textContent = `\n                    @keyframes fadeIn {\n                        from { opacity: 0; }\n                        to { opacity: 1; }\n                    }\n                    @keyframes slideUp {\n                        from {\n                            opacity: 0;\n                            transform: translateY(50px);\n                        }\n                        to {\n                            opacity: 1;\n                            transform: translateY(0);\n                        }\n                    }\n                `;\n                document.head.appendChild(style);\n            }\n        }\n\n        // æ˜¾ç¤ºæç¤ºä¿¡æ¯\n        function showToast(message, type = 'info') {\n            const toast = document.createElement('div');\n            toast.style.cssText = `\n                position: fixed;\n                top: 20px;\n                right: 20px;\n                background: ${type === 'success' ? '#28a745' : type === 'warning' ? '#ffc107' : type === 'error' ? '#dc3545' : '#007bff'};\n                color: white;\n                padding: 12px 16px;\n                border-radius: 6px;\n                font-size: 0.9rem;\n                z-index: 10000;\n                max-width: 400px;\n                word-wrap: break-word;\n                box-shadow: 0 4px 12px rgba(0,0,0,0.15);\n                animation: slideInRight 0.3s ease;\n            `;\n\n            toast.textContent = message;\n            document.body.appendChild(toast);\n\n            // 3ç§’åè‡ªåŠ¨æ¶ˆå¤±\n            setTimeout(() => {\n                toast.style.animation = 'slideOutRight 0.3s ease';\n                setTimeout(() => {\n                    if (toast.parentNode) {\n                        document.body.removeChild(toast);\n                    }\n                }, 300);\n            }, 3000);\n        }\n\n        // æ·»åŠ åŠ¨ç”»æ ·å¼\n        const style = document.createElement('style');\n        style.textContent = `\n            @keyframes slideInRight {\n                from {\n                    transform: translateX(100%);\n                    opacity: 0;\n                }\n                to {\n                    transform: translateX(0);\n                    opacity: 1;\n                }\n            }\n\n            @keyframes slideOutRight {\n                from {\n                    transform: translateX(0);\n                    opacity: 1;\n                }\n                to {\n                    transform: translateX(100%);\n                    opacity: 0;\n                }\n            }\n        `;\n        document.head.appendChild(style);\n\n        // æ ¼å¼åŒ–æ–‡ä»¶å¤§å°\n        function formatFileSize(bytes) {\n            if (bytes === 0) return '0 Bytes';\n            const k = 1024;\n            const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n            const i = Math.floor(Math.log(bytes) / Math.log(k));\n            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n        }\n\n        // é¡µé¢åŠ è½½æ—¶æ‰§è¡Œ\n        document.addEventListener('DOMContentLoaded', function() {\n            // æ·»åŠ åˆå§‹åŠ è½½åŠ¨ç”»\n            const cards = document.querySelectorAll('.stat-card, .upload-card');\n            cards.forEach((card, index) => {\n                card.style.opacity = '0';\n                card.style.transform = 'translateY(20px)';\n                setTimeout(() => {\n                    card.style.transition = 'opacity 0.5s ease, transform 0.5s ease';\n                    card.style.opacity = '1';\n                    card.style.transform = 'translateY(0)';\n                }, index * 100);\n            });\n\n            // è®¾ç½®æ–‡ä»¶ä¸Šä¼ \n            setupFileUpload();\n        });\n\n            </script>\n</body>\n</html>","structuredPatch":[{"oldStart":1368,"oldLines":6,"newStart":1368,"newLines":29,"lines":["                 font-size: 1.2rem;","             `;"," ","+            // åˆ›å»ºæ“ä½œæŒ‰é’®åŒºåŸŸ","+            const actions = document.createElement('div');","+            actions.style.cssText = `","+                display: flex;","+                gap: 10px;","+                align-items: center;","+            `;","+","+            const copyBtn = document.createElement('button');","+            copyBtn.textContent = 'ğŸ“‹ å¤åˆ¶å†…å®¹';","+            copyBtn.style.cssText = `","+                background: #28a745;","+                color: white;","+                border: none;","+                padding: 6px 12px;","+                border-radius: 4px;","+                font-size: 0.8rem;","+                cursor: pointer;","+                transition: background 0.3s ease;","+            `;","+            copyBtn.onmouseover = () => copyBtn.style.background = '#218838';","+            copyBtn.onmouseout = () => copyBtn.style.background = '#28a745';","+","             const closeBtn = document.createElement('button');","             closeBtn.textContent = 'âœ•';","             closeBtn.style.cssText = `"]},{"oldStart":1387,"oldLines":6,"newStart":1410,"newLines":23,"lines":["             closeBtn.onmouseover = () => closeBtn.style.background = '#e0e0e0';","             closeBtn.onmouseout = () => closeBtn.style.background = 'none';"," ","+            // æ·»åŠ å¤åˆ¶åŠŸèƒ½","+            copyBtn.onclick = async () => {","+                try {","+                    await navigator.clipboard.writeText(content);","+                    showToast('æ–‡ä»¶å†…å®¹å·²å¤åˆ¶åˆ°å‰ªè´´æ¿', 'success');","+                } catch (error) {","+                    // é™çº§æ–¹æ¡ˆ","+                    const textArea = document.createElement('textarea');","+                    textArea.value = content;","+                    document.body.appendChild(textArea);","+                    textArea.select();","+                    document.execCommand('copy');","+                    document.body.removeChild(textArea);","+                    showToast('æ–‡ä»¶å†…å®¹å·²å¤åˆ¶åˆ°å‰ªè´´æ¿', 'success');","+                }","+            };","+","             // åˆ›å»ºå†…å®¹åŒºåŸŸ","             const contentArea = document.createElement('div');","             contentArea.style.cssText = `"]}],"userModified":false,"replaceAll":false}}}
{"ts":"2025-11-05T02:38:00.325Z","event":"PreToolUse","phase":"","message":"PreToolUseäº‹ä»¶æ­£åœ¨æ‰§è¡Œ","description":"å·¥å…·æ‰§è¡Œå‰è§¦å‘ï¼Œå¯åŸºäºå‚æ•°é˜»æ­¢æˆ–è°ƒæ•´è°ƒç”¨ã€‚","doc_url":"https://docs.claude.com/zh-CN/docs/claude-code/hooks#pretooluse","payload":{"session_id":"c7c21516-7e1e-49b2-8ae5-4e1bb98e9692","transcript_path":"C:\\Users\\WTCL\\.claude\\projects\\i--claude-code-proxy\\c7c21516-7e1e-49b2-8ae5-4e1bb98e9692.jsonl","cwd":"i:\\claude-code-proxy","permission_mode":"acceptEdits","hook_event_name":"PreToolUse","tool_name":"Edit","tool_input":{"file_path":"i:\\claude-code-proxy\\analyze\\hooks.html","old_string":"// ç»„è£…æ¨¡æ€çª—å£\n            header.appendChild(title);\n            header.appendChild(closeBtn);\n            modalContent.appendChild(header);\n            modalContent.appendChild(contentArea);\n            modal.appendChild(modalContent);","new_string":"// ç»„è£…æ¨¡æ€çª—å£\n            actions.appendChild(copyBtn);\n            actions.appendChild(closeBtn);\n            header.appendChild(title);\n            header.appendChild(actions);\n            modalContent.appendChild(header);\n            modalContent.appendChild(contentArea);\n            modal.appendChild(modalContent);"}}}
{"ts":"2025-11-05T02:38:02.001Z","event":"PostToolUse","phase":"","message":"PostToolUseäº‹ä»¶æ­£åœ¨æ‰§è¡Œ","description":"å·¥å…·æˆåŠŸæ‰§è¡Œåè§¦å‘ï¼Œå¸¸ç”¨äºæ ¼å¼åŒ–ã€æ ¡éªŒæˆ–è®°å½•ç»“æœã€‚","doc_url":"https://docs.claude.com/zh-CN/docs/claude-code/hooks#posttooluse","payload":{"session_id":"c7c21516-7e1e-49b2-8ae5-4e1bb98e9692","transcript_path":"C:\\Users\\WTCL\\.claude\\projects\\i--claude-code-proxy\\c7c21516-7e1e-49b2-8ae5-4e1bb98e9692.jsonl","cwd":"i:\\claude-code-proxy","permission_mode":"acceptEdits","hook_event_name":"PostToolUse","tool_name":"Edit","tool_input":{"file_path":"i:\\claude-code-proxy\\analyze\\hooks.html","old_string":"// ç»„è£…æ¨¡æ€çª—å£\n            header.appendChild(title);\n            header.appendChild(closeBtn);\n            modalContent.appendChild(header);\n            modalContent.appendChild(contentArea);\n            modal.appendChild(modalContent);","new_string":"// ç»„è£…æ¨¡æ€çª—å£\n            actions.appendChild(copyBtn);\n            actions.appendChild(closeBtn);\n            header.appendChild(title);\n            header.appendChild(actions);\n            modalContent.appendChild(header);\n            modalContent.appendChild(contentArea);\n            modal.appendChild(modalContent);"},"tool_response":{"filePath":"i:\\claude-code-proxy\\analyze\\hooks.html","oldString":"// ç»„è£…æ¨¡æ€çª—å£\n            header.appendChild(title);\n            header.appendChild(closeBtn);\n            modalContent.appendChild(header);\n            modalContent.appendChild(contentArea);\n            modal.appendChild(modalContent);","newString":"// ç»„è£…æ¨¡æ€çª—å£\n            actions.appendChild(copyBtn);\n            actions.appendChild(closeBtn);\n            header.appendChild(title);\n            header.appendChild(actions);\n            modalContent.appendChild(header);\n            modalContent.appendChild(contentArea);\n            modal.appendChild(modalContent);","originalFile":"<!DOCTYPE html>\n<html lang=\"zh-CN\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Hooks æ—¥å¿—åˆ†æ</title>\n    <style>\n        * {\n            margin: 0;\n            padding: 0;\n            box-sizing: border-box;\n        }\n\n        body {\n            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n            min-height: 100vh;\n            padding: 20px;\n        }\n\n        .container {\n            max-width: 1400px;\n            margin: 0 auto;\n        }\n\n        .header {\n            text-align: center;\n            color: white;\n            margin-bottom: 30px;\n        }\n\n        .header h1 {\n            font-size: 2.5rem;\n            margin-bottom: 10px;\n            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);\n        }\n\n        .header p {\n            font-size: 1.1rem;\n            opacity: 0.9;\n        }\n\n        /* æ–‡ä»¶ä¸Šä¼ ç»„ä»¶æ ·å¼ */\n        .upload-section {\n            margin-bottom: 30px;\n        }\n\n        .upload-card {\n            background: white;\n            border-radius: 15px;\n            padding: 25px;\n            box-shadow: 0 10px 30px rgba(0,0,0,0.1);\n            border: 2px dashed #cbd5e0;\n            transition: all 0.3s ease;\n        }\n\n        .upload-card:hover {\n            border-color: #667eea;\n            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.2);\n        }\n\n        .upload-header {\n            font-size: 1.2rem;\n            font-weight: bold;\n            color: #4a5568;\n            margin-bottom: 20px;\n            text-align: center;\n        }\n\n        .upload-area {\n            border: 2px dashed #e2e8f0;\n            border-radius: 10px;\n            padding: 40px 20px;\n            text-align: center;\n            transition: all 0.3s ease;\n            cursor: pointer;\n        }\n\n        .upload-area:hover {\n            border-color: #667eea;\n            background: #f7fafc;\n        }\n\n        .upload-area.dragover {\n            border-color: #667eea;\n            background: #edf2f7;\n            transform: scale(1.02);\n        }\n\n        .upload-icon {\n            font-size: 3rem;\n            margin-bottom: 15px;\n            opacity: 0.7;\n        }\n\n        .upload-text {\n            font-size: 1.1rem;\n            color: #4a5568;\n            margin-bottom: 10px;\n            font-weight: 500;\n        }\n\n        .upload-hint {\n            font-size: 0.9rem;\n            color: #718096;\n            margin-bottom: 20px;\n        }\n\n        .upload-btn {\n            background: #667eea;\n            color: white;\n            border: none;\n            padding: 12px 24px;\n            border-radius: 8px;\n            font-size: 1rem;\n            font-weight: 500;\n            cursor: pointer;\n            transition: all 0.3s ease;\n        }\n\n        .upload-btn:hover {\n            background: #5a67d8;\n            transform: translateY(-2px);\n            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);\n        }\n\n        .file-info {\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            background: #f7fafc;\n            padding: 15px 20px;\n            border-radius: 8px;\n            margin-top: 15px;\n        }\n\n        .file-name {\n            font-weight: 500;\n            color: #4a5568;\n            flex: 1;\n            overflow: hidden;\n            text-overflow: ellipsis;\n            white-space: nowrap;\n        }\n\n        .clear-btn {\n            background: #fc8181;\n            color: white;\n            border: none;\n            width: 30px;\n            height: 30px;\n            border-radius: 50%;\n            cursor: pointer;\n            font-size: 1rem;\n            transition: all 0.3s ease;\n        }\n\n        .clear-btn:hover {\n            background: #f56565;\n            transform: scale(1.1);\n        }\n\n        /* æ¶ˆæ¯æç¤ºæ ·å¼ */\n        .upload-message {\n            margin-top: 15px;\n            padding: 12px 16px;\n            border-radius: 8px;\n            font-size: 0.9rem;\n            animation: slideIn 0.3s ease;\n        }\n\n        .upload-success {\n            background: #d4edda;\n            color: #155724;\n            border: 1px solid #c3e6cb;\n        }\n\n        .upload-error {\n            background: #f8d7da;\n            color: #721c24;\n            border: 1px solid #f5c6cb;\n        }\n\n        @keyframes slideIn {\n            from {\n                opacity: 0;\n                transform: translateY(-10px);\n            }\n            to {\n                opacity: 1;\n                transform: translateY(0);\n            }\n        }\n\n        #file-input {\n            display: none;\n        }\n\n        .stats-grid {\n            display: grid;\n            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\n            gap: 20px;\n            margin-bottom: 30px;\n        }\n\n        .stat-card {\n            background: white;\n            border-radius: 15px;\n            padding: 25px;\n            box-shadow: 0 10px 30px rgba(0,0,0,0.2);\n            text-align: center;\n            transition: transform 0.3s ease, box-shadow 0.3s ease;\n        }\n\n        .stat-card:hover {\n            transform: translateY(-5px);\n            box-shadow: 0 15px 40px rgba(0,0,0,0.3);\n        }\n\n        .stat-number {\n            font-size: 3rem;\n            font-weight: bold;\n            margin-bottom: 10px;\n        }\n\n        .stat-label {\n            font-size: 1.1rem;\n            color: #666;\n            margin-bottom: 5px;\n        }\n\n        .stat-description {\n            font-size: 0.9rem;\n            color: #999;\n        }\n\n        .filter-section {\n            background: white;\n            border-radius: 15px;\n            padding: 20px;\n            box-shadow: 0 10px 30px rgba(0,0,0,0.2);\n            margin-bottom: 30px;\n        }\n\n        .filter-controls {\n            display: flex;\n            gap: 15px;\n            flex-wrap: wrap;\n            align-items: center;\n        }\n\n        .filter-group {\n            display: flex;\n            align-items: center;\n            gap: 10px;\n        }\n\n        .filter-label {\n            font-weight: bold;\n            color: #333;\n        }\n\n        .filter-select, .search-input {\n            padding: 8px 12px;\n            border: 2px solid #ddd;\n            border-radius: 5px;\n            font-size: 0.9rem;\n            transition: border-color 0.3s ease;\n        }\n\n        .filter-select:focus, .search-input:focus {\n            outline: none;\n            border-color: #667eea;\n        }\n\n        .search-input {\n            min-width: 200px;\n        }\n\n        .hooks-container {\n            display: grid;\n            gap: 30px;\n        }\n\n        .hook-item {\n            background: white;\n            border-radius: 15px;\n            padding: 25px;\n            box-shadow: 0 10px 30px rgba(0,0,0,0.2);\n        }\n\n        .hook-header {\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            margin-bottom: 20px;\n            padding-bottom: 15px;\n            border-bottom: 2px solid #667eea;\n        }\n\n        .hook-event {\n            font-size: 1.5rem;\n            font-weight: bold;\n            color: #667eea;\n        }\n\n        .hook-meta {\n            display: flex;\n            gap: 20px;\n            align-items: center;\n        }\n\n        .hook-timestamp {\n            font-size: 0.9rem;\n            color: #666;\n            background: #f0f4ff;\n            padding: 5px 12px;\n            border-radius: 20px;\n        }\n\n        .hook-message {\n            background: #f8f9fa;\n            border-left: 4px solid #667eea;\n            padding: 15px;\n            margin-bottom: 15px;\n            border-radius: 5px;\n        }\n\n        .hook-description {\n            color: #666;\n            font-style: italic;\n            margin-bottom: 15px;\n        }\n\n        .hook-details {\n            display: flex;\n            flex-direction: column;\n            gap: 20px;\n        }\n\n        .part-card {\n            background: #f8f9fa;\n            border-radius: 10px;\n            overflow: hidden;\n        }\n\n        .part-header {\n            background: #667eea;\n            color: white;\n            padding: 12px 15px;\n            font-weight: bold;\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            cursor: pointer;\n            transition: background 0.3s ease;\n        }\n\n        .part-header:hover {\n            background: #5a67d8;\n        }\n\n        .part-content {\n            padding: 15px;\n            font-family: 'Courier New', monospace;\n            font-size: 0.9rem;\n            background: #1a1a1a;\n            color: #ffffff;\n            overflow-y: auto;\n            white-space: pre-wrap;\n            line-height: 1.6;\n            min-height: 100px;\n            border-radius: 8px;\n            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.3);\n        }\n\n        .part-content.hidden {\n            display: none;\n        }\n\n        .toggle-icon {\n            transition: transform 0.3s ease;\n        }\n\n        .toggle-icon.rotated {\n            transform: rotate(180deg);\n        }\n\n        /* è‡ªå®šä¹‰æ»šåŠ¨æ¡æ ·å¼ */\n        .part-content::-webkit-scrollbar {\n            width: 8px;\n        }\n\n        .part-content::-webkit-scrollbar-track {\n            background: #2a2a2a;\n            border-radius: 4px;\n        }\n\n        .part-content::-webkit-scrollbar-thumb {\n            background: #4a4a4a;\n            border-radius: 4px;\n        }\n\n        .part-content::-webkit-scrollbar-thumb:hover {\n            background: #5a5a5a;\n        }\n\n        .event-badge {\n            display: inline-block;\n            padding: 4px 12px;\n            border-radius: 20px;\n            font-size: 0.8rem;\n            font-weight: bold;\n            margin-right: 10px;\n        }\n\n        .event-userprompt { background: #FF6B6B; color: white; }\n        .event-pretool { background: #4ECDC4; color: white; }\n        .event-posttool { background: #45B7D1; color: white; }\n        .event-notification { background: #9C27B0; color: white; }\n        .event-stop { background: #F44336; color: white; }\n        .event-subagent-stop { background: #FF9800; color: white; }\n        .event-pre-compact { background: #FFC107; color: white; }\n        .event-session-start { background: #4CAF50; color: white; }\n        .event-session-end { background: #607D8B; color: white; }\n        .event-default { background: #78909C; color: white; }\n\n        .no-data {\n            text-align: center;\n            padding: 60px 20px;\n            color: white;\n            font-size: 1.2rem;\n        }\n\n        .error-message {\n            background: #fff5f5;\n            border: 2px solid #fc8181;\n            color: #c53030;\n            padding: 20px;\n            border-radius: 10px;\n            text-align: center;\n            font-size: 1.1rem;\n            margin: 20px 0;\n        }\n\n        .json-key { color: #9C27B0; }\n        .json-string { color: #4CAF50; }\n        .json-number { color: #FF9800; }\n        .json-boolean { color: #F44336; }\n        .json-null { color: #9E9E9E; }\n        .json-url { color: #2196F3; text-decoration: underline; cursor: pointer; }\n\n        .transcript-path {\n            background: #fff3cd;\n            border: 1px solid #ffeaa7;\n            border-radius: 5px;\n            padding: 8px 12px;\n            margin-top: 10px;\n            font-size: 0.9rem;\n        }\n\n        .transcript-path-label {\n            font-weight: bold;\n            color: #856404;\n            margin-bottom: 5px;\n        }\n\n        .transcript-path-value {\n            color: #856404;\n            word-break: break-all;\n            font-family: monospace;\n            background: #f8f9fa;\n            padding: 4px 8px;\n            border-radius: 3px;\n        }\n\n        .has-transcript-badge {\n            background: #ffc107;\n            color: #212529;\n            padding: 2px 8px;\n            border-radius: 12px;\n            font-size: 0.7rem;\n            font-weight: bold;\n            margin-left: 10px;\n        }\n\n        .transcript-actions {\n            display: flex;\n            gap: 8px;\n            margin-top: 8px;\n        }\n\n        .transcript-btn {\n            background: #667eea;\n            color: white;\n            border: none;\n            padding: 6px 12px;\n            border-radius: 4px;\n            font-size: 0.8rem;\n            cursor: pointer;\n            transition: all 0.3s ease;\n            display: flex;\n            align-items: center;\n            gap: 4px;\n        }\n\n        .transcript-btn:hover {\n            background: #5a67d8;\n            transform: translateY(-1px);\n        }\n\n        .transcript-btn.copy {\n            background: #28a745;\n        }\n\n        .transcript-btn.copy:hover {\n            background: #218838;\n        }\n\n        .transcript-btn.open {\n            background: #007bff;\n        }\n\n        .transcript-btn.open:hover {\n            background: #0056b3;\n        }\n\n        .transcript-btn:disabled {\n            background: #6c757d;\n            cursor: not-allowed;\n            transform: none;\n        }\n\n        @media (max-width: 768px) {\n            .header h1 {\n                font-size: 2rem;\n            }\n\n            .stats-grid {\n                grid-template-columns: repeat(2, 1fr);\n            }\n\n            .filter-controls {\n                flex-direction: column;\n                align-items: stretch;\n            }\n\n            .search-input {\n                min-width: auto;\n            }\n        }\n    </style>\n</head>\n<body>\n    <div class=\"container\">\n        <div class=\"header\">\n            <h1>Hooks æ—¥å¿—åˆ†æ</h1>\n            <p>ä¸Šä¼ å¹¶åˆ†æ Claude Hooks äº‹ä»¶æ—¥å¿—</p>\n        </div>\n\n        <!-- æ–‡ä»¶ä¸Šä¼ ç»„ä»¶ -->\n        <div class=\"upload-section\">\n            <div class=\"upload-card\">\n                <div class=\"upload-header\">\n                    <span>ğŸ“ é€‰æ‹© Hooks æ—¥å¿—æ–‡ä»¶</span>\n                </div>\n                <div class=\"upload-area\" id=\"upload-area\">\n                    <div class=\"upload-content\">\n                        <div class=\"upload-icon\">ğŸ“„</div>\n                        <p class=\"upload-text\">ç‚¹å‡»é€‰æ‹©æ–‡ä»¶æˆ–æ‹–æ‹½æ–‡ä»¶åˆ°æ­¤å¤„</p>\n                        <p class=\"upload-hint\">æ”¯æŒ .log .txt æ ¼å¼çš„æ—¥å¿—æ–‡ä»¶ï¼Œæ¯è¡Œä¸€ä¸ª JSON å¯¹è±¡ï¼Œæœ€å¤§50MB</p>\n                        <input type=\"file\" id=\"file-input\" accept=\".log,.txt\" style=\"display: none;\">\n                        <button class=\"upload-btn\" onclick=\"document.getElementById('file-input').click()\">é€‰æ‹©æ–‡ä»¶</button>\n                    </div>\n                </div>\n                <div class=\"file-info\" id=\"file-info\" style=\"display: none;\">\n                    <span class=\"file-name\" id=\"file-name\"></span>\n                    <button class=\"clear-btn\" onclick=\"clearFile()\">âœ•</button>\n                </div>\n            </div>\n        </div>\n\n        <div id=\"stats-section\" style=\"display: none;\">\n            <div class=\"stats-grid\">\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"total-hooks\">0</div>\n                    <div class=\"stat-label\">æ€»äº‹ä»¶æ•°</div>\n                    <div class=\"stat-description\">æ‰€æœ‰ Hooks äº‹ä»¶</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"user-prompts\">0</div>\n                    <div class=\"stat-label\">ç”¨æˆ·æç¤ºäº‹ä»¶</div>\n                    <div class=\"stat-description\">UserPromptSubmit</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"pre-tools\">0</div>\n                    <div class=\"stat-label\">å·¥å…·æ‰§è¡Œå‰äº‹ä»¶</div>\n                    <div class=\"stat-description\">PreToolUse</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"post-tools\">0</div>\n                    <div class=\"stat-label\">å·¥å…·æ‰§è¡Œåäº‹ä»¶</div>\n                    <div class=\"stat-description\">PostToolUse</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"notifications\">0</div>\n                    <div class=\"stat-label\">é€šçŸ¥äº‹ä»¶</div>\n                    <div class=\"stat-description\">Notification</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"stops\">0</div>\n                    <div class=\"stat-label\">åœæ­¢äº‹ä»¶</div>\n                    <div class=\"stat-description\">Stop</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"subagent-stops\">0</div>\n                    <div class=\"stat-label\">å­ä»£ç†åœæ­¢äº‹ä»¶</div>\n                    <div class=\"stat-description\">SubagentStop</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"pre-compacts\">0</div>\n                    <div class=\"stat-label\">å‹ç¼©å‰äº‹ä»¶</div>\n                    <div class=\"stat-description\">PreCompact</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"session-starts\">0</div>\n                    <div class=\"stat-label\">ä¼šè¯å¼€å§‹äº‹ä»¶</div>\n                    <div class=\"stat-description\">SessionStart</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"session-ends\">0</div>\n                    <div class=\"stat-label\">ä¼šè¯ç»“æŸäº‹ä»¶</div>\n                    <div class=\"stat-description\">SessionEnd</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"transcript-count\">0</div>\n                    <div class=\"stat-label\">åŒ…å«è½¬å½•è·¯å¾„äº‹ä»¶</div>\n                    <div class=\"stat-description\">åŒ…å« transcript_path</div>\n                </div>\n            </div>\n\n            <div class=\"filter-section\">\n                <div class=\"filter-controls\">\n                    <div class=\"filter-group\">\n                        <label class=\"filter-label\">äº‹ä»¶ç±»å‹ï¼š</label>\n                        <select class=\"filter-select\" id=\"event-filter\">\n                            <option value=\"\">å…¨éƒ¨</option>\n                            <option value=\"UserPromptSubmit\">UserPromptSubmit</option>\n                            <option value=\"PreToolUse\">PreToolUse</option>\n                            <option value=\"PostToolUse\">PostToolUse</option>\n                            <option value=\"Notification\">Notification</option>\n                            <option value=\"Stop\">Stop</option>\n                            <option value=\"SubagentStop\">SubagentStop</option>\n                            <option value=\"PreCompact\">PreCompact</option>\n                            <option value=\"SessionStart\">SessionStart</option>\n                            <option value=\"SessionEnd\">SessionEnd</option>\n                        </select>\n                    </div>\n                    <div class=\"filter-group\">\n                        <label class=\"filter-label\">æœç´¢ï¼š</label>\n                        <input type=\"text\" class=\"search-input\" id=\"search-input\" placeholder=\"æœç´¢äº‹ä»¶å†…å®¹...\">\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <div id=\"hooks-container\" class=\"hooks-container\"></div>\n\n        <div id=\"no-data\" class=\"no-data\">\n            è¯·ä¸Šä¼  hooks.log æ–‡ä»¶å¼€å§‹åˆ†æ\n        </div>\n\n        <div id=\"error-message\" class=\"error-message\" style=\"display: none;\"></div>\n    </div>\n\n    <script>\n        let hooksData = [];\n        let filteredData = [];\n\n        // æ–‡ä»¶ä¸Šä¼ ç›¸å…³å‡½æ•°\n        function setupFileUpload() {\n            const uploadArea = document.getElementById('upload-area');\n            const fileInput = document.getElementById('file-input');\n\n            // ç‚¹å‡»ä¸Šä¼ åŒºåŸŸè§¦å‘æ–‡ä»¶é€‰æ‹©ï¼ˆä½†ä¸åŒ…æ‹¬æŒ‰é’®ï¼‰\n            uploadArea.addEventListener('click', function(event) {\n                // å¦‚æœç‚¹å‡»çš„æ˜¯æŒ‰é’®ï¼Œä¸å¤„ç†\n                if (event.target.tagName === 'BUTTON' || event.target.closest('button')) {\n                    return;\n                }\n                fileInput.click();\n            });\n\n            // æ–‡ä»¶é€‰æ‹©äº‹ä»¶\n            fileInput.addEventListener('change', handleFileSelect);\n\n            // æ‹–æ‹½äº‹ä»¶\n            uploadArea.addEventListener('dragover', handleDragOver);\n            uploadArea.addEventListener('dragleave', handleDragLeave);\n            uploadArea.addEventListener('drop', handleDrop);\n        }\n\n\n        function handleDragOver(e) {\n            e.preventDefault();\n            e.currentTarget.classList.add('dragover');\n        }\n\n        function handleDragLeave(e) {\n            e.preventDefault();\n            e.currentTarget.classList.remove('dragover');\n        }\n\n        function handleDrop(e) {\n            e.preventDefault();\n            e.currentTarget.classList.remove('dragover');\n            handleFiles(e.dataTransfer.files);\n        }\n\n        function handleFileSelect(event) {\n            const files = event.target.files;\n            handleFiles(files);\n        }\n\n        function handleFiles(files) {\n            if (files.length === 0) return;\n\n            const file = files[0];\n\n            // æ£€æŸ¥æ–‡ä»¶ç±»å‹\n            const validTypes = ['.log', '.txt'];\n            const fileExtension = file.name.substring(file.name.lastIndexOf('.')).toLowerCase();\n\n            if (!validTypes.includes(fileExtension)) {\n                showErrorMessage('è¯·é€‰æ‹© .log æˆ– .txt æ ¼å¼çš„æ—¥å¿—æ–‡ä»¶');\n                return;\n            }\n\n            // æ£€æŸ¥æ–‡ä»¶å¤§å° (é™åˆ¶ä¸º50MB)\n            if (file.size > 50 * 1024 * 1024) {\n                showErrorMessage('æ–‡ä»¶å¤§å°ä¸èƒ½è¶…è¿‡50MB');\n                return;\n            }\n\n            // æ˜¾ç¤ºæ–‡ä»¶ä¿¡æ¯\n            showFileInfo(file);\n\n            // è¯»å–æ–‡ä»¶å†…å®¹\n            const reader = new FileReader();\n            reader.onload = function(e) {\n                try {\n                    const content = e.target.result;\n                    console.log('æ–‡ä»¶è¯»å–æˆåŠŸï¼Œå†…å®¹é•¿åº¦:', content.length);\n                    console.log('æ–‡ä»¶å†…å®¹å‰100å­—ç¬¦:', content.substring(0, 100));\n\n                    if (!content || content.trim().length === 0) {\n                        showErrorMessage('æ–‡ä»¶å†…å®¹ä¸ºç©º');\n                        return;\n                    }\n\n                    parseHooksData(content);\n                    showSuccessMessage(`æˆåŠŸåŠ è½½æ–‡ä»¶: ${file.name}`);\n                } catch (error) {\n                    console.error('æ–‡ä»¶è§£æå¼‚å¸¸:', error);\n                    showErrorMessage('æ–‡ä»¶è§£æå¤±è´¥ï¼š' + error.message);\n                }\n            };\n            reader.onerror = function(error) {\n                console.error('æ–‡ä»¶è¯»å–å¤±è´¥:', error);\n                showErrorMessage('æ–‡ä»¶è¯»å–å¤±è´¥');\n            };\n            reader.readAsText(file);\n        }\n\n        function showFileInfo(file) {\n            const fileInfo = document.getElementById('file-info');\n            const fileName = document.getElementById('file-name');\n            const uploadArea = document.getElementById('upload-area');\n\n            fileName.textContent = file.name;\n            fileInfo.style.display = 'flex';\n            uploadArea.style.display = 'none';\n        }\n\n        function clearFile() {\n            const fileInfo = document.getElementById('file-info');\n            const uploadArea = document.getElementById('upload-area');\n            const fileInput = document.getElementById('file-input');\n\n            fileInfo.style.display = 'none';\n            uploadArea.style.display = 'block';\n\n            // æ¸…ç©ºæ–‡ä»¶è¾“å…¥æ¡†çš„å€¼\n            fileInput.value = '';\n\n            // æ¸…ç©ºæ•°æ®\n            hooksData = [];\n            filteredData = [];\n\n            // æ¸…ç©ºæ˜¾ç¤ºåŒºåŸŸ\n            document.getElementById('hooks-container').innerHTML = '';\n            document.getElementById('no-data').style.display = 'block';\n            document.getElementById('stats-section').style.display = 'none';\n\n            // æ˜¾ç¤ºæç¤º\n            showSuccessMessage('å·²æ¸…ç©ºæ–‡ä»¶ï¼Œè¯·é‡æ–°é€‰æ‹©æ—¥å¿—æ–‡ä»¶');\n        }\n\n        function showSuccessMessage(message) {\n            showMessage(message, 'success');\n        }\n\n        function showErrorMessage(message) {\n            showMessage(message, 'error');\n        }\n\n        function showMessage(message, type) {\n            // ç§»é™¤ä¹‹å‰çš„æ¶ˆæ¯\n            const existingMessages = document.querySelectorAll('.upload-message');\n            existingMessages.forEach(msg => msg.remove());\n\n            const messageClass = type === 'success' ? 'upload-success' : 'upload-error';\n            const messageDiv = document.createElement('div');\n            messageDiv.className = `upload-message ${messageClass}`;\n            messageDiv.textContent = message;\n\n            document.querySelector('.upload-card').appendChild(messageDiv);\n\n            // 3ç§’åè‡ªåŠ¨æ¶ˆå¤±\n            setTimeout(() => {\n                messageDiv.style.opacity = '0';\n                setTimeout(() => {\n                    if (messageDiv.parentNode) {\n                        messageDiv.parentNode.removeChild(messageDiv);\n                    }\n                }, 300);\n            }, 3000);\n        }\n\n        // è§£æ hooks æ•°æ®\n        function parseHooksData(content) {\n            console.log('å¼€å§‹è§£æ hooks æ•°æ®ï¼Œå†…å®¹é•¿åº¦:', content.length);\n\n            hooksData = [];\n            const lines = content.split('\\n').filter(line => line.trim());\n            console.log('åˆ†å‰²åçš„è¡Œæ•°:', lines.length);\n\n            for (let i = 0; i < lines.length; i++) {\n                const line = lines[i];\n                try {\n                    const hookData = JSON.parse(line);\n                    hooksData.push(hookData);\n                    console.log(`æˆåŠŸè§£æç¬¬ ${i + 1} è¡Œï¼Œäº‹ä»¶ç±»å‹:`, hookData.event);\n                } catch (error) {\n                    console.error(`è§£æç¬¬ ${i + 1} è¡Œå¤±è´¥:`, error.message);\n                    console.error('é—®é¢˜è¡Œçš„å†…å®¹:', line.substring(0, 100) + (line.length > 100 ? '...' : ''));\n                }\n            }\n\n            console.log('è§£æå®Œæˆï¼Œæ€»å…±è§£æåˆ°', hooksData.length, 'ä¸ªæœ‰æ•ˆäº‹ä»¶');\n\n            if (hooksData.length === 0) {\n                showErrorMessage('æœªæ‰¾åˆ°æœ‰æ•ˆçš„ hooks æ•°æ®ã€‚è¯·ç¡®ä¿æ–‡ä»¶æ ¼å¼æ­£ç¡®ï¼Œæ¯è¡Œåº”è¯¥æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„JSONå¯¹è±¡ã€‚');\n                console.error('è§£æå¤±è´¥ï¼Œæ²¡æœ‰æ‰¾åˆ°æœ‰æ•ˆçš„hooksæ•°æ®');\n                return;\n            }\n\n            filteredData = [...hooksData];\n            console.log('å‡†å¤‡æ˜¾ç¤ºæ•°æ®ï¼Œè¿‡æ»¤åçš„äº‹ä»¶æ•°é‡:', filteredData.length);\n            displayData();\n        }\n\n        // æ˜¾ç¤ºæ•°æ®\n        function displayData() {\n            document.getElementById('no-data').style.display = 'none';\n            document.getElementById('error-message').style.display = 'none';\n            document.getElementById('stats-section').style.display = 'block';\n\n            updateStatistics();\n            renderHooks();\n        }\n\n        // æ›´æ–°ç»Ÿè®¡ä¿¡æ¯\n        function updateStatistics() {\n            const stats = {\n                total: filteredData.length,\n                userPrompts: filteredData.filter(h => h.event === 'UserPromptSubmit').length,\n                preTools: filteredData.filter(h => h.event === 'PreToolUse').length,\n                postTools: filteredData.filter(h => h.event === 'PostToolUse').length,\n                notifications: filteredData.filter(h => h.event === 'Notification').length,\n                stops: filteredData.filter(h => h.event === 'Stop').length,\n                subagentStops: filteredData.filter(h => h.event === 'SubagentStop').length,\n                preCompacts: filteredData.filter(h => h.event === 'PreCompact').length,\n                sessionStarts: filteredData.filter(h => h.event === 'SessionStart').length,\n                sessionEnds: filteredData.filter(h => h.event === 'SessionEnd').length,\n                transcriptCount: filteredData.filter(h => hasTranscriptPath(h)).length\n            };\n\n            document.getElementById('total-hooks').textContent = stats.total;\n            document.getElementById('user-prompts').textContent = stats.userPrompts;\n            document.getElementById('pre-tools').textContent = stats.preTools;\n            document.getElementById('post-tools').textContent = stats.postTools;\n            document.getElementById('notifications').textContent = stats.notifications;\n            document.getElementById('stops').textContent = stats.stops;\n            document.getElementById('subagent-stops').textContent = stats.subagentStops;\n            document.getElementById('pre-compacts').textContent = stats.preCompacts;\n            document.getElementById('session-starts').textContent = stats.sessionStarts;\n            document.getElementById('session-ends').textContent = stats.sessionEnds;\n            document.getElementById('transcript-count').textContent = stats.transcriptCount;\n        }\n\n        // æ¸²æŸ“ hooks\n        function renderHooks() {\n            const container = document.getElementById('hooks-container');\n            container.innerHTML = '';\n\n            filteredData.forEach((hook, index) => {\n                const hookElement = createHookElement(hook, index);\n                container.appendChild(hookElement);\n            });\n\n            // æ·»åŠ åŠ¨ç”»\n            const elements = container.querySelectorAll('.hook-item');\n            elements.forEach((el, i) => {\n                el.style.opacity = '0';\n                el.style.transform = 'translateY(20px)';\n                setTimeout(() => {\n                    el.style.transition = 'opacity 0.3s ease, transform 0.3s ease';\n                    el.style.opacity = '1';\n                    el.style.transform = 'translateY(0)';\n                }, i * 50);\n            });\n        }\n\n        // æ£€æŸ¥æ˜¯å¦åŒ…å« transcript_path å­—æ®µ\n        function hasTranscriptPath(hook) {\n            if (!hook.payload) return false;\n\n            // æ£€æŸ¥ payload ä¸­æ˜¯å¦ç›´æ¥åŒ…å« transcript_path\n            if (hook.payload.transcript_path) return true;\n\n            // æ·±åº¦æœç´¢ payload å¯¹è±¡ä¸­çš„ transcript_path å­—æ®µ\n            return searchInObject(hook.payload, 'transcript_path');\n        }\n\n        // åœ¨å¯¹è±¡ä¸­é€’å½’æœç´¢æŒ‡å®šå­—æ®µ\n        function searchInObject(obj, fieldName) {\n            if (!obj || typeof obj !== 'object') return false;\n\n            for (const key in obj) {\n                if (key === fieldName) return true;\n\n                if (typeof obj[key] === 'object' && obj[key] !== null) {\n                    if (searchInObject(obj[key], fieldName)) return true;\n                }\n            }\n\n            return false;\n        }\n\n        // è·å– transcript_path çš„å€¼\n        function getTranscriptPath(hook) {\n            if (!hook.payload) return null;\n\n            // æ£€æŸ¥ payload ä¸­æ˜¯å¦ç›´æ¥åŒ…å« transcript_path\n            if (hook.payload.transcript_path) return hook.payload.transcript_path;\n\n            // æ·±åº¦æœç´¢å¹¶è¿”å› transcript_path çš„å€¼\n            return findValueInObject(hook.payload, 'transcript_path');\n        }\n\n        // åœ¨å¯¹è±¡ä¸­é€’å½’æŸ¥æ‰¾æŒ‡å®šå­—æ®µçš„å€¼\n        function findValueInObject(obj, fieldName) {\n            if (!obj || typeof obj !== 'object') return null;\n\n            for (const key in obj) {\n                if (key === fieldName) return obj[key];\n\n                if (typeof obj[key] === 'object' && obj[key] !== null) {\n                    const found = findValueInObject(obj[key], fieldName);\n                    if (found !== null) return found;\n                }\n            }\n\n            return null;\n        }\n\n        // åˆ›å»º hook å…ƒç´ \n        function createHookElement(hook, index) {\n            const div = document.createElement('div');\n            div.className = 'hook-item';\n\n            const eventClass = getEventClass(hook.event);\n            const formattedTime = formatTimestamp(hook.ts);\n            const eventDescription = getEventDescription(hook.event, hook.phase);\n            const hasTranscript = hasTranscriptPath(hook);\n            const transcriptPath = getTranscriptPath(hook);\n\n            div.innerHTML = `\n                <div class=\"hook-header\">\n                    <div class=\"hook-event\">\n                        <span class=\"event-badge ${eventClass}\">${hook.event}</span>\n                        ${hasTranscript ? '<span class=\"has-transcript-badge\">åŒ…å«è½¬å½•è·¯å¾„</span>' : ''}\n                    </div>\n                    <div class=\"hook-meta\">\n                        <div class=\"hook-timestamp\">${formattedTime}</div>\n                    </div>\n                </div>\n                <div class=\"hook-message\">${hook.message}</div>\n                <div class=\"hook-description\">${hook.description || eventDescription}</div>\n                ${hasTranscript && transcriptPath ? `\n                <div class=\"transcript-path\">\n                    <div class=\"transcript-path-label\">ğŸ“„ è½¬å½•è·¯å¾„ (transcript_path):</div>\n                    <div class=\"transcript-path-value\">${escapeHtml(transcriptPath)}</div>\n                    <div class=\"transcript-actions\">\n                        <button class=\"transcript-btn copy\" onclick=\"copyTranscriptPath('${escapeHtml(transcriptPath)}')\" title=\"å¤åˆ¶è·¯å¾„\">\n                            ğŸ“‹ å¤åˆ¶\n                        </button>\n                        ${isUrl(transcriptPath) ?\n                            `<button class=\"transcript-btn open\" onclick=\"openTranscriptUrl('${escapeHtml(transcriptPath)}')\" title=\"åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€\">\n                                ğŸ”— æ‰“å¼€é“¾æ¥\n                            </button>` :\n                            `<button class=\"transcript-btn open\" onclick=\"tryOpenTranscriptFile('${escapeHtml(transcriptPath)}')\" title=\"å°è¯•æ‰“å¼€æ–‡ä»¶\">\n                                ğŸ“‚ å°è¯•æ‰“å¼€\n                            </button>`\n                        }\n                    </div>\n                </div>\n                ` : ''}\n                <div class=\"hook-details\">\n                    <div class=\"part-card\">\n                        <div class=\"part-header\" onclick=\"toggleDetail('payload-${index}')\">\n                            <span>Payload</span>\n                            <span class=\"toggle-icon\" id=\"icon-payload-${index}\">â–¼</span>\n                        </div>\n                        <div class=\"part-content hidden\" id=\"payload-${index}\">\n                            ${formatJson(hook.payload)}\n                        </div>\n                    </div>\n                </div>\n            `;\n\n            return div;\n        }\n\n        // è·å–äº‹ä»¶æè¿°\n        function getEventDescription(event, phase) {\n            switch (event) {\n                case 'PreToolUse':\n                    return 'å·¥å…·æ‰§è¡Œå‰è§¦å‘ï¼Œå¯åŸºäºå‚æ•°é˜»æ­¢æˆ–è°ƒæ•´è°ƒç”¨ã€‚';\n                case 'PostToolUse':\n                    return 'å·¥å…·æˆåŠŸæ‰§è¡Œåè§¦å‘ï¼Œå¸¸ç”¨äºæ ¼å¼åŒ–ã€æ ¡éªŒæˆ–è®°å½•ç»“æœã€‚';\n                case 'UserPromptSubmit':\n                    return 'ç”¨æˆ·æäº¤æç¤ºå‰è§¦å‘ï¼Œå¯è¿›è¡Œæç¤ºæ ¡éªŒæˆ–å¢å¼ºã€‚';\n                case 'Notification':\n                    return 'å½“ç³»ç»Ÿå‘é€é€šçŸ¥ï¼ˆéœ€æˆæƒæˆ–ç­‰å¾…è¾“å…¥ï¼‰æ—¶è§¦å‘ã€‚';\n                case 'Stop':\n                    return 'ä¸»ä»£ç†å®Œæˆå“åº”æ—¶è§¦å‘ï¼ˆç”¨æˆ·ä¸­æ–­ä¸è§¦å‘ï¼‰ã€‚';\n                case 'SubagentStop':\n                    return 'å­ä»£ç†ä»»åŠ¡å®Œæˆæ—¶è§¦å‘ï¼Œç”¨äºè®°å½•å­ä»»åŠ¡ç»“æŸã€‚';\n                case 'PreCompact':\n                    return phase === 'manual'\n                        ? 'æ‰‹åŠ¨å‹ç¼©å‰è§¦å‘ï¼Œç”¨äºè®°å½•æˆ–å‡†å¤‡å‹ç¼©ã€‚'\n                        : 'è‡ªåŠ¨å‹ç¼©å‰è§¦å‘ï¼ˆä¸Šä¸‹æ–‡æ¥è¿‘ä¸Šé™ï¼‰ï¼Œç”¨äºè®°å½•æˆ–å‡†å¤‡å‹ç¼©ã€‚';\n                case 'SessionStart':\n                    switch (phase) {\n                        case 'startup':\n                            return 'æ–°ä¼šè¯å¯åŠ¨æ—¶è§¦å‘ï¼Œç”¨äºåŠ è½½ä¸Šä¸‹æ–‡æˆ–è®¾ç½®ç¯å¢ƒã€‚';\n                        case 'resume':\n                            return 'æ¢å¤ä¼šè¯æ—¶è§¦å‘ï¼Œç”¨äºç»§ç»­å…ˆå‰ä¸Šä¸‹æ–‡ã€‚';\n                        case 'clear':\n                            return 'æ¸…ç©ºä¼šè¯åè§¦å‘ï¼Œç”¨äºé‡ç½®ç¯å¢ƒä¸ä¸Šä¸‹æ–‡ã€‚';\n                        case 'compact':\n                            return 'å› å‹ç¼©æ“ä½œè§¦å‘çš„ä¼šè¯å¯åŠ¨ï¼Œç”¨äºç»´æŒä¸Šä¸‹æ–‡ã€‚';\n                        default:\n                            return 'ä¼šè¯å¯åŠ¨ç›¸å…³äº‹ä»¶ï¼Œåˆå§‹åŒ–æˆ–æ¢å¤ä¸Šä¸‹æ–‡ã€‚';\n                    }\n                case 'SessionEnd':\n                    return 'ä¼šè¯ç»“æŸæ—¶è§¦å‘ï¼Œå¸¸ç”¨äºæ”¶å°¾ä¸æ¸…ç†ã€‚';\n                default:\n                    return 'æœªçŸ¥äº‹ä»¶ã€‚';\n            }\n        }\n\n        // è·å–äº‹ä»¶æ ·å¼ç±»\n        function getEventClass(event) {\n            switch (event) {\n                case 'UserPromptSubmit': return 'event-userprompt';\n                case 'PreToolUse': return 'event-pretool';\n                case 'PostToolUse': return 'event-posttool';\n                case 'Notification': return 'event-notification';\n                case 'Stop': return 'event-stop';\n                case 'SubagentStop': return 'event-subagent-stop';\n                case 'PreCompact': return 'event-pre-compact';\n                case 'SessionStart': return 'event-session-start';\n                case 'SessionEnd': return 'event-session-end';\n                default: return 'event-default';\n            }\n        }\n\n        // æ ¼å¼åŒ–æ—¶é—´æˆ³\n        function formatTimestamp(ts) {\n            const date = new Date(ts);\n            return date.toLocaleString('zh-CN');\n        }\n\n        // æ ¼å¼åŒ– JSON\n        function formatJson(obj, indent = 0) {\n            if (!obj) return '';\n\n            try {\n                const spaces = '  '.repeat(indent);\n                let result = '';\n\n                if (Array.isArray(obj)) {\n                    result += '[\\n';\n                    obj.forEach((item, index) => {\n                        result += spaces + '  ';\n                        if (typeof item === 'object' && item !== null) {\n                            result += formatJson(item, indent + 1);\n                        } else {\n                            result += formatJsonValue(item);\n                        }\n                        if (index < obj.length - 1) result += ',';\n                        result += '\\n';\n                    });\n                    result += spaces + ']';\n                } else if (typeof obj === 'object' && obj !== null) {\n                    result += '{\\n';\n                    const keys = Object.keys(obj);\n                    keys.forEach((key, index) => {\n                        result += spaces + '  ';\n                        result += `<span class=\"json-key\">\"${escapeHtml(key)}\"</span>: `;\n\n                        if (typeof obj[key] === 'object' && obj[key] !== null) {\n                            result += formatJson(obj[key], indent + 1);\n                        } else {\n                            result += formatJsonValue(obj[key]);\n                        }\n\n                        if (index < keys.length - 1) result += ',';\n                        result += '\\n';\n                    });\n                    result += spaces + '}';\n                } else {\n                    result += formatJsonValue(obj);\n                }\n\n                return result;\n            } catch (error) {\n                return escapeHtml(JSON.stringify(obj));\n            }\n        }\n\n        // æ ¼å¼åŒ– JSON å€¼\n        function formatJsonValue(value) {\n            if (typeof value === 'string') {\n                if (value.startsWith('http://') || value.startsWith('https://')) {\n                    return `<span class=\"json-url\" onclick=\"window.open('${escapeHtml(value)}', '_blank')\">\"${escapeHtml(value)}\"</span>`;\n                }\n                return `<span class=\"json-string\">\"${escapeHtml(value)}\"</span>`;\n            } else if (typeof value === 'number') {\n                return `<span class=\"json-number\">${value}</span>`;\n            } else if (typeof value === 'boolean') {\n                return `<span class=\"json-boolean\">${value}</span>`;\n            } else if (value === null) {\n                return `<span class=\"json-null\">null</span>`;\n            } else {\n                return `<span style=\"color: #666;\">${value}</span>`;\n            }\n        }\n\n        // HTML è½¬ä¹‰\n        function escapeHtml(text) {\n            const div = document.createElement('div');\n            div.textContent = text;\n            return div.innerHTML;\n        }\n\n        // åˆ‡æ¢è¯¦æƒ…æ˜¾ç¤º\n        function toggleDetail(id) {\n            const content = document.getElementById(id);\n            const icon = document.getElementById('icon-' + id);\n\n            if (content.classList.contains('hidden')) {\n                content.classList.remove('hidden');\n                icon.classList.add('rotated');\n            } else {\n                content.classList.add('hidden');\n                icon.classList.remove('rotated');\n            }\n        }\n\n        // è¿‡æ»¤å’Œæœç´¢\n        document.getElementById('event-filter').addEventListener('change', applyFilters);\n        document.getElementById('search-input').addEventListener('input', applyFilters);\n\n        function applyFilters() {\n            const eventFilter = document.getElementById('event-filter').value;\n            const searchText = document.getElementById('search-input').value.toLowerCase();\n\n            filteredData = hooksData.filter(hook => {\n                const matchEvent = !eventFilter || hook.event === eventFilter;\n                const matchSearch = !searchText ||\n                    JSON.stringify(hook).toLowerCase().includes(searchText);\n\n                return matchEvent && matchSearch;\n            });\n\n            updateStatistics();\n            renderHooks();\n        }\n\n        // æ£€æŸ¥æ˜¯å¦ä¸º URL\n        function isUrl(text) {\n            try {\n                new URL(text);\n                return true;\n            } catch {\n                return false;\n            }\n        }\n\n        // å¤åˆ¶è½¬å½•è·¯å¾„åˆ°å‰ªè´´æ¿\n        async function copyTranscriptPath(path) {\n            try {\n                await navigator.clipboard.writeText(path);\n                showToast('è·¯å¾„å·²å¤åˆ¶åˆ°å‰ªè´´æ¿', 'success');\n            } catch (error) {\n                // é™çº§æ–¹æ¡ˆ\n                const textArea = document.createElement('textarea');\n                textArea.value = path;\n                document.body.appendChild(textArea);\n                textArea.select();\n                document.execCommand('copy');\n                document.body.removeChild(textArea);\n                showToast('è·¯å¾„å·²å¤åˆ¶åˆ°å‰ªè´´æ¿', 'success');\n            }\n        }\n\n        // æ‰“å¼€è½¬å½•é“¾æ¥ï¼ˆURLï¼‰\n        function openTranscriptUrl(url) {\n            window.open(url, '_blank');\n        }\n\n        // å°è¯•æ‰“å¼€æœ¬åœ°æ–‡ä»¶ï¼ˆé€šè¿‡æ–‡ä»¶é€‰æ‹©å™¨ï¼‰\n        function tryOpenTranscriptFile(path) {\n            // æ–¹æ¡ˆ1ï¼šå¤åˆ¶è·¯å¾„åˆ°å‰ªè´´æ¿\n            copyTranscriptPath(path);\n\n            // æ–¹æ¡ˆ2ï¼šå¦‚æœæ˜¯ç½‘ç»œé“¾æ¥ï¼Œç›´æ¥æ‰“å¼€\n            if (path.startsWith('http://') || path.startsWith('https://')) {\n                openTranscriptUrl(path);\n                return;\n            }\n\n            // æ–¹æ¡ˆ3ï¼šä½¿ç”¨æ–‡ä»¶é€‰æ‹©å™¨è®©ç”¨æˆ·é€‰æ‹©æœ¬åœ°æ–‡ä»¶\n            if (path.startsWith('file://')) {\n                // file:// åè®®ï¼Œæå–æ–‡ä»¶è·¯å¾„\n                const cleanPath = path.replace(/^file:\\/\\//, '');\n                showFileSelector(cleanPath);\n            } else {\n                // æœ¬åœ°æ–‡ä»¶è·¯å¾„\n                showFileSelector(path);\n            }\n        }\n\n        // æ˜¾ç¤ºæ–‡ä»¶é€‰æ‹©å™¨\n        function showFileSelector(expectedPath) {\n            const input = document.createElement('input');\n            input.type = 'file';\n            input.style.display = 'none';\n\n            // ä»è·¯å¾„ä¸­æå–æ–‡ä»¶å\n            const fileName = expectedPath.split(/[/\\\\]/).pop();\n\n            input.addEventListener('change', function(event) {\n                const file = event.target.files[0];\n                if (file) {\n                    if (file.name === fileName) {\n                        // æ–‡ä»¶ååŒ¹é…ï¼Œè¯»å–å¹¶æ˜¾ç¤ºæ–‡ä»¶å†…å®¹\n                        readAndDisplayFile(file);\n                    } else {\n                        showToast(`é€‰æ‹©çš„æ–‡ä»¶åä¸åŒ¹é…\\næœŸæœ›: ${fileName}\\nå®é™…: ${file.name}`, 'warning');\n                        // ä»ç„¶æ˜¾ç¤ºé€‰æ‹©çš„æ–‡ä»¶å†…å®¹\n                        readAndDisplayFile(file);\n                    }\n                }\n                // æ¸…ç†inputå…ƒç´ \n                document.body.removeChild(input);\n            });\n\n            document.body.appendChild(input);\n\n            // æ˜¾ç¤ºæç¤ºï¼Œç„¶åè§¦å‘æ–‡ä»¶é€‰æ‹©\n            showToast(`è¯·é€‰æ‹©æ–‡ä»¶: ${fileName}`, 'info');\n            setTimeout(() => {\n                input.click();\n            }, 500);\n        }\n\n        // è¯»å–å¹¶æ˜¾ç¤ºæ–‡ä»¶å†…å®¹\n        function readAndDisplayFile(file) {\n            const reader = new FileReader();\n            reader.onload = function(e) {\n                const content = e.target.result;\n\n                // åˆ›å»ºä¸€ä¸ªæ¨¡æ€çª—å£æ˜¾ç¤ºæ–‡ä»¶å†…å®¹\n                showFileModal(file.name, content);\n            };\n\n            reader.onerror = function() {\n                showToast('æ–‡ä»¶è¯»å–å¤±è´¥', 'error');\n            };\n\n            reader.readAsText(file);\n        }\n\n        // æ˜¾ç¤ºæ–‡ä»¶å†…å®¹çš„æ¨¡æ€çª—å£\n        function showFileModal(fileName, content) {\n            // åˆ›å»ºæ¨¡æ€èƒŒæ™¯\n            const modal = document.createElement('div');\n            modal.style.cssText = `\n                position: fixed;\n                top: 0;\n                left: 0;\n                width: 100%;\n                height: 100%;\n                background: rgba(0, 0, 0, 0.8);\n                z-index: 10000;\n                display: flex;\n                justify-content: center;\n                align-items: center;\n                animation: fadeIn 0.3s ease;\n            `;\n\n            // åˆ›å»ºæ¨¡æ€å†…å®¹\n            const modalContent = document.createElement('div');\n            modalContent.style.cssText = `\n                background: white;\n                border-radius: 12px;\n                width: 90%;\n                max-width: 800px;\n                max-height: 80vh;\n                display: flex;\n                flex-direction: column;\n                box-shadow: 0 20px 60px rgba(0,0,0,0.3);\n                animation: slideUp 0.3s ease;\n            `;\n\n            // åˆ›å»ºå¤´éƒ¨\n            const header = document.createElement('div');\n            header.style.cssText = `\n                padding: 20px;\n                border-bottom: 1px solid #e0e0e0;\n                display: flex;\n                justify-content: space-between;\n                align-items: center;\n                background: #f8f9fa;\n                border-radius: 12px 12px 0 0;\n            `;\n\n            const title = document.createElement('h3');\n            title.textContent = `ğŸ“„ ${fileName}`;\n            title.style.cssText = `\n                margin: 0;\n                color: #333;\n                font-size: 1.2rem;\n            `;\n\n            // åˆ›å»ºæ“ä½œæŒ‰é’®åŒºåŸŸ\n            const actions = document.createElement('div');\n            actions.style.cssText = `\n                display: flex;\n                gap: 10px;\n                align-items: center;\n            `;\n\n            const copyBtn = document.createElement('button');\n            copyBtn.textContent = 'ğŸ“‹ å¤åˆ¶å†…å®¹';\n            copyBtn.style.cssText = `\n                background: #28a745;\n                color: white;\n                border: none;\n                padding: 6px 12px;\n                border-radius: 4px;\n                font-size: 0.8rem;\n                cursor: pointer;\n                transition: background 0.3s ease;\n            `;\n            copyBtn.onmouseover = () => copyBtn.style.background = '#218838';\n            copyBtn.onmouseout = () => copyBtn.style.background = '#28a745';\n\n            const closeBtn = document.createElement('button');\n            closeBtn.textContent = 'âœ•';\n            closeBtn.style.cssText = `\n                background: none;\n                border: none;\n                font-size: 1.5rem;\n                cursor: pointer;\n                color: #666;\n                padding: 5px;\n                border-radius: 50%;\n                width: 32px;\n                height: 32px;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n            `;\n            closeBtn.onmouseover = () => closeBtn.style.background = '#e0e0e0';\n            closeBtn.onmouseout = () => closeBtn.style.background = 'none';\n\n            // æ·»åŠ å¤åˆ¶åŠŸèƒ½\n            copyBtn.onclick = async () => {\n                try {\n                    await navigator.clipboard.writeText(content);\n                    showToast('æ–‡ä»¶å†…å®¹å·²å¤åˆ¶åˆ°å‰ªè´´æ¿', 'success');\n                } catch (error) {\n                    // é™çº§æ–¹æ¡ˆ\n                    const textArea = document.createElement('textarea');\n                    textArea.value = content;\n                    document.body.appendChild(textArea);\n                    textArea.select();\n                    document.execCommand('copy');\n                    document.body.removeChild(textArea);\n                    showToast('æ–‡ä»¶å†…å®¹å·²å¤åˆ¶åˆ°å‰ªè´´æ¿', 'success');\n                }\n            };\n\n            // åˆ›å»ºå†…å®¹åŒºåŸŸ\n            const contentArea = document.createElement('div');\n            contentArea.style.cssText = `\n                padding: 20px;\n                overflow-y: auto;\n                flex: 1;\n                font-family: 'Courier New', monospace;\n                font-size: 0.9rem;\n                line-height: 1.5;\n                background: #1a1a1a;\n                color: #ffffff;\n                white-space: pre-wrap;\n                border-radius: 0 0 12px 12px;\n                max-height: 60vh;\n            `;\n\n            // è®¾ç½®å†…å®¹\n            contentArea.textContent = content;\n\n            // ç»„è£…æ¨¡æ€çª—å£\n            header.appendChild(title);\n            header.appendChild(closeBtn);\n            modalContent.appendChild(header);\n            modalContent.appendChild(contentArea);\n            modal.appendChild(modalContent);\n\n            // æ·»åŠ å…³é—­äº‹ä»¶\n            closeBtn.onclick = () => document.body.removeChild(modal);\n            modal.onclick = (e) => {\n                if (e.target === modal) {\n                    document.body.removeChild(modal);\n                }\n            };\n\n            // æ·»åŠ åˆ°é¡µé¢\n            document.body.appendChild(modal);\n\n            // æ·»åŠ åŠ¨ç”»æ ·å¼\n            if (!document.getElementById('modal-animations')) {\n                const style = document.createElement('style');\n                style.id = 'modal-animations';\n                style.textContent = `\n                    @keyframes fadeIn {\n                        from { opacity: 0; }\n                        to { opacity: 1; }\n                    }\n                    @keyframes slideUp {\n                        from {\n                            opacity: 0;\n                            transform: translateY(50px);\n                        }\n                        to {\n                            opacity: 1;\n                            transform: translateY(0);\n                        }\n                    }\n                `;\n                document.head.appendChild(style);\n            }\n        }\n\n        // æ˜¾ç¤ºæç¤ºä¿¡æ¯\n        function showToast(message, type = 'info') {\n            const toast = document.createElement('div');\n            toast.style.cssText = `\n                position: fixed;\n                top: 20px;\n                right: 20px;\n                background: ${type === 'success' ? '#28a745' : type === 'warning' ? '#ffc107' : type === 'error' ? '#dc3545' : '#007bff'};\n                color: white;\n                padding: 12px 16px;\n                border-radius: 6px;\n                font-size: 0.9rem;\n                z-index: 10000;\n                max-width: 400px;\n                word-wrap: break-word;\n                box-shadow: 0 4px 12px rgba(0,0,0,0.15);\n                animation: slideInRight 0.3s ease;\n            `;\n\n            toast.textContent = message;\n            document.body.appendChild(toast);\n\n            // 3ç§’åè‡ªåŠ¨æ¶ˆå¤±\n            setTimeout(() => {\n                toast.style.animation = 'slideOutRight 0.3s ease';\n                setTimeout(() => {\n                    if (toast.parentNode) {\n                        document.body.removeChild(toast);\n                    }\n                }, 300);\n            }, 3000);\n        }\n\n        // æ·»åŠ åŠ¨ç”»æ ·å¼\n        const style = document.createElement('style');\n        style.textContent = `\n            @keyframes slideInRight {\n                from {\n                    transform: translateX(100%);\n                    opacity: 0;\n                }\n                to {\n                    transform: translateX(0);\n                    opacity: 1;\n                }\n            }\n\n            @keyframes slideOutRight {\n                from {\n                    transform: translateX(0);\n                    opacity: 1;\n                }\n                to {\n                    transform: translateX(100%);\n                    opacity: 0;\n                }\n            }\n        `;\n        document.head.appendChild(style);\n\n        // æ ¼å¼åŒ–æ–‡ä»¶å¤§å°\n        function formatFileSize(bytes) {\n            if (bytes === 0) return '0 Bytes';\n            const k = 1024;\n            const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n            const i = Math.floor(Math.log(bytes) / Math.log(k));\n            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n        }\n\n        // é¡µé¢åŠ è½½æ—¶æ‰§è¡Œ\n        document.addEventListener('DOMContentLoaded', function() {\n            // æ·»åŠ åˆå§‹åŠ è½½åŠ¨ç”»\n            const cards = document.querySelectorAll('.stat-card, .upload-card');\n            cards.forEach((card, index) => {\n                card.style.opacity = '0';\n                card.style.transform = 'translateY(20px)';\n                setTimeout(() => {\n                    card.style.transition = 'opacity 0.5s ease, transform 0.5s ease';\n                    card.style.opacity = '1';\n                    card.style.transform = 'translateY(0)';\n                }, index * 100);\n            });\n\n            // è®¾ç½®æ–‡ä»¶ä¸Šä¼ \n            setupFileUpload();\n        });\n\n            </script>\n</body>\n</html>","structuredPatch":[{"oldStart":1447,"oldLines":8,"newStart":1447,"newLines":10,"lines":["             contentArea.textContent = content;"," ","             // ç»„è£…æ¨¡æ€çª—å£","+            actions.appendChild(copyBtn);","+            actions.appendChild(closeBtn);","             header.appendChild(title);","-            header.appendChild(closeBtn);","+            header.appendChild(actions);","             modalContent.appendChild(header);","             modalContent.appendChild(contentArea);","             modal.appendChild(modalContent);"]}],"userModified":false,"replaceAll":false}}}
{"ts":"2025-11-05T02:38:08.195Z","event":"PreToolUse","phase":"","message":"PreToolUseäº‹ä»¶æ­£åœ¨æ‰§è¡Œ","description":"å·¥å…·æ‰§è¡Œå‰è§¦å‘ï¼Œå¯åŸºäºå‚æ•°é˜»æ­¢æˆ–è°ƒæ•´è°ƒç”¨ã€‚","doc_url":"https://docs.claude.com/zh-CN/docs/claude-code/hooks#pretooluse","payload":{"session_id":"c7c21516-7e1e-49b2-8ae5-4e1bb98e9692","transcript_path":"C:\\Users\\WTCL\\.claude\\projects\\i--claude-code-proxy\\c7c21516-7e1e-49b2-8ae5-4e1bb98e9692.jsonl","cwd":"i:\\claude-code-proxy","permission_mode":"acceptEdits","hook_event_name":"PreToolUse","tool_name":"Edit","tool_input":{"file_path":"i:\\claude-code-proxy\\analyze\\hooks.html","old_string":"// æ·»åŠ å…³é—­äº‹ä»¶\n            closeBtn.onclick = () => document.body.removeChild(modal);\n            modal.onclick = (e) => {\n                if (e.target === modal) {\n                    document.body.removeChild(modal);\n                }\n            };","new_string":"// æ·»åŠ å…³é—­äº‹ä»¶\n            closeBtn.onclick = () => document.body.removeChild(modal);\n            modal.onclick = (e) => {\n                if (e.target === modal) {\n                    document.body.removeChild(modal);\n                }\n            };\n\n            // æ·»åŠ é”®ç›˜æ”¯æŒ (ESC å…³é—­)\n            const keyHandler = (e) => {\n                if (e.key === 'Escape') {\n                    document.body.removeChild(modal);\n                    document.removeEventListener('keydown', keyHandler);\n                }\n            };\n            document.addEventListener('keydown', keyHandler);\n\n            // æ¨¡æ€çª—å£å…³é—­æ—¶æ¸…ç†äº‹ä»¶ç›‘å¬å™¨\n            const cleanup = () => {\n                document.removeEventListener('keydown', keyHandler);\n                if (document.body.contains(modal)) {\n                    document.body.removeChild(modal);\n                }\n            };\n            closeBtn.onclick = cleanup;\n            modal.onclick = (e) => {\n                if (e.target === modal) {\n                    cleanup();\n                }\n            };"}}}
{"ts":"2025-11-05T02:38:09.917Z","event":"PostToolUse","phase":"","message":"PostToolUseäº‹ä»¶æ­£åœ¨æ‰§è¡Œ","description":"å·¥å…·æˆåŠŸæ‰§è¡Œåè§¦å‘ï¼Œå¸¸ç”¨äºæ ¼å¼åŒ–ã€æ ¡éªŒæˆ–è®°å½•ç»“æœã€‚","doc_url":"https://docs.claude.com/zh-CN/docs/claude-code/hooks#posttooluse","payload":{"session_id":"c7c21516-7e1e-49b2-8ae5-4e1bb98e9692","transcript_path":"C:\\Users\\WTCL\\.claude\\projects\\i--claude-code-proxy\\c7c21516-7e1e-49b2-8ae5-4e1bb98e9692.jsonl","cwd":"i:\\claude-code-proxy","permission_mode":"acceptEdits","hook_event_name":"PostToolUse","tool_name":"Edit","tool_input":{"file_path":"i:\\claude-code-proxy\\analyze\\hooks.html","old_string":"// æ·»åŠ å…³é—­äº‹ä»¶\n            closeBtn.onclick = () => document.body.removeChild(modal);\n            modal.onclick = (e) => {\n                if (e.target === modal) {\n                    document.body.removeChild(modal);\n                }\n            };","new_string":"// æ·»åŠ å…³é—­äº‹ä»¶\n            closeBtn.onclick = () => document.body.removeChild(modal);\n            modal.onclick = (e) => {\n                if (e.target === modal) {\n                    document.body.removeChild(modal);\n                }\n            };\n\n            // æ·»åŠ é”®ç›˜æ”¯æŒ (ESC å…³é—­)\n            const keyHandler = (e) => {\n                if (e.key === 'Escape') {\n                    document.body.removeChild(modal);\n                    document.removeEventListener('keydown', keyHandler);\n                }\n            };\n            document.addEventListener('keydown', keyHandler);\n\n            // æ¨¡æ€çª—å£å…³é—­æ—¶æ¸…ç†äº‹ä»¶ç›‘å¬å™¨\n            const cleanup = () => {\n                document.removeEventListener('keydown', keyHandler);\n                if (document.body.contains(modal)) {\n                    document.body.removeChild(modal);\n                }\n            };\n            closeBtn.onclick = cleanup;\n            modal.onclick = (e) => {\n                if (e.target === modal) {\n                    cleanup();\n                }\n            };"},"tool_response":{"filePath":"i:\\claude-code-proxy\\analyze\\hooks.html","oldString":"// æ·»åŠ å…³é—­äº‹ä»¶\n            closeBtn.onclick = () => document.body.removeChild(modal);\n            modal.onclick = (e) => {\n                if (e.target === modal) {\n                    document.body.removeChild(modal);\n                }\n            };","newString":"// æ·»åŠ å…³é—­äº‹ä»¶\n            closeBtn.onclick = () => document.body.removeChild(modal);\n            modal.onclick = (e) => {\n                if (e.target === modal) {\n                    document.body.removeChild(modal);\n                }\n            };\n\n            // æ·»åŠ é”®ç›˜æ”¯æŒ (ESC å…³é—­)\n            const keyHandler = (e) => {\n                if (e.key === 'Escape') {\n                    document.body.removeChild(modal);\n                    document.removeEventListener('keydown', keyHandler);\n                }\n            };\n            document.addEventListener('keydown', keyHandler);\n\n            // æ¨¡æ€çª—å£å…³é—­æ—¶æ¸…ç†äº‹ä»¶ç›‘å¬å™¨\n            const cleanup = () => {\n                document.removeEventListener('keydown', keyHandler);\n                if (document.body.contains(modal)) {\n                    document.body.removeChild(modal);\n                }\n            };\n            closeBtn.onclick = cleanup;\n            modal.onclick = (e) => {\n                if (e.target === modal) {\n                    cleanup();\n                }\n            };","originalFile":"<!DOCTYPE html>\n<html lang=\"zh-CN\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Hooks æ—¥å¿—åˆ†æ</title>\n    <style>\n        * {\n            margin: 0;\n            padding: 0;\n            box-sizing: border-box;\n        }\n\n        body {\n            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n            min-height: 100vh;\n            padding: 20px;\n        }\n\n        .container {\n            max-width: 1400px;\n            margin: 0 auto;\n        }\n\n        .header {\n            text-align: center;\n            color: white;\n            margin-bottom: 30px;\n        }\n\n        .header h1 {\n            font-size: 2.5rem;\n            margin-bottom: 10px;\n            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);\n        }\n\n        .header p {\n            font-size: 1.1rem;\n            opacity: 0.9;\n        }\n\n        /* æ–‡ä»¶ä¸Šä¼ ç»„ä»¶æ ·å¼ */\n        .upload-section {\n            margin-bottom: 30px;\n        }\n\n        .upload-card {\n            background: white;\n            border-radius: 15px;\n            padding: 25px;\n            box-shadow: 0 10px 30px rgba(0,0,0,0.1);\n            border: 2px dashed #cbd5e0;\n            transition: all 0.3s ease;\n        }\n\n        .upload-card:hover {\n            border-color: #667eea;\n            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.2);\n        }\n\n        .upload-header {\n            font-size: 1.2rem;\n            font-weight: bold;\n            color: #4a5568;\n            margin-bottom: 20px;\n            text-align: center;\n        }\n\n        .upload-area {\n            border: 2px dashed #e2e8f0;\n            border-radius: 10px;\n            padding: 40px 20px;\n            text-align: center;\n            transition: all 0.3s ease;\n            cursor: pointer;\n        }\n\n        .upload-area:hover {\n            border-color: #667eea;\n            background: #f7fafc;\n        }\n\n        .upload-area.dragover {\n            border-color: #667eea;\n            background: #edf2f7;\n            transform: scale(1.02);\n        }\n\n        .upload-icon {\n            font-size: 3rem;\n            margin-bottom: 15px;\n            opacity: 0.7;\n        }\n\n        .upload-text {\n            font-size: 1.1rem;\n            color: #4a5568;\n            margin-bottom: 10px;\n            font-weight: 500;\n        }\n\n        .upload-hint {\n            font-size: 0.9rem;\n            color: #718096;\n            margin-bottom: 20px;\n        }\n\n        .upload-btn {\n            background: #667eea;\n            color: white;\n            border: none;\n            padding: 12px 24px;\n            border-radius: 8px;\n            font-size: 1rem;\n            font-weight: 500;\n            cursor: pointer;\n            transition: all 0.3s ease;\n        }\n\n        .upload-btn:hover {\n            background: #5a67d8;\n            transform: translateY(-2px);\n            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);\n        }\n\n        .file-info {\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            background: #f7fafc;\n            padding: 15px 20px;\n            border-radius: 8px;\n            margin-top: 15px;\n        }\n\n        .file-name {\n            font-weight: 500;\n            color: #4a5568;\n            flex: 1;\n            overflow: hidden;\n            text-overflow: ellipsis;\n            white-space: nowrap;\n        }\n\n        .clear-btn {\n            background: #fc8181;\n            color: white;\n            border: none;\n            width: 30px;\n            height: 30px;\n            border-radius: 50%;\n            cursor: pointer;\n            font-size: 1rem;\n            transition: all 0.3s ease;\n        }\n\n        .clear-btn:hover {\n            background: #f56565;\n            transform: scale(1.1);\n        }\n\n        /* æ¶ˆæ¯æç¤ºæ ·å¼ */\n        .upload-message {\n            margin-top: 15px;\n            padding: 12px 16px;\n            border-radius: 8px;\n            font-size: 0.9rem;\n            animation: slideIn 0.3s ease;\n        }\n\n        .upload-success {\n            background: #d4edda;\n            color: #155724;\n            border: 1px solid #c3e6cb;\n        }\n\n        .upload-error {\n            background: #f8d7da;\n            color: #721c24;\n            border: 1px solid #f5c6cb;\n        }\n\n        @keyframes slideIn {\n            from {\n                opacity: 0;\n                transform: translateY(-10px);\n            }\n            to {\n                opacity: 1;\n                transform: translateY(0);\n            }\n        }\n\n        #file-input {\n            display: none;\n        }\n\n        .stats-grid {\n            display: grid;\n            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\n            gap: 20px;\n            margin-bottom: 30px;\n        }\n\n        .stat-card {\n            background: white;\n            border-radius: 15px;\n            padding: 25px;\n            box-shadow: 0 10px 30px rgba(0,0,0,0.2);\n            text-align: center;\n            transition: transform 0.3s ease, box-shadow 0.3s ease;\n        }\n\n        .stat-card:hover {\n            transform: translateY(-5px);\n            box-shadow: 0 15px 40px rgba(0,0,0,0.3);\n        }\n\n        .stat-number {\n            font-size: 3rem;\n            font-weight: bold;\n            margin-bottom: 10px;\n        }\n\n        .stat-label {\n            font-size: 1.1rem;\n            color: #666;\n            margin-bottom: 5px;\n        }\n\n        .stat-description {\n            font-size: 0.9rem;\n            color: #999;\n        }\n\n        .filter-section {\n            background: white;\n            border-radius: 15px;\n            padding: 20px;\n            box-shadow: 0 10px 30px rgba(0,0,0,0.2);\n            margin-bottom: 30px;\n        }\n\n        .filter-controls {\n            display: flex;\n            gap: 15px;\n            flex-wrap: wrap;\n            align-items: center;\n        }\n\n        .filter-group {\n            display: flex;\n            align-items: center;\n            gap: 10px;\n        }\n\n        .filter-label {\n            font-weight: bold;\n            color: #333;\n        }\n\n        .filter-select, .search-input {\n            padding: 8px 12px;\n            border: 2px solid #ddd;\n            border-radius: 5px;\n            font-size: 0.9rem;\n            transition: border-color 0.3s ease;\n        }\n\n        .filter-select:focus, .search-input:focus {\n            outline: none;\n            border-color: #667eea;\n        }\n\n        .search-input {\n            min-width: 200px;\n        }\n\n        .hooks-container {\n            display: grid;\n            gap: 30px;\n        }\n\n        .hook-item {\n            background: white;\n            border-radius: 15px;\n            padding: 25px;\n            box-shadow: 0 10px 30px rgba(0,0,0,0.2);\n        }\n\n        .hook-header {\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            margin-bottom: 20px;\n            padding-bottom: 15px;\n            border-bottom: 2px solid #667eea;\n        }\n\n        .hook-event {\n            font-size: 1.5rem;\n            font-weight: bold;\n            color: #667eea;\n        }\n\n        .hook-meta {\n            display: flex;\n            gap: 20px;\n            align-items: center;\n        }\n\n        .hook-timestamp {\n            font-size: 0.9rem;\n            color: #666;\n            background: #f0f4ff;\n            padding: 5px 12px;\n            border-radius: 20px;\n        }\n\n        .hook-message {\n            background: #f8f9fa;\n            border-left: 4px solid #667eea;\n            padding: 15px;\n            margin-bottom: 15px;\n            border-radius: 5px;\n        }\n\n        .hook-description {\n            color: #666;\n            font-style: italic;\n            margin-bottom: 15px;\n        }\n\n        .hook-details {\n            display: flex;\n            flex-direction: column;\n            gap: 20px;\n        }\n\n        .part-card {\n            background: #f8f9fa;\n            border-radius: 10px;\n            overflow: hidden;\n        }\n\n        .part-header {\n            background: #667eea;\n            color: white;\n            padding: 12px 15px;\n            font-weight: bold;\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            cursor: pointer;\n            transition: background 0.3s ease;\n        }\n\n        .part-header:hover {\n            background: #5a67d8;\n        }\n\n        .part-content {\n            padding: 15px;\n            font-family: 'Courier New', monospace;\n            font-size: 0.9rem;\n            background: #1a1a1a;\n            color: #ffffff;\n            overflow-y: auto;\n            white-space: pre-wrap;\n            line-height: 1.6;\n            min-height: 100px;\n            border-radius: 8px;\n            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.3);\n        }\n\n        .part-content.hidden {\n            display: none;\n        }\n\n        .toggle-icon {\n            transition: transform 0.3s ease;\n        }\n\n        .toggle-icon.rotated {\n            transform: rotate(180deg);\n        }\n\n        /* è‡ªå®šä¹‰æ»šåŠ¨æ¡æ ·å¼ */\n        .part-content::-webkit-scrollbar {\n            width: 8px;\n        }\n\n        .part-content::-webkit-scrollbar-track {\n            background: #2a2a2a;\n            border-radius: 4px;\n        }\n\n        .part-content::-webkit-scrollbar-thumb {\n            background: #4a4a4a;\n            border-radius: 4px;\n        }\n\n        .part-content::-webkit-scrollbar-thumb:hover {\n            background: #5a5a5a;\n        }\n\n        .event-badge {\n            display: inline-block;\n            padding: 4px 12px;\n            border-radius: 20px;\n            font-size: 0.8rem;\n            font-weight: bold;\n            margin-right: 10px;\n        }\n\n        .event-userprompt { background: #FF6B6B; color: white; }\n        .event-pretool { background: #4ECDC4; color: white; }\n        .event-posttool { background: #45B7D1; color: white; }\n        .event-notification { background: #9C27B0; color: white; }\n        .event-stop { background: #F44336; color: white; }\n        .event-subagent-stop { background: #FF9800; color: white; }\n        .event-pre-compact { background: #FFC107; color: white; }\n        .event-session-start { background: #4CAF50; color: white; }\n        .event-session-end { background: #607D8B; color: white; }\n        .event-default { background: #78909C; color: white; }\n\n        .no-data {\n            text-align: center;\n            padding: 60px 20px;\n            color: white;\n            font-size: 1.2rem;\n        }\n\n        .error-message {\n            background: #fff5f5;\n            border: 2px solid #fc8181;\n            color: #c53030;\n            padding: 20px;\n            border-radius: 10px;\n            text-align: center;\n            font-size: 1.1rem;\n            margin: 20px 0;\n        }\n\n        .json-key { color: #9C27B0; }\n        .json-string { color: #4CAF50; }\n        .json-number { color: #FF9800; }\n        .json-boolean { color: #F44336; }\n        .json-null { color: #9E9E9E; }\n        .json-url { color: #2196F3; text-decoration: underline; cursor: pointer; }\n\n        .transcript-path {\n            background: #fff3cd;\n            border: 1px solid #ffeaa7;\n            border-radius: 5px;\n            padding: 8px 12px;\n            margin-top: 10px;\n            font-size: 0.9rem;\n        }\n\n        .transcript-path-label {\n            font-weight: bold;\n            color: #856404;\n            margin-bottom: 5px;\n        }\n\n        .transcript-path-value {\n            color: #856404;\n            word-break: break-all;\n            font-family: monospace;\n            background: #f8f9fa;\n            padding: 4px 8px;\n            border-radius: 3px;\n        }\n\n        .has-transcript-badge {\n            background: #ffc107;\n            color: #212529;\n            padding: 2px 8px;\n            border-radius: 12px;\n            font-size: 0.7rem;\n            font-weight: bold;\n            margin-left: 10px;\n        }\n\n        .transcript-actions {\n            display: flex;\n            gap: 8px;\n            margin-top: 8px;\n        }\n\n        .transcript-btn {\n            background: #667eea;\n            color: white;\n            border: none;\n            padding: 6px 12px;\n            border-radius: 4px;\n            font-size: 0.8rem;\n            cursor: pointer;\n            transition: all 0.3s ease;\n            display: flex;\n            align-items: center;\n            gap: 4px;\n        }\n\n        .transcript-btn:hover {\n            background: #5a67d8;\n            transform: translateY(-1px);\n        }\n\n        .transcript-btn.copy {\n            background: #28a745;\n        }\n\n        .transcript-btn.copy:hover {\n            background: #218838;\n        }\n\n        .transcript-btn.open {\n            background: #007bff;\n        }\n\n        .transcript-btn.open:hover {\n            background: #0056b3;\n        }\n\n        .transcript-btn:disabled {\n            background: #6c757d;\n            cursor: not-allowed;\n            transform: none;\n        }\n\n        @media (max-width: 768px) {\n            .header h1 {\n                font-size: 2rem;\n            }\n\n            .stats-grid {\n                grid-template-columns: repeat(2, 1fr);\n            }\n\n            .filter-controls {\n                flex-direction: column;\n                align-items: stretch;\n            }\n\n            .search-input {\n                min-width: auto;\n            }\n        }\n    </style>\n</head>\n<body>\n    <div class=\"container\">\n        <div class=\"header\">\n            <h1>Hooks æ—¥å¿—åˆ†æ</h1>\n            <p>ä¸Šä¼ å¹¶åˆ†æ Claude Hooks äº‹ä»¶æ—¥å¿—</p>\n        </div>\n\n        <!-- æ–‡ä»¶ä¸Šä¼ ç»„ä»¶ -->\n        <div class=\"upload-section\">\n            <div class=\"upload-card\">\n                <div class=\"upload-header\">\n                    <span>ğŸ“ é€‰æ‹© Hooks æ—¥å¿—æ–‡ä»¶</span>\n                </div>\n                <div class=\"upload-area\" id=\"upload-area\">\n                    <div class=\"upload-content\">\n                        <div class=\"upload-icon\">ğŸ“„</div>\n                        <p class=\"upload-text\">ç‚¹å‡»é€‰æ‹©æ–‡ä»¶æˆ–æ‹–æ‹½æ–‡ä»¶åˆ°æ­¤å¤„</p>\n                        <p class=\"upload-hint\">æ”¯æŒ .log .txt æ ¼å¼çš„æ—¥å¿—æ–‡ä»¶ï¼Œæ¯è¡Œä¸€ä¸ª JSON å¯¹è±¡ï¼Œæœ€å¤§50MB</p>\n                        <input type=\"file\" id=\"file-input\" accept=\".log,.txt\" style=\"display: none;\">\n                        <button class=\"upload-btn\" onclick=\"document.getElementById('file-input').click()\">é€‰æ‹©æ–‡ä»¶</button>\n                    </div>\n                </div>\n                <div class=\"file-info\" id=\"file-info\" style=\"display: none;\">\n                    <span class=\"file-name\" id=\"file-name\"></span>\n                    <button class=\"clear-btn\" onclick=\"clearFile()\">âœ•</button>\n                </div>\n            </div>\n        </div>\n\n        <div id=\"stats-section\" style=\"display: none;\">\n            <div class=\"stats-grid\">\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"total-hooks\">0</div>\n                    <div class=\"stat-label\">æ€»äº‹ä»¶æ•°</div>\n                    <div class=\"stat-description\">æ‰€æœ‰ Hooks äº‹ä»¶</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"user-prompts\">0</div>\n                    <div class=\"stat-label\">ç”¨æˆ·æç¤ºäº‹ä»¶</div>\n                    <div class=\"stat-description\">UserPromptSubmit</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"pre-tools\">0</div>\n                    <div class=\"stat-label\">å·¥å…·æ‰§è¡Œå‰äº‹ä»¶</div>\n                    <div class=\"stat-description\">PreToolUse</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"post-tools\">0</div>\n                    <div class=\"stat-label\">å·¥å…·æ‰§è¡Œåäº‹ä»¶</div>\n                    <div class=\"stat-description\">PostToolUse</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"notifications\">0</div>\n                    <div class=\"stat-label\">é€šçŸ¥äº‹ä»¶</div>\n                    <div class=\"stat-description\">Notification</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"stops\">0</div>\n                    <div class=\"stat-label\">åœæ­¢äº‹ä»¶</div>\n                    <div class=\"stat-description\">Stop</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"subagent-stops\">0</div>\n                    <div class=\"stat-label\">å­ä»£ç†åœæ­¢äº‹ä»¶</div>\n                    <div class=\"stat-description\">SubagentStop</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"pre-compacts\">0</div>\n                    <div class=\"stat-label\">å‹ç¼©å‰äº‹ä»¶</div>\n                    <div class=\"stat-description\">PreCompact</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"session-starts\">0</div>\n                    <div class=\"stat-label\">ä¼šè¯å¼€å§‹äº‹ä»¶</div>\n                    <div class=\"stat-description\">SessionStart</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"session-ends\">0</div>\n                    <div class=\"stat-label\">ä¼šè¯ç»“æŸäº‹ä»¶</div>\n                    <div class=\"stat-description\">SessionEnd</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"transcript-count\">0</div>\n                    <div class=\"stat-label\">åŒ…å«è½¬å½•è·¯å¾„äº‹ä»¶</div>\n                    <div class=\"stat-description\">åŒ…å« transcript_path</div>\n                </div>\n            </div>\n\n            <div class=\"filter-section\">\n                <div class=\"filter-controls\">\n                    <div class=\"filter-group\">\n                        <label class=\"filter-label\">äº‹ä»¶ç±»å‹ï¼š</label>\n                        <select class=\"filter-select\" id=\"event-filter\">\n                            <option value=\"\">å…¨éƒ¨</option>\n                            <option value=\"UserPromptSubmit\">UserPromptSubmit</option>\n                            <option value=\"PreToolUse\">PreToolUse</option>\n                            <option value=\"PostToolUse\">PostToolUse</option>\n                            <option value=\"Notification\">Notification</option>\n                            <option value=\"Stop\">Stop</option>\n                            <option value=\"SubagentStop\">SubagentStop</option>\n                            <option value=\"PreCompact\">PreCompact</option>\n                            <option value=\"SessionStart\">SessionStart</option>\n                            <option value=\"SessionEnd\">SessionEnd</option>\n                        </select>\n                    </div>\n                    <div class=\"filter-group\">\n                        <label class=\"filter-label\">æœç´¢ï¼š</label>\n                        <input type=\"text\" class=\"search-input\" id=\"search-input\" placeholder=\"æœç´¢äº‹ä»¶å†…å®¹...\">\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <div id=\"hooks-container\" class=\"hooks-container\"></div>\n\n        <div id=\"no-data\" class=\"no-data\">\n            è¯·ä¸Šä¼  hooks.log æ–‡ä»¶å¼€å§‹åˆ†æ\n        </div>\n\n        <div id=\"error-message\" class=\"error-message\" style=\"display: none;\"></div>\n    </div>\n\n    <script>\n        let hooksData = [];\n        let filteredData = [];\n\n        // æ–‡ä»¶ä¸Šä¼ ç›¸å…³å‡½æ•°\n        function setupFileUpload() {\n            const uploadArea = document.getElementById('upload-area');\n            const fileInput = document.getElementById('file-input');\n\n            // ç‚¹å‡»ä¸Šä¼ åŒºåŸŸè§¦å‘æ–‡ä»¶é€‰æ‹©ï¼ˆä½†ä¸åŒ…æ‹¬æŒ‰é’®ï¼‰\n            uploadArea.addEventListener('click', function(event) {\n                // å¦‚æœç‚¹å‡»çš„æ˜¯æŒ‰é’®ï¼Œä¸å¤„ç†\n                if (event.target.tagName === 'BUTTON' || event.target.closest('button')) {\n                    return;\n                }\n                fileInput.click();\n            });\n\n            // æ–‡ä»¶é€‰æ‹©äº‹ä»¶\n            fileInput.addEventListener('change', handleFileSelect);\n\n            // æ‹–æ‹½äº‹ä»¶\n            uploadArea.addEventListener('dragover', handleDragOver);\n            uploadArea.addEventListener('dragleave', handleDragLeave);\n            uploadArea.addEventListener('drop', handleDrop);\n        }\n\n\n        function handleDragOver(e) {\n            e.preventDefault();\n            e.currentTarget.classList.add('dragover');\n        }\n\n        function handleDragLeave(e) {\n            e.preventDefault();\n            e.currentTarget.classList.remove('dragover');\n        }\n\n        function handleDrop(e) {\n            e.preventDefault();\n            e.currentTarget.classList.remove('dragover');\n            handleFiles(e.dataTransfer.files);\n        }\n\n        function handleFileSelect(event) {\n            const files = event.target.files;\n            handleFiles(files);\n        }\n\n        function handleFiles(files) {\n            if (files.length === 0) return;\n\n            const file = files[0];\n\n            // æ£€æŸ¥æ–‡ä»¶ç±»å‹\n            const validTypes = ['.log', '.txt'];\n            const fileExtension = file.name.substring(file.name.lastIndexOf('.')).toLowerCase();\n\n            if (!validTypes.includes(fileExtension)) {\n                showErrorMessage('è¯·é€‰æ‹© .log æˆ– .txt æ ¼å¼çš„æ—¥å¿—æ–‡ä»¶');\n                return;\n            }\n\n            // æ£€æŸ¥æ–‡ä»¶å¤§å° (é™åˆ¶ä¸º50MB)\n            if (file.size > 50 * 1024 * 1024) {\n                showErrorMessage('æ–‡ä»¶å¤§å°ä¸èƒ½è¶…è¿‡50MB');\n                return;\n            }\n\n            // æ˜¾ç¤ºæ–‡ä»¶ä¿¡æ¯\n            showFileInfo(file);\n\n            // è¯»å–æ–‡ä»¶å†…å®¹\n            const reader = new FileReader();\n            reader.onload = function(e) {\n                try {\n                    const content = e.target.result;\n                    console.log('æ–‡ä»¶è¯»å–æˆåŠŸï¼Œå†…å®¹é•¿åº¦:', content.length);\n                    console.log('æ–‡ä»¶å†…å®¹å‰100å­—ç¬¦:', content.substring(0, 100));\n\n                    if (!content || content.trim().length === 0) {\n                        showErrorMessage('æ–‡ä»¶å†…å®¹ä¸ºç©º');\n                        return;\n                    }\n\n                    parseHooksData(content);\n                    showSuccessMessage(`æˆåŠŸåŠ è½½æ–‡ä»¶: ${file.name}`);\n                } catch (error) {\n                    console.error('æ–‡ä»¶è§£æå¼‚å¸¸:', error);\n                    showErrorMessage('æ–‡ä»¶è§£æå¤±è´¥ï¼š' + error.message);\n                }\n            };\n            reader.onerror = function(error) {\n                console.error('æ–‡ä»¶è¯»å–å¤±è´¥:', error);\n                showErrorMessage('æ–‡ä»¶è¯»å–å¤±è´¥');\n            };\n            reader.readAsText(file);\n        }\n\n        function showFileInfo(file) {\n            const fileInfo = document.getElementById('file-info');\n            const fileName = document.getElementById('file-name');\n            const uploadArea = document.getElementById('upload-area');\n\n            fileName.textContent = file.name;\n            fileInfo.style.display = 'flex';\n            uploadArea.style.display = 'none';\n        }\n\n        function clearFile() {\n            const fileInfo = document.getElementById('file-info');\n            const uploadArea = document.getElementById('upload-area');\n            const fileInput = document.getElementById('file-input');\n\n            fileInfo.style.display = 'none';\n            uploadArea.style.display = 'block';\n\n            // æ¸…ç©ºæ–‡ä»¶è¾“å…¥æ¡†çš„å€¼\n            fileInput.value = '';\n\n            // æ¸…ç©ºæ•°æ®\n            hooksData = [];\n            filteredData = [];\n\n            // æ¸…ç©ºæ˜¾ç¤ºåŒºåŸŸ\n            document.getElementById('hooks-container').innerHTML = '';\n            document.getElementById('no-data').style.display = 'block';\n            document.getElementById('stats-section').style.display = 'none';\n\n            // æ˜¾ç¤ºæç¤º\n            showSuccessMessage('å·²æ¸…ç©ºæ–‡ä»¶ï¼Œè¯·é‡æ–°é€‰æ‹©æ—¥å¿—æ–‡ä»¶');\n        }\n\n        function showSuccessMessage(message) {\n            showMessage(message, 'success');\n        }\n\n        function showErrorMessage(message) {\n            showMessage(message, 'error');\n        }\n\n        function showMessage(message, type) {\n            // ç§»é™¤ä¹‹å‰çš„æ¶ˆæ¯\n            const existingMessages = document.querySelectorAll('.upload-message');\n            existingMessages.forEach(msg => msg.remove());\n\n            const messageClass = type === 'success' ? 'upload-success' : 'upload-error';\n            const messageDiv = document.createElement('div');\n            messageDiv.className = `upload-message ${messageClass}`;\n            messageDiv.textContent = message;\n\n            document.querySelector('.upload-card').appendChild(messageDiv);\n\n            // 3ç§’åè‡ªåŠ¨æ¶ˆå¤±\n            setTimeout(() => {\n                messageDiv.style.opacity = '0';\n                setTimeout(() => {\n                    if (messageDiv.parentNode) {\n                        messageDiv.parentNode.removeChild(messageDiv);\n                    }\n                }, 300);\n            }, 3000);\n        }\n\n        // è§£æ hooks æ•°æ®\n        function parseHooksData(content) {\n            console.log('å¼€å§‹è§£æ hooks æ•°æ®ï¼Œå†…å®¹é•¿åº¦:', content.length);\n\n            hooksData = [];\n            const lines = content.split('\\n').filter(line => line.trim());\n            console.log('åˆ†å‰²åçš„è¡Œæ•°:', lines.length);\n\n            for (let i = 0; i < lines.length; i++) {\n                const line = lines[i];\n                try {\n                    const hookData = JSON.parse(line);\n                    hooksData.push(hookData);\n                    console.log(`æˆåŠŸè§£æç¬¬ ${i + 1} è¡Œï¼Œäº‹ä»¶ç±»å‹:`, hookData.event);\n                } catch (error) {\n                    console.error(`è§£æç¬¬ ${i + 1} è¡Œå¤±è´¥:`, error.message);\n                    console.error('é—®é¢˜è¡Œçš„å†…å®¹:', line.substring(0, 100) + (line.length > 100 ? '...' : ''));\n                }\n            }\n\n            console.log('è§£æå®Œæˆï¼Œæ€»å…±è§£æåˆ°', hooksData.length, 'ä¸ªæœ‰æ•ˆäº‹ä»¶');\n\n            if (hooksData.length === 0) {\n                showErrorMessage('æœªæ‰¾åˆ°æœ‰æ•ˆçš„ hooks æ•°æ®ã€‚è¯·ç¡®ä¿æ–‡ä»¶æ ¼å¼æ­£ç¡®ï¼Œæ¯è¡Œåº”è¯¥æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„JSONå¯¹è±¡ã€‚');\n                console.error('è§£æå¤±è´¥ï¼Œæ²¡æœ‰æ‰¾åˆ°æœ‰æ•ˆçš„hooksæ•°æ®');\n                return;\n            }\n\n            filteredData = [...hooksData];\n            console.log('å‡†å¤‡æ˜¾ç¤ºæ•°æ®ï¼Œè¿‡æ»¤åçš„äº‹ä»¶æ•°é‡:', filteredData.length);\n            displayData();\n        }\n\n        // æ˜¾ç¤ºæ•°æ®\n        function displayData() {\n            document.getElementById('no-data').style.display = 'none';\n            document.getElementById('error-message').style.display = 'none';\n            document.getElementById('stats-section').style.display = 'block';\n\n            updateStatistics();\n            renderHooks();\n        }\n\n        // æ›´æ–°ç»Ÿè®¡ä¿¡æ¯\n        function updateStatistics() {\n            const stats = {\n                total: filteredData.length,\n                userPrompts: filteredData.filter(h => h.event === 'UserPromptSubmit').length,\n                preTools: filteredData.filter(h => h.event === 'PreToolUse').length,\n                postTools: filteredData.filter(h => h.event === 'PostToolUse').length,\n                notifications: filteredData.filter(h => h.event === 'Notification').length,\n                stops: filteredData.filter(h => h.event === 'Stop').length,\n                subagentStops: filteredData.filter(h => h.event === 'SubagentStop').length,\n                preCompacts: filteredData.filter(h => h.event === 'PreCompact').length,\n                sessionStarts: filteredData.filter(h => h.event === 'SessionStart').length,\n                sessionEnds: filteredData.filter(h => h.event === 'SessionEnd').length,\n                transcriptCount: filteredData.filter(h => hasTranscriptPath(h)).length\n            };\n\n            document.getElementById('total-hooks').textContent = stats.total;\n            document.getElementById('user-prompts').textContent = stats.userPrompts;\n            document.getElementById('pre-tools').textContent = stats.preTools;\n            document.getElementById('post-tools').textContent = stats.postTools;\n            document.getElementById('notifications').textContent = stats.notifications;\n            document.getElementById('stops').textContent = stats.stops;\n            document.getElementById('subagent-stops').textContent = stats.subagentStops;\n            document.getElementById('pre-compacts').textContent = stats.preCompacts;\n            document.getElementById('session-starts').textContent = stats.sessionStarts;\n            document.getElementById('session-ends').textContent = stats.sessionEnds;\n            document.getElementById('transcript-count').textContent = stats.transcriptCount;\n        }\n\n        // æ¸²æŸ“ hooks\n        function renderHooks() {\n            const container = document.getElementById('hooks-container');\n            container.innerHTML = '';\n\n            filteredData.forEach((hook, index) => {\n                const hookElement = createHookElement(hook, index);\n                container.appendChild(hookElement);\n            });\n\n            // æ·»åŠ åŠ¨ç”»\n            const elements = container.querySelectorAll('.hook-item');\n            elements.forEach((el, i) => {\n                el.style.opacity = '0';\n                el.style.transform = 'translateY(20px)';\n                setTimeout(() => {\n                    el.style.transition = 'opacity 0.3s ease, transform 0.3s ease';\n                    el.style.opacity = '1';\n                    el.style.transform = 'translateY(0)';\n                }, i * 50);\n            });\n        }\n\n        // æ£€æŸ¥æ˜¯å¦åŒ…å« transcript_path å­—æ®µ\n        function hasTranscriptPath(hook) {\n            if (!hook.payload) return false;\n\n            // æ£€æŸ¥ payload ä¸­æ˜¯å¦ç›´æ¥åŒ…å« transcript_path\n            if (hook.payload.transcript_path) return true;\n\n            // æ·±åº¦æœç´¢ payload å¯¹è±¡ä¸­çš„ transcript_path å­—æ®µ\n            return searchInObject(hook.payload, 'transcript_path');\n        }\n\n        // åœ¨å¯¹è±¡ä¸­é€’å½’æœç´¢æŒ‡å®šå­—æ®µ\n        function searchInObject(obj, fieldName) {\n            if (!obj || typeof obj !== 'object') return false;\n\n            for (const key in obj) {\n                if (key === fieldName) return true;\n\n                if (typeof obj[key] === 'object' && obj[key] !== null) {\n                    if (searchInObject(obj[key], fieldName)) return true;\n                }\n            }\n\n            return false;\n        }\n\n        // è·å– transcript_path çš„å€¼\n        function getTranscriptPath(hook) {\n            if (!hook.payload) return null;\n\n            // æ£€æŸ¥ payload ä¸­æ˜¯å¦ç›´æ¥åŒ…å« transcript_path\n            if (hook.payload.transcript_path) return hook.payload.transcript_path;\n\n            // æ·±åº¦æœç´¢å¹¶è¿”å› transcript_path çš„å€¼\n            return findValueInObject(hook.payload, 'transcript_path');\n        }\n\n        // åœ¨å¯¹è±¡ä¸­é€’å½’æŸ¥æ‰¾æŒ‡å®šå­—æ®µçš„å€¼\n        function findValueInObject(obj, fieldName) {\n            if (!obj || typeof obj !== 'object') return null;\n\n            for (const key in obj) {\n                if (key === fieldName) return obj[key];\n\n                if (typeof obj[key] === 'object' && obj[key] !== null) {\n                    const found = findValueInObject(obj[key], fieldName);\n                    if (found !== null) return found;\n                }\n            }\n\n            return null;\n        }\n\n        // åˆ›å»º hook å…ƒç´ \n        function createHookElement(hook, index) {\n            const div = document.createElement('div');\n            div.className = 'hook-item';\n\n            const eventClass = getEventClass(hook.event);\n            const formattedTime = formatTimestamp(hook.ts);\n            const eventDescription = getEventDescription(hook.event, hook.phase);\n            const hasTranscript = hasTranscriptPath(hook);\n            const transcriptPath = getTranscriptPath(hook);\n\n            div.innerHTML = `\n                <div class=\"hook-header\">\n                    <div class=\"hook-event\">\n                        <span class=\"event-badge ${eventClass}\">${hook.event}</span>\n                        ${hasTranscript ? '<span class=\"has-transcript-badge\">åŒ…å«è½¬å½•è·¯å¾„</span>' : ''}\n                    </div>\n                    <div class=\"hook-meta\">\n                        <div class=\"hook-timestamp\">${formattedTime}</div>\n                    </div>\n                </div>\n                <div class=\"hook-message\">${hook.message}</div>\n                <div class=\"hook-description\">${hook.description || eventDescription}</div>\n                ${hasTranscript && transcriptPath ? `\n                <div class=\"transcript-path\">\n                    <div class=\"transcript-path-label\">ğŸ“„ è½¬å½•è·¯å¾„ (transcript_path):</div>\n                    <div class=\"transcript-path-value\">${escapeHtml(transcriptPath)}</div>\n                    <div class=\"transcript-actions\">\n                        <button class=\"transcript-btn copy\" onclick=\"copyTranscriptPath('${escapeHtml(transcriptPath)}')\" title=\"å¤åˆ¶è·¯å¾„\">\n                            ğŸ“‹ å¤åˆ¶\n                        </button>\n                        ${isUrl(transcriptPath) ?\n                            `<button class=\"transcript-btn open\" onclick=\"openTranscriptUrl('${escapeHtml(transcriptPath)}')\" title=\"åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€\">\n                                ğŸ”— æ‰“å¼€é“¾æ¥\n                            </button>` :\n                            `<button class=\"transcript-btn open\" onclick=\"tryOpenTranscriptFile('${escapeHtml(transcriptPath)}')\" title=\"å°è¯•æ‰“å¼€æ–‡ä»¶\">\n                                ğŸ“‚ å°è¯•æ‰“å¼€\n                            </button>`\n                        }\n                    </div>\n                </div>\n                ` : ''}\n                <div class=\"hook-details\">\n                    <div class=\"part-card\">\n                        <div class=\"part-header\" onclick=\"toggleDetail('payload-${index}')\">\n                            <span>Payload</span>\n                            <span class=\"toggle-icon\" id=\"icon-payload-${index}\">â–¼</span>\n                        </div>\n                        <div class=\"part-content hidden\" id=\"payload-${index}\">\n                            ${formatJson(hook.payload)}\n                        </div>\n                    </div>\n                </div>\n            `;\n\n            return div;\n        }\n\n        // è·å–äº‹ä»¶æè¿°\n        function getEventDescription(event, phase) {\n            switch (event) {\n                case 'PreToolUse':\n                    return 'å·¥å…·æ‰§è¡Œå‰è§¦å‘ï¼Œå¯åŸºäºå‚æ•°é˜»æ­¢æˆ–è°ƒæ•´è°ƒç”¨ã€‚';\n                case 'PostToolUse':\n                    return 'å·¥å…·æˆåŠŸæ‰§è¡Œåè§¦å‘ï¼Œå¸¸ç”¨äºæ ¼å¼åŒ–ã€æ ¡éªŒæˆ–è®°å½•ç»“æœã€‚';\n                case 'UserPromptSubmit':\n                    return 'ç”¨æˆ·æäº¤æç¤ºå‰è§¦å‘ï¼Œå¯è¿›è¡Œæç¤ºæ ¡éªŒæˆ–å¢å¼ºã€‚';\n                case 'Notification':\n                    return 'å½“ç³»ç»Ÿå‘é€é€šçŸ¥ï¼ˆéœ€æˆæƒæˆ–ç­‰å¾…è¾“å…¥ï¼‰æ—¶è§¦å‘ã€‚';\n                case 'Stop':\n                    return 'ä¸»ä»£ç†å®Œæˆå“åº”æ—¶è§¦å‘ï¼ˆç”¨æˆ·ä¸­æ–­ä¸è§¦å‘ï¼‰ã€‚';\n                case 'SubagentStop':\n                    return 'å­ä»£ç†ä»»åŠ¡å®Œæˆæ—¶è§¦å‘ï¼Œç”¨äºè®°å½•å­ä»»åŠ¡ç»“æŸã€‚';\n                case 'PreCompact':\n                    return phase === 'manual'\n                        ? 'æ‰‹åŠ¨å‹ç¼©å‰è§¦å‘ï¼Œç”¨äºè®°å½•æˆ–å‡†å¤‡å‹ç¼©ã€‚'\n                        : 'è‡ªåŠ¨å‹ç¼©å‰è§¦å‘ï¼ˆä¸Šä¸‹æ–‡æ¥è¿‘ä¸Šé™ï¼‰ï¼Œç”¨äºè®°å½•æˆ–å‡†å¤‡å‹ç¼©ã€‚';\n                case 'SessionStart':\n                    switch (phase) {\n                        case 'startup':\n                            return 'æ–°ä¼šè¯å¯åŠ¨æ—¶è§¦å‘ï¼Œç”¨äºåŠ è½½ä¸Šä¸‹æ–‡æˆ–è®¾ç½®ç¯å¢ƒã€‚';\n                        case 'resume':\n                            return 'æ¢å¤ä¼šè¯æ—¶è§¦å‘ï¼Œç”¨äºç»§ç»­å…ˆå‰ä¸Šä¸‹æ–‡ã€‚';\n                        case 'clear':\n                            return 'æ¸…ç©ºä¼šè¯åè§¦å‘ï¼Œç”¨äºé‡ç½®ç¯å¢ƒä¸ä¸Šä¸‹æ–‡ã€‚';\n                        case 'compact':\n                            return 'å› å‹ç¼©æ“ä½œè§¦å‘çš„ä¼šè¯å¯åŠ¨ï¼Œç”¨äºç»´æŒä¸Šä¸‹æ–‡ã€‚';\n                        default:\n                            return 'ä¼šè¯å¯åŠ¨ç›¸å…³äº‹ä»¶ï¼Œåˆå§‹åŒ–æˆ–æ¢å¤ä¸Šä¸‹æ–‡ã€‚';\n                    }\n                case 'SessionEnd':\n                    return 'ä¼šè¯ç»“æŸæ—¶è§¦å‘ï¼Œå¸¸ç”¨äºæ”¶å°¾ä¸æ¸…ç†ã€‚';\n                default:\n                    return 'æœªçŸ¥äº‹ä»¶ã€‚';\n            }\n        }\n\n        // è·å–äº‹ä»¶æ ·å¼ç±»\n        function getEventClass(event) {\n            switch (event) {\n                case 'UserPromptSubmit': return 'event-userprompt';\n                case 'PreToolUse': return 'event-pretool';\n                case 'PostToolUse': return 'event-posttool';\n                case 'Notification': return 'event-notification';\n                case 'Stop': return 'event-stop';\n                case 'SubagentStop': return 'event-subagent-stop';\n                case 'PreCompact': return 'event-pre-compact';\n                case 'SessionStart': return 'event-session-start';\n                case 'SessionEnd': return 'event-session-end';\n                default: return 'event-default';\n            }\n        }\n\n        // æ ¼å¼åŒ–æ—¶é—´æˆ³\n        function formatTimestamp(ts) {\n            const date = new Date(ts);\n            return date.toLocaleString('zh-CN');\n        }\n\n        // æ ¼å¼åŒ– JSON\n        function formatJson(obj, indent = 0) {\n            if (!obj) return '';\n\n            try {\n                const spaces = '  '.repeat(indent);\n                let result = '';\n\n                if (Array.isArray(obj)) {\n                    result += '[\\n';\n                    obj.forEach((item, index) => {\n                        result += spaces + '  ';\n                        if (typeof item === 'object' && item !== null) {\n                            result += formatJson(item, indent + 1);\n                        } else {\n                            result += formatJsonValue(item);\n                        }\n                        if (index < obj.length - 1) result += ',';\n                        result += '\\n';\n                    });\n                    result += spaces + ']';\n                } else if (typeof obj === 'object' && obj !== null) {\n                    result += '{\\n';\n                    const keys = Object.keys(obj);\n                    keys.forEach((key, index) => {\n                        result += spaces + '  ';\n                        result += `<span class=\"json-key\">\"${escapeHtml(key)}\"</span>: `;\n\n                        if (typeof obj[key] === 'object' && obj[key] !== null) {\n                            result += formatJson(obj[key], indent + 1);\n                        } else {\n                            result += formatJsonValue(obj[key]);\n                        }\n\n                        if (index < keys.length - 1) result += ',';\n                        result += '\\n';\n                    });\n                    result += spaces + '}';\n                } else {\n                    result += formatJsonValue(obj);\n                }\n\n                return result;\n            } catch (error) {\n                return escapeHtml(JSON.stringify(obj));\n            }\n        }\n\n        // æ ¼å¼åŒ– JSON å€¼\n        function formatJsonValue(value) {\n            if (typeof value === 'string') {\n                if (value.startsWith('http://') || value.startsWith('https://')) {\n                    return `<span class=\"json-url\" onclick=\"window.open('${escapeHtml(value)}', '_blank')\">\"${escapeHtml(value)}\"</span>`;\n                }\n                return `<span class=\"json-string\">\"${escapeHtml(value)}\"</span>`;\n            } else if (typeof value === 'number') {\n                return `<span class=\"json-number\">${value}</span>`;\n            } else if (typeof value === 'boolean') {\n                return `<span class=\"json-boolean\">${value}</span>`;\n            } else if (value === null) {\n                return `<span class=\"json-null\">null</span>`;\n            } else {\n                return `<span style=\"color: #666;\">${value}</span>`;\n            }\n        }\n\n        // HTML è½¬ä¹‰\n        function escapeHtml(text) {\n            const div = document.createElement('div');\n            div.textContent = text;\n            return div.innerHTML;\n        }\n\n        // åˆ‡æ¢è¯¦æƒ…æ˜¾ç¤º\n        function toggleDetail(id) {\n            const content = document.getElementById(id);\n            const icon = document.getElementById('icon-' + id);\n\n            if (content.classList.contains('hidden')) {\n                content.classList.remove('hidden');\n                icon.classList.add('rotated');\n            } else {\n                content.classList.add('hidden');\n                icon.classList.remove('rotated');\n            }\n        }\n\n        // è¿‡æ»¤å’Œæœç´¢\n        document.getElementById('event-filter').addEventListener('change', applyFilters);\n        document.getElementById('search-input').addEventListener('input', applyFilters);\n\n        function applyFilters() {\n            const eventFilter = document.getElementById('event-filter').value;\n            const searchText = document.getElementById('search-input').value.toLowerCase();\n\n            filteredData = hooksData.filter(hook => {\n                const matchEvent = !eventFilter || hook.event === eventFilter;\n                const matchSearch = !searchText ||\n                    JSON.stringify(hook).toLowerCase().includes(searchText);\n\n                return matchEvent && matchSearch;\n            });\n\n            updateStatistics();\n            renderHooks();\n        }\n\n        // æ£€æŸ¥æ˜¯å¦ä¸º URL\n        function isUrl(text) {\n            try {\n                new URL(text);\n                return true;\n            } catch {\n                return false;\n            }\n        }\n\n        // å¤åˆ¶è½¬å½•è·¯å¾„åˆ°å‰ªè´´æ¿\n        async function copyTranscriptPath(path) {\n            try {\n                await navigator.clipboard.writeText(path);\n                showToast('è·¯å¾„å·²å¤åˆ¶åˆ°å‰ªè´´æ¿', 'success');\n            } catch (error) {\n                // é™çº§æ–¹æ¡ˆ\n                const textArea = document.createElement('textarea');\n                textArea.value = path;\n                document.body.appendChild(textArea);\n                textArea.select();\n                document.execCommand('copy');\n                document.body.removeChild(textArea);\n                showToast('è·¯å¾„å·²å¤åˆ¶åˆ°å‰ªè´´æ¿', 'success');\n            }\n        }\n\n        // æ‰“å¼€è½¬å½•é“¾æ¥ï¼ˆURLï¼‰\n        function openTranscriptUrl(url) {\n            window.open(url, '_blank');\n        }\n\n        // å°è¯•æ‰“å¼€æœ¬åœ°æ–‡ä»¶ï¼ˆé€šè¿‡æ–‡ä»¶é€‰æ‹©å™¨ï¼‰\n        function tryOpenTranscriptFile(path) {\n            // æ–¹æ¡ˆ1ï¼šå¤åˆ¶è·¯å¾„åˆ°å‰ªè´´æ¿\n            copyTranscriptPath(path);\n\n            // æ–¹æ¡ˆ2ï¼šå¦‚æœæ˜¯ç½‘ç»œé“¾æ¥ï¼Œç›´æ¥æ‰“å¼€\n            if (path.startsWith('http://') || path.startsWith('https://')) {\n                openTranscriptUrl(path);\n                return;\n            }\n\n            // æ–¹æ¡ˆ3ï¼šä½¿ç”¨æ–‡ä»¶é€‰æ‹©å™¨è®©ç”¨æˆ·é€‰æ‹©æœ¬åœ°æ–‡ä»¶\n            if (path.startsWith('file://')) {\n                // file:// åè®®ï¼Œæå–æ–‡ä»¶è·¯å¾„\n                const cleanPath = path.replace(/^file:\\/\\//, '');\n                showFileSelector(cleanPath);\n            } else {\n                // æœ¬åœ°æ–‡ä»¶è·¯å¾„\n                showFileSelector(path);\n            }\n        }\n\n        // æ˜¾ç¤ºæ–‡ä»¶é€‰æ‹©å™¨\n        function showFileSelector(expectedPath) {\n            const input = document.createElement('input');\n            input.type = 'file';\n            input.style.display = 'none';\n\n            // ä»è·¯å¾„ä¸­æå–æ–‡ä»¶å\n            const fileName = expectedPath.split(/[/\\\\]/).pop();\n\n            input.addEventListener('change', function(event) {\n                const file = event.target.files[0];\n                if (file) {\n                    if (file.name === fileName) {\n                        // æ–‡ä»¶ååŒ¹é…ï¼Œè¯»å–å¹¶æ˜¾ç¤ºæ–‡ä»¶å†…å®¹\n                        readAndDisplayFile(file);\n                    } else {\n                        showToast(`é€‰æ‹©çš„æ–‡ä»¶åä¸åŒ¹é…\\næœŸæœ›: ${fileName}\\nå®é™…: ${file.name}`, 'warning');\n                        // ä»ç„¶æ˜¾ç¤ºé€‰æ‹©çš„æ–‡ä»¶å†…å®¹\n                        readAndDisplayFile(file);\n                    }\n                }\n                // æ¸…ç†inputå…ƒç´ \n                document.body.removeChild(input);\n            });\n\n            document.body.appendChild(input);\n\n            // æ˜¾ç¤ºæç¤ºï¼Œç„¶åè§¦å‘æ–‡ä»¶é€‰æ‹©\n            showToast(`è¯·é€‰æ‹©æ–‡ä»¶: ${fileName}`, 'info');\n            setTimeout(() => {\n                input.click();\n            }, 500);\n        }\n\n        // è¯»å–å¹¶æ˜¾ç¤ºæ–‡ä»¶å†…å®¹\n        function readAndDisplayFile(file) {\n            const reader = new FileReader();\n            reader.onload = function(e) {\n                const content = e.target.result;\n\n                // åˆ›å»ºä¸€ä¸ªæ¨¡æ€çª—å£æ˜¾ç¤ºæ–‡ä»¶å†…å®¹\n                showFileModal(file.name, content);\n            };\n\n            reader.onerror = function() {\n                showToast('æ–‡ä»¶è¯»å–å¤±è´¥', 'error');\n            };\n\n            reader.readAsText(file);\n        }\n\n        // æ˜¾ç¤ºæ–‡ä»¶å†…å®¹çš„æ¨¡æ€çª—å£\n        function showFileModal(fileName, content) {\n            // åˆ›å»ºæ¨¡æ€èƒŒæ™¯\n            const modal = document.createElement('div');\n            modal.style.cssText = `\n                position: fixed;\n                top: 0;\n                left: 0;\n                width: 100%;\n                height: 100%;\n                background: rgba(0, 0, 0, 0.8);\n                z-index: 10000;\n                display: flex;\n                justify-content: center;\n                align-items: center;\n                animation: fadeIn 0.3s ease;\n            `;\n\n            // åˆ›å»ºæ¨¡æ€å†…å®¹\n            const modalContent = document.createElement('div');\n            modalContent.style.cssText = `\n                background: white;\n                border-radius: 12px;\n                width: 90%;\n                max-width: 800px;\n                max-height: 80vh;\n                display: flex;\n                flex-direction: column;\n                box-shadow: 0 20px 60px rgba(0,0,0,0.3);\n                animation: slideUp 0.3s ease;\n            `;\n\n            // åˆ›å»ºå¤´éƒ¨\n            const header = document.createElement('div');\n            header.style.cssText = `\n                padding: 20px;\n                border-bottom: 1px solid #e0e0e0;\n                display: flex;\n                justify-content: space-between;\n                align-items: center;\n                background: #f8f9fa;\n                border-radius: 12px 12px 0 0;\n            `;\n\n            const title = document.createElement('h3');\n            title.textContent = `ğŸ“„ ${fileName}`;\n            title.style.cssText = `\n                margin: 0;\n                color: #333;\n                font-size: 1.2rem;\n            `;\n\n            // åˆ›å»ºæ“ä½œæŒ‰é’®åŒºåŸŸ\n            const actions = document.createElement('div');\n            actions.style.cssText = `\n                display: flex;\n                gap: 10px;\n                align-items: center;\n            `;\n\n            const copyBtn = document.createElement('button');\n            copyBtn.textContent = 'ğŸ“‹ å¤åˆ¶å†…å®¹';\n            copyBtn.style.cssText = `\n                background: #28a745;\n                color: white;\n                border: none;\n                padding: 6px 12px;\n                border-radius: 4px;\n                font-size: 0.8rem;\n                cursor: pointer;\n                transition: background 0.3s ease;\n            `;\n            copyBtn.onmouseover = () => copyBtn.style.background = '#218838';\n            copyBtn.onmouseout = () => copyBtn.style.background = '#28a745';\n\n            const closeBtn = document.createElement('button');\n            closeBtn.textContent = 'âœ•';\n            closeBtn.style.cssText = `\n                background: none;\n                border: none;\n                font-size: 1.5rem;\n                cursor: pointer;\n                color: #666;\n                padding: 5px;\n                border-radius: 50%;\n                width: 32px;\n                height: 32px;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n            `;\n            closeBtn.onmouseover = () => closeBtn.style.background = '#e0e0e0';\n            closeBtn.onmouseout = () => closeBtn.style.background = 'none';\n\n            // æ·»åŠ å¤åˆ¶åŠŸèƒ½\n            copyBtn.onclick = async () => {\n                try {\n                    await navigator.clipboard.writeText(content);\n                    showToast('æ–‡ä»¶å†…å®¹å·²å¤åˆ¶åˆ°å‰ªè´´æ¿', 'success');\n                } catch (error) {\n                    // é™çº§æ–¹æ¡ˆ\n                    const textArea = document.createElement('textarea');\n                    textArea.value = content;\n                    document.body.appendChild(textArea);\n                    textArea.select();\n                    document.execCommand('copy');\n                    document.body.removeChild(textArea);\n                    showToast('æ–‡ä»¶å†…å®¹å·²å¤åˆ¶åˆ°å‰ªè´´æ¿', 'success');\n                }\n            };\n\n            // åˆ›å»ºå†…å®¹åŒºåŸŸ\n            const contentArea = document.createElement('div');\n            contentArea.style.cssText = `\n                padding: 20px;\n                overflow-y: auto;\n                flex: 1;\n                font-family: 'Courier New', monospace;\n                font-size: 0.9rem;\n                line-height: 1.5;\n                background: #1a1a1a;\n                color: #ffffff;\n                white-space: pre-wrap;\n                border-radius: 0 0 12px 12px;\n                max-height: 60vh;\n            `;\n\n            // è®¾ç½®å†…å®¹\n            contentArea.textContent = content;\n\n            // ç»„è£…æ¨¡æ€çª—å£\n            actions.appendChild(copyBtn);\n            actions.appendChild(closeBtn);\n            header.appendChild(title);\n            header.appendChild(actions);\n            modalContent.appendChild(header);\n            modalContent.appendChild(contentArea);\n            modal.appendChild(modalContent);\n\n            // æ·»åŠ å…³é—­äº‹ä»¶\n            closeBtn.onclick = () => document.body.removeChild(modal);\n            modal.onclick = (e) => {\n                if (e.target === modal) {\n                    document.body.removeChild(modal);\n                }\n            };\n\n            // æ·»åŠ åˆ°é¡µé¢\n            document.body.appendChild(modal);\n\n            // æ·»åŠ åŠ¨ç”»æ ·å¼\n            if (!document.getElementById('modal-animations')) {\n                const style = document.createElement('style');\n                style.id = 'modal-animations';\n                style.textContent = `\n                    @keyframes fadeIn {\n                        from { opacity: 0; }\n                        to { opacity: 1; }\n                    }\n                    @keyframes slideUp {\n                        from {\n                            opacity: 0;\n                            transform: translateY(50px);\n                        }\n                        to {\n                            opacity: 1;\n                            transform: translateY(0);\n                        }\n                    }\n                `;\n                document.head.appendChild(style);\n            }\n        }\n\n        // æ˜¾ç¤ºæç¤ºä¿¡æ¯\n        function showToast(message, type = 'info') {\n            const toast = document.createElement('div');\n            toast.style.cssText = `\n                position: fixed;\n                top: 20px;\n                right: 20px;\n                background: ${type === 'success' ? '#28a745' : type === 'warning' ? '#ffc107' : type === 'error' ? '#dc3545' : '#007bff'};\n                color: white;\n                padding: 12px 16px;\n                border-radius: 6px;\n                font-size: 0.9rem;\n                z-index: 10000;\n                max-width: 400px;\n                word-wrap: break-word;\n                box-shadow: 0 4px 12px rgba(0,0,0,0.15);\n                animation: slideInRight 0.3s ease;\n            `;\n\n            toast.textContent = message;\n            document.body.appendChild(toast);\n\n            // 3ç§’åè‡ªåŠ¨æ¶ˆå¤±\n            setTimeout(() => {\n                toast.style.animation = 'slideOutRight 0.3s ease';\n                setTimeout(() => {\n                    if (toast.parentNode) {\n                        document.body.removeChild(toast);\n                    }\n                }, 300);\n            }, 3000);\n        }\n\n        // æ·»åŠ åŠ¨ç”»æ ·å¼\n        const style = document.createElement('style');\n        style.textContent = `\n            @keyframes slideInRight {\n                from {\n                    transform: translateX(100%);\n                    opacity: 0;\n                }\n                to {\n                    transform: translateX(0);\n                    opacity: 1;\n                }\n            }\n\n            @keyframes slideOutRight {\n                from {\n                    transform: translateX(0);\n                    opacity: 1;\n                }\n                to {\n                    transform: translateX(100%);\n                    opacity: 0;\n                }\n            }\n        `;\n        document.head.appendChild(style);\n\n        // æ ¼å¼åŒ–æ–‡ä»¶å¤§å°\n        function formatFileSize(bytes) {\n            if (bytes === 0) return '0 Bytes';\n            const k = 1024;\n            const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n            const i = Math.floor(Math.log(bytes) / Math.log(k));\n            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n        }\n\n        // é¡µé¢åŠ è½½æ—¶æ‰§è¡Œ\n        document.addEventListener('DOMContentLoaded', function() {\n            // æ·»åŠ åˆå§‹åŠ è½½åŠ¨ç”»\n            const cards = document.querySelectorAll('.stat-card, .upload-card');\n            cards.forEach((card, index) => {\n                card.style.opacity = '0';\n                card.style.transform = 'translateY(20px)';\n                setTimeout(() => {\n                    card.style.transition = 'opacity 0.5s ease, transform 0.5s ease';\n                    card.style.opacity = '1';\n                    card.style.transform = 'translateY(0)';\n                }, index * 100);\n            });\n\n            // è®¾ç½®æ–‡ä»¶ä¸Šä¼ \n            setupFileUpload();\n        });\n\n            </script>\n</body>\n</html>","structuredPatch":[{"oldStart":1463,"oldLines":6,"newStart":1463,"newLines":29,"lines":["                 }","             };"," ","+            // æ·»åŠ é”®ç›˜æ”¯æŒ (ESC å…³é—­)","+            const keyHandler = (e) => {","+                if (e.key === 'Escape') {","+                    document.body.removeChild(modal);","+                    document.removeEventListener('keydown', keyHandler);","+                }","+            };","+            document.addEventListener('keydown', keyHandler);","+","+            // æ¨¡æ€çª—å£å…³é—­æ—¶æ¸…ç†äº‹ä»¶ç›‘å¬å™¨","+            const cleanup = () => {","+                document.removeEventListener('keydown', keyHandler);","+                if (document.body.contains(modal)) {","+                    document.body.removeChild(modal);","+                }","+            };","+            closeBtn.onclick = cleanup;","+            modal.onclick = (e) => {","+                if (e.target === modal) {","+                    cleanup();","+                }","+            };","+","             // æ·»åŠ åˆ°é¡µé¢","             document.body.appendChild(modal);"," "]}],"userModified":false,"replaceAll":false}}}
{"ts":"2025-11-05T02:38:13.989Z","event":"PreToolUse","phase":"","message":"PreToolUseäº‹ä»¶æ­£åœ¨æ‰§è¡Œ","description":"å·¥å…·æ‰§è¡Œå‰è§¦å‘ï¼Œå¯åŸºäºå‚æ•°é˜»æ­¢æˆ–è°ƒæ•´è°ƒç”¨ã€‚","doc_url":"https://docs.claude.com/zh-CN/docs/claude-code/hooks#pretooluse","payload":{"session_id":"c7c21516-7e1e-49b2-8ae5-4e1bb98e9692","transcript_path":"C:\\Users\\WTCL\\.claude\\projects\\i--claude-code-proxy\\c7c21516-7e1e-49b2-8ae5-4e1bb98e9692.jsonl","cwd":"i:\\claude-code-proxy","permission_mode":"acceptEdits","hook_event_name":"PreToolUse","tool_name":"TodoWrite","tool_input":{"todos":[{"content":"æ”¹è¿›æ–‡ä»¶æ‰“å¼€åŠŸèƒ½ï¼Œä½¿ç”¨File APIæ”¯æŒæœ¬åœ°æ–‡ä»¶é€‰æ‹©","status":"completed","activeForm":"æ”¹è¿›æ–‡ä»¶æ‰“å¼€åŠŸèƒ½ï¼Œä½¿ç”¨File APIæ”¯æŒæœ¬åœ°æ–‡ä»¶é€‰æ‹©"}]}}}
{"ts":"2025-11-05T02:38:14.217Z","event":"PostToolUse","phase":"","message":"PostToolUseäº‹ä»¶æ­£åœ¨æ‰§è¡Œ","description":"å·¥å…·æˆåŠŸæ‰§è¡Œåè§¦å‘ï¼Œå¸¸ç”¨äºæ ¼å¼åŒ–ã€æ ¡éªŒæˆ–è®°å½•ç»“æœã€‚","doc_url":"https://docs.claude.com/zh-CN/docs/claude-code/hooks#posttooluse","payload":{"session_id":"c7c21516-7e1e-49b2-8ae5-4e1bb98e9692","transcript_path":"C:\\Users\\WTCL\\.claude\\projects\\i--claude-code-proxy\\c7c21516-7e1e-49b2-8ae5-4e1bb98e9692.jsonl","cwd":"i:\\claude-code-proxy","permission_mode":"acceptEdits","hook_event_name":"PostToolUse","tool_name":"TodoWrite","tool_input":{"todos":[{"content":"æ”¹è¿›æ–‡ä»¶æ‰“å¼€åŠŸèƒ½ï¼Œä½¿ç”¨File APIæ”¯æŒæœ¬åœ°æ–‡ä»¶é€‰æ‹©","status":"completed","activeForm":"æ”¹è¿›æ–‡ä»¶æ‰“å¼€åŠŸèƒ½ï¼Œä½¿ç”¨File APIæ”¯æŒæœ¬åœ°æ–‡ä»¶é€‰æ‹©"}]},"tool_response":{"oldTodos":[{"content":"æ”¹è¿›æ–‡ä»¶æ‰“å¼€åŠŸèƒ½ï¼Œä½¿ç”¨File APIæ”¯æŒæœ¬åœ°æ–‡ä»¶é€‰æ‹©","status":"in_progress","activeForm":"æ”¹è¿›æ–‡ä»¶æ‰“å¼€åŠŸèƒ½ï¼Œä½¿ç”¨File APIæ”¯æŒæœ¬åœ°æ–‡ä»¶é€‰æ‹©"}],"newTodos":[{"content":"æ”¹è¿›æ–‡ä»¶æ‰“å¼€åŠŸèƒ½ï¼Œä½¿ç”¨File APIæ”¯æŒæœ¬åœ°æ–‡ä»¶é€‰æ‹©","status":"completed","activeForm":"æ”¹è¿›æ–‡ä»¶æ‰“å¼€åŠŸèƒ½ï¼Œä½¿ç”¨File APIæ”¯æŒæœ¬åœ°æ–‡ä»¶é€‰æ‹©"}]}}}
{"ts":"2025-11-05T02:38:50.809Z","event":"Stop","phase":"","message":"Stopäº‹ä»¶æ­£åœ¨æ‰§è¡Œ","description":"ä¸»ä»£ç†å®Œæˆå“åº”æ—¶è§¦å‘ï¼ˆç”¨æˆ·ä¸­æ–­ä¸è§¦å‘ï¼‰ã€‚","doc_url":"https://docs.claude.com/zh-CN/docs/claude-code/hooks#stop","payload":{"session_id":"c7c21516-7e1e-49b2-8ae5-4e1bb98e9692","transcript_path":"C:\\Users\\WTCL\\.claude\\projects\\i--claude-code-proxy\\c7c21516-7e1e-49b2-8ae5-4e1bb98e9692.jsonl","cwd":"i:\\claude-code-proxy","permission_mode":"acceptEdits","hook_event_name":"Stop","stop_hook_active":false}}
{"ts":"2025-11-05T02:40:30.329Z","event":"UserPromptSubmit","phase":"","message":"UserPromptSubmitäº‹ä»¶æ­£åœ¨æ‰§è¡Œ","description":"ç”¨æˆ·æäº¤æç¤ºå‰è§¦å‘ï¼Œå¯è¿›è¡Œæç¤ºæ ¡éªŒæˆ–å¢å¼ºã€‚","doc_url":"https://docs.claude.com/zh-CN/docs/claude-code/hooks#userpromptsubmit","payload":{"session_id":"c7c21516-7e1e-49b2-8ae5-4e1bb98e9692","transcript_path":"C:\\Users\\WTCL\\.claude\\projects\\i--claude-code-proxy\\c7c21516-7e1e-49b2-8ae5-4e1bb98e9692.jsonl","cwd":"i:\\claude-code-proxy","permission_mode":"acceptEdits","hook_event_name":"UserPromptSubmit","prompt":"<ide_opened_file>The user opened the file i:\\claude-code-proxy\\.claude\\hooks.log in the IDE. This may or may not be related to the current task.</ide_opened_file>\nå¤åˆ¶æŒ‰é’®æœ‰bugï¼Œå¤åˆ¶çš„å†…å®¹ä¸æ˜¯è·¯å¾„ï¼Œå°‘äº†\\"}}
{"ts":"2025-11-05T02:40:54.516Z","event":"PreToolUse","phase":"","message":"PreToolUseäº‹ä»¶æ­£åœ¨æ‰§è¡Œ","description":"å·¥å…·æ‰§è¡Œå‰è§¦å‘ï¼Œå¯åŸºäºå‚æ•°é˜»æ­¢æˆ–è°ƒæ•´è°ƒç”¨ã€‚","doc_url":"https://docs.claude.com/zh-CN/docs/claude-code/hooks#pretooluse","payload":{"session_id":"c7c21516-7e1e-49b2-8ae5-4e1bb98e9692","transcript_path":"C:\\Users\\WTCL\\.claude\\projects\\i--claude-code-proxy\\c7c21516-7e1e-49b2-8ae5-4e1bb98e9692.jsonl","cwd":"i:\\claude-code-proxy","permission_mode":"acceptEdits","hook_event_name":"PreToolUse","tool_name":"Edit","tool_input":{"file_path":"i:\\claude-code-proxy\\analyze\\hooks.html","old_string":"      <button class=\"transcript-btn copy\" onclick=\"copyTranscriptPath('${escapeHtml(transcriptPath)}')\" title=\"å¤åˆ¶è·¯å¾„\">\n                            ğŸ“‹ å¤åˆ¶\n                        </button>","new_string":"      <button class=\"transcript-btn copy\" onclick=\"copyTranscriptPath('${transcriptPath.replace(/\\\\/g, '\\\\\\\\').replace(/'/g, \"\\\\'\")}')\" title=\"å¤åˆ¶è·¯å¾„\">\n                            ğŸ“‹ å¤åˆ¶\n                        </button>"}}}
{"ts":"2025-11-05T02:40:56.328Z","event":"PostToolUse","phase":"","message":"PostToolUseäº‹ä»¶æ­£åœ¨æ‰§è¡Œ","description":"å·¥å…·æˆåŠŸæ‰§è¡Œåè§¦å‘ï¼Œå¸¸ç”¨äºæ ¼å¼åŒ–ã€æ ¡éªŒæˆ–è®°å½•ç»“æœã€‚","doc_url":"https://docs.claude.com/zh-CN/docs/claude-code/hooks#posttooluse","payload":{"session_id":"c7c21516-7e1e-49b2-8ae5-4e1bb98e9692","transcript_path":"C:\\Users\\WTCL\\.claude\\projects\\i--claude-code-proxy\\c7c21516-7e1e-49b2-8ae5-4e1bb98e9692.jsonl","cwd":"i:\\claude-code-proxy","permission_mode":"acceptEdits","hook_event_name":"PostToolUse","tool_name":"Edit","tool_input":{"file_path":"i:\\claude-code-proxy\\analyze\\hooks.html","old_string":"      <button class=\"transcript-btn copy\" onclick=\"copyTranscriptPath('${escapeHtml(transcriptPath)}')\" title=\"å¤åˆ¶è·¯å¾„\">\n                            ğŸ“‹ å¤åˆ¶\n                        </button>","new_string":"      <button class=\"transcript-btn copy\" onclick=\"copyTranscriptPath('${transcriptPath.replace(/\\\\/g, '\\\\\\\\').replace(/'/g, \"\\\\'\")}')\" title=\"å¤åˆ¶è·¯å¾„\">\n                            ğŸ“‹ å¤åˆ¶\n                        </button>"},"tool_response":{"filePath":"i:\\claude-code-proxy\\analyze\\hooks.html","oldString":"      <button class=\"transcript-btn copy\" onclick=\"copyTranscriptPath('${escapeHtml(transcriptPath)}')\" title=\"å¤åˆ¶è·¯å¾„\">\n                            ğŸ“‹ å¤åˆ¶\n                        </button>","newString":"      <button class=\"transcript-btn copy\" onclick=\"copyTranscriptPath('${transcriptPath.replace(/\\\\/g, '\\\\\\\\').replace(/'/g, \"\\\\'\")}')\" title=\"å¤åˆ¶è·¯å¾„\">\n                            ğŸ“‹ å¤åˆ¶\n                        </button>","originalFile":"<!DOCTYPE html>\n<html lang=\"zh-CN\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Hooks æ—¥å¿—åˆ†æ</title>\n    <style>\n        * {\n            margin: 0;\n            padding: 0;\n            box-sizing: border-box;\n        }\n\n        body {\n            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n            min-height: 100vh;\n            padding: 20px;\n        }\n\n        .container {\n            max-width: 1400px;\n            margin: 0 auto;\n        }\n\n        .header {\n            text-align: center;\n            color: white;\n            margin-bottom: 30px;\n        }\n\n        .header h1 {\n            font-size: 2.5rem;\n            margin-bottom: 10px;\n            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);\n        }\n\n        .header p {\n            font-size: 1.1rem;\n            opacity: 0.9;\n        }\n\n        /* æ–‡ä»¶ä¸Šä¼ ç»„ä»¶æ ·å¼ */\n        .upload-section {\n            margin-bottom: 30px;\n        }\n\n        .upload-card {\n            background: white;\n            border-radius: 15px;\n            padding: 25px;\n            box-shadow: 0 10px 30px rgba(0,0,0,0.1);\n            border: 2px dashed #cbd5e0;\n            transition: all 0.3s ease;\n        }\n\n        .upload-card:hover {\n            border-color: #667eea;\n            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.2);\n        }\n\n        .upload-header {\n            font-size: 1.2rem;\n            font-weight: bold;\n            color: #4a5568;\n            margin-bottom: 20px;\n            text-align: center;\n        }\n\n        .upload-area {\n            border: 2px dashed #e2e8f0;\n            border-radius: 10px;\n            padding: 40px 20px;\n            text-align: center;\n            transition: all 0.3s ease;\n            cursor: pointer;\n        }\n\n        .upload-area:hover {\n            border-color: #667eea;\n            background: #f7fafc;\n        }\n\n        .upload-area.dragover {\n            border-color: #667eea;\n            background: #edf2f7;\n            transform: scale(1.02);\n        }\n\n        .upload-icon {\n            font-size: 3rem;\n            margin-bottom: 15px;\n            opacity: 0.7;\n        }\n\n        .upload-text {\n            font-size: 1.1rem;\n            color: #4a5568;\n            margin-bottom: 10px;\n            font-weight: 500;\n        }\n\n        .upload-hint {\n            font-size: 0.9rem;\n            color: #718096;\n            margin-bottom: 20px;\n        }\n\n        .upload-btn {\n            background: #667eea;\n            color: white;\n            border: none;\n            padding: 12px 24px;\n            border-radius: 8px;\n            font-size: 1rem;\n            font-weight: 500;\n            cursor: pointer;\n            transition: all 0.3s ease;\n        }\n\n        .upload-btn:hover {\n            background: #5a67d8;\n            transform: translateY(-2px);\n            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);\n        }\n\n        .file-info {\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            background: #f7fafc;\n            padding: 15px 20px;\n            border-radius: 8px;\n            margin-top: 15px;\n        }\n\n        .file-name {\n            font-weight: 500;\n            color: #4a5568;\n            flex: 1;\n            overflow: hidden;\n            text-overflow: ellipsis;\n            white-space: nowrap;\n        }\n\n        .clear-btn {\n            background: #fc8181;\n            color: white;\n            border: none;\n            width: 30px;\n            height: 30px;\n            border-radius: 50%;\n            cursor: pointer;\n            font-size: 1rem;\n            transition: all 0.3s ease;\n        }\n\n        .clear-btn:hover {\n            background: #f56565;\n            transform: scale(1.1);\n        }\n\n        /* æ¶ˆæ¯æç¤ºæ ·å¼ */\n        .upload-message {\n            margin-top: 15px;\n            padding: 12px 16px;\n            border-radius: 8px;\n            font-size: 0.9rem;\n            animation: slideIn 0.3s ease;\n        }\n\n        .upload-success {\n            background: #d4edda;\n            color: #155724;\n            border: 1px solid #c3e6cb;\n        }\n\n        .upload-error {\n            background: #f8d7da;\n            color: #721c24;\n            border: 1px solid #f5c6cb;\n        }\n\n        @keyframes slideIn {\n            from {\n                opacity: 0;\n                transform: translateY(-10px);\n            }\n            to {\n                opacity: 1;\n                transform: translateY(0);\n            }\n        }\n\n        #file-input {\n            display: none;\n        }\n\n        .stats-grid {\n            display: grid;\n            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\n            gap: 20px;\n            margin-bottom: 30px;\n        }\n\n        .stat-card {\n            background: white;\n            border-radius: 15px;\n            padding: 25px;\n            box-shadow: 0 10px 30px rgba(0,0,0,0.2);\n            text-align: center;\n            transition: transform 0.3s ease, box-shadow 0.3s ease;\n        }\n\n        .stat-card:hover {\n            transform: translateY(-5px);\n            box-shadow: 0 15px 40px rgba(0,0,0,0.3);\n        }\n\n        .stat-number {\n            font-size: 3rem;\n            font-weight: bold;\n            margin-bottom: 10px;\n        }\n\n        .stat-label {\n            font-size: 1.1rem;\n            color: #666;\n            margin-bottom: 5px;\n        }\n\n        .stat-description {\n            font-size: 0.9rem;\n            color: #999;\n        }\n\n        .filter-section {\n            background: white;\n            border-radius: 15px;\n            padding: 20px;\n            box-shadow: 0 10px 30px rgba(0,0,0,0.2);\n            margin-bottom: 30px;\n        }\n\n        .filter-controls {\n            display: flex;\n            gap: 15px;\n            flex-wrap: wrap;\n            align-items: center;\n        }\n\n        .filter-group {\n            display: flex;\n            align-items: center;\n            gap: 10px;\n        }\n\n        .filter-label {\n            font-weight: bold;\n            color: #333;\n        }\n\n        .filter-select, .search-input {\n            padding: 8px 12px;\n            border: 2px solid #ddd;\n            border-radius: 5px;\n            font-size: 0.9rem;\n            transition: border-color 0.3s ease;\n        }\n\n        .filter-select:focus, .search-input:focus {\n            outline: none;\n            border-color: #667eea;\n        }\n\n        .search-input {\n            min-width: 200px;\n        }\n\n        .hooks-container {\n            display: grid;\n            gap: 30px;\n        }\n\n        .hook-item {\n            background: white;\n            border-radius: 15px;\n            padding: 25px;\n            box-shadow: 0 10px 30px rgba(0,0,0,0.2);\n        }\n\n        .hook-header {\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            margin-bottom: 20px;\n            padding-bottom: 15px;\n            border-bottom: 2px solid #667eea;\n        }\n\n        .hook-event {\n            font-size: 1.5rem;\n            font-weight: bold;\n            color: #667eea;\n        }\n\n        .hook-meta {\n            display: flex;\n            gap: 20px;\n            align-items: center;\n        }\n\n        .hook-timestamp {\n            font-size: 0.9rem;\n            color: #666;\n            background: #f0f4ff;\n            padding: 5px 12px;\n            border-radius: 20px;\n        }\n\n        .hook-message {\n            background: #f8f9fa;\n            border-left: 4px solid #667eea;\n            padding: 15px;\n            margin-bottom: 15px;\n            border-radius: 5px;\n        }\n\n        .hook-description {\n            color: #666;\n            font-style: italic;\n            margin-bottom: 15px;\n        }\n\n        .hook-details {\n            display: flex;\n            flex-direction: column;\n            gap: 20px;\n        }\n\n        .part-card {\n            background: #f8f9fa;\n            border-radius: 10px;\n            overflow: hidden;\n        }\n\n        .part-header {\n            background: #667eea;\n            color: white;\n            padding: 12px 15px;\n            font-weight: bold;\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            cursor: pointer;\n            transition: background 0.3s ease;\n        }\n\n        .part-header:hover {\n            background: #5a67d8;\n        }\n\n        .part-content {\n            padding: 15px;\n            font-family: 'Courier New', monospace;\n            font-size: 0.9rem;\n            background: #1a1a1a;\n            color: #ffffff;\n            overflow-y: auto;\n            white-space: pre-wrap;\n            line-height: 1.6;\n            min-height: 100px;\n            border-radius: 8px;\n            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.3);\n        }\n\n        .part-content.hidden {\n            display: none;\n        }\n\n        .toggle-icon {\n            transition: transform 0.3s ease;\n        }\n\n        .toggle-icon.rotated {\n            transform: rotate(180deg);\n        }\n\n        /* è‡ªå®šä¹‰æ»šåŠ¨æ¡æ ·å¼ */\n        .part-content::-webkit-scrollbar {\n            width: 8px;\n        }\n\n        .part-content::-webkit-scrollbar-track {\n            background: #2a2a2a;\n            border-radius: 4px;\n        }\n\n        .part-content::-webkit-scrollbar-thumb {\n            background: #4a4a4a;\n            border-radius: 4px;\n        }\n\n        .part-content::-webkit-scrollbar-thumb:hover {\n            background: #5a5a5a;\n        }\n\n        .event-badge {\n            display: inline-block;\n            padding: 4px 12px;\n            border-radius: 20px;\n            font-size: 0.8rem;\n            font-weight: bold;\n            margin-right: 10px;\n        }\n\n        .event-userprompt { background: #FF6B6B; color: white; }\n        .event-pretool { background: #4ECDC4; color: white; }\n        .event-posttool { background: #45B7D1; color: white; }\n        .event-notification { background: #9C27B0; color: white; }\n        .event-stop { background: #F44336; color: white; }\n        .event-subagent-stop { background: #FF9800; color: white; }\n        .event-pre-compact { background: #FFC107; color: white; }\n        .event-session-start { background: #4CAF50; color: white; }\n        .event-session-end { background: #607D8B; color: white; }\n        .event-default { background: #78909C; color: white; }\n\n        .no-data {\n            text-align: center;\n            padding: 60px 20px;\n            color: white;\n            font-size: 1.2rem;\n        }\n\n        .error-message {\n            background: #fff5f5;\n            border: 2px solid #fc8181;\n            color: #c53030;\n            padding: 20px;\n            border-radius: 10px;\n            text-align: center;\n            font-size: 1.1rem;\n            margin: 20px 0;\n        }\n\n        .json-key { color: #9C27B0; }\n        .json-string { color: #4CAF50; }\n        .json-number { color: #FF9800; }\n        .json-boolean { color: #F44336; }\n        .json-null { color: #9E9E9E; }\n        .json-url { color: #2196F3; text-decoration: underline; cursor: pointer; }\n\n        .transcript-path {\n            background: #fff3cd;\n            border: 1px solid #ffeaa7;\n            border-radius: 5px;\n            padding: 8px 12px;\n            margin-top: 10px;\n            font-size: 0.9rem;\n        }\n\n        .transcript-path-label {\n            font-weight: bold;\n            color: #856404;\n            margin-bottom: 5px;\n        }\n\n        .transcript-path-value {\n            color: #856404;\n            word-break: break-all;\n            font-family: monospace;\n            background: #f8f9fa;\n            padding: 4px 8px;\n            border-radius: 3px;\n        }\n\n        .has-transcript-badge {\n            background: #ffc107;\n            color: #212529;\n            padding: 2px 8px;\n            border-radius: 12px;\n            font-size: 0.7rem;\n            font-weight: bold;\n            margin-left: 10px;\n        }\n\n        .transcript-actions {\n            display: flex;\n            gap: 8px;\n            margin-top: 8px;\n        }\n\n        .transcript-btn {\n            background: #667eea;\n            color: white;\n            border: none;\n            padding: 6px 12px;\n            border-radius: 4px;\n            font-size: 0.8rem;\n            cursor: pointer;\n            transition: all 0.3s ease;\n            display: flex;\n            align-items: center;\n            gap: 4px;\n        }\n\n        .transcript-btn:hover {\n            background: #5a67d8;\n            transform: translateY(-1px);\n        }\n\n        .transcript-btn.copy {\n            background: #28a745;\n        }\n\n        .transcript-btn.copy:hover {\n            background: #218838;\n        }\n\n        .transcript-btn.open {\n            background: #007bff;\n        }\n\n        .transcript-btn.open:hover {\n            background: #0056b3;\n        }\n\n        .transcript-btn:disabled {\n            background: #6c757d;\n            cursor: not-allowed;\n            transform: none;\n        }\n\n        @media (max-width: 768px) {\n            .header h1 {\n                font-size: 2rem;\n            }\n\n            .stats-grid {\n                grid-template-columns: repeat(2, 1fr);\n            }\n\n            .filter-controls {\n                flex-direction: column;\n                align-items: stretch;\n            }\n\n            .search-input {\n                min-width: auto;\n            }\n        }\n    </style>\n</head>\n<body>\n    <div class=\"container\">\n        <div class=\"header\">\n            <h1>Hooks æ—¥å¿—åˆ†æ</h1>\n            <p>ä¸Šä¼ å¹¶åˆ†æ Claude Hooks äº‹ä»¶æ—¥å¿—</p>\n        </div>\n\n        <!-- æ–‡ä»¶ä¸Šä¼ ç»„ä»¶ -->\n        <div class=\"upload-section\">\n            <div class=\"upload-card\">\n                <div class=\"upload-header\">\n                    <span>ğŸ“ é€‰æ‹© Hooks æ—¥å¿—æ–‡ä»¶</span>\n                </div>\n                <div class=\"upload-area\" id=\"upload-area\">\n                    <div class=\"upload-content\">\n                        <div class=\"upload-icon\">ğŸ“„</div>\n                        <p class=\"upload-text\">ç‚¹å‡»é€‰æ‹©æ–‡ä»¶æˆ–æ‹–æ‹½æ–‡ä»¶åˆ°æ­¤å¤„</p>\n                        <p class=\"upload-hint\">æ”¯æŒ .log .txt æ ¼å¼çš„æ—¥å¿—æ–‡ä»¶ï¼Œæ¯è¡Œä¸€ä¸ª JSON å¯¹è±¡ï¼Œæœ€å¤§50MB</p>\n                        <input type=\"file\" id=\"file-input\" accept=\".log,.txt\" style=\"display: none;\">\n                        <button class=\"upload-btn\" onclick=\"document.getElementById('file-input').click()\">é€‰æ‹©æ–‡ä»¶</button>\n                    </div>\n                </div>\n                <div class=\"file-info\" id=\"file-info\" style=\"display: none;\">\n                    <span class=\"file-name\" id=\"file-name\"></span>\n                    <button class=\"clear-btn\" onclick=\"clearFile()\">âœ•</button>\n                </div>\n            </div>\n        </div>\n\n        <div id=\"stats-section\" style=\"display: none;\">\n            <div class=\"stats-grid\">\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"total-hooks\">0</div>\n                    <div class=\"stat-label\">æ€»äº‹ä»¶æ•°</div>\n                    <div class=\"stat-description\">æ‰€æœ‰ Hooks äº‹ä»¶</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"user-prompts\">0</div>\n                    <div class=\"stat-label\">ç”¨æˆ·æç¤ºäº‹ä»¶</div>\n                    <div class=\"stat-description\">UserPromptSubmit</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"pre-tools\">0</div>\n                    <div class=\"stat-label\">å·¥å…·æ‰§è¡Œå‰äº‹ä»¶</div>\n                    <div class=\"stat-description\">PreToolUse</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"post-tools\">0</div>\n                    <div class=\"stat-label\">å·¥å…·æ‰§è¡Œåäº‹ä»¶</div>\n                    <div class=\"stat-description\">PostToolUse</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"notifications\">0</div>\n                    <div class=\"stat-label\">é€šçŸ¥äº‹ä»¶</div>\n                    <div class=\"stat-description\">Notification</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"stops\">0</div>\n                    <div class=\"stat-label\">åœæ­¢äº‹ä»¶</div>\n                    <div class=\"stat-description\">Stop</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"subagent-stops\">0</div>\n                    <div class=\"stat-label\">å­ä»£ç†åœæ­¢äº‹ä»¶</div>\n                    <div class=\"stat-description\">SubagentStop</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"pre-compacts\">0</div>\n                    <div class=\"stat-label\">å‹ç¼©å‰äº‹ä»¶</div>\n                    <div class=\"stat-description\">PreCompact</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"session-starts\">0</div>\n                    <div class=\"stat-label\">ä¼šè¯å¼€å§‹äº‹ä»¶</div>\n                    <div class=\"stat-description\">SessionStart</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"session-ends\">0</div>\n                    <div class=\"stat-label\">ä¼šè¯ç»“æŸäº‹ä»¶</div>\n                    <div class=\"stat-description\">SessionEnd</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"transcript-count\">0</div>\n                    <div class=\"stat-label\">åŒ…å«è½¬å½•è·¯å¾„äº‹ä»¶</div>\n                    <div class=\"stat-description\">åŒ…å« transcript_path</div>\n                </div>\n            </div>\n\n            <div class=\"filter-section\">\n                <div class=\"filter-controls\">\n                    <div class=\"filter-group\">\n                        <label class=\"filter-label\">äº‹ä»¶ç±»å‹ï¼š</label>\n                        <select class=\"filter-select\" id=\"event-filter\">\n                            <option value=\"\">å…¨éƒ¨</option>\n                            <option value=\"UserPromptSubmit\">UserPromptSubmit</option>\n                            <option value=\"PreToolUse\">PreToolUse</option>\n                            <option value=\"PostToolUse\">PostToolUse</option>\n                            <option value=\"Notification\">Notification</option>\n                            <option value=\"Stop\">Stop</option>\n                            <option value=\"SubagentStop\">SubagentStop</option>\n                            <option value=\"PreCompact\">PreCompact</option>\n                            <option value=\"SessionStart\">SessionStart</option>\n                            <option value=\"SessionEnd\">SessionEnd</option>\n                        </select>\n                    </div>\n                    <div class=\"filter-group\">\n                        <label class=\"filter-label\">æœç´¢ï¼š</label>\n                        <input type=\"text\" class=\"search-input\" id=\"search-input\" placeholder=\"æœç´¢äº‹ä»¶å†…å®¹...\">\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <div id=\"hooks-container\" class=\"hooks-container\"></div>\n\n        <div id=\"no-data\" class=\"no-data\">\n            è¯·ä¸Šä¼  hooks.log æ–‡ä»¶å¼€å§‹åˆ†æ\n        </div>\n\n        <div id=\"error-message\" class=\"error-message\" style=\"display: none;\"></div>\n    </div>\n\n    <script>\n        let hooksData = [];\n        let filteredData = [];\n\n        // æ–‡ä»¶ä¸Šä¼ ç›¸å…³å‡½æ•°\n        function setupFileUpload() {\n            const uploadArea = document.getElementById('upload-area');\n            const fileInput = document.getElementById('file-input');\n\n            // ç‚¹å‡»ä¸Šä¼ åŒºåŸŸè§¦å‘æ–‡ä»¶é€‰æ‹©ï¼ˆä½†ä¸åŒ…æ‹¬æŒ‰é’®ï¼‰\n            uploadArea.addEventListener('click', function(event) {\n                // å¦‚æœç‚¹å‡»çš„æ˜¯æŒ‰é’®ï¼Œä¸å¤„ç†\n                if (event.target.tagName === 'BUTTON' || event.target.closest('button')) {\n                    return;\n                }\n                fileInput.click();\n            });\n\n            // æ–‡ä»¶é€‰æ‹©äº‹ä»¶\n            fileInput.addEventListener('change', handleFileSelect);\n\n            // æ‹–æ‹½äº‹ä»¶\n            uploadArea.addEventListener('dragover', handleDragOver);\n            uploadArea.addEventListener('dragleave', handleDragLeave);\n            uploadArea.addEventListener('drop', handleDrop);\n        }\n\n\n        function handleDragOver(e) {\n            e.preventDefault();\n            e.currentTarget.classList.add('dragover');\n        }\n\n        function handleDragLeave(e) {\n            e.preventDefault();\n            e.currentTarget.classList.remove('dragover');\n        }\n\n        function handleDrop(e) {\n            e.preventDefault();\n            e.currentTarget.classList.remove('dragover');\n            handleFiles(e.dataTransfer.files);\n        }\n\n        function handleFileSelect(event) {\n            const files = event.target.files;\n            handleFiles(files);\n        }\n\n        function handleFiles(files) {\n            if (files.length === 0) return;\n\n            const file = files[0];\n\n            // æ£€æŸ¥æ–‡ä»¶ç±»å‹\n            const validTypes = ['.log', '.txt'];\n            const fileExtension = file.name.substring(file.name.lastIndexOf('.')).toLowerCase();\n\n            if (!validTypes.includes(fileExtension)) {\n                showErrorMessage('è¯·é€‰æ‹© .log æˆ– .txt æ ¼å¼çš„æ—¥å¿—æ–‡ä»¶');\n                return;\n            }\n\n            // æ£€æŸ¥æ–‡ä»¶å¤§å° (é™åˆ¶ä¸º50MB)\n            if (file.size > 50 * 1024 * 1024) {\n                showErrorMessage('æ–‡ä»¶å¤§å°ä¸èƒ½è¶…è¿‡50MB');\n                return;\n            }\n\n            // æ˜¾ç¤ºæ–‡ä»¶ä¿¡æ¯\n            showFileInfo(file);\n\n            // è¯»å–æ–‡ä»¶å†…å®¹\n            const reader = new FileReader();\n            reader.onload = function(e) {\n                try {\n                    const content = e.target.result;\n                    console.log('æ–‡ä»¶è¯»å–æˆåŠŸï¼Œå†…å®¹é•¿åº¦:', content.length);\n                    console.log('æ–‡ä»¶å†…å®¹å‰100å­—ç¬¦:', content.substring(0, 100));\n\n                    if (!content || content.trim().length === 0) {\n                        showErrorMessage('æ–‡ä»¶å†…å®¹ä¸ºç©º');\n                        return;\n                    }\n\n                    parseHooksData(content);\n                    showSuccessMessage(`æˆåŠŸåŠ è½½æ–‡ä»¶: ${file.name}`);\n                } catch (error) {\n                    console.error('æ–‡ä»¶è§£æå¼‚å¸¸:', error);\n                    showErrorMessage('æ–‡ä»¶è§£æå¤±è´¥ï¼š' + error.message);\n                }\n            };\n            reader.onerror = function(error) {\n                console.error('æ–‡ä»¶è¯»å–å¤±è´¥:', error);\n                showErrorMessage('æ–‡ä»¶è¯»å–å¤±è´¥');\n            };\n            reader.readAsText(file);\n        }\n\n        function showFileInfo(file) {\n            const fileInfo = document.getElementById('file-info');\n            const fileName = document.getElementById('file-name');\n            const uploadArea = document.getElementById('upload-area');\n\n            fileName.textContent = file.name;\n            fileInfo.style.display = 'flex';\n            uploadArea.style.display = 'none';\n        }\n\n        function clearFile() {\n            const fileInfo = document.getElementById('file-info');\n            const uploadArea = document.getElementById('upload-area');\n            const fileInput = document.getElementById('file-input');\n\n            fileInfo.style.display = 'none';\n            uploadArea.style.display = 'block';\n\n            // æ¸…ç©ºæ–‡ä»¶è¾“å…¥æ¡†çš„å€¼\n            fileInput.value = '';\n\n            // æ¸…ç©ºæ•°æ®\n            hooksData = [];\n            filteredData = [];\n\n            // æ¸…ç©ºæ˜¾ç¤ºåŒºåŸŸ\n            document.getElementById('hooks-container').innerHTML = '';\n            document.getElementById('no-data').style.display = 'block';\n            document.getElementById('stats-section').style.display = 'none';\n\n            // æ˜¾ç¤ºæç¤º\n            showSuccessMessage('å·²æ¸…ç©ºæ–‡ä»¶ï¼Œè¯·é‡æ–°é€‰æ‹©æ—¥å¿—æ–‡ä»¶');\n        }\n\n        function showSuccessMessage(message) {\n            showMessage(message, 'success');\n        }\n\n        function showErrorMessage(message) {\n            showMessage(message, 'error');\n        }\n\n        function showMessage(message, type) {\n            // ç§»é™¤ä¹‹å‰çš„æ¶ˆæ¯\n            const existingMessages = document.querySelectorAll('.upload-message');\n            existingMessages.forEach(msg => msg.remove());\n\n            const messageClass = type === 'success' ? 'upload-success' : 'upload-error';\n            const messageDiv = document.createElement('div');\n            messageDiv.className = `upload-message ${messageClass}`;\n            messageDiv.textContent = message;\n\n            document.querySelector('.upload-card').appendChild(messageDiv);\n\n            // 3ç§’åè‡ªåŠ¨æ¶ˆå¤±\n            setTimeout(() => {\n                messageDiv.style.opacity = '0';\n                setTimeout(() => {\n                    if (messageDiv.parentNode) {\n                        messageDiv.parentNode.removeChild(messageDiv);\n                    }\n                }, 300);\n            }, 3000);\n        }\n\n        // è§£æ hooks æ•°æ®\n        function parseHooksData(content) {\n            console.log('å¼€å§‹è§£æ hooks æ•°æ®ï¼Œå†…å®¹é•¿åº¦:', content.length);\n\n            hooksData = [];\n            const lines = content.split('\\n').filter(line => line.trim());\n            console.log('åˆ†å‰²åçš„è¡Œæ•°:', lines.length);\n\n            for (let i = 0; i < lines.length; i++) {\n                const line = lines[i];\n                try {\n                    const hookData = JSON.parse(line);\n                    hooksData.push(hookData);\n                    console.log(`æˆåŠŸè§£æç¬¬ ${i + 1} è¡Œï¼Œäº‹ä»¶ç±»å‹:`, hookData.event);\n                } catch (error) {\n                    console.error(`è§£æç¬¬ ${i + 1} è¡Œå¤±è´¥:`, error.message);\n                    console.error('é—®é¢˜è¡Œçš„å†…å®¹:', line.substring(0, 100) + (line.length > 100 ? '...' : ''));\n                }\n            }\n\n            console.log('è§£æå®Œæˆï¼Œæ€»å…±è§£æåˆ°', hooksData.length, 'ä¸ªæœ‰æ•ˆäº‹ä»¶');\n\n            if (hooksData.length === 0) {\n                showErrorMessage('æœªæ‰¾åˆ°æœ‰æ•ˆçš„ hooks æ•°æ®ã€‚è¯·ç¡®ä¿æ–‡ä»¶æ ¼å¼æ­£ç¡®ï¼Œæ¯è¡Œåº”è¯¥æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„JSONå¯¹è±¡ã€‚');\n                console.error('è§£æå¤±è´¥ï¼Œæ²¡æœ‰æ‰¾åˆ°æœ‰æ•ˆçš„hooksæ•°æ®');\n                return;\n            }\n\n            filteredData = [...hooksData];\n            console.log('å‡†å¤‡æ˜¾ç¤ºæ•°æ®ï¼Œè¿‡æ»¤åçš„äº‹ä»¶æ•°é‡:', filteredData.length);\n            displayData();\n        }\n\n        // æ˜¾ç¤ºæ•°æ®\n        function displayData() {\n            document.getElementById('no-data').style.display = 'none';\n            document.getElementById('error-message').style.display = 'none';\n            document.getElementById('stats-section').style.display = 'block';\n\n            updateStatistics();\n            renderHooks();\n        }\n\n        // æ›´æ–°ç»Ÿè®¡ä¿¡æ¯\n        function updateStatistics() {\n            const stats = {\n                total: filteredData.length,\n                userPrompts: filteredData.filter(h => h.event === 'UserPromptSubmit').length,\n                preTools: filteredData.filter(h => h.event === 'PreToolUse').length,\n                postTools: filteredData.filter(h => h.event === 'PostToolUse').length,\n                notifications: filteredData.filter(h => h.event === 'Notification').length,\n                stops: filteredData.filter(h => h.event === 'Stop').length,\n                subagentStops: filteredData.filter(h => h.event === 'SubagentStop').length,\n                preCompacts: filteredData.filter(h => h.event === 'PreCompact').length,\n                sessionStarts: filteredData.filter(h => h.event === 'SessionStart').length,\n                sessionEnds: filteredData.filter(h => h.event === 'SessionEnd').length,\n                transcriptCount: filteredData.filter(h => hasTranscriptPath(h)).length\n            };\n\n            document.getElementById('total-hooks').textContent = stats.total;\n            document.getElementById('user-prompts').textContent = stats.userPrompts;\n            document.getElementById('pre-tools').textContent = stats.preTools;\n            document.getElementById('post-tools').textContent = stats.postTools;\n            document.getElementById('notifications').textContent = stats.notifications;\n            document.getElementById('stops').textContent = stats.stops;\n            document.getElementById('subagent-stops').textContent = stats.subagentStops;\n            document.getElementById('pre-compacts').textContent = stats.preCompacts;\n            document.getElementById('session-starts').textContent = stats.sessionStarts;\n            document.getElementById('session-ends').textContent = stats.sessionEnds;\n            document.getElementById('transcript-count').textContent = stats.transcriptCount;\n        }\n\n        // æ¸²æŸ“ hooks\n        function renderHooks() {\n            const container = document.getElementById('hooks-container');\n            container.innerHTML = '';\n\n            filteredData.forEach((hook, index) => {\n                const hookElement = createHookElement(hook, index);\n                container.appendChild(hookElement);\n            });\n\n            // æ·»åŠ åŠ¨ç”»\n            const elements = container.querySelectorAll('.hook-item');\n            elements.forEach((el, i) => {\n                el.style.opacity = '0';\n                el.style.transform = 'translateY(20px)';\n                setTimeout(() => {\n                    el.style.transition = 'opacity 0.3s ease, transform 0.3s ease';\n                    el.style.opacity = '1';\n                    el.style.transform = 'translateY(0)';\n                }, i * 50);\n            });\n        }\n\n        // æ£€æŸ¥æ˜¯å¦åŒ…å« transcript_path å­—æ®µ\n        function hasTranscriptPath(hook) {\n            if (!hook.payload) return false;\n\n            // æ£€æŸ¥ payload ä¸­æ˜¯å¦ç›´æ¥åŒ…å« transcript_path\n            if (hook.payload.transcript_path) return true;\n\n            // æ·±åº¦æœç´¢ payload å¯¹è±¡ä¸­çš„ transcript_path å­—æ®µ\n            return searchInObject(hook.payload, 'transcript_path');\n        }\n\n        // åœ¨å¯¹è±¡ä¸­é€’å½’æœç´¢æŒ‡å®šå­—æ®µ\n        function searchInObject(obj, fieldName) {\n            if (!obj || typeof obj !== 'object') return false;\n\n            for (const key in obj) {\n                if (key === fieldName) return true;\n\n                if (typeof obj[key] === 'object' && obj[key] !== null) {\n                    if (searchInObject(obj[key], fieldName)) return true;\n                }\n            }\n\n            return false;\n        }\n\n        // è·å– transcript_path çš„å€¼\n        function getTranscriptPath(hook) {\n            if (!hook.payload) return null;\n\n            // æ£€æŸ¥ payload ä¸­æ˜¯å¦ç›´æ¥åŒ…å« transcript_path\n            if (hook.payload.transcript_path) return hook.payload.transcript_path;\n\n            // æ·±åº¦æœç´¢å¹¶è¿”å› transcript_path çš„å€¼\n            return findValueInObject(hook.payload, 'transcript_path');\n        }\n\n        // åœ¨å¯¹è±¡ä¸­é€’å½’æŸ¥æ‰¾æŒ‡å®šå­—æ®µçš„å€¼\n        function findValueInObject(obj, fieldName) {\n            if (!obj || typeof obj !== 'object') return null;\n\n            for (const key in obj) {\n                if (key === fieldName) return obj[key];\n\n                if (typeof obj[key] === 'object' && obj[key] !== null) {\n                    const found = findValueInObject(obj[key], fieldName);\n                    if (found !== null) return found;\n                }\n            }\n\n            return null;\n        }\n\n        // åˆ›å»º hook å…ƒç´ \n        function createHookElement(hook, index) {\n            const div = document.createElement('div');\n            div.className = 'hook-item';\n\n            const eventClass = getEventClass(hook.event);\n            const formattedTime = formatTimestamp(hook.ts);\n            const eventDescription = getEventDescription(hook.event, hook.phase);\n            const hasTranscript = hasTranscriptPath(hook);\n            const transcriptPath = getTranscriptPath(hook);\n\n            div.innerHTML = `\n                <div class=\"hook-header\">\n                    <div class=\"hook-event\">\n                        <span class=\"event-badge ${eventClass}\">${hook.event}</span>\n                        ${hasTranscript ? '<span class=\"has-transcript-badge\">åŒ…å«è½¬å½•è·¯å¾„</span>' : ''}\n                    </div>\n                    <div class=\"hook-meta\">\n                        <div class=\"hook-timestamp\">${formattedTime}</div>\n                    </div>\n                </div>\n                <div class=\"hook-message\">${hook.message}</div>\n                <div class=\"hook-description\">${hook.description || eventDescription}</div>\n                ${hasTranscript && transcriptPath ? `\n                <div class=\"transcript-path\">\n                    <div class=\"transcript-path-label\">ğŸ“„ è½¬å½•è·¯å¾„ (transcript_path):</div>\n                    <div class=\"transcript-path-value\">${escapeHtml(transcriptPath)}</div>\n                    <div class=\"transcript-actions\">\n                        <button class=\"transcript-btn copy\" onclick=\"copyTranscriptPath('${escapeHtml(transcriptPath)}')\" title=\"å¤åˆ¶è·¯å¾„\">\n                            ğŸ“‹ å¤åˆ¶\n                        </button>\n                        ${isUrl(transcriptPath) ?\n                            `<button class=\"transcript-btn open\" onclick=\"openTranscriptUrl('${escapeHtml(transcriptPath)}')\" title=\"åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€\">\n                                ğŸ”— æ‰“å¼€é“¾æ¥\n                            </button>` :\n                            `<button class=\"transcript-btn open\" onclick=\"tryOpenTranscriptFile('${escapeHtml(transcriptPath)}')\" title=\"å°è¯•æ‰“å¼€æ–‡ä»¶\">\n                                ğŸ“‚ å°è¯•æ‰“å¼€\n                            </button>`\n                        }\n                    </div>\n                </div>\n                ` : ''}\n                <div class=\"hook-details\">\n                    <div class=\"part-card\">\n                        <div class=\"part-header\" onclick=\"toggleDetail('payload-${index}')\">\n                            <span>Payload</span>\n                            <span class=\"toggle-icon\" id=\"icon-payload-${index}\">â–¼</span>\n                        </div>\n                        <div class=\"part-content hidden\" id=\"payload-${index}\">\n                            ${formatJson(hook.payload)}\n                        </div>\n                    </div>\n                </div>\n            `;\n\n            return div;\n        }\n\n        // è·å–äº‹ä»¶æè¿°\n        function getEventDescription(event, phase) {\n            switch (event) {\n                case 'PreToolUse':\n                    return 'å·¥å…·æ‰§è¡Œå‰è§¦å‘ï¼Œå¯åŸºäºå‚æ•°é˜»æ­¢æˆ–è°ƒæ•´è°ƒç”¨ã€‚';\n                case 'PostToolUse':\n                    return 'å·¥å…·æˆåŠŸæ‰§è¡Œåè§¦å‘ï¼Œå¸¸ç”¨äºæ ¼å¼åŒ–ã€æ ¡éªŒæˆ–è®°å½•ç»“æœã€‚';\n                case 'UserPromptSubmit':\n                    return 'ç”¨æˆ·æäº¤æç¤ºå‰è§¦å‘ï¼Œå¯è¿›è¡Œæç¤ºæ ¡éªŒæˆ–å¢å¼ºã€‚';\n                case 'Notification':\n                    return 'å½“ç³»ç»Ÿå‘é€é€šçŸ¥ï¼ˆéœ€æˆæƒæˆ–ç­‰å¾…è¾“å…¥ï¼‰æ—¶è§¦å‘ã€‚';\n                case 'Stop':\n                    return 'ä¸»ä»£ç†å®Œæˆå“åº”æ—¶è§¦å‘ï¼ˆç”¨æˆ·ä¸­æ–­ä¸è§¦å‘ï¼‰ã€‚';\n                case 'SubagentStop':\n                    return 'å­ä»£ç†ä»»åŠ¡å®Œæˆæ—¶è§¦å‘ï¼Œç”¨äºè®°å½•å­ä»»åŠ¡ç»“æŸã€‚';\n                case 'PreCompact':\n                    return phase === 'manual'\n                        ? 'æ‰‹åŠ¨å‹ç¼©å‰è§¦å‘ï¼Œç”¨äºè®°å½•æˆ–å‡†å¤‡å‹ç¼©ã€‚'\n                        : 'è‡ªåŠ¨å‹ç¼©å‰è§¦å‘ï¼ˆä¸Šä¸‹æ–‡æ¥è¿‘ä¸Šé™ï¼‰ï¼Œç”¨äºè®°å½•æˆ–å‡†å¤‡å‹ç¼©ã€‚';\n                case 'SessionStart':\n                    switch (phase) {\n                        case 'startup':\n                            return 'æ–°ä¼šè¯å¯åŠ¨æ—¶è§¦å‘ï¼Œç”¨äºåŠ è½½ä¸Šä¸‹æ–‡æˆ–è®¾ç½®ç¯å¢ƒã€‚';\n                        case 'resume':\n                            return 'æ¢å¤ä¼šè¯æ—¶è§¦å‘ï¼Œç”¨äºç»§ç»­å…ˆå‰ä¸Šä¸‹æ–‡ã€‚';\n                        case 'clear':\n                            return 'æ¸…ç©ºä¼šè¯åè§¦å‘ï¼Œç”¨äºé‡ç½®ç¯å¢ƒä¸ä¸Šä¸‹æ–‡ã€‚';\n                        case 'compact':\n                            return 'å› å‹ç¼©æ“ä½œè§¦å‘çš„ä¼šè¯å¯åŠ¨ï¼Œç”¨äºç»´æŒä¸Šä¸‹æ–‡ã€‚';\n                        default:\n                            return 'ä¼šè¯å¯åŠ¨ç›¸å…³äº‹ä»¶ï¼Œåˆå§‹åŒ–æˆ–æ¢å¤ä¸Šä¸‹æ–‡ã€‚';\n                    }\n                case 'SessionEnd':\n                    return 'ä¼šè¯ç»“æŸæ—¶è§¦å‘ï¼Œå¸¸ç”¨äºæ”¶å°¾ä¸æ¸…ç†ã€‚';\n                default:\n                    return 'æœªçŸ¥äº‹ä»¶ã€‚';\n            }\n        }\n\n        // è·å–äº‹ä»¶æ ·å¼ç±»\n        function getEventClass(event) {\n            switch (event) {\n                case 'UserPromptSubmit': return 'event-userprompt';\n                case 'PreToolUse': return 'event-pretool';\n                case 'PostToolUse': return 'event-posttool';\n                case 'Notification': return 'event-notification';\n                case 'Stop': return 'event-stop';\n                case 'SubagentStop': return 'event-subagent-stop';\n                case 'PreCompact': return 'event-pre-compact';\n                case 'SessionStart': return 'event-session-start';\n                case 'SessionEnd': return 'event-session-end';\n                default: return 'event-default';\n            }\n        }\n\n        // æ ¼å¼åŒ–æ—¶é—´æˆ³\n        function formatTimestamp(ts) {\n            const date = new Date(ts);\n            return date.toLocaleString('zh-CN');\n        }\n\n        // æ ¼å¼åŒ– JSON\n        function formatJson(obj, indent = 0) {\n            if (!obj) return '';\n\n            try {\n                const spaces = '  '.repeat(indent);\n                let result = '';\n\n                if (Array.isArray(obj)) {\n                    result += '[\\n';\n                    obj.forEach((item, index) => {\n                        result += spaces + '  ';\n                        if (typeof item === 'object' && item !== null) {\n                            result += formatJson(item, indent + 1);\n                        } else {\n                            result += formatJsonValue(item);\n                        }\n                        if (index < obj.length - 1) result += ',';\n                        result += '\\n';\n                    });\n                    result += spaces + ']';\n                } else if (typeof obj === 'object' && obj !== null) {\n                    result += '{\\n';\n                    const keys = Object.keys(obj);\n                    keys.forEach((key, index) => {\n                        result += spaces + '  ';\n                        result += `<span class=\"json-key\">\"${escapeHtml(key)}\"</span>: `;\n\n                        if (typeof obj[key] === 'object' && obj[key] !== null) {\n                            result += formatJson(obj[key], indent + 1);\n                        } else {\n                            result += formatJsonValue(obj[key]);\n                        }\n\n                        if (index < keys.length - 1) result += ',';\n                        result += '\\n';\n                    });\n                    result += spaces + '}';\n                } else {\n                    result += formatJsonValue(obj);\n                }\n\n                return result;\n            } catch (error) {\n                return escapeHtml(JSON.stringify(obj));\n            }\n        }\n\n        // æ ¼å¼åŒ– JSON å€¼\n        function formatJsonValue(value) {\n            if (typeof value === 'string') {\n                if (value.startsWith('http://') || value.startsWith('https://')) {\n                    return `<span class=\"json-url\" onclick=\"window.open('${escapeHtml(value)}', '_blank')\">\"${escapeHtml(value)}\"</span>`;\n                }\n                return `<span class=\"json-string\">\"${escapeHtml(value)}\"</span>`;\n            } else if (typeof value === 'number') {\n                return `<span class=\"json-number\">${value}</span>`;\n            } else if (typeof value === 'boolean') {\n                return `<span class=\"json-boolean\">${value}</span>`;\n            } else if (value === null) {\n                return `<span class=\"json-null\">null</span>`;\n            } else {\n                return `<span style=\"color: #666;\">${value}</span>`;\n            }\n        }\n\n        // HTML è½¬ä¹‰\n        function escapeHtml(text) {\n            const div = document.createElement('div');\n            div.textContent = text;\n            return div.innerHTML;\n        }\n\n        // åˆ‡æ¢è¯¦æƒ…æ˜¾ç¤º\n        function toggleDetail(id) {\n            const content = document.getElementById(id);\n            const icon = document.getElementById('icon-' + id);\n\n            if (content.classList.contains('hidden')) {\n                content.classList.remove('hidden');\n                icon.classList.add('rotated');\n            } else {\n                content.classList.add('hidden');\n                icon.classList.remove('rotated');\n            }\n        }\n\n        // è¿‡æ»¤å’Œæœç´¢\n        document.getElementById('event-filter').addEventListener('change', applyFilters);\n        document.getElementById('search-input').addEventListener('input', applyFilters);\n\n        function applyFilters() {\n            const eventFilter = document.getElementById('event-filter').value;\n            const searchText = document.getElementById('search-input').value.toLowerCase();\n\n            filteredData = hooksData.filter(hook => {\n                const matchEvent = !eventFilter || hook.event === eventFilter;\n                const matchSearch = !searchText ||\n                    JSON.stringify(hook).toLowerCase().includes(searchText);\n\n                return matchEvent && matchSearch;\n            });\n\n            updateStatistics();\n            renderHooks();\n        }\n\n        // æ£€æŸ¥æ˜¯å¦ä¸º URL\n        function isUrl(text) {\n            try {\n                new URL(text);\n                return true;\n            } catch {\n                return false;\n            }\n        }\n\n        // å¤åˆ¶è½¬å½•è·¯å¾„åˆ°å‰ªè´´æ¿\n        async function copyTranscriptPath(path) {\n            try {\n                await navigator.clipboard.writeText(path);\n                showToast('è·¯å¾„å·²å¤åˆ¶åˆ°å‰ªè´´æ¿', 'success');\n            } catch (error) {\n                // é™çº§æ–¹æ¡ˆ\n                const textArea = document.createElement('textarea');\n                textArea.value = path;\n                document.body.appendChild(textArea);\n                textArea.select();\n                document.execCommand('copy');\n                document.body.removeChild(textArea);\n                showToast('è·¯å¾„å·²å¤åˆ¶åˆ°å‰ªè´´æ¿', 'success');\n            }\n        }\n\n        // æ‰“å¼€è½¬å½•é“¾æ¥ï¼ˆURLï¼‰\n        function openTranscriptUrl(url) {\n            window.open(url, '_blank');\n        }\n\n        // å°è¯•æ‰“å¼€æœ¬åœ°æ–‡ä»¶ï¼ˆé€šè¿‡æ–‡ä»¶é€‰æ‹©å™¨ï¼‰\n        function tryOpenTranscriptFile(path) {\n            // æ–¹æ¡ˆ1ï¼šå¤åˆ¶è·¯å¾„åˆ°å‰ªè´´æ¿\n            copyTranscriptPath(path);\n\n            // æ–¹æ¡ˆ2ï¼šå¦‚æœæ˜¯ç½‘ç»œé“¾æ¥ï¼Œç›´æ¥æ‰“å¼€\n            if (path.startsWith('http://') || path.startsWith('https://')) {\n                openTranscriptUrl(path);\n                return;\n            }\n\n            // æ–¹æ¡ˆ3ï¼šä½¿ç”¨æ–‡ä»¶é€‰æ‹©å™¨è®©ç”¨æˆ·é€‰æ‹©æœ¬åœ°æ–‡ä»¶\n            if (path.startsWith('file://')) {\n                // file:// åè®®ï¼Œæå–æ–‡ä»¶è·¯å¾„\n                const cleanPath = path.replace(/^file:\\/\\//, '');\n                showFileSelector(cleanPath);\n            } else {\n                // æœ¬åœ°æ–‡ä»¶è·¯å¾„\n                showFileSelector(path);\n            }\n        }\n\n        // æ˜¾ç¤ºæ–‡ä»¶é€‰æ‹©å™¨\n        function showFileSelector(expectedPath) {\n            const input = document.createElement('input');\n            input.type = 'file';\n            input.style.display = 'none';\n\n            // ä»è·¯å¾„ä¸­æå–æ–‡ä»¶å\n            const fileName = expectedPath.split(/[/\\\\]/).pop();\n\n            input.addEventListener('change', function(event) {\n                const file = event.target.files[0];\n                if (file) {\n                    if (file.name === fileName) {\n                        // æ–‡ä»¶ååŒ¹é…ï¼Œè¯»å–å¹¶æ˜¾ç¤ºæ–‡ä»¶å†…å®¹\n                        readAndDisplayFile(file);\n                    } else {\n                        showToast(`é€‰æ‹©çš„æ–‡ä»¶åä¸åŒ¹é…\\næœŸæœ›: ${fileName}\\nå®é™…: ${file.name}`, 'warning');\n                        // ä»ç„¶æ˜¾ç¤ºé€‰æ‹©çš„æ–‡ä»¶å†…å®¹\n                        readAndDisplayFile(file);\n                    }\n                }\n                // æ¸…ç†inputå…ƒç´ \n                document.body.removeChild(input);\n            });\n\n            document.body.appendChild(input);\n\n            // æ˜¾ç¤ºæç¤ºï¼Œç„¶åè§¦å‘æ–‡ä»¶é€‰æ‹©\n            showToast(`è¯·é€‰æ‹©æ–‡ä»¶: ${fileName}`, 'info');\n            setTimeout(() => {\n                input.click();\n            }, 500);\n        }\n\n        // è¯»å–å¹¶æ˜¾ç¤ºæ–‡ä»¶å†…å®¹\n        function readAndDisplayFile(file) {\n            const reader = new FileReader();\n            reader.onload = function(e) {\n                const content = e.target.result;\n\n                // åˆ›å»ºä¸€ä¸ªæ¨¡æ€çª—å£æ˜¾ç¤ºæ–‡ä»¶å†…å®¹\n                showFileModal(file.name, content);\n            };\n\n            reader.onerror = function() {\n                showToast('æ–‡ä»¶è¯»å–å¤±è´¥', 'error');\n            };\n\n            reader.readAsText(file);\n        }\n\n        // æ˜¾ç¤ºæ–‡ä»¶å†…å®¹çš„æ¨¡æ€çª—å£\n        function showFileModal(fileName, content) {\n            // åˆ›å»ºæ¨¡æ€èƒŒæ™¯\n            const modal = document.createElement('div');\n            modal.style.cssText = `\n                position: fixed;\n                top: 0;\n                left: 0;\n                width: 100%;\n                height: 100%;\n                background: rgba(0, 0, 0, 0.8);\n                z-index: 10000;\n                display: flex;\n                justify-content: center;\n                align-items: center;\n                animation: fadeIn 0.3s ease;\n            `;\n\n            // åˆ›å»ºæ¨¡æ€å†…å®¹\n            const modalContent = document.createElement('div');\n            modalContent.style.cssText = `\n                background: white;\n                border-radius: 12px;\n                width: 90%;\n                max-width: 800px;\n                max-height: 80vh;\n                display: flex;\n                flex-direction: column;\n                box-shadow: 0 20px 60px rgba(0,0,0,0.3);\n                animation: slideUp 0.3s ease;\n            `;\n\n            // åˆ›å»ºå¤´éƒ¨\n            const header = document.createElement('div');\n            header.style.cssText = `\n                padding: 20px;\n                border-bottom: 1px solid #e0e0e0;\n                display: flex;\n                justify-content: space-between;\n                align-items: center;\n                background: #f8f9fa;\n                border-radius: 12px 12px 0 0;\n            `;\n\n            const title = document.createElement('h3');\n            title.textContent = `ğŸ“„ ${fileName}`;\n            title.style.cssText = `\n                margin: 0;\n                color: #333;\n                font-size: 1.2rem;\n            `;\n\n            // åˆ›å»ºæ“ä½œæŒ‰é’®åŒºåŸŸ\n            const actions = document.createElement('div');\n            actions.style.cssText = `\n                display: flex;\n                gap: 10px;\n                align-items: center;\n            `;\n\n            const copyBtn = document.createElement('button');\n            copyBtn.textContent = 'ğŸ“‹ å¤åˆ¶å†…å®¹';\n            copyBtn.style.cssText = `\n                background: #28a745;\n                color: white;\n                border: none;\n                padding: 6px 12px;\n                border-radius: 4px;\n                font-size: 0.8rem;\n                cursor: pointer;\n                transition: background 0.3s ease;\n            `;\n            copyBtn.onmouseover = () => copyBtn.style.background = '#218838';\n            copyBtn.onmouseout = () => copyBtn.style.background = '#28a745';\n\n            const closeBtn = document.createElement('button');\n            closeBtn.textContent = 'âœ•';\n            closeBtn.style.cssText = `\n                background: none;\n                border: none;\n                font-size: 1.5rem;\n                cursor: pointer;\n                color: #666;\n                padding: 5px;\n                border-radius: 50%;\n                width: 32px;\n                height: 32px;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n            `;\n            closeBtn.onmouseover = () => closeBtn.style.background = '#e0e0e0';\n            closeBtn.onmouseout = () => closeBtn.style.background = 'none';\n\n            // æ·»åŠ å¤åˆ¶åŠŸèƒ½\n            copyBtn.onclick = async () => {\n                try {\n                    await navigator.clipboard.writeText(content);\n                    showToast('æ–‡ä»¶å†…å®¹å·²å¤åˆ¶åˆ°å‰ªè´´æ¿', 'success');\n                } catch (error) {\n                    // é™çº§æ–¹æ¡ˆ\n                    const textArea = document.createElement('textarea');\n                    textArea.value = content;\n                    document.body.appendChild(textArea);\n                    textArea.select();\n                    document.execCommand('copy');\n                    document.body.removeChild(textArea);\n                    showToast('æ–‡ä»¶å†…å®¹å·²å¤åˆ¶åˆ°å‰ªè´´æ¿', 'success');\n                }\n            };\n\n            // åˆ›å»ºå†…å®¹åŒºåŸŸ\n            const contentArea = document.createElement('div');\n            contentArea.style.cssText = `\n                padding: 20px;\n                overflow-y: auto;\n                flex: 1;\n                font-family: 'Courier New', monospace;\n                font-size: 0.9rem;\n                line-height: 1.5;\n                background: #1a1a1a;\n                color: #ffffff;\n                white-space: pre-wrap;\n                border-radius: 0 0 12px 12px;\n                max-height: 60vh;\n            `;\n\n            // è®¾ç½®å†…å®¹\n            contentArea.textContent = content;\n\n            // ç»„è£…æ¨¡æ€çª—å£\n            actions.appendChild(copyBtn);\n            actions.appendChild(closeBtn);\n            header.appendChild(title);\n            header.appendChild(actions);\n            modalContent.appendChild(header);\n            modalContent.appendChild(contentArea);\n            modal.appendChild(modalContent);\n\n            // æ·»åŠ å…³é—­äº‹ä»¶\n            closeBtn.onclick = () => document.body.removeChild(modal);\n            modal.onclick = (e) => {\n                if (e.target === modal) {\n                    document.body.removeChild(modal);\n                }\n            };\n\n            // æ·»åŠ é”®ç›˜æ”¯æŒ (ESC å…³é—­)\n            const keyHandler = (e) => {\n                if (e.key === 'Escape') {\n                    document.body.removeChild(modal);\n                    document.removeEventListener('keydown', keyHandler);\n                }\n            };\n            document.addEventListener('keydown', keyHandler);\n\n            // æ¨¡æ€çª—å£å…³é—­æ—¶æ¸…ç†äº‹ä»¶ç›‘å¬å™¨\n            const cleanup = () => {\n                document.removeEventListener('keydown', keyHandler);\n                if (document.body.contains(modal)) {\n                    document.body.removeChild(modal);\n                }\n            };\n            closeBtn.onclick = cleanup;\n            modal.onclick = (e) => {\n                if (e.target === modal) {\n                    cleanup();\n                }\n            };\n\n            // æ·»åŠ åˆ°é¡µé¢\n            document.body.appendChild(modal);\n\n            // æ·»åŠ åŠ¨ç”»æ ·å¼\n            if (!document.getElementById('modal-animations')) {\n                const style = document.createElement('style');\n                style.id = 'modal-animations';\n                style.textContent = `\n                    @keyframes fadeIn {\n                        from { opacity: 0; }\n                        to { opacity: 1; }\n                    }\n                    @keyframes slideUp {\n                        from {\n                            opacity: 0;\n                            transform: translateY(50px);\n                        }\n                        to {\n                            opacity: 1;\n                            transform: translateY(0);\n                        }\n                    }\n                `;\n                document.head.appendChild(style);\n            }\n        }\n\n        // æ˜¾ç¤ºæç¤ºä¿¡æ¯\n        function showToast(message, type = 'info') {\n            const toast = document.createElement('div');\n            toast.style.cssText = `\n                position: fixed;\n                top: 20px;\n                right: 20px;\n                background: ${type === 'success' ? '#28a745' : type === 'warning' ? '#ffc107' : type === 'error' ? '#dc3545' : '#007bff'};\n                color: white;\n                padding: 12px 16px;\n                border-radius: 6px;\n                font-size: 0.9rem;\n                z-index: 10000;\n                max-width: 400px;\n                word-wrap: break-word;\n                box-shadow: 0 4px 12px rgba(0,0,0,0.15);\n                animation: slideInRight 0.3s ease;\n            `;\n\n            toast.textContent = message;\n            document.body.appendChild(toast);\n\n            // 3ç§’åè‡ªåŠ¨æ¶ˆå¤±\n            setTimeout(() => {\n                toast.style.animation = 'slideOutRight 0.3s ease';\n                setTimeout(() => {\n                    if (toast.parentNode) {\n                        document.body.removeChild(toast);\n                    }\n                }, 300);\n            }, 3000);\n        }\n\n        // æ·»åŠ åŠ¨ç”»æ ·å¼\n        const style = document.createElement('style');\n        style.textContent = `\n            @keyframes slideInRight {\n                from {\n                    transform: translateX(100%);\n                    opacity: 0;\n                }\n                to {\n                    transform: translateX(0);\n                    opacity: 1;\n                }\n            }\n\n            @keyframes slideOutRight {\n                from {\n                    transform: translateX(0);\n                    opacity: 1;\n                }\n                to {\n                    transform: translateX(100%);\n                    opacity: 0;\n                }\n            }\n        `;\n        document.head.appendChild(style);\n\n        // æ ¼å¼åŒ–æ–‡ä»¶å¤§å°\n        function formatFileSize(bytes) {\n            if (bytes === 0) return '0 Bytes';\n            const k = 1024;\n            const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n            const i = Math.floor(Math.log(bytes) / Math.log(k));\n            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n        }\n\n        // é¡µé¢åŠ è½½æ—¶æ‰§è¡Œ\n        document.addEventListener('DOMContentLoaded', function() {\n            // æ·»åŠ åˆå§‹åŠ è½½åŠ¨ç”»\n            const cards = document.querySelectorAll('.stat-card, .upload-card');\n            cards.forEach((card, index) => {\n                card.style.opacity = '0';\n                card.style.transform = 'translateY(20px)';\n                setTimeout(() => {\n                    card.style.transition = 'opacity 0.5s ease, transform 0.5s ease';\n                    card.style.opacity = '1';\n                    card.style.transform = 'translateY(0)';\n                }, index * 100);\n            });\n\n            // è®¾ç½®æ–‡ä»¶ä¸Šä¼ \n            setupFileUpload();\n        });\n\n            </script>\n</body>\n</html>","structuredPatch":[{"oldStart":1013,"oldLines":7,"newStart":1013,"newLines":7,"lines":["                     <div class=\"transcript-path-label\">ğŸ“„ è½¬å½•è·¯å¾„ (transcript_path):</div>","                     <div class=\"transcript-path-value\">${escapeHtml(transcriptPath)}</div>","                     <div class=\"transcript-actions\">","-                        <button class=\"transcript-btn copy\" onclick=\"copyTranscriptPath('${escapeHtml(transcriptPath)}')\" title=\"å¤åˆ¶è·¯å¾„\">","+                        <button class=\"transcript-btn copy\" onclick=\"copyTranscriptPath('${transcriptPath.replace(/\\\\/g, '\\\\\\\\').replace(/'/g, \"\\\\'\")}')\" title=\"å¤åˆ¶è·¯å¾„\">","                             ğŸ“‹ å¤åˆ¶","                         </button>","                         ${isUrl(transcriptPath) ?"]}],"userModified":false,"replaceAll":false}}}
{"ts":"2025-11-05T02:41:01.286Z","event":"PreToolUse","phase":"","message":"PreToolUseäº‹ä»¶æ­£åœ¨æ‰§è¡Œ","description":"å·¥å…·æ‰§è¡Œå‰è§¦å‘ï¼Œå¯åŸºäºå‚æ•°é˜»æ­¢æˆ–è°ƒæ•´è°ƒç”¨ã€‚","doc_url":"https://docs.claude.com/zh-CN/docs/claude-code/hooks#pretooluse","payload":{"session_id":"c7c21516-7e1e-49b2-8ae5-4e1bb98e9692","transcript_path":"C:\\Users\\WTCL\\.claude\\projects\\i--claude-code-proxy\\c7c21516-7e1e-49b2-8ae5-4e1bb98e9692.jsonl","cwd":"i:\\claude-code-proxy","permission_mode":"acceptEdits","hook_event_name":"PreToolUse","tool_name":"Edit","tool_input":{"file_path":"i:\\claude-code-proxy\\analyze\\hooks.html","old_string":"  ${isUrl(transcriptPath) ?\n                            `<button class=\"transcript-btn open\" onclick=\"openTranscriptUrl('${escapeHtml(transcriptPath)}')\" title=\"åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€\">\n                                ğŸ”— æ‰“å¼€é“¾æ¥\n                            </button>` :\n                            `<button class=\"transcript-btn open\" onclick=\"tryOpenTranscriptFile('${escapeHtml(transcriptPath)}')\" title=\"å°è¯•æ‰“å¼€æ–‡ä»¶\">\n                                ğŸ“‚ å°è¯•æ‰“å¼€\n                            </button>`\n                        }","new_string":"  ${isUrl(transcriptPath) ?\n                            `<button class=\"transcript-btn open\" onclick=\"openTranscriptUrl('${transcriptPath.replace(/\\\\/g, '\\\\\\\\').replace(/'/g, \"\\\\'\")}')\" title=\"åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€\">\n                                ğŸ”— æ‰“å¼€é“¾æ¥\n                            </button>` :\n                            `<button class=\"transcript-btn open\" onclick=\"tryOpenTranscriptFile('${transcriptPath.replace(/\\\\/g, '\\\\\\\\').replace(/'/g, \"\\\\'\")}')\" title=\"å°è¯•æ‰“å¼€æ–‡ä»¶\">\n                                ğŸ“‚ å°è¯•æ‰“å¼€\n                            </button>`\n                        }"}}}
{"ts":"2025-11-05T02:41:02.994Z","event":"PostToolUse","phase":"","message":"PostToolUseäº‹ä»¶æ­£åœ¨æ‰§è¡Œ","description":"å·¥å…·æˆåŠŸæ‰§è¡Œåè§¦å‘ï¼Œå¸¸ç”¨äºæ ¼å¼åŒ–ã€æ ¡éªŒæˆ–è®°å½•ç»“æœã€‚","doc_url":"https://docs.claude.com/zh-CN/docs/claude-code/hooks#posttooluse","payload":{"session_id":"c7c21516-7e1e-49b2-8ae5-4e1bb98e9692","transcript_path":"C:\\Users\\WTCL\\.claude\\projects\\i--claude-code-proxy\\c7c21516-7e1e-49b2-8ae5-4e1bb98e9692.jsonl","cwd":"i:\\claude-code-proxy","permission_mode":"acceptEdits","hook_event_name":"PostToolUse","tool_name":"Edit","tool_input":{"file_path":"i:\\claude-code-proxy\\analyze\\hooks.html","old_string":"  ${isUrl(transcriptPath) ?\n                            `<button class=\"transcript-btn open\" onclick=\"openTranscriptUrl('${escapeHtml(transcriptPath)}')\" title=\"åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€\">\n                                ğŸ”— æ‰“å¼€é“¾æ¥\n                            </button>` :\n                            `<button class=\"transcript-btn open\" onclick=\"tryOpenTranscriptFile('${escapeHtml(transcriptPath)}')\" title=\"å°è¯•æ‰“å¼€æ–‡ä»¶\">\n                                ğŸ“‚ å°è¯•æ‰“å¼€\n                            </button>`\n                        }","new_string":"  ${isUrl(transcriptPath) ?\n                            `<button class=\"transcript-btn open\" onclick=\"openTranscriptUrl('${transcriptPath.replace(/\\\\/g, '\\\\\\\\').replace(/'/g, \"\\\\'\")}')\" title=\"åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€\">\n                                ğŸ”— æ‰“å¼€é“¾æ¥\n                            </button>` :\n                            `<button class=\"transcript-btn open\" onclick=\"tryOpenTranscriptFile('${transcriptPath.replace(/\\\\/g, '\\\\\\\\').replace(/'/g, \"\\\\'\")}')\" title=\"å°è¯•æ‰“å¼€æ–‡ä»¶\">\n                                ğŸ“‚ å°è¯•æ‰“å¼€\n                            </button>`\n                        }"},"tool_response":{"filePath":"i:\\claude-code-proxy\\analyze\\hooks.html","oldString":"  ${isUrl(transcriptPath) ?\n                            `<button class=\"transcript-btn open\" onclick=\"openTranscriptUrl('${escapeHtml(transcriptPath)}')\" title=\"åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€\">\n                                ğŸ”— æ‰“å¼€é“¾æ¥\n                            </button>` :\n                            `<button class=\"transcript-btn open\" onclick=\"tryOpenTranscriptFile('${escapeHtml(transcriptPath)}')\" title=\"å°è¯•æ‰“å¼€æ–‡ä»¶\">\n                                ğŸ“‚ å°è¯•æ‰“å¼€\n                            </button>`\n                        }","newString":"  ${isUrl(transcriptPath) ?\n                            `<button class=\"transcript-btn open\" onclick=\"openTranscriptUrl('${transcriptPath.replace(/\\\\/g, '\\\\\\\\').replace(/'/g, \"\\\\'\")}')\" title=\"åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€\">\n                                ğŸ”— æ‰“å¼€é“¾æ¥\n                            </button>` :\n                            `<button class=\"transcript-btn open\" onclick=\"tryOpenTranscriptFile('${transcriptPath.replace(/\\\\/g, '\\\\\\\\').replace(/'/g, \"\\\\'\")}')\" title=\"å°è¯•æ‰“å¼€æ–‡ä»¶\">\n                                ğŸ“‚ å°è¯•æ‰“å¼€\n                            </button>`\n                        }","originalFile":"<!DOCTYPE html>\n<html lang=\"zh-CN\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Hooks æ—¥å¿—åˆ†æ</title>\n    <style>\n        * {\n            margin: 0;\n            padding: 0;\n            box-sizing: border-box;\n        }\n\n        body {\n            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n            min-height: 100vh;\n            padding: 20px;\n        }\n\n        .container {\n            max-width: 1400px;\n            margin: 0 auto;\n        }\n\n        .header {\n            text-align: center;\n            color: white;\n            margin-bottom: 30px;\n        }\n\n        .header h1 {\n            font-size: 2.5rem;\n            margin-bottom: 10px;\n            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);\n        }\n\n        .header p {\n            font-size: 1.1rem;\n            opacity: 0.9;\n        }\n\n        /* æ–‡ä»¶ä¸Šä¼ ç»„ä»¶æ ·å¼ */\n        .upload-section {\n            margin-bottom: 30px;\n        }\n\n        .upload-card {\n            background: white;\n            border-radius: 15px;\n            padding: 25px;\n            box-shadow: 0 10px 30px rgba(0,0,0,0.1);\n            border: 2px dashed #cbd5e0;\n            transition: all 0.3s ease;\n        }\n\n        .upload-card:hover {\n            border-color: #667eea;\n            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.2);\n        }\n\n        .upload-header {\n            font-size: 1.2rem;\n            font-weight: bold;\n            color: #4a5568;\n            margin-bottom: 20px;\n            text-align: center;\n        }\n\n        .upload-area {\n            border: 2px dashed #e2e8f0;\n            border-radius: 10px;\n            padding: 40px 20px;\n            text-align: center;\n            transition: all 0.3s ease;\n            cursor: pointer;\n        }\n\n        .upload-area:hover {\n            border-color: #667eea;\n            background: #f7fafc;\n        }\n\n        .upload-area.dragover {\n            border-color: #667eea;\n            background: #edf2f7;\n            transform: scale(1.02);\n        }\n\n        .upload-icon {\n            font-size: 3rem;\n            margin-bottom: 15px;\n            opacity: 0.7;\n        }\n\n        .upload-text {\n            font-size: 1.1rem;\n            color: #4a5568;\n            margin-bottom: 10px;\n            font-weight: 500;\n        }\n\n        .upload-hint {\n            font-size: 0.9rem;\n            color: #718096;\n            margin-bottom: 20px;\n        }\n\n        .upload-btn {\n            background: #667eea;\n            color: white;\n            border: none;\n            padding: 12px 24px;\n            border-radius: 8px;\n            font-size: 1rem;\n            font-weight: 500;\n            cursor: pointer;\n            transition: all 0.3s ease;\n        }\n\n        .upload-btn:hover {\n            background: #5a67d8;\n            transform: translateY(-2px);\n            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);\n        }\n\n        .file-info {\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            background: #f7fafc;\n            padding: 15px 20px;\n            border-radius: 8px;\n            margin-top: 15px;\n        }\n\n        .file-name {\n            font-weight: 500;\n            color: #4a5568;\n            flex: 1;\n            overflow: hidden;\n            text-overflow: ellipsis;\n            white-space: nowrap;\n        }\n\n        .clear-btn {\n            background: #fc8181;\n            color: white;\n            border: none;\n            width: 30px;\n            height: 30px;\n            border-radius: 50%;\n            cursor: pointer;\n            font-size: 1rem;\n            transition: all 0.3s ease;\n        }\n\n        .clear-btn:hover {\n            background: #f56565;\n            transform: scale(1.1);\n        }\n\n        /* æ¶ˆæ¯æç¤ºæ ·å¼ */\n        .upload-message {\n            margin-top: 15px;\n            padding: 12px 16px;\n            border-radius: 8px;\n            font-size: 0.9rem;\n            animation: slideIn 0.3s ease;\n        }\n\n        .upload-success {\n            background: #d4edda;\n            color: #155724;\n            border: 1px solid #c3e6cb;\n        }\n\n        .upload-error {\n            background: #f8d7da;\n            color: #721c24;\n            border: 1px solid #f5c6cb;\n        }\n\n        @keyframes slideIn {\n            from {\n                opacity: 0;\n                transform: translateY(-10px);\n            }\n            to {\n                opacity: 1;\n                transform: translateY(0);\n            }\n        }\n\n        #file-input {\n            display: none;\n        }\n\n        .stats-grid {\n            display: grid;\n            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\n            gap: 20px;\n            margin-bottom: 30px;\n        }\n\n        .stat-card {\n            background: white;\n            border-radius: 15px;\n            padding: 25px;\n            box-shadow: 0 10px 30px rgba(0,0,0,0.2);\n            text-align: center;\n            transition: transform 0.3s ease, box-shadow 0.3s ease;\n        }\n\n        .stat-card:hover {\n            transform: translateY(-5px);\n            box-shadow: 0 15px 40px rgba(0,0,0,0.3);\n        }\n\n        .stat-number {\n            font-size: 3rem;\n            font-weight: bold;\n            margin-bottom: 10px;\n        }\n\n        .stat-label {\n            font-size: 1.1rem;\n            color: #666;\n            margin-bottom: 5px;\n        }\n\n        .stat-description {\n            font-size: 0.9rem;\n            color: #999;\n        }\n\n        .filter-section {\n            background: white;\n            border-radius: 15px;\n            padding: 20px;\n            box-shadow: 0 10px 30px rgba(0,0,0,0.2);\n            margin-bottom: 30px;\n        }\n\n        .filter-controls {\n            display: flex;\n            gap: 15px;\n            flex-wrap: wrap;\n            align-items: center;\n        }\n\n        .filter-group {\n            display: flex;\n            align-items: center;\n            gap: 10px;\n        }\n\n        .filter-label {\n            font-weight: bold;\n            color: #333;\n        }\n\n        .filter-select, .search-input {\n            padding: 8px 12px;\n            border: 2px solid #ddd;\n            border-radius: 5px;\n            font-size: 0.9rem;\n            transition: border-color 0.3s ease;\n        }\n\n        .filter-select:focus, .search-input:focus {\n            outline: none;\n            border-color: #667eea;\n        }\n\n        .search-input {\n            min-width: 200px;\n        }\n\n        .hooks-container {\n            display: grid;\n            gap: 30px;\n        }\n\n        .hook-item {\n            background: white;\n            border-radius: 15px;\n            padding: 25px;\n            box-shadow: 0 10px 30px rgba(0,0,0,0.2);\n        }\n\n        .hook-header {\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            margin-bottom: 20px;\n            padding-bottom: 15px;\n            border-bottom: 2px solid #667eea;\n        }\n\n        .hook-event {\n            font-size: 1.5rem;\n            font-weight: bold;\n            color: #667eea;\n        }\n\n        .hook-meta {\n            display: flex;\n            gap: 20px;\n            align-items: center;\n        }\n\n        .hook-timestamp {\n            font-size: 0.9rem;\n            color: #666;\n            background: #f0f4ff;\n            padding: 5px 12px;\n            border-radius: 20px;\n        }\n\n        .hook-message {\n            background: #f8f9fa;\n            border-left: 4px solid #667eea;\n            padding: 15px;\n            margin-bottom: 15px;\n            border-radius: 5px;\n        }\n\n        .hook-description {\n            color: #666;\n            font-style: italic;\n            margin-bottom: 15px;\n        }\n\n        .hook-details {\n            display: flex;\n            flex-direction: column;\n            gap: 20px;\n        }\n\n        .part-card {\n            background: #f8f9fa;\n            border-radius: 10px;\n            overflow: hidden;\n        }\n\n        .part-header {\n            background: #667eea;\n            color: white;\n            padding: 12px 15px;\n            font-weight: bold;\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            cursor: pointer;\n            transition: background 0.3s ease;\n        }\n\n        .part-header:hover {\n            background: #5a67d8;\n        }\n\n        .part-content {\n            padding: 15px;\n            font-family: 'Courier New', monospace;\n            font-size: 0.9rem;\n            background: #1a1a1a;\n            color: #ffffff;\n            overflow-y: auto;\n            white-space: pre-wrap;\n            line-height: 1.6;\n            min-height: 100px;\n            border-radius: 8px;\n            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.3);\n        }\n\n        .part-content.hidden {\n            display: none;\n        }\n\n        .toggle-icon {\n            transition: transform 0.3s ease;\n        }\n\n        .toggle-icon.rotated {\n            transform: rotate(180deg);\n        }\n\n        /* è‡ªå®šä¹‰æ»šåŠ¨æ¡æ ·å¼ */\n        .part-content::-webkit-scrollbar {\n            width: 8px;\n        }\n\n        .part-content::-webkit-scrollbar-track {\n            background: #2a2a2a;\n            border-radius: 4px;\n        }\n\n        .part-content::-webkit-scrollbar-thumb {\n            background: #4a4a4a;\n            border-radius: 4px;\n        }\n\n        .part-content::-webkit-scrollbar-thumb:hover {\n            background: #5a5a5a;\n        }\n\n        .event-badge {\n            display: inline-block;\n            padding: 4px 12px;\n            border-radius: 20px;\n            font-size: 0.8rem;\n            font-weight: bold;\n            margin-right: 10px;\n        }\n\n        .event-userprompt { background: #FF6B6B; color: white; }\n        .event-pretool { background: #4ECDC4; color: white; }\n        .event-posttool { background: #45B7D1; color: white; }\n        .event-notification { background: #9C27B0; color: white; }\n        .event-stop { background: #F44336; color: white; }\n        .event-subagent-stop { background: #FF9800; color: white; }\n        .event-pre-compact { background: #FFC107; color: white; }\n        .event-session-start { background: #4CAF50; color: white; }\n        .event-session-end { background: #607D8B; color: white; }\n        .event-default { background: #78909C; color: white; }\n\n        .no-data {\n            text-align: center;\n            padding: 60px 20px;\n            color: white;\n            font-size: 1.2rem;\n        }\n\n        .error-message {\n            background: #fff5f5;\n            border: 2px solid #fc8181;\n            color: #c53030;\n            padding: 20px;\n            border-radius: 10px;\n            text-align: center;\n            font-size: 1.1rem;\n            margin: 20px 0;\n        }\n\n        .json-key { color: #9C27B0; }\n        .json-string { color: #4CAF50; }\n        .json-number { color: #FF9800; }\n        .json-boolean { color: #F44336; }\n        .json-null { color: #9E9E9E; }\n        .json-url { color: #2196F3; text-decoration: underline; cursor: pointer; }\n\n        .transcript-path {\n            background: #fff3cd;\n            border: 1px solid #ffeaa7;\n            border-radius: 5px;\n            padding: 8px 12px;\n            margin-top: 10px;\n            font-size: 0.9rem;\n        }\n\n        .transcript-path-label {\n            font-weight: bold;\n            color: #856404;\n            margin-bottom: 5px;\n        }\n\n        .transcript-path-value {\n            color: #856404;\n            word-break: break-all;\n            font-family: monospace;\n            background: #f8f9fa;\n            padding: 4px 8px;\n            border-radius: 3px;\n        }\n\n        .has-transcript-badge {\n            background: #ffc107;\n            color: #212529;\n            padding: 2px 8px;\n            border-radius: 12px;\n            font-size: 0.7rem;\n            font-weight: bold;\n            margin-left: 10px;\n        }\n\n        .transcript-actions {\n            display: flex;\n            gap: 8px;\n            margin-top: 8px;\n        }\n\n        .transcript-btn {\n            background: #667eea;\n            color: white;\n            border: none;\n            padding: 6px 12px;\n            border-radius: 4px;\n            font-size: 0.8rem;\n            cursor: pointer;\n            transition: all 0.3s ease;\n            display: flex;\n            align-items: center;\n            gap: 4px;\n        }\n\n        .transcript-btn:hover {\n            background: #5a67d8;\n            transform: translateY(-1px);\n        }\n\n        .transcript-btn.copy {\n            background: #28a745;\n        }\n\n        .transcript-btn.copy:hover {\n            background: #218838;\n        }\n\n        .transcript-btn.open {\n            background: #007bff;\n        }\n\n        .transcript-btn.open:hover {\n            background: #0056b3;\n        }\n\n        .transcript-btn:disabled {\n            background: #6c757d;\n            cursor: not-allowed;\n            transform: none;\n        }\n\n        @media (max-width: 768px) {\n            .header h1 {\n                font-size: 2rem;\n            }\n\n            .stats-grid {\n                grid-template-columns: repeat(2, 1fr);\n            }\n\n            .filter-controls {\n                flex-direction: column;\n                align-items: stretch;\n            }\n\n            .search-input {\n                min-width: auto;\n            }\n        }\n    </style>\n</head>\n<body>\n    <div class=\"container\">\n        <div class=\"header\">\n            <h1>Hooks æ—¥å¿—åˆ†æ</h1>\n            <p>ä¸Šä¼ å¹¶åˆ†æ Claude Hooks äº‹ä»¶æ—¥å¿—</p>\n        </div>\n\n        <!-- æ–‡ä»¶ä¸Šä¼ ç»„ä»¶ -->\n        <div class=\"upload-section\">\n            <div class=\"upload-card\">\n                <div class=\"upload-header\">\n                    <span>ğŸ“ é€‰æ‹© Hooks æ—¥å¿—æ–‡ä»¶</span>\n                </div>\n                <div class=\"upload-area\" id=\"upload-area\">\n                    <div class=\"upload-content\">\n                        <div class=\"upload-icon\">ğŸ“„</div>\n                        <p class=\"upload-text\">ç‚¹å‡»é€‰æ‹©æ–‡ä»¶æˆ–æ‹–æ‹½æ–‡ä»¶åˆ°æ­¤å¤„</p>\n                        <p class=\"upload-hint\">æ”¯æŒ .log .txt æ ¼å¼çš„æ—¥å¿—æ–‡ä»¶ï¼Œæ¯è¡Œä¸€ä¸ª JSON å¯¹è±¡ï¼Œæœ€å¤§50MB</p>\n                        <input type=\"file\" id=\"file-input\" accept=\".log,.txt\" style=\"display: none;\">\n                        <button class=\"upload-btn\" onclick=\"document.getElementById('file-input').click()\">é€‰æ‹©æ–‡ä»¶</button>\n                    </div>\n                </div>\n                <div class=\"file-info\" id=\"file-info\" style=\"display: none;\">\n                    <span class=\"file-name\" id=\"file-name\"></span>\n                    <button class=\"clear-btn\" onclick=\"clearFile()\">âœ•</button>\n                </div>\n            </div>\n        </div>\n\n        <div id=\"stats-section\" style=\"display: none;\">\n            <div class=\"stats-grid\">\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"total-hooks\">0</div>\n                    <div class=\"stat-label\">æ€»äº‹ä»¶æ•°</div>\n                    <div class=\"stat-description\">æ‰€æœ‰ Hooks äº‹ä»¶</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"user-prompts\">0</div>\n                    <div class=\"stat-label\">ç”¨æˆ·æç¤ºäº‹ä»¶</div>\n                    <div class=\"stat-description\">UserPromptSubmit</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"pre-tools\">0</div>\n                    <div class=\"stat-label\">å·¥å…·æ‰§è¡Œå‰äº‹ä»¶</div>\n                    <div class=\"stat-description\">PreToolUse</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"post-tools\">0</div>\n                    <div class=\"stat-label\">å·¥å…·æ‰§è¡Œåäº‹ä»¶</div>\n                    <div class=\"stat-description\">PostToolUse</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"notifications\">0</div>\n                    <div class=\"stat-label\">é€šçŸ¥äº‹ä»¶</div>\n                    <div class=\"stat-description\">Notification</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"stops\">0</div>\n                    <div class=\"stat-label\">åœæ­¢äº‹ä»¶</div>\n                    <div class=\"stat-description\">Stop</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"subagent-stops\">0</div>\n                    <div class=\"stat-label\">å­ä»£ç†åœæ­¢äº‹ä»¶</div>\n                    <div class=\"stat-description\">SubagentStop</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"pre-compacts\">0</div>\n                    <div class=\"stat-label\">å‹ç¼©å‰äº‹ä»¶</div>\n                    <div class=\"stat-description\">PreCompact</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"session-starts\">0</div>\n                    <div class=\"stat-label\">ä¼šè¯å¼€å§‹äº‹ä»¶</div>\n                    <div class=\"stat-description\">SessionStart</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"session-ends\">0</div>\n                    <div class=\"stat-label\">ä¼šè¯ç»“æŸäº‹ä»¶</div>\n                    <div class=\"stat-description\">SessionEnd</div>\n                </div>\n                <div class=\"stat-card\">\n                    <div class=\"stat-number\" id=\"transcript-count\">0</div>\n                    <div class=\"stat-label\">åŒ…å«è½¬å½•è·¯å¾„äº‹ä»¶</div>\n                    <div class=\"stat-description\">åŒ…å« transcript_path</div>\n                </div>\n            </div>\n\n            <div class=\"filter-section\">\n                <div class=\"filter-controls\">\n                    <div class=\"filter-group\">\n                        <label class=\"filter-label\">äº‹ä»¶ç±»å‹ï¼š</label>\n                        <select class=\"filter-select\" id=\"event-filter\">\n                            <option value=\"\">å…¨éƒ¨</option>\n                            <option value=\"UserPromptSubmit\">UserPromptSubmit</option>\n                            <option value=\"PreToolUse\">PreToolUse</option>\n                            <option value=\"PostToolUse\">PostToolUse</option>\n                            <option value=\"Notification\">Notification</option>\n                            <option value=\"Stop\">Stop</option>\n                            <option value=\"SubagentStop\">SubagentStop</option>\n                            <option value=\"PreCompact\">PreCompact</option>\n                            <option value=\"SessionStart\">SessionStart</option>\n                            <option value=\"SessionEnd\">SessionEnd</option>\n                        </select>\n                    </div>\n                    <div class=\"filter-group\">\n                        <label class=\"filter-label\">æœç´¢ï¼š</label>\n                        <input type=\"text\" class=\"search-input\" id=\"search-input\" placeholder=\"æœç´¢äº‹ä»¶å†…å®¹...\">\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <div id=\"hooks-container\" class=\"hooks-container\"></div>\n\n        <div id=\"no-data\" class=\"no-data\">\n            è¯·ä¸Šä¼  hooks.log æ–‡ä»¶å¼€å§‹åˆ†æ\n        </div>\n\n        <div id=\"error-message\" class=\"error-message\" style=\"display: none;\"></div>\n    </div>\n\n    <script>\n        let hooksData = [];\n        let filteredData = [];\n\n        // æ–‡ä»¶ä¸Šä¼ ç›¸å…³å‡½æ•°\n        function setupFileUpload() {\n            const uploadArea = document.getElementById('upload-area');\n            const fileInput = document.getElementById('file-input');\n\n            // ç‚¹å‡»ä¸Šä¼ åŒºåŸŸè§¦å‘æ–‡ä»¶é€‰æ‹©ï¼ˆä½†ä¸åŒ…æ‹¬æŒ‰é’®ï¼‰\n            uploadArea.addEventListener('click', function(event) {\n                // å¦‚æœç‚¹å‡»çš„æ˜¯æŒ‰é’®ï¼Œä¸å¤„ç†\n                if (event.target.tagName === 'BUTTON' || event.target.closest('button')) {\n                    return;\n                }\n                fileInput.click();\n            });\n\n            // æ–‡ä»¶é€‰æ‹©äº‹ä»¶\n            fileInput.addEventListener('change', handleFileSelect);\n\n            // æ‹–æ‹½äº‹ä»¶\n            uploadArea.addEventListener('dragover', handleDragOver);\n            uploadArea.addEventListener('dragleave', handleDragLeave);\n            uploadArea.addEventListener('drop', handleDrop);\n        }\n\n\n        function handleDragOver(e) {\n            e.preventDefault();\n            e.currentTarget.classList.add('dragover');\n        }\n\n        function handleDragLeave(e) {\n            e.preventDefault();\n            e.currentTarget.classList.remove('dragover');\n        }\n\n        function handleDrop(e) {\n            e.preventDefault();\n            e.currentTarget.classList.remove('dragover');\n            handleFiles(e.dataTransfer.files);\n        }\n\n        function handleFileSelect(event) {\n            const files = event.target.files;\n            handleFiles(files);\n        }\n\n        function handleFiles(files) {\n            if (files.length === 0) return;\n\n            const file = files[0];\n\n            // æ£€æŸ¥æ–‡ä»¶ç±»å‹\n            const validTypes = ['.log', '.txt'];\n            const fileExtension = file.name.substring(file.name.lastIndexOf('.')).toLowerCase();\n\n            if (!validTypes.includes(fileExtension)) {\n                showErrorMessage('è¯·é€‰æ‹© .log æˆ– .txt æ ¼å¼çš„æ—¥å¿—æ–‡ä»¶');\n                return;\n            }\n\n            // æ£€æŸ¥æ–‡ä»¶å¤§å° (é™åˆ¶ä¸º50MB)\n            if (file.size > 50 * 1024 * 1024) {\n                showErrorMessage('æ–‡ä»¶å¤§å°ä¸èƒ½è¶…è¿‡50MB');\n                return;\n            }\n\n            // æ˜¾ç¤ºæ–‡ä»¶ä¿¡æ¯\n            showFileInfo(file);\n\n            // è¯»å–æ–‡ä»¶å†…å®¹\n            const reader = new FileReader();\n            reader.onload = function(e) {\n                try {\n                    const content = e.target.result;\n                    console.log('æ–‡ä»¶è¯»å–æˆåŠŸï¼Œå†…å®¹é•¿åº¦:', content.length);\n                    console.log('æ–‡ä»¶å†…å®¹å‰100å­—ç¬¦:', content.substring(0, 100));\n\n                    if (!content || content.trim().length === 0) {\n                        showErrorMessage('æ–‡ä»¶å†…å®¹ä¸ºç©º');\n                        return;\n                    }\n\n                    parseHooksData(content);\n                    showSuccessMessage(`æˆåŠŸåŠ è½½æ–‡ä»¶: ${file.name}`);\n                } catch (error) {\n                    console.error('æ–‡ä»¶è§£æå¼‚å¸¸:', error);\n                    showErrorMessage('æ–‡ä»¶è§£æå¤±è´¥ï¼š' + error.message);\n                }\n            };\n            reader.onerror = function(error) {\n                console.error('æ–‡ä»¶è¯»å–å¤±è´¥:', error);\n                showErrorMessage('æ–‡ä»¶è¯»å–å¤±è´¥');\n            };\n            reader.readAsText(file);\n        }\n\n        function showFileInfo(file) {\n            const fileInfo = document.getElementById('file-info');\n            const fileName = document.getElementById('file-name');\n            const uploadArea = document.getElementById('upload-area');\n\n            fileName.textContent = file.name;\n            fileInfo.style.display = 'flex';\n            uploadArea.style.display = 'none';\n        }\n\n        function clearFile() {\n            const fileInfo = document.getElementById('file-info');\n            const uploadArea = document.getElementById('upload-area');\n            const fileInput = document.getElementById('file-input');\n\n            fileInfo.style.display = 'none';\n            uploadArea.style.display = 'block';\n\n            // æ¸…ç©ºæ–‡ä»¶è¾“å…¥æ¡†çš„å€¼\n            fileInput.value = '';\n\n            // æ¸…ç©ºæ•°æ®\n            hooksData = [];\n            filteredData = [];\n\n            // æ¸…ç©ºæ˜¾ç¤ºåŒºåŸŸ\n            document.getElementById('hooks-container').innerHTML = '';\n            document.getElementById('no-data').style.display = 'block';\n            document.getElementById('stats-section').style.display = 'none';\n\n            // æ˜¾ç¤ºæç¤º\n            showSuccessMessage('å·²æ¸…ç©ºæ–‡ä»¶ï¼Œè¯·é‡æ–°é€‰æ‹©æ—¥å¿—æ–‡ä»¶');\n        }\n\n        function showSuccessMessage(message) {\n            showMessage(message, 'success');\n        }\n\n        function showErrorMessage(message) {\n            showMessage(message, 'error');\n        }\n\n        function showMessage(message, type) {\n            // ç§»é™¤ä¹‹å‰çš„æ¶ˆæ¯\n            const existingMessages = document.querySelectorAll('.upload-message');\n            existingMessages.forEach(msg => msg.remove());\n\n            const messageClass = type === 'success' ? 'upload-success' : 'upload-error';\n            const messageDiv = document.createElement('div');\n            messageDiv.className = `upload-message ${messageClass}`;\n            messageDiv.textContent = message;\n\n            document.querySelector('.upload-card').appendChild(messageDiv);\n\n            // 3ç§’åè‡ªåŠ¨æ¶ˆå¤±\n            setTimeout(() => {\n                messageDiv.style.opacity = '0';\n                setTimeout(() => {\n                    if (messageDiv.parentNode) {\n                        messageDiv.parentNode.removeChild(messageDiv);\n                    }\n                }, 300);\n            }, 3000);\n        }\n\n        // è§£æ hooks æ•°æ®\n        function parseHooksData(content) {\n            console.log('å¼€å§‹è§£æ hooks æ•°æ®ï¼Œå†…å®¹é•¿åº¦:', content.length);\n\n            hooksData = [];\n            const lines = content.split('\\n').filter(line => line.trim());\n            console.log('åˆ†å‰²åçš„è¡Œæ•°:', lines.length);\n\n            for (let i = 0; i < lines.length; i++) {\n                const line = lines[i];\n                try {\n                    const hookData = JSON.parse(line);\n                    hooksData.push(hookData);\n                    console.log(`æˆåŠŸè§£æç¬¬ ${i + 1} è¡Œï¼Œäº‹ä»¶ç±»å‹:`, hookData.event);\n                } catch (error) {\n                    console.error(`è§£æç¬¬ ${i + 1} è¡Œå¤±è´¥:`, error.message);\n                    console.error('é—®é¢˜è¡Œçš„å†…å®¹:', line.substring(0, 100) + (line.length > 100 ? '...' : ''));\n                }\n            }\n\n            console.log('è§£æå®Œæˆï¼Œæ€»å…±è§£æåˆ°', hooksData.length, 'ä¸ªæœ‰æ•ˆäº‹ä»¶');\n\n            if (hooksData.length === 0) {\n                showErrorMessage('æœªæ‰¾åˆ°æœ‰æ•ˆçš„ hooks æ•°æ®ã€‚è¯·ç¡®ä¿æ–‡ä»¶æ ¼å¼æ­£ç¡®ï¼Œæ¯è¡Œåº”è¯¥æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„JSONå¯¹è±¡ã€‚');\n                console.error('è§£æå¤±è´¥ï¼Œæ²¡æœ‰æ‰¾åˆ°æœ‰æ•ˆçš„hooksæ•°æ®');\n                return;\n            }\n\n            filteredData = [...hooksData];\n            console.log('å‡†å¤‡æ˜¾ç¤ºæ•°æ®ï¼Œè¿‡æ»¤åçš„äº‹ä»¶æ•°é‡:', filteredData.length);\n            displayData();\n        }\n\n        // æ˜¾ç¤ºæ•°æ®\n        function displayData() {\n            document.getElementById('no-data').style.display = 'none';\n            document.getElementById('error-message').style.display = 'none';\n            document.getElementById('stats-section').style.display = 'block';\n\n            updateStatistics();\n            renderHooks();\n        }\n\n        // æ›´æ–°ç»Ÿè®¡ä¿¡æ¯\n        function updateStatistics() {\n            const stats = {\n                total: filteredData.length,\n                userPrompts: filteredData.filter(h => h.event === 'UserPromptSubmit').length,\n                preTools: filteredData.filter(h => h.event === 'PreToolUse').length,\n                postTools: filteredData.filter(h => h.event === 'PostToolUse').length,\n                notifications: filteredData.filter(h => h.event === 'Notification').length,\n                stops: filteredData.filter(h => h.event === 'Stop').length,\n                subagentStops: filteredData.filter(h => h.event === 'SubagentStop').length,\n                preCompacts: filteredData.filter(h => h.event === 'PreCompact').length,\n                sessionStarts: filteredData.filter(h => h.event === 'SessionStart').length,\n                sessionEnds: filteredData.filter(h => h.event === 'SessionEnd').length,\n                transcriptCount: filteredData.filter(h => hasTranscriptPath(h)).length\n            };\n\n            document.getElementById('total-hooks').textContent = stats.total;\n            document.getElementById('user-prompts').textContent = stats.userPrompts;\n            document.getElementById('pre-tools').textContent = stats.preTools;\n            document.getElementById('post-tools').textContent = stats.postTools;\n            document.getElementById('notifications').textContent = stats.notifications;\n            document.getElementById('stops').textContent = stats.stops;\n            document.getElementById('subagent-stops').textContent = stats.subagentStops;\n            document.getElementById('pre-compacts').textContent = stats.preCompacts;\n            document.getElementById('session-starts').textContent = stats.sessionStarts;\n            document.getElementById('session-ends').textContent = stats.sessionEnds;\n            document.getElementById('transcript-count').textContent = stats.transcriptCount;\n        }\n\n        // æ¸²æŸ“ hooks\n        function renderHooks() {\n            const container = document.getElementById('hooks-container');\n            container.innerHTML = '';\n\n            filteredData.forEach((hook, index) => {\n                const hookElement = createHookElement(hook, index);\n                container.appendChild(hookElement);\n            });\n\n            // æ·»åŠ åŠ¨ç”»\n            const elements = container.querySelectorAll('.hook-item');\n            elements.forEach((el, i) => {\n                el.style.opacity = '0';\n                el.style.transform = 'translateY(20px)';\n                setTimeout(() => {\n                    el.style.transition = 'opacity 0.3s ease, transform 0.3s ease';\n                    el.style.opacity = '1';\n                    el.style.transform = 'translateY(0)';\n                }, i * 50);\n            });\n        }\n\n        // æ£€æŸ¥æ˜¯å¦åŒ…å« transcript_path å­—æ®µ\n        function hasTranscriptPath(hook) {\n            if (!hook.payload) return false;\n\n            // æ£€æŸ¥ payload ä¸­æ˜¯å¦ç›´æ¥åŒ…å« transcript_path\n            if (hook.payload.transcript_path) return true;\n\n            // æ·±åº¦æœç´¢ payload å¯¹è±¡ä¸­çš„ transcript_path å­—æ®µ\n            return searchInObject(hook.payload, 'transcript_path');\n        }\n\n        // åœ¨å¯¹è±¡ä¸­é€’å½’æœç´¢æŒ‡å®šå­—æ®µ\n        function searchInObject(obj, fieldName) {\n            if (!obj || typeof obj !== 'object') return false;\n\n            for (const key in obj) {\n                if (key === fieldName) return true;\n\n                if (typeof obj[key] === 'object' && obj[key] !== null) {\n                    if (searchInObject(obj[key], fieldName)) return true;\n                }\n            }\n\n            return false;\n        }\n\n        // è·å– transcript_path çš„å€¼\n        function getTranscriptPath(hook) {\n            if (!hook.payload) return null;\n\n            // æ£€æŸ¥ payload ä¸­æ˜¯å¦ç›´æ¥åŒ…å« transcript_path\n            if (hook.payload.transcript_path) return hook.payload.transcript_path;\n\n            // æ·±åº¦æœç´¢å¹¶è¿”å› transcript_path çš„å€¼\n            return findValueInObject(hook.payload, 'transcript_path');\n        }\n\n        // åœ¨å¯¹è±¡ä¸­é€’å½’æŸ¥æ‰¾æŒ‡å®šå­—æ®µçš„å€¼\n        function findValueInObject(obj, fieldName) {\n            if (!obj || typeof obj !== 'object') return null;\n\n            for (const key in obj) {\n                if (key === fieldName) return obj[key];\n\n                if (typeof obj[key] === 'object' && obj[key] !== null) {\n                    const found = findValueInObject(obj[key], fieldName);\n                    if (found !== null) return found;\n                }\n            }\n\n            return null;\n        }\n\n        // åˆ›å»º hook å…ƒç´ \n        function createHookElement(hook, index) {\n            const div = document.createElement('div');\n            div.className = 'hook-item';\n\n            const eventClass = getEventClass(hook.event);\n            const formattedTime = formatTimestamp(hook.ts);\n            const eventDescription = getEventDescription(hook.event, hook.phase);\n            const hasTranscript = hasTranscriptPath(hook);\n            const transcriptPath = getTranscriptPath(hook);\n\n            div.innerHTML = `\n                <div class=\"hook-header\">\n                    <div class=\"hook-event\">\n                        <span class=\"event-badge ${eventClass}\">${hook.event}</span>\n                        ${hasTranscript ? '<span class=\"has-transcript-badge\">åŒ…å«è½¬å½•è·¯å¾„</span>' : ''}\n                    </div>\n                    <div class=\"hook-meta\">\n                        <div class=\"hook-timestamp\">${formattedTime}</div>\n                    </div>\n                </div>\n                <div class=\"hook-message\">${hook.message}</div>\n                <div class=\"hook-description\">${hook.description || eventDescription}</div>\n                ${hasTranscript && transcriptPath ? `\n                <div class=\"transcript-path\">\n                    <div class=\"transcript-path-label\">ğŸ“„ è½¬å½•è·¯å¾„ (transcript_path):</div>\n                    <div class=\"transcript-path-value\">${escapeHtml(transcriptPath)}</div>\n                    <div class=\"transcript-actions\">\n                        <button class=\"transcript-btn copy\" onclick=\"copyTranscriptPath('${transcriptPath.replace(/\\\\/g, '\\\\\\\\').replace(/'/g, \"\\\\'\")}')\" title=\"å¤åˆ¶è·¯å¾„\">\n                            ğŸ“‹ å¤åˆ¶\n                        </button>\n                        ${isUrl(transcriptPath) ?\n                            `<button class=\"transcript-btn open\" onclick=\"openTranscriptUrl('${escapeHtml(transcriptPath)}')\" title=\"åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€\">\n                                ğŸ”— æ‰“å¼€é“¾æ¥\n                            </button>` :\n                            `<button class=\"transcript-btn open\" onclick=\"tryOpenTranscriptFile('${escapeHtml(transcriptPath)}')\" title=\"å°è¯•æ‰“å¼€æ–‡ä»¶\">\n                                ğŸ“‚ å°è¯•æ‰“å¼€\n                            </button>`\n                        }\n                    </div>\n                </div>\n                ` : ''}\n                <div class=\"hook-details\">\n                    <div class=\"part-card\">\n                        <div class=\"part-header\" onclick=\"toggleDetail('payload-${index}')\">\n                            <span>Payload</span>\n                            <span class=\"toggle-icon\" id=\"icon-payload-${index}\">â–¼</span>\n                        </div>\n                        <div class=\"part-content hidden\" id=\"payload-${index}\">\n                            ${formatJson(hook.payload)}\n                        </div>\n                    </div>\n                </div>\n            `;\n\n            return div;\n        }\n\n        // è·å–äº‹ä»¶æè¿°\n        function getEventDescription(event, phase) {\n            switch (event) {\n                case 'PreToolUse':\n                    return 'å·¥å…·æ‰§è¡Œå‰è§¦å‘ï¼Œå¯åŸºäºå‚æ•°é˜»æ­¢æˆ–è°ƒæ•´è°ƒç”¨ã€‚';\n                case 'PostToolUse':\n                    return 'å·¥å…·æˆåŠŸæ‰§è¡Œåè§¦å‘ï¼Œå¸¸ç”¨äºæ ¼å¼åŒ–ã€æ ¡éªŒæˆ–è®°å½•ç»“æœã€‚';\n                case 'UserPromptSubmit':\n                    return 'ç”¨æˆ·æäº¤æç¤ºå‰è§¦å‘ï¼Œå¯è¿›è¡Œæç¤ºæ ¡éªŒæˆ–å¢å¼ºã€‚';\n                case 'Notification':\n                    return 'å½“ç³»ç»Ÿå‘é€é€šçŸ¥ï¼ˆéœ€æˆæƒæˆ–ç­‰å¾…è¾“å…¥ï¼‰æ—¶è§¦å‘ã€‚';\n                case 'Stop':\n                    return 'ä¸»ä»£ç†å®Œæˆå“åº”æ—¶è§¦å‘ï¼ˆç”¨æˆ·ä¸­æ–­ä¸è§¦å‘ï¼‰ã€‚';\n                case 'SubagentStop':\n                    return 'å­ä»£ç†ä»»åŠ¡å®Œæˆæ—¶è§¦å‘ï¼Œç”¨äºè®°å½•å­ä»»åŠ¡ç»“æŸã€‚';\n                case 'PreCompact':\n                    return phase === 'manual'\n                        ? 'æ‰‹åŠ¨å‹ç¼©å‰è§¦å‘ï¼Œç”¨äºè®°å½•æˆ–å‡†å¤‡å‹ç¼©ã€‚'\n                        : 'è‡ªåŠ¨å‹ç¼©å‰è§¦å‘ï¼ˆä¸Šä¸‹æ–‡æ¥è¿‘ä¸Šé™ï¼‰ï¼Œç”¨äºè®°å½•æˆ–å‡†å¤‡å‹ç¼©ã€‚';\n                case 'SessionStart':\n                    switch (phase) {\n                        case 'startup':\n                            return 'æ–°ä¼šè¯å¯åŠ¨æ—¶è§¦å‘ï¼Œç”¨äºåŠ è½½ä¸Šä¸‹æ–‡æˆ–è®¾ç½®ç¯å¢ƒã€‚';\n                        case 'resume':\n                            return 'æ¢å¤ä¼šè¯æ—¶è§¦å‘ï¼Œç”¨äºç»§ç»­å…ˆå‰ä¸Šä¸‹æ–‡ã€‚';\n                        case 'clear':\n                            return 'æ¸…ç©ºä¼šè¯åè§¦å‘ï¼Œç”¨äºé‡ç½®ç¯å¢ƒä¸ä¸Šä¸‹æ–‡ã€‚';\n                        case 'compact':\n                            return 'å› å‹ç¼©æ“ä½œè§¦å‘çš„ä¼šè¯å¯åŠ¨ï¼Œç”¨äºç»´æŒä¸Šä¸‹æ–‡ã€‚';\n                        default:\n                            return 'ä¼šè¯å¯åŠ¨ç›¸å…³äº‹ä»¶ï¼Œåˆå§‹åŒ–æˆ–æ¢å¤ä¸Šä¸‹æ–‡ã€‚';\n                    }\n                case 'SessionEnd':\n                    return 'ä¼šè¯ç»“æŸæ—¶è§¦å‘ï¼Œå¸¸ç”¨äºæ”¶å°¾ä¸æ¸…ç†ã€‚';\n                default:\n                    return 'æœªçŸ¥äº‹ä»¶ã€‚';\n            }\n        }\n\n        // è·å–äº‹ä»¶æ ·å¼ç±»\n        function getEventClass(event) {\n            switch (event) {\n                case 'UserPromptSubmit': return 'event-userprompt';\n                case 'PreToolUse': return 'event-pretool';\n                case 'PostToolUse': return 'event-posttool';\n                case 'Notification': return 'event-notification';\n                case 'Stop': return 'event-stop';\n                case 'SubagentStop': return 'event-subagent-stop';\n                case 'PreCompact': return 'event-pre-compact';\n                case 'SessionStart': return 'event-session-start';\n                case 'SessionEnd': return 'event-session-end';\n                default: return 'event-default';\n            }\n        }\n\n        // æ ¼å¼åŒ–æ—¶é—´æˆ³\n        function formatTimestamp(ts) {\n            const date = new Date(ts);\n            return date.toLocaleString('zh-CN');\n        }\n\n        // æ ¼å¼åŒ– JSON\n        function formatJson(obj, indent = 0) {\n            if (!obj) return '';\n\n            try {\n                const spaces = '  '.repeat(indent);\n                let result = '';\n\n                if (Array.isArray(obj)) {\n                    result += '[\\n';\n                    obj.forEach((item, index) => {\n                        result += spaces + '  ';\n                        if (typeof item === 'object' && item !== null) {\n                            result += formatJson(item, indent + 1);\n                        } else {\n                            result += formatJsonValue(item);\n                        }\n                        if (index < obj.length - 1) result += ',';\n                        result += '\\n';\n                    });\n                    result += spaces + ']';\n                } else if (typeof obj === 'object' && obj !== null) {\n                    result += '{\\n';\n                    const keys = Object.keys(obj);\n                    keys.forEach((key, index) => {\n                        result += spaces + '  ';\n                        result += `<span class=\"json-key\">\"${escapeHtml(key)}\"</span>: `;\n\n                        if (typeof obj[key] === 'object' && obj[key] !== null) {\n                            result += formatJson(obj[key], indent + 1);\n                        } else {\n                            result += formatJsonValue(obj[key]);\n                        }\n\n                        if (index < keys.length - 1) result += ',';\n                        result += '\\n';\n                    });\n                    result += spaces + '}';\n                } else {\n                    result += formatJsonValue(obj);\n                }\n\n                return result;\n            } catch (error) {\n                return escapeHtml(JSON.stringify(obj));\n            }\n        }\n\n        // æ ¼å¼åŒ– JSON å€¼\n        function formatJsonValue(value) {\n            if (typeof value === 'string') {\n                if (value.startsWith('http://') || value.startsWith('https://')) {\n                    return `<span class=\"json-url\" onclick=\"window.open('${escapeHtml(value)}', '_blank')\">\"${escapeHtml(value)}\"</span>`;\n                }\n                return `<span class=\"json-string\">\"${escapeHtml(value)}\"</span>`;\n            } else if (typeof value === 'number') {\n                return `<span class=\"json-number\">${value}</span>`;\n            } else if (typeof value === 'boolean') {\n                return `<span class=\"json-boolean\">${value}</span>`;\n            } else if (value === null) {\n                return `<span class=\"json-null\">null</span>`;\n            } else {\n                return `<span style=\"color: #666;\">${value}</span>`;\n            }\n        }\n\n        // HTML è½¬ä¹‰\n        function escapeHtml(text) {\n            const div = document.createElement('div');\n            div.textContent = text;\n            return div.innerHTML;\n        }\n\n        // åˆ‡æ¢è¯¦æƒ…æ˜¾ç¤º\n        function toggleDetail(id) {\n            const content = document.getElementById(id);\n            const icon = document.getElementById('icon-' + id);\n\n            if (content.classList.contains('hidden')) {\n                content.classList.remove('hidden');\n                icon.classList.add('rotated');\n            } else {\n                content.classList.add('hidden');\n                icon.classList.remove('rotated');\n            }\n        }\n\n        // è¿‡æ»¤å’Œæœç´¢\n        document.getElementById('event-filter').addEventListener('change', applyFilters);\n        document.getElementById('search-input').addEventListener('input', applyFilters);\n\n        function applyFilters() {\n            const eventFilter = document.getElementById('event-filter').value;\n            const searchText = document.getElementById('search-input').value.toLowerCase();\n\n            filteredData = hooksData.filter(hook => {\n                const matchEvent = !eventFilter || hook.event === eventFilter;\n                const matchSearch = !searchText ||\n                    JSON.stringify(hook).toLowerCase().includes(searchText);\n\n                return matchEvent && matchSearch;\n            });\n\n            updateStatistics();\n            renderHooks();\n        }\n\n        // æ£€æŸ¥æ˜¯å¦ä¸º URL\n        function isUrl(text) {\n            try {\n                new URL(text);\n                return true;\n            } catch {\n                return false;\n            }\n        }\n\n        // å¤åˆ¶è½¬å½•è·¯å¾„åˆ°å‰ªè´´æ¿\n        async function copyTranscriptPath(path) {\n            try {\n                await navigator.clipboard.writeText(path);\n                showToast('è·¯å¾„å·²å¤åˆ¶åˆ°å‰ªè´´æ¿', 'success');\n            } catch (error) {\n                // é™çº§æ–¹æ¡ˆ\n                const textArea = document.createElement('textarea');\n                textArea.value = path;\n                document.body.appendChild(textArea);\n                textArea.select();\n                document.execCommand('copy');\n                document.body.removeChild(textArea);\n                showToast('è·¯å¾„å·²å¤åˆ¶åˆ°å‰ªè´´æ¿', 'success');\n            }\n        }\n\n        // æ‰“å¼€è½¬å½•é“¾æ¥ï¼ˆURLï¼‰\n        function openTranscriptUrl(url) {\n            window.open(url, '_blank');\n        }\n\n        // å°è¯•æ‰“å¼€æœ¬åœ°æ–‡ä»¶ï¼ˆé€šè¿‡æ–‡ä»¶é€‰æ‹©å™¨ï¼‰\n        function tryOpenTranscriptFile(path) {\n            // æ–¹æ¡ˆ1ï¼šå¤åˆ¶è·¯å¾„åˆ°å‰ªè´´æ¿\n            copyTranscriptPath(path);\n\n            // æ–¹æ¡ˆ2ï¼šå¦‚æœæ˜¯ç½‘ç»œé“¾æ¥ï¼Œç›´æ¥æ‰“å¼€\n            if (path.startsWith('http://') || path.startsWith('https://')) {\n                openTranscriptUrl(path);\n                return;\n            }\n\n            // æ–¹æ¡ˆ3ï¼šä½¿ç”¨æ–‡ä»¶é€‰æ‹©å™¨è®©ç”¨æˆ·é€‰æ‹©æœ¬åœ°æ–‡ä»¶\n            if (path.startsWith('file://')) {\n                // file:// åè®®ï¼Œæå–æ–‡ä»¶è·¯å¾„\n                const cleanPath = path.replace(/^file:\\/\\//, '');\n                showFileSelector(cleanPath);\n            } else {\n                // æœ¬åœ°æ–‡ä»¶è·¯å¾„\n                showFileSelector(path);\n            }\n        }\n\n        // æ˜¾ç¤ºæ–‡ä»¶é€‰æ‹©å™¨\n        function showFileSelector(expectedPath) {\n            const input = document.createElement('input');\n            input.type = 'file';\n            input.style.display = 'none';\n\n            // ä»è·¯å¾„ä¸­æå–æ–‡ä»¶å\n            const fileName = expectedPath.split(/[/\\\\]/).pop();\n\n            input.addEventListener('change', function(event) {\n                const file = event.target.files[0];\n                if (file) {\n                    if (file.name === fileName) {\n                        // æ–‡ä»¶ååŒ¹é…ï¼Œè¯»å–å¹¶æ˜¾ç¤ºæ–‡ä»¶å†…å®¹\n                        readAndDisplayFile(file);\n                    } else {\n                        showToast(`é€‰æ‹©çš„æ–‡ä»¶åä¸åŒ¹é…\\næœŸæœ›: ${fileName}\\nå®é™…: ${file.name}`, 'warning');\n                        // ä»ç„¶æ˜¾ç¤ºé€‰æ‹©çš„æ–‡ä»¶å†…å®¹\n                        readAndDisplayFile(file);\n                    }\n                }\n                // æ¸…ç†inputå…ƒç´ \n                document.body.removeChild(input);\n            });\n\n            document.body.appendChild(input);\n\n            // æ˜¾ç¤ºæç¤ºï¼Œç„¶åè§¦å‘æ–‡ä»¶é€‰æ‹©\n            showToast(`è¯·é€‰æ‹©æ–‡ä»¶: ${fileName}`, 'info');\n            setTimeout(() => {\n                input.click();\n            }, 500);\n        }\n\n        // è¯»å–å¹¶æ˜¾ç¤ºæ–‡ä»¶å†…å®¹\n        function readAndDisplayFile(file) {\n            const reader = new FileReader();\n            reader.onload = function(e) {\n                const content = e.target.result;\n\n                // åˆ›å»ºä¸€ä¸ªæ¨¡æ€çª—å£æ˜¾ç¤ºæ–‡ä»¶å†…å®¹\n                showFileModal(file.name, content);\n            };\n\n            reader.onerror = function() {\n                showToast('æ–‡ä»¶è¯»å–å¤±è´¥', 'error');\n            };\n\n            reader.readAsText(file);\n        }\n\n        // æ˜¾ç¤ºæ–‡ä»¶å†…å®¹çš„æ¨¡æ€çª—å£\n        function showFileModal(fileName, content) {\n            // åˆ›å»ºæ¨¡æ€èƒŒæ™¯\n            const modal = document.createElement('div');\n            modal.style.cssText = `\n                position: fixed;\n                top: 0;\n                left: 0;\n                width: 100%;\n                height: 100%;\n                background: rgba(0, 0, 0, 0.8);\n                z-index: 10000;\n                display: flex;\n                justify-content: center;\n                align-items: center;\n                animation: fadeIn 0.3s ease;\n            `;\n\n            // åˆ›å»ºæ¨¡æ€å†…å®¹\n            const modalContent = document.createElement('div');\n            modalContent.style.cssText = `\n                background: white;\n                border-radius: 12px;\n                width: 90%;\n                max-width: 800px;\n                max-height: 80vh;\n                display: flex;\n                flex-direction: column;\n                box-shadow: 0 20px 60px rgba(0,0,0,0.3);\n                animation: slideUp 0.3s ease;\n            `;\n\n            // åˆ›å»ºå¤´éƒ¨\n            const header = document.createElement('div');\n            header.style.cssText = `\n                padding: 20px;\n                border-bottom: 1px solid #e0e0e0;\n                display: flex;\n                justify-content: space-between;\n                align-items: center;\n                background: #f8f9fa;\n                border-radius: 12px 12px 0 0;\n            `;\n\n            const title = document.createElement('h3');\n            title.textContent = `ğŸ“„ ${fileName}`;\n            title.style.cssText = `\n                margin: 0;\n                color: #333;\n                font-size: 1.2rem;\n            `;\n\n            // åˆ›å»ºæ“ä½œæŒ‰é’®åŒºåŸŸ\n            const actions = document.createElement('div');\n            actions.style.cssText = `\n                display: flex;\n                gap: 10px;\n                align-items: center;\n            `;\n\n            const copyBtn = document.createElement('button');\n            copyBtn.textContent = 'ğŸ“‹ å¤åˆ¶å†…å®¹';\n            copyBtn.style.cssText = `\n                background: #28a745;\n                color: white;\n                border: none;\n                padding: 6px 12px;\n                border-radius: 4px;\n                font-size: 0.8rem;\n                cursor: pointer;\n                transition: background 0.3s ease;\n            `;\n            copyBtn.onmouseover = () => copyBtn.style.background = '#218838';\n            copyBtn.onmouseout = () => copyBtn.style.background = '#28a745';\n\n            const closeBtn = document.createElement('button');\n            closeBtn.textContent = 'âœ•';\n            closeBtn.style.cssText = `\n                background: none;\n                border: none;\n                font-size: 1.5rem;\n                cursor: pointer;\n                color: #666;\n                padding: 5px;\n                border-radius: 50%;\n                width: 32px;\n                height: 32px;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n            `;\n            closeBtn.onmouseover = () => closeBtn.style.background = '#e0e0e0';\n            closeBtn.onmouseout = () => closeBtn.style.background = 'none';\n\n            // æ·»åŠ å¤åˆ¶åŠŸèƒ½\n            copyBtn.onclick = async () => {\n                try {\n                    await navigator.clipboard.writeText(content);\n                    showToast('æ–‡ä»¶å†…å®¹å·²å¤åˆ¶åˆ°å‰ªè´´æ¿', 'success');\n                } catch (error) {\n                    // é™çº§æ–¹æ¡ˆ\n                    const textArea = document.createElement('textarea');\n                    textArea.value = content;\n                    document.body.appendChild(textArea);\n                    textArea.select();\n                    document.execCommand('copy');\n                    document.body.removeChild(textArea);\n                    showToast('æ–‡ä»¶å†…å®¹å·²å¤åˆ¶åˆ°å‰ªè´´æ¿', 'success');\n                }\n            };\n\n            // åˆ›å»ºå†…å®¹åŒºåŸŸ\n            const contentArea = document.createElement('div');\n            contentArea.style.cssText = `\n                padding: 20px;\n                overflow-y: auto;\n                flex: 1;\n                font-family: 'Courier New', monospace;\n                font-size: 0.9rem;\n                line-height: 1.5;\n                background: #1a1a1a;\n                color: #ffffff;\n                white-space: pre-wrap;\n                border-radius: 0 0 12px 12px;\n                max-height: 60vh;\n            `;\n\n            // è®¾ç½®å†…å®¹\n            contentArea.textContent = content;\n\n            // ç»„è£…æ¨¡æ€çª—å£\n            actions.appendChild(copyBtn);\n            actions.appendChild(closeBtn);\n            header.appendChild(title);\n            header.appendChild(actions);\n            modalContent.appendChild(header);\n            modalContent.appendChild(contentArea);\n            modal.appendChild(modalContent);\n\n            // æ·»åŠ å…³é—­äº‹ä»¶\n            closeBtn.onclick = () => document.body.removeChild(modal);\n            modal.onclick = (e) => {\n                if (e.target === modal) {\n                    document.body.removeChild(modal);\n                }\n            };\n\n            // æ·»åŠ é”®ç›˜æ”¯æŒ (ESC å…³é—­)\n            const keyHandler = (e) => {\n                if (e.key === 'Escape') {\n                    document.body.removeChild(modal);\n                    document.removeEventListener('keydown', keyHandler);\n                }\n            };\n            document.addEventListener('keydown', keyHandler);\n\n            // æ¨¡æ€çª—å£å…³é—­æ—¶æ¸…ç†äº‹ä»¶ç›‘å¬å™¨\n            const cleanup = () => {\n                document.removeEventListener('keydown', keyHandler);\n                if (document.body.contains(modal)) {\n                    document.body.removeChild(modal);\n                }\n            };\n            closeBtn.onclick = cleanup;\n            modal.onclick = (e) => {\n                if (e.target === modal) {\n                    cleanup();\n                }\n            };\n\n            // æ·»åŠ åˆ°é¡µé¢\n            document.body.appendChild(modal);\n\n            // æ·»åŠ åŠ¨ç”»æ ·å¼\n            if (!document.getElementById('modal-animations')) {\n                const style = document.createElement('style');\n                style.id = 'modal-animations';\n                style.textContent = `\n                    @keyframes fadeIn {\n                        from { opacity: 0; }\n                        to { opacity: 1; }\n                    }\n                    @keyframes slideUp {\n                        from {\n                            opacity: 0;\n                            transform: translateY(50px);\n                        }\n                        to {\n                            opacity: 1;\n                            transform: translateY(0);\n                        }\n                    }\n                `;\n                document.head.appendChild(style);\n            }\n        }\n\n        // æ˜¾ç¤ºæç¤ºä¿¡æ¯\n        function showToast(message, type = 'info') {\n            const toast = document.createElement('div');\n            toast.style.cssText = `\n                position: fixed;\n                top: 20px;\n                right: 20px;\n                background: ${type === 'success' ? '#28a745' : type === 'warning' ? '#ffc107' : type === 'error' ? '#dc3545' : '#007bff'};\n                color: white;\n                padding: 12px 16px;\n                border-radius: 6px;\n                font-size: 0.9rem;\n                z-index: 10000;\n                max-width: 400px;\n                word-wrap: break-word;\n                box-shadow: 0 4px 12px rgba(0,0,0,0.15);\n                animation: slideInRight 0.3s ease;\n            `;\n\n            toast.textContent = message;\n            document.body.appendChild(toast);\n\n            // 3ç§’åè‡ªåŠ¨æ¶ˆå¤±\n            setTimeout(() => {\n                toast.style.animation = 'slideOutRight 0.3s ease';\n                setTimeout(() => {\n                    if (toast.parentNode) {\n                        document.body.removeChild(toast);\n                    }\n                }, 300);\n            }, 3000);\n        }\n\n        // æ·»åŠ åŠ¨ç”»æ ·å¼\n        const style = document.createElement('style');\n        style.textContent = `\n            @keyframes slideInRight {\n                from {\n                    transform: translateX(100%);\n                    opacity: 0;\n                }\n                to {\n                    transform: translateX(0);\n                    opacity: 1;\n                }\n            }\n\n            @keyframes slideOutRight {\n                from {\n                    transform: translateX(0);\n                    opacity: 1;\n                }\n                to {\n                    transform: translateX(100%);\n                    opacity: 0;\n                }\n            }\n        `;\n        document.head.appendChild(style);\n\n        // æ ¼å¼åŒ–æ–‡ä»¶å¤§å°\n        function formatFileSize(bytes) {\n            if (bytes === 0) return '0 Bytes';\n            const k = 1024;\n            const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n            const i = Math.floor(Math.log(bytes) / Math.log(k));\n            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n        }\n\n        // é¡µé¢åŠ è½½æ—¶æ‰§è¡Œ\n        document.addEventListener('DOMContentLoaded', function() {\n            // æ·»åŠ åˆå§‹åŠ è½½åŠ¨ç”»\n            const cards = document.querySelectorAll('.stat-card, .upload-card');\n            cards.forEach((card, index) => {\n                card.style.opacity = '0';\n                card.style.transform = 'translateY(20px)';\n                setTimeout(() => {\n                    card.style.transition = 'opacity 0.5s ease, transform 0.5s ease';\n                    card.style.opacity = '1';\n                    card.style.transform = 'translateY(0)';\n                }, index * 100);\n            });\n\n            // è®¾ç½®æ–‡ä»¶ä¸Šä¼ \n            setupFileUpload();\n        });\n\n            </script>\n</body>\n</html>","structuredPatch":[{"oldStart":1017,"oldLines":10,"newStart":1017,"newLines":10,"lines":["                             ğŸ“‹ å¤åˆ¶","                         </button>","                         ${isUrl(transcriptPath) ?","-                            `<button class=\"transcript-btn open\" onclick=\"openTranscriptUrl('${escapeHtml(transcriptPath)}')\" title=\"åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€\">","+                            `<button class=\"transcript-btn open\" onclick=\"openTranscriptUrl('${transcriptPath.replace(/\\\\/g, '\\\\\\\\').replace(/'/g, \"\\\\'\")}')\" title=\"åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€\">","                                 ğŸ”— æ‰“å¼€é“¾æ¥","                             </button>` :","-                            `<button class=\"transcript-btn open\" onclick=\"tryOpenTranscriptFile('${escapeHtml(transcriptPath)}')\" title=\"å°è¯•æ‰“å¼€æ–‡ä»¶\">","+                            `<button class=\"transcript-btn open\" onclick=\"tryOpenTranscriptFile('${transcriptPath.replace(/\\\\/g, '\\\\\\\\').replace(/'/g, \"\\\\'\")}')\" title=\"å°è¯•æ‰“å¼€æ–‡ä»¶\">","                                 ğŸ“‚ å°è¯•æ‰“å¼€","                             </button>`","                         }"]}],"userModified":false,"replaceAll":false}}}
{"ts":"2025-11-05T02:41:09.560Z","event":"Stop","phase":"","message":"Stopäº‹ä»¶æ­£åœ¨æ‰§è¡Œ","description":"ä¸»ä»£ç†å®Œæˆå“åº”æ—¶è§¦å‘ï¼ˆç”¨æˆ·ä¸­æ–­ä¸è§¦å‘ï¼‰ã€‚","doc_url":"https://docs.claude.com/zh-CN/docs/claude-code/hooks#stop","payload":{"session_id":"c7c21516-7e1e-49b2-8ae5-4e1bb98e9692","transcript_path":"C:\\Users\\WTCL\\.claude\\projects\\i--claude-code-proxy\\c7c21516-7e1e-49b2-8ae5-4e1bb98e9692.jsonl","cwd":"i:\\claude-code-proxy","permission_mode":"acceptEdits","hook_event_name":"Stop","stop_hook_active":false}}
